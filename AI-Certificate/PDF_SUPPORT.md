# üìÑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PDF —Ñ–∞–π–ª–æ–≤

## ‚úÖ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ **–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç PDF —Ñ–∞–π–ª—ã**! –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ç–∞–∫ –∏ PDF.

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (JPG, PNG):
```
üì∏ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí base64 ‚Üí GPT-4 Vision ‚Üí –î–∞–Ω–Ω—ã–µ
```

### –î–ª—è PDF:
```
üìÑ PDF ‚Üí –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí base64 ‚Üí GPT-4 Vision ‚Üí –î–∞–Ω–Ω—ã–µ
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–∏–ø —Ñ–∞–π–ª–∞!**

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å PDF:

1. **–ó–∞–≥—Ä—É–∑–∫–∞ PDF** - —Ñ–∞–π–ª —á–∏—Ç–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å
2. **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥** - –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–∞ canvas (–º–∞—Å—à—Ç–∞–± 2x –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞)
3. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è** - canvas –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ PNG base64
4. **–ê–Ω–∞–ª–∏–∑** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ GPT-4 Vision
5. **–†–µ–∑—É–ª—å—Ç–∞—Ç** - –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

- **pdfjs-dist** - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ PDF (–æ—Ç Mozilla)
- **canvas** - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ PDF
- **OpenAI GPT-4 Vision** - –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## üìä –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

| –§–æ—Ä–º–∞—Ç | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|-----------|------------|
| **JPG** | ‚úÖ –î–∞ | –ü—Ä—è–º–æ–π –∞–Ω–∞–ª–∏–∑ |
| **PNG** | ‚úÖ –î–∞ | –ü—Ä—è–º–æ–π –∞–Ω–∞–ª–∏–∑ |
| **PDF** | ‚úÖ –î–∞ | –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ PNG |
| **WEBP** | ‚úÖ –î–∞ | –ü—Ä—è–º–æ–π –∞–Ω–∞–ª–∏–∑ |
| **GIF** | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –¢–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä |
| **BMP** | ‚úÖ –î–∞ | –ü—Ä—è–º–æ–π –∞–Ω–∞–ª–∏–∑ |

---

## üé® –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ù–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å!

–ü—Ä–æ—Å—Ç–æ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ PDF —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

```typescript
// –ö–ª–∏–µ–Ω—Ç
const formData = new FormData();
formData.append('file', pdfFile); // –ò–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

const response = await fetch('/api/certificates/upload', {
  method: 'POST',
  body: formData
});
```

**–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–∏–ø –∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç!**

---

## üìù –õ–æ–≥–∏

### –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
```
üîç –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞: cert.jpg image/jpeg
üñºÔ∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ base64...
üì∏ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ base64
üìè –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 245678 –±–∞–π—Ç
ü§ñ –ó–∞–ø—É—Å–∫ GPT-4 Vision –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞...
```

### –î–ª—è PDF:
```
üîç –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞: cert.pdf application/pdf
üìÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω PDF —Ñ–∞–π–ª, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...
üìÑ –ù–∞—á–∏–Ω–∞–µ–º –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é PDF –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...
üìè –†–∞–∑–º–µ—Ä PDF: 512345 –±–∞–π—Ç
üìñ PDF –∑–∞–≥—Ä—É–∂–µ–Ω. –°—Ç—Ä–∞–Ω–∏—Ü: 1
üìÑ –ü–æ–ª—É—á–µ–Ω–∞ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
üìê –†–∞–∑–º–µ—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 1654x2339
üé® –†–µ–Ω–¥–µ—Ä–∏–º PDF –Ω–∞ canvas...
‚úÖ PDF –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω –Ω–∞ canvas
‚úÖ Canvas –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ base64
‚úÖ PDF —É—Å–ø–µ—à–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
üìè –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 512345 –±–∞–π—Ç
ü§ñ –ó–∞–ø—É—Å–∫ GPT-4 Vision –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞...
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

### 1. –¢–æ–ª—å–∫–æ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

–ï—Å–ª–∏ PDF –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**.

**–ü–æ—á–µ–º—É?** 
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±—ã—á–Ω–æ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –¥–µ–Ω–µ–≥
- –ë—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞

### 2. –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

PDF —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å **–º–∞—Å—à—Ç–∞–±–æ–º 2x** –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞:

```typescript
const viewport = page.getViewport({ scale: 2.0 });
```

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `pdfConverter.ts` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ.

### 3. –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞

PDF –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º. –ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ PNG:
- –†–∞–∑–º–µ—Ä –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è
- –ù–æ –∫–∞—á–µ—Å—Ç–≤–æ –±—É–¥–µ—Ç –ª—É—á—à–µ
- GPT-4 Vision –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
- –ü—Ä—è–º–æ–π –∞–Ω–∞–ª–∏–∑: ~$0.005-0.01

### –î–ª—è PDF:
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: –±–µ—Å–ø–ª–∞—Ç–Ω–æ (–ª–æ–∫–∞–ª—å–Ω–æ)
- –ê–Ω–∞–ª–∏–∑: ~$0.005-0.01
- **–ò—Ç–æ–≥–æ: —Ç–∞–∫ –∂–µ –∫–∞–∫ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π!**

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç PDF:

```typescript
// –í –∫–æ–¥–µ
if (PDFConverter.isPDF(file.type)) {
  // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º PDF
} else {
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
}
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è MIME type:
- `application/pdf`
- –ò–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç `pdf`

---

## üÜò Troubleshooting

### –û—à–∏–±–∫–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å PDF"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. PDF –ø–æ–≤—Ä–µ–∂–¥–µ–Ω
2. PDF –∑–∞—â–∏—â–µ–Ω –ø–∞—Ä–æ–ª–µ–º
3. PDF —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PDF –≤ –¥—Ä—É–≥–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ PDF –Ω–µ –∑–∞—â–∏—â–µ–Ω
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### –û—à–∏–±–∫–∞: "Property 'canvas' is missing"

**–†–µ—à–µ–Ω–∏–µ:** –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä.

### PDF –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ MIME type –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.pdf`
3. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ PDF –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é

---

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å
- –ü—Ä–∏–Ω–∏–º–∞–µ–º –ª—é–±—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–æ—â–µ
- –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫

### ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ
- PDF —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤ –≤—ã—Å–æ–∫–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏
- –õ—É—á—à–µ —á–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç
- GPT-4 Vision –ª—É—á—à–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç

### ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–º–µ—á–∞–µ—Ç —Ä–∞–∑–Ω–∏—Ü—ã
- –ï–¥–∏–Ω—ã–π API –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

---

## üéì –ü—Ä–∏–º–µ—Ä—ã

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
```javascript
const file = document.querySelector('input[type="file"]').files[0];
// cert.jpg, cert.png, etc.

const formData = new FormData();
formData.append('file', file);

const response = await fetch('/api/certificates/upload', {
  method: 'POST',
  body: formData
});
```

### –ó–∞–≥—Ä—É–∑–∫–∞ PDF:
```javascript
const file = document.querySelector('input[type="file"]').files[0];
// cert.pdf

const formData = new FormData();
formData.append('file', file);

const response = await fetch('/api/certificates/upload', {
  method: 'POST',
  body: formData
});
```

**–ö–æ–¥ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π! –°–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–∏–ø.**

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:

–í `server/utils/pdfConverter.ts`:

```typescript
// –£–≤–µ–ª–∏—á–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –±–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä)
const viewport = page.getViewport({ scale: 3.0 });

// –£–º–µ–Ω—å—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ (–±—ã—Å—Ç—Ä–µ–µ, –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä)
const viewport = page.getViewport({ scale: 1.5 });
```

### –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω–∏—Ü:

```typescript
// –í pdfConverter.ts
for (let i = 1; i <= pdf.numPages; i++) {
  const page = await pdf.getPage(i);
  // ... —Ä–µ–Ω–¥–µ—Ä–∏–º –∫–∞–∂–¥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
}
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [x] pdfjs-dist —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] canvas —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] PDFConverter —Å–æ–∑–¥–∞–Ω
- [x] certificateAI –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

---

**–î–∞—Ç–∞:** 2026-02-02  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å PDF —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã!
