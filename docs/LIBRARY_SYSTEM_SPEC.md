# üìö –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –°–∏—Å—Ç–µ–º–∞ "–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞"

> **–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
> **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-28  
> **–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](#1-–æ–±—â–µ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ)
2. [–†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞](#2-—Ä–æ–ª–∏-–∏-–ø—Ä–∞–≤–∞-–¥–æ—Å—Ç—É–ø–∞)
3. [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#3-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
4. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#4-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
5. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#5-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
6. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#6-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
7. [API Endpoints](#7-api-endpoints)
8. [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](#8-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
9. [–ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è](#9-—á–µ–∫–ª–∏—Å—Ç-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)

---

## 1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### 1.1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ "–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞" –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –∫–Ω–∏–≥ (PDF) –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∑–∞—â–∏—Ç–æ–π –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞**.

### 1.2. –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥** ‚Äî PDF –Ω–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É, —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≤–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏** ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- **–°–µ—Å—Å–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Å–µ—Å—Å–∏—è–º–∏ —á—Ç–µ–Ω–∏—è
- **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞** ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω–∞—è + –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### 1.3. –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è

| –†–æ–ª—å              | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏                                                                |
| ----------------- | -------------------------------------------------------------------------- |
| **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø: –∑–∞–≥—Ä—É–∑–∫–∞, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ |
| **–ú–µ–Ω–µ–¥–∂–µ—Ä**      | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞                                       |
| **–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å** | –ß—Ç–µ–Ω–∏–µ –∫–Ω–∏–≥, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è –µ–≥–æ –∫—É—Ä—Å–æ–≤/–≥—Ä—É–ø–ø                                |
| **–°—Ç—É–¥–µ–Ω—Ç**       | –ß—Ç–µ–Ω–∏–µ –∫–Ω–∏–≥, –∫ –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø                                 |

---

## 2. –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### 2.1. –ù–æ–≤—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (Permissions)

```typescript
enum Permission {
  // LIBRARY - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞
  LIBRARY_VIEW = "library:view", // –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–Ω–∏–≥
  LIBRARY_READ = "library:read", // –ß—Ç–µ–Ω–∏–µ –∫–Ω–∏–≥
  LIBRARY_UPLOAD = "library:upload", // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö –∫–Ω–∏–≥
  LIBRARY_MANAGE = "library:manage", // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
  LIBRARY_ACCESS_MANAGE = "library:access_manage", // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
}
```

### 2.2. –ú–∞—Ç—Ä–∏—Ü–∞ —Ä–æ–ª–µ–π –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

| –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ              | Admin | Manager | Teacher | Student |
| ----------------------- | :---: | :-----: | :-----: | :-----: |
| `library:view`          |  ‚úÖ   |   ‚úÖ    |   ‚úÖ    |   ‚úÖ    |
| `library:read`          |  ‚úÖ   |   ‚úÖ    |   ‚úÖ    |   ‚úÖ    |
| `library:upload`        |  ‚úÖ   |   ‚úÖ    |   ‚ùå    |   ‚ùå    |
| `library:manage`        |  ‚úÖ   |   ‚úÖ    |   ‚ùå    |   ‚ùå    |
| `library:access_manage` |  ‚úÖ   |   ‚úÖ    |   ‚ùå    |   ‚ùå    |

---

## 3. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 3.1. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∞–º–∏

#### FR-3.1.1: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥–∏

- [ ] –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ PDF-—Ñ–∞–π–ª–∞
- [ ] –ü–æ–ª—è: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä, –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–ª–æ–∂–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –∏–Ω–∞—á–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è: —Ç–æ–ª—å–∫–æ PDF, –º–∞–∫—Å–∏–º—É–º 100 –ú–ë
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- [ ] –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PDF ‚Üí –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

#### FR-3.1.2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏

- [ ] –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ –ø–æ–∏—Å–∫–æ–º
- [ ] –°—Ç–∞—Ç—É—Å—ã: `processing` (–æ–±—Ä–∞–±–æ—Ç–∫–∞), `ready` (–≥–æ—Ç–æ–≤–∞), `error` (–æ—à–∏–±–∫–∞)
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥–∏
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ (soft delete)
- [ ] –ü—É–±–ª–∏–∫–∞—Ü–∏—è / —Å–Ω—è—Ç–∏–µ —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

#### FR-3.1.3: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º

- [ ] –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ:
  - –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - –£—á–µ–±–Ω–æ–π –≥—Ä—É–ø–ø–µ
  - –ö—É—Ä—Å—É
  - –†–æ–ª–∏ (–≤—Å–µ —Å—Ç—É–¥–µ–Ω—Ç—ã, –≤—Å–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏)
- [ ] –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ—Å—Ç—É–ø–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –¥–æ—Å—Ç—É–ø–æ–º

### 3.2. –ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥ (–¥–ª—è —á–∏—Ç–∞—Ç–µ–ª–µ–π)

#### FR-3.2.1: –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞

- [ ] –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–Ω–∏–≥ (—Ç–æ–ª—å–∫–æ —Ç–µ, –∫ –∫–æ—Ç–æ—Ä—ã–º –µ—Å—Ç—å –ø—Ä–∞–≤–∞)
- [ ] –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–Ω–∏–≥: –æ–±–ª–æ–∂–∫–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä, –ø—Ä–æ–≥—Ä–µ—Å—Å —á—Ç–µ–Ω–∏—è
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- [ ] –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –∞–≤—Ç–æ—Ä—É

#### FR-3.2.2: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–Ω–∏–≥–∏

- [ ] –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–Ω–∏–≥–µ
- [ ] –ö–Ω–æ–ø–∫–∞ "–ß–∏—Ç–∞—Ç—å"
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á—Ç–µ–Ω–∏—è

### 3.3. –ß–∏—Ç–∞–ª–∫–∞

#### FR-3.3.1: –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–Ω–∏–≥–∏ –≤ Canvas
- [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è: —Å–ª–µ–¥—É—é—â–∞—è/–ø—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- [ ] –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- [ ] –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (zoom in/out)
- [ ] –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º

#### FR-3.3.2: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

- [ ] –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏

#### FR-3.3.3: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- [ ] –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
- [ ] –ó–∞–∫–ª–∞–¥–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, MVP+)
- [ ] –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º

---

## 4. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 4.1. –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∑–∞—â–∏—Ç–∞

#### SR-4.1.1: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- [ ] JWT-—Ç–æ–∫–µ–Ω –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –≤—Å–µ—Ö endpoint-–æ–≤ `/api/library/*`
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–µ
- [ ] –°–µ—Å—Å–∏–æ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω —á—Ç–µ–Ω–∏—è —Å TTL (30 –º–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)

#### SR-4.1.2: Rate Limiting

- [ ] –ú–∞–∫—Å–∏–º—É–º 60 –∑–∞–ø—Ä–æ—Å–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

#### SR-4.1.3: –ó–∞—â–∏—Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

- [ ] PDF-—Ñ–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–Ω–µ –ø—É–±–ª–∏—á–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–¥–∞—é—Ç—Å—è –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (WebP/PNG)
- [ ] –ü–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ URL —Å –∫–æ—Ä–æ—Ç–∫–∏–º TTL (5 –º–∏–Ω—É—Ç)
- [ ] –ó–∞–≥–æ–ª–æ–≤–∫–∏: `Cache-Control: no-store`, `Content-Disposition: inline`

#### SR-4.1.4: –í–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏

- [ ] –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- [ ] –°–æ–¥–µ—Ä–∂–∏—Ç: ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, timestamp, ID —Å–µ—Å—Å–∏–∏
- [ ] –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π, –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω
- [ ] –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

#### SR-4.1.5: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –ó–∞–ø–∏—Å—å –≤ activity_log: –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü —Å–µ—Å—Å–∏–∏
- [ ] –•—Ä–∞–Ω–µ–Ω–∏–µ: IP-–∞–¥—Ä–µ—Å, User-Agent, timestamp

### 4.2. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∑–∞—â–∏—Ç–∞

#### SR-4.2.1: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π

- [ ] –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é (–ø—Ä–∞–≤—ã–π –∫–ª–∏–∫)
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Ctrl+S, Ctrl+P, Ctrl+Shift+I, Ctrl+Shift+J, F12
- [ ] –û—Ç–∫–ª—é—á–µ–Ω–∏–µ drag & drop –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [ ] CSS: `user-select: none`, `-webkit-touch-callout: none`

#### SR-4.2.2: –ó–∞—â–∏—Ç–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Canvas (–Ω–µ `<img>`)
- [ ] –ó–∞—â–∏—Ç–Ω—ã–π overlay –ø–æ–≤–µ—Ä—Ö –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] –†–∞–∑–º—ã—Ç–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞ –æ–∫–Ω–∞

#### SR-4.2.3: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

- [ ] –ö–æ—Å–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö DevTools
- [ ] –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏–ª–∏ —Å–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

## 5. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 5.1. –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç        | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è         | –í–µ—Ä—Å–∏—è  |
| ---------------- | ------------------ | ------- |
| Backend          | Nuxt 3             | ^4.2.2  |
| Database         | MySQL              | 8.x     |
| PDF Processing   | pdf-lib            | ^1.17.1 |
| Image Processing | sharp              | ^0.33.x |
| Canvas (Node)    | @napi-rs/canvas    | ^0.1.x  |
| Frontend         | Vue 3 + Canvas API | ^3.5.x  |

### 5.2. –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "dependencies": {
    "sharp": "^0.33.5",
    "@napi-rs/canvas": "^0.1.53",
    "pdf-parse": "^1.1.1"
  }
}
```

### 5.3. –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```
storage/
‚îú‚îÄ‚îÄ library/
‚îÇ   ‚îú‚îÄ‚îÄ originals/          # –ò—Å—Ö–æ–¥–Ω—ã–µ PDF (–Ω–µ –ø—É–±–ª–∏—á–Ω—ã–µ!)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ {book_id}/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ original.pdf
‚îÇ   ‚îú‚îÄ‚îÄ pages/              # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ {book_id}/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ page_001.webp
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ page_002.webp
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ covers/             # –û–±–ª–æ–∂–∫–∏
‚îÇ       ‚îî‚îÄ‚îÄ {book_id}.webp
```

### 5.4. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

- **RAM**: –ú–∏–Ω–∏–º—É–º 2 –ì–ë (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ PDF)
- **Disk**: –†–∞—Å—á—ë—Ç: ~500 –ö–ë/—Å—Ç—Ä–∞–Ω–∏—Ü–∞ √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –≤—Å–µ—Ö –∫–Ω–∏–≥
- **CPU**: 2+ —è–¥—Ä–∞ (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PDF —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤)

---

## 6. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 6.1. –¢–∞–±–ª–∏—Ü–∞ `books`

```sql
CREATE TABLE books (
  id VARCHAR(36) PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  author VARCHAR(255) DEFAULT NULL,
  description TEXT DEFAULT NULL,
  category VARCHAR(100) DEFAULT NULL,
  isbn VARCHAR(20) DEFAULT NULL,

  -- –§–∞–π–ª—ã
  original_file_path VARCHAR(500) NOT NULL,
  cover_path VARCHAR(500) DEFAULT NULL,

  -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  total_pages INT NOT NULL DEFAULT 0,
  file_size_bytes BIGINT DEFAULT 0,

  -- –°—Ç–∞—Ç—É—Å
  status ENUM('processing', 'ready', 'error') DEFAULT 'processing',
  processing_error TEXT DEFAULT NULL,
  is_published BOOLEAN DEFAULT FALSE,

  -- –ê—É–¥–∏—Ç
  created_by VARCHAR(36) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP NULL,

  INDEX idx_status (status),
  INDEX idx_published (is_published),
  INDEX idx_category (category),
  FOREIGN KEY (created_by) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 6.2. –¢–∞–±–ª–∏—Ü–∞ `book_pages`

```sql
CREATE TABLE book_pages (
  id VARCHAR(36) PRIMARY KEY,
  book_id VARCHAR(36) NOT NULL,
  page_number INT NOT NULL,
  image_path VARCHAR(500) NOT NULL,
  width INT DEFAULT NULL,
  height INT DEFAULT NULL,

  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

  UNIQUE KEY uk_book_page (book_id, page_number),
  INDEX idx_book_id (book_id),
  FOREIGN KEY (book_id) REFERENCES books(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 6.3. –¢–∞–±–ª–∏—Ü–∞ `book_access`

```sql
CREATE TABLE book_access (
  id VARCHAR(36) PRIMARY KEY,
  book_id VARCHAR(36) NOT NULL,

  -- –ì—Ä–∞–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–∞ (–æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
  user_id VARCHAR(36) DEFAULT NULL,
  group_id VARCHAR(36) DEFAULT NULL,
  course_id VARCHAR(36) DEFAULT NULL,
  role_name VARCHAR(50) DEFAULT NULL,

  -- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
  expires_at TIMESTAMP NULL,

  -- –ê—É–¥–∏—Ç
  granted_by VARCHAR(36) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

  INDEX idx_book_id (book_id),
  INDEX idx_user_id (user_id),
  INDEX idx_group_id (group_id),
  INDEX idx_course_id (course_id),
  INDEX idx_expires (expires_at),

  FOREIGN KEY (book_id) REFERENCES books(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (group_id) REFERENCES study_groups(id) ON DELETE CASCADE,
  FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE,
  FOREIGN KEY (granted_by) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 6.4. –¢–∞–±–ª–∏—Ü–∞ `book_reading_sessions`

```sql
CREATE TABLE book_reading_sessions (
  id VARCHAR(36) PRIMARY KEY,
  book_id VARCHAR(36) NOT NULL,
  user_id VARCHAR(36) NOT NULL,

  session_token VARCHAR(64) NOT NULL UNIQUE,
  current_page INT DEFAULT 1,

  -- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  ip_address VARCHAR(45) DEFAULT NULL,
  user_agent TEXT DEFAULT NULL,

  -- –í—Ä–µ–º—è
  started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  last_activity_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  ended_at TIMESTAMP NULL,

  INDEX idx_book_user (book_id, user_id),
  INDEX idx_session_token (session_token),
  INDEX idx_last_activity (last_activity_at),

  FOREIGN KEY (book_id) REFERENCES books(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

### 6.5. –¢–∞–±–ª–∏—Ü–∞ `book_reading_progress`

```sql
CREATE TABLE book_reading_progress (
  id VARCHAR(36) PRIMARY KEY,
  book_id VARCHAR(36) NOT NULL,
  user_id VARCHAR(36) NOT NULL,

  last_page INT DEFAULT 1,
  last_read_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

  UNIQUE KEY uk_book_user (book_id, user_id),
  FOREIGN KEY (book_id) REFERENCES books(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

---

## 7. API Endpoints

### 7.1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏ (Admin/Manager)

| –ú–µ—Ç–æ–¥    | Endpoint                                        | –û–ø–∏—Å–∞–Ω–∏–µ            | –ü—Ä–∞–≤–∞                   |
| -------- | ----------------------------------------------- | ------------------- | ----------------------- |
| `GET`    | `/api/library/admin/books`                      | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥    | `library:manage`        |
| `POST`   | `/api/library/admin/books`                      | –ó–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥–∏      | `library:upload`        |
| `GET`    | `/api/library/admin/books/:id`                  | –î–µ—Ç–∞–ª–∏ –∫–Ω–∏–≥–∏        | `library:manage`        |
| `PUT`    | `/api/library/admin/books/:id`                  | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏    | `library:manage`        |
| `DELETE` | `/api/library/admin/books/:id`                  | –£–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏      | `library:manage`        |
| `POST`   | `/api/library/admin/books/:id/publish`          | –ü—É–±–ª–∏–∫–∞—Ü–∏—è          | `library:manage`        |
| `POST`   | `/api/library/admin/books/:id/unpublish`        | –°–Ω—è—Ç–∏–µ —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ | `library:manage`        |
| `GET`    | `/api/library/admin/books/:id/access`           | –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–æ–≤     | `library:access_manage` |
| `POST`   | `/api/library/admin/books/:id/access`           | –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø     | `library:access_manage` |
| `DELETE` | `/api/library/admin/books/:id/access/:accessId` | –£–¥–∞–ª–∏—Ç—å –¥–æ—Å—Ç—É–ø      | `library:access_manage` |

### 7.2. –ö–∞—Ç–∞–ª–æ–≥ (Reader)

| –ú–µ—Ç–æ–¥ | Endpoint                 | –û–ø–∏—Å–∞–Ω–∏–µ        | –ü—Ä–∞–≤–∞                   |
| ----- | ------------------------ | --------------- | ----------------------- |
| `GET` | `/api/library/books`     | –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–Ω–∏–≥–∏ | `library:view`          |
| `GET` | `/api/library/books/:id` | –î–µ—Ç–∞–ª–∏ –∫–Ω–∏–≥–∏    | `library:view` + –¥–æ—Å—Ç—É–ø |

### 7.3. –ß—Ç–µ–Ω–∏–µ

| –ú–µ—Ç–æ–¥    | Endpoint                                  | –û–ø–∏—Å–∞–Ω–∏–µ           | –ü—Ä–∞–≤–∞                   |
| -------- | ----------------------------------------- | ------------------ | ----------------------- |
| `POST`   | `/api/library/read/:bookId/session`       | –ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é      | `library:read` + –¥–æ—Å—Ç—É–ø |
| `DELETE` | `/api/library/read/:bookId/session`       | –ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é   | `library:read`          |
| `GET`    | `/api/library/read/:bookId/page/:pageNum` | –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É  | `library:read` + —Å–µ—Å—Å–∏—è |
| `POST`   | `/api/library/read/:bookId/progress`      | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å | `library:read`          |
| `GET`    | `/api/library/read/:bookId/progress`      | –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å  | `library:read`          |

---

## 8. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 8.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

```
/library                          # –ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥
/library/:id                      # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–Ω–∏–≥–∏
/library/read/:id                 # –ß–∏—Ç–∞–ª–∫–∞

/library/admin                    # –ê–¥–º–∏–Ω: —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥
/library/admin/upload             # –ê–¥–º–∏–Ω: –∑–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥–∏
/library/admin/:id                # –ê–¥–º–∏–Ω: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
/library/admin/:id/access         # –ê–¥–º–∏–Ω: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
```

### 8.2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç               | –û–ø–∏—Å–∞–Ω–∏–µ                        |
| ----------------------- | ------------------------------- |
| `BookCard.vue`          | –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–Ω–∏–≥–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ       |
| `BookGrid.vue`          | –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –∫–Ω–∏–≥             |
| `BookDetail.vue`        | –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–Ω–∏–≥–µ    |
| `BookReader.vue`        | –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–∏—Ç–∞–ª–∫–∏      |
| `ReaderControls.vue`    | –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∏—Ç–∞–ª–∫–æ–π      |
| `ReaderNavigation.vue`  | –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º          |
| `ProtectedCanvas.vue`   | Canvas —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è |
| `BookUploadForm.vue`    | –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–∏–≥–∏            |
| `BookEditForm.vue`      | –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–Ω–∏–≥–∏      |
| `BookAccessManager.vue` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞      |

### 8.3. –î–∏–∑–∞–π–Ω —á–∏—Ç–∞–ª–∫–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚Üê –ù–∞–∑–∞–¥    üìñ –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏              [üîç] [‚õ∂] [‚úï]  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                            ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     ‚îÇ
‚îÇ                    ‚îÇ                 ‚îÇ                     ‚îÇ
‚îÇ                    ‚îÇ   –°—Ç—Ä–∞–Ω–∏—Ü–∞      ‚îÇ                     ‚îÇ
‚îÇ                    ‚îÇ   –∫–Ω–∏–≥–∏         ‚îÇ                     ‚îÇ
‚îÇ                    ‚îÇ   (Canvas)      ‚îÇ                     ‚îÇ
‚îÇ                    ‚îÇ                 ‚îÇ                     ‚îÇ
‚îÇ                    ‚îÇ  [–í–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫] ‚îÇ                     ‚îÇ
‚îÇ                    ‚îÇ                 ‚îÇ                     ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ                                                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   [‚óÄ –ù–∞–∑–∞–¥]     –°—Ç—Ä–∞–Ω–∏—Ü–∞ 15 / 245     [–í–ø–µ—Ä—ë–¥ ‚ñ∂]          ‚îÇ
‚îÇ                    [     üîò‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ]  Zoom                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 9. –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–î–µ–Ω—å 1)

- [ ] **1.1** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`sharp`, `@napi-rs/canvas`, `pdf-parse`)
- [ ] **1.2** –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î: `20260129_001_library_system.ts`
- [ ] **1.3** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é: `npm run db:migrate`
- [ ] **1.4** –û–±–Ω–æ–≤–∏—Ç—å `permissions.ts` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- [ ] **1.5** –û–±–Ω–æ–≤–∏—Ç—å `ROLE_PERMISSIONS` ‚Äî –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Ä–æ–ª—è–º
- [ ] **1.6** –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `storage/library/`

### –§–∞–∑–∞ 2: Backend ‚Äî –Ø–¥—Ä–æ (–î–µ–Ω—å 2-3)

- [ ] **2.1** –°–æ–∑–¥–∞—Ç—å `server/repositories/libraryRepository.ts`
  - [ ] CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è `books`
  - [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `book_pages`
  - [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `book_access`
  - [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `book_reading_sessions`
  - [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `book_reading_progress`

- [ ] **2.2** –°–æ–∑–¥–∞—Ç—å `server/utils/pdfProcessor.ts`
  - [ ] –§—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ PDF ‚Üí –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–ª–æ–∂–∫–∏ –∏–∑ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  - [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- [ ] **2.3** –°–æ–∑–¥–∞—Ç—å `server/utils/watermark.ts`
  - [ ] –§—É–Ω–∫—Ü–∏—è –Ω–∞–ª–æ–∂–µ–Ω–∏—è –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞
  - [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç–∏–ª—è –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞

### –§–∞–∑–∞ 3: Backend ‚Äî API (–î–µ–Ω—å 3-4)

- [ ] **3.1** Admin API: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏
  - [ ] `GET /api/library/admin/books`
  - [ ] `POST /api/library/admin/books`
  - [ ] `GET /api/library/admin/books/:id`
  - [ ] `PUT /api/library/admin/books/:id`
  - [ ] `DELETE /api/library/admin/books/:id`
  - [ ] `POST /api/library/admin/books/:id/publish`
  - [ ] `POST /api/library/admin/books/:id/unpublish`

- [ ] **3.2** Admin API: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
  - [ ] `GET /api/library/admin/books/:id/access`
  - [ ] `POST /api/library/admin/books/:id/access`
  - [ ] `DELETE /api/library/admin/books/:id/access/:accessId`

- [ ] **3.3** Reader API: –ö–∞—Ç–∞–ª–æ–≥
  - [ ] `GET /api/library/books`
  - [ ] `GET /api/library/books/:id`

- [ ] **3.4** Reader API: –ß—Ç–µ–Ω–∏–µ
  - [ ] `POST /api/library/read/:bookId/session`
  - [ ] `DELETE /api/library/read/:bookId/session`
  - [ ] `GET /api/library/read/:bookId/page/:pageNum`
  - [ ] `POST /api/library/read/:bookId/progress`
  - [ ] `GET /api/library/read/:bookId/progress`

### –§–∞–∑–∞ 4: Frontend ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–î–µ–Ω—å 5-6)

- [ ] **4.1** –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ –∫–Ω–∏–≥ `/library/admin/index.vue`
  - [ ] –¢–∞–±–ª–∏—Ü–∞ –∫–Ω–∏–≥ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
  - [ ] –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫
  - [ ] –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π

- [ ] **4.2** –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∫–∏ `/library/admin/upload.vue`
  - [ ] –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
  - [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
  - [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- [ ] **4.3** –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `/library/admin/[id].vue`
  - [ ] –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - [ ] –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –æ–±–ª–æ–∂–∫–∏
  - [ ] –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

- [ ] **4.4** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º `/library/admin/[id]/access.vue`
  - [ ] –°–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö –¥–æ—Å—Ç—É–ø–æ–≤
  - [ ] –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
  - [ ] –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

### –§–∞–∑–∞ 5: Frontend ‚Äî –ö–∞—Ç–∞–ª–æ–≥ (–î–µ–Ω—å 6-7)

- [ ] **5.1** –ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥ `/library/index.vue`
  - [ ] Grid –∫–∞—Ä—Ç–æ—á–µ–∫ –∫–Ω–∏–≥
  - [ ] –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã
  - [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á—Ç–µ–Ω–∏—è

- [ ] **5.2** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  - [ ] `BookCard.vue`
  - [ ] `BookGrid.vue`
  - [ ] `BookFilters.vue`

### –§–∞–∑–∞ 6: Frontend ‚Äî –ß–∏—Ç–∞–ª–∫–∞ (–î–µ–Ω—å 7-9)

- [ ] **6.1** –ß–∏—Ç–∞–ª–∫–∞ `/library/read/[id].vue`
  - [ ] Canvas –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
  - [ ] –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
  - [ ] –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
  - [ ] –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º

- [ ] **6.2** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —á–∏—Ç–∞–ª–∫–∏
  - [ ] `BookReader.vue`
  - [ ] `ReaderControls.vue`
  - [ ] `ReaderNavigation.vue`
  - [ ] `ProtectedCanvas.vue`

- [ ] **6.3** –ó–∞—â–∏—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞
  - [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é
  - [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à
  - [ ] CSS-–∑–∞—â–∏—Ç–∞ –æ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏—è
  - [ ] Overlay –∑–∞—â–∏—Ç–∞

### –§–∞–∑–∞ 7: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–î–µ–Ω—å 9-10)

- [ ] **7.1** Rate Limiting
  - [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü

- [ ] **7.2** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  - [ ] –õ–æ–≥–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
  - [ ] –õ–æ–≥–∏ —Å–µ—Å—Å–∏–π —á—Ç–µ–Ω–∏—è

- [ ] **7.3** –î–µ—Ç–µ–∫—Ü–∏—è DevTools (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
  - [ ] –†–µ–∞–∫—Ü–∏—è –Ω–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ

- [ ] **7.4** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - [ ] –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–∏–≥–∏
  - [ ] –¢–µ—Å—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ PDF
  - [ ] –¢–µ—Å—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
  - [ ] –¢–µ—Å—Ç –≤–æ–¥—è–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤
  - [ ] –¢–µ—Å—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### –§–∞–∑–∞ 8: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–î–µ–Ω—å 10)

- [ ] **8.1** –î–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç –º–µ–Ω—é "–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞" –≤ —Å–∞–π–¥–±–∞—Ä
- [ ] **8.2** –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ
- [ ] **8.3** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìä –û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç

| –§–∞–∑–∞      | –û–ø–∏—Å–∞–Ω–∏–µ           | –ß–∞—Å—ã            |
| --------- | ------------------ | --------------- |
| 1         | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞         | 2-3             |
| 2         | Backend ‚Äî –Ø–¥—Ä–æ     | 6-8             |
| 3         | Backend ‚Äî API      | 6-8             |
| 4         | Frontend ‚Äî –ê–¥–º–∏–Ω   | 8-10            |
| 5         | Frontend ‚Äî –ö–∞—Ç–∞–ª–æ–≥ | 4-5             |
| 6         | Frontend ‚Äî –ß–∏—Ç–∞–ª–∫–∞ | 10-12           |
| 7         | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å       | 4-6             |
| 8         | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è         | 2-3             |
| **–ò—Ç–æ–≥–æ** |                    | **42-55 —á–∞—Å–æ–≤** |

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ê–±—Å–æ–ª—é—Ç–Ω–∞—è –∑–∞—â–∏—Ç–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç
2. **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä** ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PDF —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤
3. **–†–∞–∑–º–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞** ‚Äî –∫–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ~200-500 –ö–ë

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é (MVP+)

- [ ] –ó–∞–∫–ª–∞–¥–∫–∏ –≤ –∫–Ω–∏–≥–∞—Ö
- [ ] –ó–∞–º–µ—Ç–∫–∏ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
- [ ] –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ (TOC)
- [ ] –ê—É–¥–∏–æ-–≤–µ—Ä—Å–∏–∏ –∫–Ω–∏–≥
- [ ] –û—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º (PWA)
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á—Ç–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∞

---

**–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 2026-01-28  
**–ê–≤—Ç–æ—Ä:** AI Assistant
