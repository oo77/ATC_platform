# Функционал загрузки документов для групп

## Обзор

Реализована система загрузки PDF-документов для учебных групп с поддержкой:

- Множественной загрузки файлов при создании группы
- Загрузки дополнительных документов к существующей группе
- Красивого drag-and-drop интерфейса
- Валидации файлов (формат, размер)

## Компоненты

### 1. Backend

#### Эндпоинты

**POST /api/groups/{id}/reports**

- Загрузка дополнительных PDF-документов к существующей группе
- Поддержка множественной загрузки
- Доступ: ADMIN, MANAGER
- Валидация: формат PDF, размер до 10MB
- Логирование всех действий

**GET /api/groups/{id}/reports**

- Получение списка документов группы (уже существовал)
- Доступ: все роли кроме STUDENT

**POST /api/groups**

- Обновлён для поддержки множественной загрузки файлов при создании группы
- Минимум 1 PDF-файл обязателен при создании

### 2. Frontend

#### Компоненты

**GroupReportUploader.vue**

- Универсальный компонент для загрузки PDF-файлов
- Drag-and-drop интерфейс
- Множественная загрузка
- Валидация на клиенте (формат, размер)
- Красивый UI в стиле проекта

**UploadReportModal.vue**

- Модальное окно для загрузки дополнительных документов
- Использует GroupReportUploader
- Обработка ошибок и уведомления

**GroupFormModal.vue**

- Обновлён для использования GroupReportUploader при создании группы
- Поддержка множественной загрузки файлов
- Отображение существующих документов в режиме редактирования

#### Страницы

**pages/groups/[id]/index.vue**

- Добавлена кнопка "Загрузить документ" в секцию "Документы группы"
- Интеграция модального окна UploadReportModal
- Автоматическое обновление списка документов после загрузки

## Использование

### Создание группы с документами

1. Открыть форму создания группы
2. Заполнить обязательные поля
3. Перетащить PDF-файлы в зону загрузки или выбрать через диалог
4. Можно загрузить несколько файлов одновременно
5. Нажать "Создать группу"

### Загрузка дополнительных документов

1. Открыть страницу группы
2. В секции "Документы группы" нажать кнопку "Загрузить документ"
3. В модальном окне выбрать файлы (drag-and-drop или через диалог)
4. Нажать "Загрузить"
5. Список документов автоматически обновится

## Валидация

### Клиентская валидация

- Формат файла: только .pdf
- Размер файла: максимум 10 МБ
- Минимум 1 файл при создании группы

### Серверная валидация

- Проверка MIME-типа
- Проверка размера файла
- Проверка прав доступа (ADMIN, MANAGER)
- Проверка существования группы

## Хранение файлов

Файлы сохраняются в:

```
/storage/courses/{course_code}/{group_code}/reports/
```

Информация о файлах хранится в таблице `files` с категорией `group_report`.

## Логирование

Все действия с документами логируются:

- Создание группы с файлами
- Загрузка дополнительных документов
- Информация о пользователе, группе и количестве файлов

## Безопасность

- Доступ к загрузке: только ADMIN и MANAGER
- Доступ к просмотру: все роли кроме STUDENT
- Валидация типа файла на сервере
- Ограничение размера файла
- UUID для публичных ссылок на файлы
