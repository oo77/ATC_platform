import{_ as S}from"./BMofnORk.js";import{v as P,r as p,f as b,g as $,c as d,a as t,k as F,h as v,i as f,w as V,O as h,t as l,n as m,d as n,x as w,A as z,D as H,F as T,j as L,o as i}from"./GLV6bXvn.js";import{u as N}from"./DlZaGH1J.js";import{u as U}from"./DW2J_Y_n.js";const D={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},E={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},I={class:"grid grid-cols-1 gap-4 md:grid-cols-3 mb-6"},O={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},R={class:"flex items-center gap-4"},q={class:"text-2xl font-bold text-black dark:text-white"},G={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},J={class:"flex items-center gap-4"},K={class:"text-2xl font-bold text-black dark:text-white"},Q={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},W={class:"flex items-center gap-4"},X={class:"text-2xl font-bold text-black dark:text-white"},Y={class:"mb-6 border-b border-stroke dark:border-strokedark"},Z={class:"flex gap-6"},tt={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-t-sm"},et={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-t-sm"},st={class:"bg-white dark:bg-boxdark rounded-xl shadow-md p-6 mb-6"},rt={class:"flex items-center gap-3 mb-4"},ot={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},at={class:"relative"},lt={key:0},it={class:"relative"},dt={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},nt={key:0,class:"p-12 text-center"},ut={key:1,class:"p-12 text-center text-gray-500 dark:text-gray-400"},vt={key:2,class:"overflow-x-auto"},gt={class:"w-full"},pt={class:"divide-y divide-gray-200 dark:divide-gray-700"},ct=["onClick"],xt={class:"px-6 py-4"},mt={class:"font-medium text-gray-900 dark:text-white"},kt={class:"text-sm text-gray-500 dark:text-gray-400"},yt={class:"px-6 py-4"},bt={class:"inline-flex items-center rounded-full bg-gray-100 dark:bg-gray-700 px-2.5 py-0.5 text-xs font-medium text-gray-800 dark:text-gray-200"},ft={class:"px-6 py-4 text-sm text-gray-900 dark:text-white"},ht={class:"px-6 py-4 text-sm text-gray-900 dark:text-white"},wt={class:"px-6 py-4"},Ct={key:3,class:"border-t border-gray-200 dark:border-gray-700 px-6 py-4"},_t={class:"flex items-center justify-between"},At={class:"text-sm text-gray-700 dark:text-gray-300"},jt={class:"font-medium"},Bt={class:"font-medium"},Mt={class:"font-medium"},St={class:"flex gap-2"},Pt=["disabled"],$t=["disabled"],Nt=P({__name:"index",setup(Ft){const{authFetch:C}=N(),{canCreateCourses:_}=U(),c=p(!1),g=p([]),s=p({page:1,limit:10,total:0,totalPages:0}),r=p({search:"",isActive:void 0,isArchived:!1}),x=b(()=>({totalCourses:s.value.total,activeCourses:g.value.filter(a=>a.isActive).length,totalHours:g.value.reduce((a,e)=>a+e.totalHours,0)})),A=b(()=>r.value.search!==""||r.value.isActive!==void 0),u=async()=>{c.value=!0;try{const a=new URLSearchParams({page:s.value.page.toString(),limit:s.value.limit.toString()});r.value.search&&a.append("search",r.value.search),r.value.isActive!==void 0&&a.append("isActive",r.value.isActive.toString()),a.append("isArchived",r.value.isArchived.toString());const e=await C(`/api/courses?${a.toString()}`);e.success&&(g.value=e.courses,s.value.total=e.total,s.value.totalPages=e.totalPages)}catch(a){console.error("Ошибка загрузки курсов:",a)}finally{c.value=!1}},k=()=>{s.value.page=1,u()},j=()=>{r.value.search="",r.value.isActive=void 0,s.value.page=1,u()},y=a=>{s.value.page=a,u()},B=a=>{h(`/programs/${a.id}`)};return $(()=>{u()}),(a,e)=>{const M=S;return i(),d("div",D,[t("div",E,[e[8]||(e[8]=t("h2",{class:"text-title-md2 font-bold text-black dark:text-white"}," Учебные программы ",-1)),f(_)?(i(),F(M,{key:0,onClick:e[0]||(e[0]=o=>("navigateTo"in a?a.navigateTo:f(h))("/programs/create")),class:"flex items-center gap-2"},{default:V(()=>[...e[7]||(e[7]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),n(" Создать учебную программу ",-1)])]),_:1})):v("",!0)]),t("div",I,[t("div",O,[t("div",R,[e[10]||(e[10]=t("div",{class:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10"},[t("svg",{class:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),t("div",null,[e[9]||(e[9]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Всего программ ",-1)),t("p",q,l(x.value.totalCourses),1)])])]),t("div",G,[t("div",J,[e[12]||(e[12]=t("div",{class:"flex h-12 w-12 items-center justify-center rounded-full bg-success/10"},[t("svg",{class:"w-6 h-6 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[e[11]||(e[11]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Активных программ ",-1)),t("p",K,l(x.value.activeCourses),1)])])]),t("div",Q,[t("div",W,[e[14]||(e[14]=t("div",{class:"flex h-12 w-12 items-center justify-center rounded-full bg-warning/10"},[t("svg",{class:"w-6 h-6 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[e[13]||(e[13]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Всего часов ",-1)),t("p",X,l(x.value.totalHours),1)])])])]),t("div",Y,[t("div",Z,[t("button",{onClick:e[1]||(e[1]=o=>{r.value.isArchived=!1,u()}),class:m(["pb-3 text-sm font-medium transition-colors relative",r.value.isArchived?"text-gray-500 hover:text-primary":"text-primary"])},[e[15]||(e[15]=n(" Активные программы ",-1)),r.value.isArchived?v("",!0):(i(),d("span",tt))],2),t("button",{onClick:e[2]||(e[2]=o=>{r.value.isArchived=!0,u()}),class:m(["pb-3 text-sm font-medium transition-colors relative",r.value.isArchived?"text-primary":"text-gray-500 hover:text-primary"])},[e[16]||(e[16]=n(" Архив программ ",-1)),r.value.isArchived?(i(),d("span",et)):v("",!0)],2)])]),t("div",st,[t("div",rt,[e[18]||(e[18]=t("div",{class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})])],-1)),e[19]||(e[19]=t("h4",{class:"text-lg font-semibold text-black dark:text-white"}," Фильтры ",-1)),A.value?(i(),d("button",{key:0,onClick:j,class:"ml-auto text-sm text-primary hover:text-primary/80 transition-colors flex items-center gap-1"},[...e[17]||(e[17]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),n(" Сбросить фильтры ",-1)])])):v("",!0)]),t("div",ot,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Поиск ",-1)),t("div",at,[w(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.value.search=o),type:"text",placeholder:"Название, код курса...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-10 pr-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onInput:k},null,544),[[z,r.value.search]]),e[20]||(e[20]=t("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),r.value.isArchived?v("",!0):(i(),d("div",lt,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Статус ",-1)),t("div",it,[w(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.isActive=o),class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-10 pr-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary appearance-none",onChange:k},[...e[22]||(e[22]=[t("option",{value:void 0},"Все",-1),t("option",{value:!0},"Активные",-1),t("option",{value:!1},"Неактивные",-1)])],544),[[H,r.value.isActive]]),e[23]||(e[23]=t("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[24]||(e[24]=t("svg",{class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])]))])]),t("div",dt,[c.value?(i(),d("div",nt,[...e[26]||(e[26]=[t("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1),t("p",{class:"mt-4 text-gray-600 dark:text-gray-400"}," Загрузка учебных программ... ",-1)])])):g.value.length===0?(i(),d("div",ut,[...e[27]||(e[27]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1),t("p",{class:"mt-4 text-lg font-medium"},"Учебные программы не найдены",-1),t("p",{class:"mt-2"},' Создайте первую учебную программу, нажав кнопку "Создать учебную программу" ',-1)])])):(i(),d("div",vt,[t("table",gt,[e[28]||(e[28]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},[t("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Учебная программа "),t("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Код "),t("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Дисциплины "),t("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Часы "),t("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Статус ")])],-1)),t("tbody",pt,[(i(!0),d(T,null,L(g.value,o=>(i(),d("tr",{key:o.id,onClick:Vt=>B(o),class:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors cursor-pointer"},[t("td",xt,[t("div",null,[t("div",mt,l(o.name),1),t("div",kt,l(o.shortName),1)])]),t("td",yt,[t("span",bt,l(o.code),1)]),t("td",ft,l(o.disciplineCount||0),1),t("td",ht,l(o.totalHours),1),t("td",wt,[t("span",{class:m(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",o.isActive?"bg-success/10 text-success":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"])},l(o.isActive?"Активна":"Неактивна"),3)])],8,ct))),128))])])])),s.value.totalPages>1?(i(),d("div",Ct,[t("div",_t,[t("div",At,[e[29]||(e[29]=n(" Показано ",-1)),t("span",jt,l((s.value.page-1)*s.value.limit+1),1),e[30]||(e[30]=n(" - ",-1)),t("span",Bt,l(Math.min(s.value.page*s.value.limit,s.value.total)),1),e[31]||(e[31]=n(" из ",-1)),t("span",Mt,l(s.value.total),1),e[32]||(e[32]=n(" программ ",-1))]),t("div",St,[t("button",{onClick:e[5]||(e[5]=o=>y(s.value.page-1)),disabled:s.value.page===1,class:"rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700"}," Назад ",8,Pt),t("button",{onClick:e[6]||(e[6]=o=>y(s.value.page+1)),disabled:s.value.page>=s.value.totalPages,class:"rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700"}," Вперёд ",8,$t)])])])):v("",!0)])])}}});export{Nt as default};
