import{_ as et}from"./BKg9m4wI.js";import{_ as st}from"./BMofnORk.js";import{_ as $t,a as Dt}from"./CkN6Qlmg.js";import{_ as Mt}from"./DCvMrdi-.js";import{_ as jt}from"./CyDLpZDf.js";import{v as rt,k as y,w as b,a as t,c as d,d as u,t as r,l as at,h as x,b as k,o as n,Q as Bt,s as St,r as c,f as tt,g as Lt,i as V,F as $,x as Q,j as O,y as q,n as G,B as zt,z as Et}from"./GLV6bXvn.js";import{_ as Nt}from"./BNigTcCY.js";import{u as Tt}from"./DlZaGH1J.js";import{u as Ut}from"./DVL-QcDc.js";import{u as Vt}from"./DW2J_Y_n.js";import{C as Ot,U as Ht}from"./DbDyPcRw.js";import{A as At}from"./Lqo7GKtw.js";import{B as Ft}from"./ETPkf32v.js";import{c as Rt}from"./CVqvr-Q5.js";import"./Caj9Z7Wo.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const It=Rt("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Pt={class:"flex items-center gap-3"},Qt={class:"text-xl font-bold text-black dark:text-white"},qt={class:"text-sm text-gray-600 dark:text-gray-400"},Gt={class:"space-y-6"},Jt={class:"bg-linear-to-br from-primary/5 to-transparent rounded-xl p-6 border border-gray-200 dark:border-strokedark"},Kt={class:"flex items-center justify-between mb-4"},Wt={key:0,class:"inline-flex items-center gap-1.5 rounded-full bg-success/10 px-3 py-1.5 text-sm font-medium text-success"},Xt={key:1,class:"inline-flex items-center gap-1.5 rounded-full bg-gray-200 dark:bg-gray-700 px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300"},Yt={class:"mb-4"},Zt={class:"flex justify-between items-center mb-2"},te={class:"text-lg font-bold text-primary"},ee={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden"},se={class:"grid grid-cols-2 gap-4"},re={class:"bg-white dark:bg-boxdark rounded-lg p-4 border border-gray-200 dark:border-strokedark"},ae={class:"text-2xl font-bold text-black dark:text-white"},oe={class:"text-sm text-gray-500 dark:text-gray-400"},le={class:"bg-white dark:bg-boxdark rounded-lg p-4 border border-gray-200 dark:border-strokedark"},ne={class:"text-2xl font-bold text-primary"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={class:"bg-white dark:bg-boxdark rounded-xl p-6 border border-gray-200 dark:border-strokedark"},ue={class:"space-y-3"},ce={class:"text-base font-semibold text-black dark:text-white"},xe={class:"text-base font-mono text-black dark:text-white"},me={key:0},ge={class:"text-base text-black dark:text-white"},pe={class:"bg-white dark:bg-boxdark rounded-xl p-6 border border-gray-200 dark:border-strokedark"},be={class:"space-y-3"},ke={class:"text-base text-black dark:text-white"},ve={class:"text-base text-black dark:text-white"},ye={class:"text-base text-black dark:text-white"},fe={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-strokedark"},he=rt({__name:"StudentCourseDetailModal",props:{isOpen:{type:Boolean},course:{}},emits:["close"],setup(i){const D=m=>new Date(m).toLocaleDateString("ru-RU",{day:"2-digit",month:"long",year:"numeric"}),H=(m,s)=>{const p=new Date(m),h=new Date(s),_=Math.abs(h.getTime()-p.getTime()),l=Math.ceil(_/(1e3*60*60*24));if(l<30)return`${l} дней`;if(l<365){const g=Math.floor(l/30);return`${g} ${g===1?"месяц":g<5?"месяца":"месяцев"}`}else{const g=Math.floor(l/365),v=Math.floor(l%365/30);return`${g} ${g===1?"год":g<5?"года":"лет"} ${v>0?`${v} мес.`:""}`}};return(m,s)=>{const p=st,h=et,_=jt;return n(),y(_,{"is-open":i.isOpen,onClose:s[1]||(s[1]=l=>m.$emit("close")),size:"lg"},{header:b(()=>[t("div",Pt,[s[2]||(s[2]=t("div",{class:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),t("div",null,[t("h2",Qt,r(i.course.course_name),1),t("p",qt," Группа: "+r(i.course.group_name),1)])])]),default:b(()=>[t("div",Gt,[t("div",Jt,[t("div",Kt,[s[5]||(s[5]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Статус курса ",-1)),i.course.status==="active"?(n(),d("span",Wt,[...s[3]||(s[3]=[t("span",{class:"h-2 w-2 rounded-full bg-success"},null,-1),u(" Активен ",-1)])])):(n(),d("span",Xt,[...s[4]||(s[4]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),u(" Завершен ",-1)])]))]),t("div",Yt,[t("div",Zt,[s[6]||(s[6]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Прогресс посещаемости",-1)),t("span",te,r(i.course.progress)+"%",1)]),t("div",ee,[t("div",{class:"h-3 rounded-full bg-linear-to-r from-primary to-purple-500 transition-all duration-500",style:at({width:`${i.course.progress}%`})},null,4)])]),t("div",se,[t("div",re,[s[7]||(s[7]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-1"}," Посещено занятий ",-1)),t("p",ae,[u(r(i.course.attended_lessons)+" ",1),t("span",oe,"/ "+r(i.course.total_lessons),1)])]),t("div",le,[s[8]||(s[8]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-1"}," Процент посещаемости ",-1)),t("p",ne,r(i.course.progress)+"% ",1)])])]),t("div",de,[t("div",ie,[s[12]||(s[12]=t("h3",{class:"text-lg font-semibold text-black dark:text-white mb-4"}," Информация о курсе ",-1)),t("div",ue,[t("div",null,[s[9]||(s[9]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-1"}," Название курса ",-1)),t("p",ce,r(i.course.course_name),1)]),t("div",null,[s[10]||(s[10]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-1"}," Код группы ",-1)),t("p",xe,r(i.course.group_name),1)]),i.course.teacher_name?(n(),d("div",me,[s[11]||(s[11]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-1"}," Преподаватель ",-1)),t("p",ge,r(i.course.teacher_name),1)])):x("",!0)])]),t("div",pe,[s[16]||(s[16]=t("h3",{class:"text-lg font-semibold text-black dark:text-white mb-4"}," Период обучения ",-1)),t("div",be,[t("div",null,[s[13]||(s[13]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-1"}," Дата начала ",-1)),t("p",ke,r(D(i.course.start_date)),1)]),t("div",null,[s[14]||(s[14]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-1"}," Дата окончания ",-1)),t("p",ve,r(D(i.course.end_date)),1)]),t("div",null,[s[15]||(s[15]=t("label",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 block mb-1"}," Продолжительность ",-1)),t("p",ye,r(H(i.course.start_date,i.course.end_date)),1)])])])]),t("div",fe,[k(p,{variant:"secondary",onClick:s[0]||(s[0]=l=>m.$emit("close"))},{default:b(()=>[...s[17]||(s[17]=[u(" Закрыть ",-1)])]),_:1}),k(h,{to:`/groups/${i.course.group_id}`},{default:b(()=>[k(p,{variant:"primary",class:"flex items-center gap-2"},{default:b(()=>[...s[18]||(s[18]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1),u(" Перейти к группе ",-1)])]),_:1})]),_:1},8,["to"])])])]),_:1},8,["is-open"])}}}),_e=Object.assign(he,{__name:"DatabaseStudentCourseDetailModal"}),we={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},Ce={class:"mb-6"},$e={key:0,class:"flex justify-center items-center py-20"},De={key:1,class:"rounded-lg border border-danger/30 bg-danger/5 p-8 text-center"},Me={class:"mt-2 text-gray-600 dark:text-gray-400"},je={class:"bg-white dark:bg-boxdark rounded-2xl shadow-lg overflow-hidden mb-6"},Be={class:"relative px-8 pb-8"},Se={class:"flex flex-col sm:flex-row items-end gap-6 -mt-16 mb-6"},Le={class:"relative"},ze={class:"h-32 w-32 rounded-2xl bg-white dark:bg-boxdark shadow-xl flex items-center justify-center border-4 border-white dark:border-boxdark"},Ee={class:"text-5xl font-bold text-primary"},Ne={class:"flex-1 pb-2 text-center sm:text-left"},Te={class:"text-3xl font-bold text-black dark:text-white mb-2"},Ue={class:"text-lg text-gray-600 dark:text-gray-400"},Ve={class:"flex gap-3 pb-2 w-full sm:w-auto justify-center sm:justify-end"},Oe={class:"flex flex-col gap-6"},He={class:"rounded-lg bg-gray-50 p-1 dark:bg-gray-800"},Ae={class:"flex gap-1","aria-label":"Tabs"},Fe=["onClick"],Re={class:"flex items-center justify-center gap-2"},Ie={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Pe={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-6"},Qe={class:"space-y-3"},qe={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Ge={class:"flex items-center gap-2"},Je={class:"font-medium text-gray-900 dark:text-white font-mono flex-1"},Ke={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},We={class:"font-medium text-gray-900 dark:text-white"},Xe={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Ye={class:"font-medium text-gray-900 dark:text-white"},Ze={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-6"},ts={class:"space-y-3"},es={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},ss={class:"font-medium text-gray-900 dark:text-white"},rs={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},as={class:"font-medium text-gray-900 dark:text-white"},os={key:0,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},ls={class:"font-medium text-gray-900 dark:text-white"},ns={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-6"},ds={class:"flex items-center justify-between mb-6"},is={class:"text-sm text-gray-600 dark:text-gray-400"},us={key:0,class:"flex justify-center items-center py-12"},cs={key:1,class:"space-y-4"},xs={key:0},ms={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gs=["onClick"],ps={class:"flex items-start justify-between gap-4 mb-3"},bs={class:"flex-1"},ks={class:"font-semibold text-black dark:text-white mb-1"},vs={class:"text-sm text-gray-600 dark:text-gray-400"},ys={class:"mb-3"},fs={class:"flex justify-between items-center mb-1"},hs={class:"text-xs font-medium text-primary"},_s={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden"},ws={class:"grid grid-cols-2 gap-3 text-sm"},Cs={class:"ml-2 text-black dark:text-white"},$s={class:"ml-2 text-black dark:text-white"},Ds={class:"ml-2 font-medium text-black dark:text-white"},Ms={key:1,class:"mt-6"},js={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Bs=["onClick"],Ss={class:"flex items-start justify-between gap-4 mb-3"},Ls={class:"flex-1"},zs={class:"font-semibold text-black dark:text-white mb-1"},Es={class:"text-sm text-gray-600 dark:text-gray-400"},Ns={class:"grid grid-cols-2 gap-3 text-sm"},Ts={class:"ml-2 text-black dark:text-white"},Us={class:"ml-2 text-black dark:text-white"},Vs={class:"ml-2 font-medium text-black dark:text-white"},Os={key:2,class:"text-center py-12"},Hs={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-6"},As={class:"flex items-center justify-between mb-6"},Fs={class:"text-sm text-gray-600 dark:text-gray-400"},Rs={key:0,class:"space-y-4"},Is=["onClick"],Ps={class:"flex items-start justify-between gap-4"},Qs={class:"flex-1"},qs={class:"font-semibold text-black dark:text-white mb-2"},Gs={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm"},Js={class:"ml-2 font-mono text-black dark:text-white"},Ks={class:"ml-2 text-black dark:text-white"},Ws={key:0},Xs={key:1},Ys={key:0,class:"shrink-0"},Zs=["href"],tr={key:1,class:"text-center py-12"},vr=rt({__name:"[id]",setup(i){const D=Bt(),H=St(),m=D.params.id,{authFetch:s}=Tt(),p=Ut(),{canEditStudents:h,canDeleteStudents:_}=Vt(),l=c(null),g=c(!1),v=c(null),M=c(!1),A=c(!1),F=c(!1),w=c("info"),ot=[{id:"info",label:"Информация",icon:Ht},{id:"courses",label:"Курсы",icon:Ft},{id:"certificates",label:"Сертификаты",icon:It}],C=c([]),R=c(!1),j=c(!1),B=c(null),J=tt(()=>C.value.filter(a=>a.status==="active")),K=tt(()=>C.value.filter(a=>a.status==="completed")),lt=async()=>{R.value=!0;try{const a=await s(`/api/students/${m}/courses`);a.success&&(C.value=a.courses)}catch(a){console.error("Failed to load courses:",a)}finally{R.value=!1}},W=a=>{B.value=a,j.value=!0},nt=()=>{j.value=!1,B.value=null},dt=a=>a.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),S=a=>a?new Date(a).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}):"—",L=a=>a?new Date(a).toLocaleDateString("ru-RU",{day:"numeric",month:"numeric",year:"numeric"}):"—",I=async()=>{g.value=!0,v.value=null;try{const a=await s(`/api/students/${m}`);a.success?(l.value=a.student,lt()):v.value="Не удалось загрузить данные"}catch(a){v.value=a.message||"Ошибка соединения с сервером"}finally{g.value=!1}},it=()=>{M.value=!0},X=()=>{M.value=!1},ut=async a=>{try{const e=await s(`/api/students/${m}`,{method:"PUT",body:a});e.success&&(l.value=e.student,X(),p.success("Данные студента обновлены"))}catch(e){console.error("Error updating student:",e),p.error("Ошибка при обновлении данных")}},ct=a=>{navigator.clipboard.writeText(a),p.success("Скопировано в буфер обмена")},xt=()=>{A.value=!0},Y=()=>{A.value=!1},mt=async()=>{F.value=!0;try{await s(`/api/students/${m}`,{method:"DELETE"}),H.push("/users?tab=students"),p.success("Студент удален")}catch(a){console.error("Error deleting student:",a),p.error("Ошибка удаления")}finally{F.value=!1,Y()}},z=c(!1),E=c(!1),N=c(null),gt=()=>{z.value=!0},pt=()=>{z.value=!1},bt=a=>{l.value&&(N.value={...a,student:{id:l.value.id,fullName:l.value.fullName,pinfl:l.value.pinfl,organization:l.value.organization,position:l.value.position,department:l.value.department}},E.value=!0)},kt=()=>{E.value=!1,N.value=null},T=a=>{if(!a)return"valid";const e=new Date,f=new Date(a).getTime()-e.getTime(),U=Math.ceil(f/(1e3*60*60*24));return U<0?"expired":U<=30?"expiring":"valid"},vt=a=>{switch(T(a)){case"expired":return"text-danger";case"expiring":return"text-warning";default:return"text-black dark:text-white"}},yt=a=>{switch(T(a)){case"expired":return"bg-danger/10 text-danger";case"expiring":return"bg-warning/10 text-warning";default:return"bg-success/10 text-success"}},ft=a=>{switch(T(a)){case"expired":return"Истек";case"expiring":return"Истекает скоро";default:return"Действителен"}};return Lt(()=>{I()}),(a,e)=>{const Z=et,f=st,U=$t,ht=Dt,_t=Mt,wt=_e,Ct=Nt;return n(),d("div",we,[t("div",Ce,[k(Z,{to:"/users?tab=students",class:"inline-flex items-center gap-2 text-primary hover:underline"},{default:b(()=>[k(V(At),{class:"h-4 w-4"}),e[2]||(e[2]=u(" Назад к списку ",-1))]),_:1})]),g.value?(n(),d("div",$e,[...e[3]||(e[3]=[t("div",{class:"flex flex-col items-center gap-4"},[t("div",{class:"h-12 w-12 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"}),t("p",{class:"text-gray-600 dark:text-gray-400"}," Загрузка данных студента... ")],-1)])])):v.value?(n(),d("div",De,[k(V(Ot),{class:"mx-auto h-12 w-12 text-danger"}),e[5]||(e[5]=t("h3",{class:"mt-4 text-lg font-semibold text-gray-900 dark:text-white"}," Ошибка загрузки ",-1)),t("p",Me,r(v.value),1),k(f,{variant:"primary",class:"mt-4",onClick:I},{default:b(()=>[...e[4]||(e[4]=[u(" Попробовать снова ",-1)])]),_:1})])):l.value?(n(),d($,{key:2},[t("div",je,[e[9]||(e[9]=t("div",{class:"h-32 bg-white dark:bg-boxdark relative"},null,-1)),t("div",Be,[t("div",Se,[t("div",Le,[t("div",ze,[t("span",Ee,r(dt(l.value.fullName)),1)]),e[6]||(e[6]=t("div",{class:"absolute -bottom-2 -right-2 h-10 w-10 bg-success rounded-full border-4 border-white dark:border-boxdark flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1))]),t("div",Ne,[t("h1",Te,r(l.value.fullName),1),t("p",Ue,r(l.value.position),1)]),t("div",Ve,[V(h)?(n(),y(f,{key:0,variant:"primary",onClick:it,class:"flex items-center gap-2"},{default:b(()=>[...e[7]||(e[7]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),u(" Редактировать ",-1)])]),_:1})):x("",!0),V(_)?(n(),y(f,{key:1,variant:"danger",onClick:xt,class:"flex items-center gap-2"},{default:b(()=>[...e[8]||(e[8]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})],-1),u(" Удалить ",-1)])]),_:1})):x("",!0)])])])]),t("div",Oe,[t("div",He,[t("nav",Ae,[(n(),d($,null,O(ot,o=>t("button",{key:o.id,onClick:P=>w.value=o.id,class:G(["flex-1 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200",w.value===o.id?"bg-primary text-white shadow-sm":"text-gray-600 hover:bg-white hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"])},[t("span",Re,[(n(),y(zt(o.icon),{class:"h-5 w-5"})),u(" "+r(o.label),1)])],10,Fe)),64))])]),Q(t("div",null,[t("div",Ie,[t("div",Pe,[e[14]||(e[14]=t("h3",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"}," Личные данные ",-1)),t("div",Qe,[t("div",qe,[e[11]||(e[11]=t("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," ПИНФЛ ",-1)),t("div",Ge,[t("p",Je,r(l.value.pinfl),1),t("button",{onClick:e[0]||(e[0]=o=>ct(l.value.pinfl)),class:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",title:"Копировать"},[...e[10]||(e[10]=[t("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)])])])]),t("div",Ke,[e[12]||(e[12]=t("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Дата регистрации ",-1)),t("p",We,r(S(l.value.created_at)),1)]),t("div",Xe,[e[13]||(e[13]=t("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Последнее обновление ",-1)),t("p",Ye,r(S(l.value.updated_at)),1)])])]),t("div",Ze,[e[18]||(e[18]=t("h3",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"}," Рабочая информация ",-1)),t("div",ts,[t("div",es,[e[15]||(e[15]=t("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Организация ",-1)),t("p",ss,r(l.value.organization),1)]),t("div",rs,[e[16]||(e[16]=t("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Должность ",-1)),t("p",as,r(l.value.position),1)]),l.value.department?(n(),d("div",os,[e[17]||(e[17]=t("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Служба/Отдел ",-1)),t("p",ls,r(l.value.department),1)])):x("",!0)])])])],512),[[q,w.value==="info"]]),Q(t("div",null,[t("div",ns,[t("div",ds,[t("div",null,[e[19]||(e[19]=t("h2",{class:"text-xl font-bold text-black dark:text-white"}," Курсы слушателя ",-1)),t("p",is," Всего: "+r(C.value.length),1)])]),R.value?(n(),d("div",us,[...e[20]||(e[20]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"},null,-1)])])):C.value.length>0?(n(),d("div",cs,[J.value.length>0?(n(),d("div",xs,[e[26]||(e[26]=t("h3",{class:"text-lg font-semibold text-black dark:text-white mb-3"}," Активные курсы ",-1)),t("div",ms,[(n(!0),d($,null,O(J.value,o=>(n(),d("div",{key:o.group_id,class:"border border-gray-200 dark:border-strokedark rounded-xl p-4 hover:border-primary dark:hover:border-primary hover:shadow-md transition-all cursor-pointer bg-linear-to-br from-primary/5 to-transparent",onClick:P=>W(o)},[t("div",ps,[t("div",bs,[t("h4",ks,r(o.course_name),1),t("p",vs," Группа: "+r(o.group_name),1)]),e[21]||(e[21]=t("span",{class:"inline-flex items-center gap-1.5 rounded-full bg-success/10 px-3 py-1 text-xs font-medium text-success"},[t("span",{class:"h-2 w-2 rounded-full bg-success"}),u(" Активен ")],-1))]),t("div",ys,[t("div",fs,[e[22]||(e[22]=t("span",{class:"text-xs text-gray-600 dark:text-gray-400"},"Прогресс",-1)),t("span",hs,r(o.progress)+"%",1)]),t("div",_s,[t("div",{class:"h-2 rounded-full bg-linear-to-r from-primary to-purple-500 transition-all duration-500",style:at({width:`${o.progress}%`})},null,4)])]),t("div",ws,[t("div",null,[e[23]||(e[23]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Начало:",-1)),t("span",Cs,r(L(o.start_date)),1)]),t("div",null,[e[24]||(e[24]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Окончание:",-1)),t("span",$s,r(L(o.end_date)),1)]),t("div",null,[e[25]||(e[25]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Занятий:",-1)),t("span",Ds,r(o.attended_lessons)+"/"+r(o.total_lessons),1)])])],8,gs))),128))])])):x("",!0),K.value.length>0?(n(),d("div",Ms,[e[31]||(e[31]=t("h3",{class:"text-lg font-semibold text-black dark:text-white mb-3"}," Завершенные курсы ",-1)),t("div",js,[(n(!0),d($,null,O(K.value,o=>(n(),d("div",{key:o.group_id,class:"border border-gray-200 dark:border-strokedark rounded-xl p-4 hover:border-gray-300 dark:hover:border-gray-600 hover:shadow-md transition-all cursor-pointer bg-gray-50 dark:bg-gray-800/50",onClick:P=>W(o)},[t("div",Ss,[t("div",Ls,[t("h4",zs,r(o.course_name),1),t("p",Es," Группа: "+r(o.group_name),1)]),e[27]||(e[27]=t("span",{class:"inline-flex items-center gap-1.5 rounded-full bg-gray-200 dark:bg-gray-700 px-3 py-1 text-xs font-medium text-gray-700 dark:text-gray-300"},[t("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),u(" Завершен ")],-1))]),t("div",Ns,[t("div",null,[e[28]||(e[28]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Начало:",-1)),t("span",Ts,r(L(o.start_date)),1)]),t("div",null,[e[29]||(e[29]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Окончание:",-1)),t("span",Us,r(L(o.end_date)),1)]),t("div",null,[e[30]||(e[30]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Посещаемость:",-1)),t("span",Vs,r(o.progress)+"%",1)])])],8,Bs))),128))])])):x("",!0)])):(n(),d("div",Os,[...e[32]||(e[32]=[t("svg",{class:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1),t("p",{class:"text-gray-500 dark:text-gray-400 text-lg"}," У студента пока нет курсов ",-1)])]))])],512),[[q,w.value==="courses"]]),Q(t("div",null,[t("div",Hs,[t("div",As,[t("div",null,[e[33]||(e[33]=t("h2",{class:"text-xl font-bold text-black dark:text-white"}," Сертификаты ",-1)),t("p",Fs," Всего: "+r(l.value.certificates.length),1)]),k(f,{variant:"primary",onClick:gt,class:"flex items-center gap-2"},{default:b(()=>[...e[34]||(e[34]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),u(" Управление сертификатами ",-1)])]),_:1})]),l.value.certificates.length>0?(n(),d("div",Rs,[(n(!0),d($,null,O(l.value.certificates,o=>(n(),d("div",{key:o.id,class:"border border-gray-200 dark:border-strokedark rounded-xl p-4 hover:border-primary dark:hover:border-primary hover:shadow-md transition-all cursor-pointer relative",onClick:P=>bt(o)},[t("div",Ps,[t("div",Qs,[t("h3",qs,r(o.courseName),1),t("div",Gs,[t("div",null,[e[35]||(e[35]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Номер:",-1)),t("span",Js,r(o.certificateNumber),1)]),t("div",null,[e[36]||(e[36]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Дата выдачи:",-1)),t("span",Ks,r(S(o.issueDate)),1)]),o.expiryDate?(n(),d("div",Ws,[e[37]||(e[37]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Срок действия:",-1)),t("span",{class:G(["ml-2 font-medium",vt(o.expiryDate)])},[u(r(S(o.expiryDate))+" ",1),T(o.expiryDate)!=="valid"?(n(),d("span",{key:0,class:G(["ml-1 text-xs px-1.5 py-0.5 rounded-full",yt(o.expiryDate)])},r(ft(o.expiryDate)),3)):x("",!0)],2)])):(n(),d("div",Xs,[...e[38]||(e[38]=[t("span",{class:"text-gray-500 dark:text-gray-400"},"Срок действия:",-1),t("span",{class:"ml-2 text-success font-medium"},"Бессрочный",-1)])]))])]),o.fileUrl?(n(),d("div",Ys,[o.id?(n(),d("a",{key:0,href:`/api/certificates/download/${o.id}`,target:"_blank",class:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 text-primary rounded-lg hover:bg-primary/20 transition-colors",onClick:e[1]||(e[1]=Et(()=>{},["stop"]))},[...e[39]||(e[39]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),u(" Скачать ",-1)])],8,Zs)):x("",!0)])):x("",!0)])],8,Is))),128))])):(n(),d("div",tr,[...e[40]||(e[40]=[t("svg",{class:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),t("p",{class:"text-gray-500 dark:text-gray-400 text-lg"}," У студента пока нет сертификатов ",-1),t("p",{class:"text-gray-400 dark:text-gray-500 text-sm mt-2"},' Нажмите "Управление сертификатами" чтобы добавить ',-1)])]))])],512),[[q,w.value==="certificates"]])])],64)):x("",!0),M.value&&l.value?(n(),y(U,{key:3,student:l.value,"is-open":M.value,onClose:X,onSubmit:ut},null,8,["student","is-open"])):x("",!0),z.value&&l.value?(n(),y(ht,{key:4,student:l.value,"is-open":z.value,onClose:pt,onRefresh:I},null,8,["student","is-open"])):x("",!0),E.value&&N.value?(n(),y(_t,{key:5,certificate:N.value,"is-open":E.value,onClose:kt},null,8,["certificate","is-open"])):x("",!0),j.value&&B.value?(n(),y(wt,{key:6,course:B.value,"is-open":j.value,onClose:nt},null,8,["course","is-open"])):x("",!0),k(Ct,{"is-open":A.value,title:"Удаление студента",message:"Вы уверены, что хотите удалить этого студента?","item-name":l.value?.fullName,warning:"Это действие нельзя отменить. Все данные студента будут удалены.",loading:F.value,onConfirm:mt,onCancel:Y},null,8,["is-open","item-name","loading"])])}}});export{vr as default};
