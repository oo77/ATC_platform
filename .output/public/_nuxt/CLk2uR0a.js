import{v as D,r as g,C as N,g as M,c,a as e,d as m,t as i,i as s,n as f,z as R,h as T,x as n,A as u,R as w,D as y,m as B,o as x}from"./GLV6bXvn.js";const U={class:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-12 px-4"},I={class:"max-w-5xl mx-auto"},k={class:"bg-white rounded-xl shadow-lg p-6 mb-6"},V={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},L={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},h={class:"text-2xl"},C={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},G={class:"text-2xl"},H={class:"font-medium text-gray-700"},K={class:"bg-white rounded-xl shadow-lg p-6"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W={class:"md:col-span-2"},X={class:"relative"},Z=["type"],q={key:0,class:"text-sm text-gray-600 mt-1"},z={class:"flex gap-3 mt-4"},Y=["disabled"],F=["disabled"],j={class:"bg-white rounded-xl shadow-lg p-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Q={class:"md:col-span-2"},ee={class:"bg-white rounded-xl shadow-lg p-6"},te={class:"grid grid-cols-1 gap-4"},se={class:"bg-white rounded-xl shadow-lg p-6"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},le={class:"md:col-span-2"},ae={class:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-lg p-6"},re=["disabled"],ie=D({__name:"environment",setup(ne){const d=g(!1),E=g(!1),b=g({connected:!1,message:""}),r=g(null),p=g("‚è∏"),A=g("–û–∂–∏–¥–∞–Ω–∏–µ"),o=N({DATABASE_HOST:"localhost",DATABASE_PORT:"3306",DATABASE_NAME:"atc_platform",DATABASE_USER:"root",DATABASE_PASSWORD:"",APP_URL:"",APP_NAME:"ATC Platform",APP_TIMEZONE:"Asia/Almaty",TELEGRAM_BOT_TOKEN:"",TELEGRAM_WEBHOOK_SECRET:"",OPENAI_API_KEY:"",USE_OPENROUTER:"true",OPENAI_VISION_MODEL:"openai/gpt-4o",OPENAI_TEXT_MODEL:"openai/gpt-3.5-turbo",OPENAI_MAX_TOKENS:"1500",OPENAI_TEMPERATURE:"0.1"});M(async()=>{await v(),await O()});const v=async()=>{try{const l=await $fetch("/api/environment/check-db");b.value=l}catch(l){b.value={connected:!1,message:l.data?.message||"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏"}}},O=async()=>{try{const l=await $fetch("/api/environment/current");l.database.DATABASE_HOST&&(o.DATABASE_HOST=l.database.DATABASE_HOST),l.database.DATABASE_PORT&&(o.DATABASE_PORT=l.database.DATABASE_PORT),l.database.DATABASE_NAME&&(o.DATABASE_NAME=l.database.DATABASE_NAME),l.database.DATABASE_USER&&(o.DATABASE_USER=l.database.DATABASE_USER),l.application.APP_URL&&(o.APP_URL=l.application.APP_URL),l.application.APP_NAME&&(o.APP_NAME=l.application.APP_NAME),l.application.APP_TIMEZONE&&(o.APP_TIMEZONE=l.application.APP_TIMEZONE),l.openai.USE_OPENROUTER&&(o.USE_OPENROUTER=l.openai.USE_OPENROUTER),l.openai.OPENAI_VISION_MODEL&&(o.OPENAI_VISION_MODEL=l.openai.OPENAI_VISION_MODEL),l.openai.OPENAI_TEXT_MODEL&&(o.OPENAI_TEXT_MODEL=l.openai.OPENAI_TEXT_MODEL)}catch(l){console.error("Failed to load current settings:",l)}},S=async()=>{d.value=!0,r.value=null;try{const l=await $fetch("/api/environment/test-connection",{method:"POST",body:{DATABASE_HOST:o.DATABASE_HOST,DATABASE_PORT:o.DATABASE_PORT,DATABASE_NAME:o.DATABASE_NAME,DATABASE_USER:o.DATABASE_USER,DATABASE_PASSWORD:o.DATABASE_PASSWORD}});r.value={success:!0,message:l.message,details:l.details||{database:"",version:""}},p.value="‚úÖ",A.value="–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É"}catch(l){r.value={success:!1,message:l.data?.message||l.message},p.value="‚ùå",A.value="–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ"}finally{d.value=!1}},_=async()=>{if(!r.value?.success){alert("–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö");return}if(confirm("–ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö?")){d.value=!0,p.value="‚è≥",A.value="–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ...";try{await $fetch("/api/environment/migrate",{method:"POST"}),p.value="‚úÖ",A.value="–í—ã–ø–æ–ª–Ω–µ–Ω–æ",alert("‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!")}catch(l){p.value="‚ùå",A.value="–û—à–∏–±–∫–∞",alert(`‚ùå –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π:
${l.data?.message||l.message}`)}finally{d.value=!1}}},P=async()=>{if(confirm("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?")){d.value=!0;try{await $fetch("/api/environment/save",{method:"POST",body:o}),alert("‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!");try{await $fetch("/api/environment/restart",{method:"POST"}),alert(`üîÑ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥.`),setTimeout(()=>{window.location.href="/"},5e3)}catch(l){alert(`‚ö†Ô∏è ${l.data?.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å"}

${l.data?.instruction||"–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ cPanel"}`)}}catch(l){alert(`‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:
${l.data?.message||l.message}`)}finally{d.value=!1}}};return(l,t)=>(x(),c("div",U,[e("div",I,[t[41]||(t[41]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-4xl font-bold text-gray-900 mb-3"}," ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è "),e("p",{class:"text-gray-600 text-lg"}," –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ")],-1)),e("div",k,[t[18]||(t[18]=e("h2",{class:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("span",null,"üìä"),m(" –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã ")],-1)),e("div",V,[e("div",L,[e("span",h,i(s(b).connected?"‚úÖ":"‚ùå"),1),e("div",null,[t[15]||(t[15]=e("div",{class:"text-sm text-gray-600"},"–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö",-1)),e("div",{class:f(["font-medium",s(b).connected?"text-green-600":"text-red-600"])},i(s(b).connected?"–ü–æ–¥–∫–ª—é—á–µ–Ω–∞":"–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞"),3)])]),e("div",C,[e("span",G,i(s(p)),1),e("div",null,[t[16]||(t[16]=e("div",{class:"text-sm text-gray-600"},"–ú–∏–≥—Ä–∞—Ü–∏–∏",-1)),e("div",H,i(s(A)),1)])]),t[17]||(t[17]=e("div",{class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[e("span",{class:"text-2xl"},"üü¢"),e("div",null,[e("div",{class:"text-sm text-gray-600"},"–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"),e("div",{class:"font-medium text-green-600"},"–ó–∞–ø—É—â–µ–Ω–æ")])],-1))])]),e("form",{onSubmit:R(P,["prevent"]),class:"space-y-6"},[e("div",K,[t[24]||(t[24]=e("h2",{class:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("span",null,"üóÑ"),m(" –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ")],-1)),e("div",$,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –•–æ—Å—Ç ",-1)),n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s(o).DATABASE_HOST=a),type:"text",placeholder:"localhost",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[u,s(o).DATABASE_HOST]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –ü–æ—Ä—Ç ",-1)),n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s(o).DATABASE_PORT=a),type:"number",placeholder:"3306",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[u,s(o).DATABASE_PORT]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ",-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s(o).DATABASE_NAME=a),type:"text",placeholder:"atc_platform",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[u,s(o).DATABASE_NAME]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ",-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>s(o).DATABASE_USER=a),type:"text",placeholder:"root",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},null,512),[[u,s(o).DATABASE_USER]])]),e("div",W,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –ü–∞—Ä–æ–ª—å ",-1)),e("div",X,[n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>s(o).DATABASE_PASSWORD=a),type:s(E)?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",class:"w-full px-4 py-2 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,8,Z),[[w,s(o).DATABASE_PASSWORD]]),e("button",{type:"button",onClick:t[5]||(t[5]=a=>E.value=!s(E)),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700"},i(s(E)?"üôà":"üëÅ"),1)])])]),s(r)?(x(),c("div",{key:0,class:f(["mt-4 p-4 rounded-lg",{"bg-green-50 border border-green-200":s(r).success,"bg-red-50 border border-red-200":!s(r).success}])},[e("p",{class:f({"text-green-800":s(r).success,"text-red-800":!s(r).success})},i(s(r).message),3),s(r).details?(x(),c("p",q," –ë–∞–∑–∞: "+i(s(r).details.database)+" | –í–µ—Ä—Å–∏—è: "+i(s(r).details.version),1)):T("",!0)],2)):T("",!0),e("div",z,[e("button",{type:"button",onClick:S,disabled:s(d),class:"flex-1 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium"},i(s(d)?"–ü—Ä–æ–≤–µ—Ä–∫–∞...":"üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"),9,Y),e("button",{type:"button",onClick:_,disabled:s(d)||!s(r)?.success,class:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium"},i(s(d)?"–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ...":"üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏"),9,F)])]),e("div",j,[t[29]||(t[29]=e("h2",{class:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("span",null,"üåê"),m(" –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ")],-1)),e("div",J,[e("div",Q,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ",-1)),n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>s(o).APP_URL=a),type:"url",placeholder:"https://your-domain.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,s(o).APP_URL]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ",-1)),n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>s(o).APP_NAME=a),type:"text",placeholder:"ATC Platform",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,s(o).APP_NAME]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å ",-1)),n(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>s(o).APP_TIMEZONE=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[27]||(t[27]=[B('<option value="Asia/Almaty">Asia/Almaty (GMT+6)</option><option value="Asia/Tashkent">Asia/Tashkent (GMT+5)</option><option value="Asia/Bishkek">Asia/Bishkek (GMT+6)</option><option value="Europe/Moscow">Europe/Moscow (GMT+3)</option><option value="UTC">UTC (GMT+0)</option>',5)])],512),[[y,s(o).APP_TIMEZONE]])])])]),e("div",ee,[t[33]||(t[33]=e("h2",{class:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("span",null,"üì±"),m(" Telegram Bot ")],-1)),e("div",te,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Bot Token ",-1)),n(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>s(o).TELEGRAM_BOT_TOKEN=a),type:"text",placeholder:"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,s(o).TELEGRAM_BOT_TOKEN]]),t[31]||(t[31]=e("p",{class:"text-xs text-gray-500 mt-1"}," –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω —É @BotFather –≤ Telegram ",-1))]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Webhook Secret ",-1)),n(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>s(o).TELEGRAM_WEBHOOK_SECRET=a),type:"text",placeholder:"your_webhook_secret",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,s(o).TELEGRAM_WEBHOOK_SECRET]])])])]),e("div",se,[t[39]||(t[39]=e("h2",{class:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("span",null,"ü§ñ"),m(" OpenAI / OpenRouter ")],-1)),e("div",oe,[e("div",le,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," API Key ",-1)),n(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>s(o).OPENAI_API_KEY=a),type:"text",placeholder:"sk-or-v1-...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,s(o).OPENAI_API_KEY]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenRouter ",-1)),n(e("select",{"onUpdate:modelValue":t[12]||(t[12]=a=>s(o).USE_OPENROUTER=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[35]||(t[35]=[e("option",{value:"true"},"–î–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)",-1),e("option",{value:"false"},"–ù–µ—Ç (OpenAI –Ω–∞–ø—Ä—è–º—É—é)",-1)])],512),[[y,s(o).USE_OPENROUTER]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Vision Model ",-1)),n(e("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>s(o).OPENAI_VISION_MODEL=a),type:"text",placeholder:"openai/gpt-4o",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,s(o).OPENAI_VISION_MODEL]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Text Model ",-1)),n(e("input",{"onUpdate:modelValue":t[14]||(t[14]=a=>s(o).OPENAI_TEXT_MODEL=a),type:"text",placeholder:"openai/gpt-3.5-turbo",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[u,s(o).OPENAI_TEXT_MODEL]])])])]),e("div",ae,[e("button",{type:"submit",disabled:s(d),class:"w-full px-8 py-4 bg-white text-blue-600 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-bold text-lg"},i(s(d)?"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...":"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å"),9,re),t[40]||(t[40]=e("p",{class:"text-white text-sm text-center mt-3"}," –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ .env —Ñ–∞–π–ª –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è ",-1))])],32)])]))}});export{ie as default};
