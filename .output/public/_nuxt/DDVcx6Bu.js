import{C as ht,A as pt,a as $t,b as ft,U as _t,c as yt,S as Et,G as Nt}from"./BIg-aNNr.js";import{_ as it}from"./BMofnORk.js";import{_ as lt}from"./BKg9m4wI.js";import{_ as W}from"./DlAUqK2U.js";import{c as r,o as s,a as t,e as dt,r as P,f as E,g as et,h as D,b as a,t as o,i as A,d as C,w as y,F as L,j as T,n as B,k as v,l as nt,m as Ct,p as It,_ as jt,q as Ut,s as Dt,v as St,u as Pt}from"./GLV6bXvn.js";import{C as bt}from"./DkuYzCwJ.js";import{I as Mt}from"./C1ucb4WH.js";import{u as ct}from"./DlZaGH1J.js";import{u as Zt}from"./DVL-QcDc.js";import{I as zt,a as Ot}from"./D81SDHNc.js";import{P as Gt}from"./JX9M957j.js";import{u as Wt}from"./DW2J_Y_n.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const qt={},Qt={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Yt(S,h){return s(),r("svg",Qt,[...h[0]||(h[0]=[t("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.6501 12.0001C3.6501 7.38852 7.38852 3.6501 12.0001 3.6501C16.6117 3.6501 20.3501 7.38852 20.3501 12.0001C20.3501 16.6117 16.6117 20.3501 12.0001 20.3501C7.38852 20.3501 3.6501 16.6117 3.6501 12.0001ZM12.0001 1.8501C6.39441 1.8501 1.8501 6.39441 1.8501 12.0001C1.8501 17.6058 6.39441 22.1501 12.0001 22.1501C17.6058 22.1501 22.1501 17.6058 22.1501 12.0001C22.1501 6.39441 17.6058 1.8501 12.0001 1.8501ZM10.9992 7.52517C10.9992 8.07746 11.4469 8.52517 11.9992 8.52517H12.0002C12.5525 8.52517 13.0002 8.07746 13.0002 7.52517C13.0002 6.97289 12.5525 6.52517 12.0002 6.52517H11.9992C11.4469 6.52517 10.9992 6.97289 10.9992 7.52517ZM12.0002 17.3715C11.586 17.3715 11.2502 17.0357 11.2502 16.6215V10.945C11.2502 10.5308 11.586 10.195 12.0002 10.195C12.4144 10.195 12.7502 10.5308 12.7502 10.945V16.6215C12.7502 17.0357 12.4144 17.3715 12.0002 17.3715Z",fill:"currentColor"},null,-1)])])}const ut=Object.assign(W(qt,[["render",Yt]]),{__name:"IconsWarningIcon"}),Jt={},Xt={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Kt(S,h){return s(),r("svg",Xt,[...h[0]||(h[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 12C3.5 7.30558 7.30558 3.5 12 3.5C16.6944 3.5 20.5 7.30558 20.5 12C20.5 16.6944 16.6944 20.5 12 20.5C7.30558 20.5 3.5 16.6944 3.5 12ZM12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM10.9991 7.52507C10.9991 8.07736 11.4468 8.52507 11.9991 8.52507H12.0001C12.5524 8.52507 13.0001 8.07736 13.0001 7.52507C13.0001 6.97279 12.5524 6.52507 12.0001 6.52507H11.9991C11.4468 6.52507 10.9991 6.97279 10.9991 7.52507ZM12.0001 17.3714C11.5859 17.3714 11.2501 17.0356 11.2501 16.6214V10.9449C11.2501 10.5307 11.5859 10.1949 12.0001 10.1949C12.4143 10.1949 12.7501 10.5307 12.7501 10.9449V16.6214C12.7501 17.0356 12.4143 17.3714 12.0001 17.3714Z",fill:"currentColor"},null,-1)])])}const te=Object.assign(W(Jt,[["render",Kt]]),{__name:"IconsSupportIcon"}),ee={},se={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function re(S,h){return s(),r("svg",se,[...h[0]||(h[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.85954 4.0835C9.5834 4.0835 9.35954 4.30735 9.35954 4.5835V15.4161C9.35954 15.6922 9.5834 15.9161 9.85954 15.9161H10.1373C10.4135 15.9161 10.6373 15.6922 10.6373 15.4161V4.5835C10.6373 4.30735 10.4135 4.0835 10.1373 4.0835H9.85954ZM7.85954 4.5835C7.85954 3.47893 8.75497 2.5835 9.85954 2.5835H10.1373C11.2419 2.5835 12.1373 3.47893 12.1373 4.5835V15.4161C12.1373 16.5206 11.2419 17.4161 10.1373 17.4161H9.85954C8.75497 17.4161 7.85954 16.5206 7.85954 15.4161V4.5835ZM4.58203 8.9598C4.30589 8.9598 4.08203 9.18366 4.08203 9.4598V15.4168C4.08203 15.693 4.30589 15.9168 4.58203 15.9168H4.85981C5.13595 15.9168 5.35981 15.693 5.35981 15.4168V9.4598C5.35981 9.18366 5.13595 8.9598 4.85981 8.9598H4.58203ZM2.58203 9.4598C2.58203 8.35523 3.47746 7.4598 4.58203 7.4598H4.85981C5.96438 7.4598 6.85981 8.35523 6.85981 9.4598V15.4168C6.85981 16.5214 5.96438 17.4168 4.85981 17.4168H4.58203C3.47746 17.4168 2.58203 16.5214 2.58203 15.4168V9.4598ZM14.637 12.435C14.637 12.1589 14.8609 11.935 15.137 11.935H15.4148C15.691 11.935 15.9148 12.1589 15.9148 12.435V15.4168C15.9148 15.693 15.691 15.9168 15.4148 15.9168H15.137C14.8609 15.9168 14.637 15.693 14.637 15.4168V12.435ZM15.137 10.435C14.0325 10.435 13.137 11.3304 13.137 12.435V15.4168C13.137 16.5214 14.0325 17.4168 15.137 17.4168H15.4148C16.5194 17.4168 17.4148 16.5214 17.4148 15.4168V12.435C17.4148 11.3304 16.5194 10.435 15.4148 10.435H15.137Z",fill:"currentColor"},null,-1)])])}const vt=Object.assign(W(ee,[["render",re]]),{__name:"IconsBarChartIcon"}),oe={},ne={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ae(S,h){return s(),r("svg",ne,[...h[0]||(h[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.7487 2.29248C10.7487 1.87827 10.4129 1.54248 9.9987 1.54248C9.58448 1.54248 9.2487 1.87827 9.2487 2.29248V2.83613C6.08132 3.20733 3.6237 5.9004 3.6237 9.16748V14.4591H3.33203C2.91782 14.4591 2.58203 14.7949 2.58203 15.2091C2.58203 15.6234 2.91782 15.9591 3.33203 15.9591H4.3737H15.6237H16.6654C17.0796 15.9591 17.4154 15.6234 17.4154 15.2091C17.4154 14.7949 17.0796 14.4591 16.6654 14.4591H16.3737V9.16748C16.3737 5.9004 13.9161 3.20733 10.7487 2.83613V2.29248ZM14.8737 14.4591V9.16748C14.8737 6.47509 12.6911 4.29248 9.9987 4.29248C7.30631 4.29248 5.1237 6.47509 5.1237 9.16748V14.4591H14.8737ZM7.9987 17.7085C7.9987 18.1228 8.33448 18.4585 8.7487 18.4585H11.2487C11.6629 18.4585 11.9987 18.1228 11.9987 17.7085C11.9987 17.2943 11.6629 16.9585 11.2487 16.9585H8.7487C8.33448 16.9585 7.9987 17.2943 7.9987 17.7085Z",fill:"currentColor"},null,-1)])])}const Bt=Object.assign(W(oe,[["render",ae]]),{__name:"IconsBellIcon"}),ie={},le={className:"fill-current",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function de(S,h){return s(),r("svg",le,[...h[0]||(h[0]=[t("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.3499 12.0004C20.3499 16.612 16.6115 20.3504 11.9999 20.3504C7.38832 20.3504 3.6499 16.612 3.6499 12.0004C3.6499 7.38881 7.38833 3.65039 11.9999 3.65039C16.6115 3.65039 20.3499 7.38881 20.3499 12.0004ZM11.9999 22.1504C17.6056 22.1504 22.1499 17.6061 22.1499 12.0004C22.1499 6.3947 17.6056 1.85039 11.9999 1.85039C6.39421 1.85039 1.8499 6.3947 1.8499 12.0004C1.8499 17.6061 6.39421 22.1504 11.9999 22.1504ZM13.0008 16.4753C13.0008 15.923 12.5531 15.4753 12.0008 15.4753L11.9998 15.4753C11.4475 15.4753 10.9998 15.923 10.9998 16.4753C10.9998 17.0276 11.4475 17.4753 11.9998 17.4753L12.0008 17.4753C12.5531 17.4753 13.0008 17.0276 13.0008 16.4753ZM11.9998 6.62898C12.414 6.62898 12.7498 6.96476 12.7498 7.37898L12.7498 13.0555C12.7498 13.4697 12.414 13.8055 11.9998 13.8055C11.5856 13.8055 11.2498 13.4697 11.2498 13.0555L11.2498 7.37898C11.2498 6.96476 11.5856 6.62898 11.9998 6.62898Z",fill:"currentColor"},null,-1)])])}const wt=Object.assign(W(ie,[["render",de]]),{__name:"IconsErrorIcon"}),ce={},ue={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ge(S,h){return s(),r("svg",ue,[...h[0]||(h[0]=[t("path",{d:"M5.83333 12.6665L10 8.49984L5.83333 4.33317",stroke:"currentColor","stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const me=Object.assign(W(ce,[["render",ge]]),{__name:"IconsChevronRightIcon"}),xe={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},he={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},pe={class:"text-title-md2 font-bold text-black dark:text-white"},fe={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mt-1"},_e={key:0},ye={class:"grid grid-cols-1 gap-6 xl:grid-cols-3"},be={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden xl:col-span-2"},ve={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex justify-between items-center"},we={class:"flex items-center gap-3"},ke={class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},$e={class:"p-6"},Ce={key:0,class:"text-center text-gray-500 py-4"},Ie={key:1,class:"flex flex-col gap-5"},je={class:"flex justify-between items-start"},De={class:"flex-1"},Se={class:"flex items-center gap-2 mb-1"},Me={class:"text-lg font-bold text-black dark:text-white"},Be={key:0,class:"inline-flex items-center gap-1 rounded-full bg-purple-100 dark:bg-purple-900/30 px-2 py-0.5 text-xs font-medium text-purple-700 dark:text-purple-300",title:"Занятие для перездачи"},Le={class:"text-sm font-medium text-gray-500"},Te={key:0,class:"ml-1"},Ae={class:"text-right"},He={class:"block text-lg font-bold text-primary"},Fe={class:"block text-sm text-gray-500"},Ve={class:"flex items-center justify-between"},Re={key:0,class:"text-sm text-gray-500"},Ee={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},Ne={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center gap-3"},Ue={class:"h-10 w-10 rounded-lg bg-warning/10 flex items-center justify-center"},Pe={class:"p-6"},Ze={key:0,class:"flex flex-col items-center justify-center py-4 text-center"},ze={class:"h-12 w-12 rounded-full bg-success/10 flex items-center justify-center mb-3"},Oe={key:1,class:"flex flex-col gap-4"},Ge={class:"font-medium text-black dark:text-white"},We={class:"text-xs text-gray-500 mt-0.5"},qe={class:"text-right"},Qe={class:"text-sm font-bold text-warning"},Ye={class:"mt-6 rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},Je={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex justify-between items-center"},Xe={class:"flex items-center gap-3"},Ke={class:"h-10 w-10 rounded-lg bg-success/10 flex items-center justify-center"},ts={class:"p-6"},es={key:0,class:"text-center text-gray-500 py-4"},ss={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},rs={class:"font-bold text-black dark:text-white mb-1"},os={class:"text-sm text-gray-500 mb-3"},ns={class:"flex items-center justify-between text-xs mb-1"},as={class:"font-medium text-primary"},is={class:"relative h-2 w-full rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden"},ls={class:"mt-6 rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},ds={class:"flex flex-wrap gap-3"},cs={key:0,class:"mt-6 rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},us={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center gap-3"},gs={class:"h-10 w-10 rounded-lg bg-info/10 flex items-center justify-center"},ms={class:"p-6"},xs={class:"flex flex-col gap-3"},hs={class:"flex-1"},ps={class:"font-medium text-black dark:text-white"},fs={class:"text-xs text-gray-500 mt-0.5"},_s={class:"text-right"},ys={key:0,class:"text-xs text-gray-500 mt-1"},bs={key:1,class:"mt-6 rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},vs={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex justify-between items-center"},ws={class:"flex items-center gap-3"},ks={class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},$s={key:0,class:"bg-danger text-white text-xs px-2 py-0.5 rounded-full"},Cs={class:"p-6"},Is={class:"flex flex-col gap-3"},js={class:"flex-1 min-w-0"},Ds={class:"flex items-start justify-between gap-2"},Ss={class:"flex-1"},Ms={class:"font-medium text-black dark:text-white"},Bs={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},Ls={class:"text-xs text-gray-500 mt-1"},Ts=["onClick"],As={__name:"DashboardStudent",setup(S){const{user:h}=dt(),m=P(null),k=P([]),c=new Date().toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),{authFetch:I}=ct(),{showNotification:M}=Zt(),x=[{to:"/tests/my",label:"Пройти тест",icon:"test"},{to:"/schedule",label:"Расписание",icon:"calendar"},{to:"/my-certificates",label:"Сертификаты",icon:"certificate"},{to:"/support",label:"Помощь",icon:"support"}],w=E(()=>k.value?.filter(f=>!f.is_read).length||0),b=async()=>{try{const f=await I("/api/students/dashboard");f&&(m.value=f)}catch(f){console.error("Failed to fetch dashboard stats:",f)}},G=async()=>{try{const f=await I("/api/students/notifications?limit=5");f&&(k.value=f)}catch(f){console.error("Failed to fetch notifications:",f)}},z=async f=>{try{await I(`/api/students/notifications/${f}/read`,{method:"PUT"});const i=k.value.find(Q=>Q.id===f);i&&(i.is_read=!0)}catch(i){console.error("Failed to mark notification as read:",i)}},j=async()=>{try{await I("/api/students/notifications/read-all",{method:"PUT"}),k.value.forEach(f=>f.is_read=!0),M({type:"success",message:"Все уведомления отмечены как прочитанные"})}catch(f){console.error("Failed to mark all as read:",f)}},u=f=>new Date(f).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),H=f=>new Date(f).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),N=f=>new Date(f).toLocaleString("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),Z=f=>{const i=new Date(f),K=new Date-i,F=Math.floor(K/6e4);if(F<1)return"только что";if(F<60)return`${F} мин назад`;const Y=Math.floor(F/60);if(Y<24)return`${Y} ч назад`;const n=Math.floor(Y/24);return n<7?`${n} дн назад`:H(f)},q=f=>({theory:"Лекция",practice:"Практика",assessment:"Тест",other:"Другое"})[f]||f,O=f=>{const i={theory:"bg-primary/10 text-primary",practice:"bg-success/10 text-success",assessment:"bg-warning/10 text-warning",other:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"};return i[f]||i.other},J=f=>{const i=f;return i>=85?"bg-success/10 text-success":i>=70?"bg-primary/10 text-primary":i>=60?"bg-warning/10 text-warning":"bg-danger/10 text-danger"};return et(()=>{b(),G()}),(f,i)=>{const Q=ht,K=it,F=lt,Y=ut,n=bt,e=pt,$=$t,g=ft,d=te,R=vt,V=Bt,U=wt,st=Mt,rt=me;return s(),r("div",xe,[t("div",he,[t("div",null,[t("h2",pe," Добро пожаловать, "+o(A(h)?.name||"Студент")+"! ",1),t("p",fe,[C(o(A(c))+" ",1),m.value?.upcomingEvents?.length?(s(),r("span",_e," • У вас запланировано "+o(m.value.upcomingEvents.length)+" занятие(я) ",1)):D("",!0)])]),a(F,{to:"/schedule"},{default:y(()=>[a(K,{class:"flex items-center gap-2"},{default:y(()=>[a(Q,{class:"w-5 h-5"}),i[0]||(i[0]=C(" Посмотреть расписание ",-1))]),_:1})]),_:1})]),t("div",ye,[t("div",be,[t("div",ve,[t("div",we,[t("div",ke,[a(Q,{class:"w-5 h-5 text-primary"})]),i[1]||(i[1]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Ближайшие занятия ",-1))]),a(F,{to:"/schedule",class:"text-sm text-primary hover:underline"},{default:y(()=>[...i[2]||(i[2]=[C("Все",-1)])]),_:1})]),t("div",$e,[m.value?.upcomingEvents?.length?(s(),r("div",Ie,[(s(!0),r(L,null,T(m.value.upcomingEvents,l=>(s(),r("div",{key:l.id,class:"flex flex-col gap-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 p-4"},[t("div",je,[t("div",De,[t("div",Se,[t("h4",Me,o(l.title),1),l.allowed_student_ids||l.original_event_id?(s(),r("span",Be,[...i[3]||(i[3]=[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),C(" Перездача ",-1)])])):D("",!0)]),t("p",Le,[C(o(l.course_name)+" ",1),l.classroom_name?(s(),r("span",Te,"• Ауд. "+o(l.classroom_name),1)):D("",!0)])]),t("div",Ae,[t("span",He,o(u(l.start_time)),1),t("span",Fe,o(H(l.start_time)),1)])]),t("div",Ve,[t("span",{class:B(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",O(l.event_type)])},o(q(l.event_type)),3),l.instructor_name?(s(),r("span",Re," Преподаватель: "+o(l.instructor_name),1)):D("",!0)])]))),128))])):(s(),r("div",Ce," Нет предстоящих занятий на ближайшее время "))])]),t("div",Ee,[t("div",Ne,[t("div",Ue,[a(Y,{class:"w-5 h-5 text-warning"})]),i[4]||(i[4]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Горящие дедлайны ",-1))]),t("div",Pe,[m.value?.upcomingDeadlines?.length?(s(),r("div",Oe,[(s(!0),r(L,null,T(m.value.upcomingDeadlines,l=>(s(),r("div",{key:l.id,class:"flex items-center justify-between p-3 rounded-lg border border-warning/30 bg-warning/5"},[t("div",null,[t("h5",Ge,o(l.test_name),1),t("p",We,o(l.course_name),1)]),t("div",qe,[t("span",Qe,o(N(l.end_date)),1),l.id?(s(),v(F,{key:0,to:`/tests/take/${l.id}`,class:"block text-xs text-primary hover:underline mt-1"},{default:y(()=>[...i[6]||(i[6]=[C(" Пройти тест ",-1)])]),_:1},8,["to"])):D("",!0)])]))),128))])):(s(),r("div",Ze,[t("div",ze,[a(n,{class:"h-6 w-6 text-success"})]),i[5]||(i[5]=t("p",{class:"text-sm text-gray-500"},"Нет активных дедлайнов",-1))]))])])]),t("div",Ye,[t("div",Je,[t("div",Xe,[t("div",Ke,[a(e,{class:"w-5 h-5 text-success"})]),i[7]||(i[7]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Мои курсы ",-1))]),a(F,{to:"/my-courses",class:"text-sm text-primary hover:underline"},{default:y(()=>[...i[8]||(i[8]=[C("Все курсы",-1)])]),_:1})]),t("div",ts,[m.value?.activeCourses?.length?(s(),r("div",ss,[(s(!0),r(L,null,T(m.value.activeCourses,l=>(s(),v(F,{key:l.id,to:`/my-courses/${l.id}`,class:"block rounded-lg border border-gray-200 dark:border-gray-700 p-4 transition-all hover:bg-gray-50 hover:border-primary dark:hover:bg-gray-800"},{default:y(()=>[t("h4",rs,o(l.course_name),1),t("p",os," Группа: "+o(l.group_code),1),t("div",ns,[i[9]||(i[9]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Прогресс",-1)),t("span",as,o(l.progress)+"%",1)]),t("div",is,[t("div",{class:"absolute left-0 h-full rounded-full bg-primary transition-all",style:nt({width:`${l.progress}%`})},null,4)])]),_:2},1032,["to"]))),128))])):(s(),r("div",es," У вас пока нет активных курсов "))])]),t("div",ls,[i[10]||(i[10]=Ct('<div class="flex items-center gap-3 mb-4"><div class="h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"><svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><h3 class="text-lg font-semibold text-black dark:text-white"> Быстрые действия </h3></div>',1)),t("div",ds,[(s(),r(L,null,T(x,l=>a(F,{key:l.to,to:l.to,class:"inline-flex items-center gap-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 transition-all hover:bg-primary hover:text-white hover:border-primary"},{default:y(()=>[l.icon==="test"?(s(),v($,{key:0,class:"w-4 h-4"})):l.icon==="calendar"?(s(),v(Q,{key:1,class:"w-4 h-4"})):l.icon==="certificate"?(s(),v(g,{key:2,class:"w-4 h-4"})):l.icon==="support"?(s(),v(d,{key:3,class:"w-4 h-4"})):D("",!0),C(" "+o(l.label),1)]),_:2},1032,["to"])),64))])]),m.value?.recentGrades?.length?(s(),r("div",cs,[t("div",us,[t("div",gs,[a(R,{class:"w-5 h-5 text-info"})]),i[11]||(i[11]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Мои последние оценки ",-1))]),t("div",ms,[t("div",xs,[(s(!0),r(L,null,T(m.value.recentGrades,l=>(s(),r("div",{key:l.id,class:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[t("div",hs,[t("h5",ps,o(l.event_title),1),t("p",fs,o(l.course_name)+" • "+o(H(l.graded_at)),1)]),t("div",_s,[t("span",{class:B(["inline-flex items-center justify-center rounded-full px-3 py-1 text-sm font-bold",J(l.grade)])},o(l.grade)+"/"+o(l.max_grade||100),3),l.comment?(s(),r("p",ys,o(l.comment),1)):D("",!0)])]))),128))])])])):D("",!0),k.value?.length?(s(),r("div",bs,[t("div",vs,[t("div",ws,[t("div",ks,[a(V,{class:"w-5 h-5 text-primary"})]),i[12]||(i[12]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Уведомления ",-1)),w.value>0?(s(),r("span",$s,o(w.value),1)):D("",!0)]),w.value>0?(s(),r("button",{key:0,onClick:j,class:"text-sm text-primary hover:underline"}," Отметить все как прочитанные ")):D("",!0)]),t("div",Cs,[t("div",Is,[(s(!0),r(L,null,T(k.value,l=>(s(),r("div",{key:l.id,class:B(["flex items-start gap-3 p-3 rounded-lg transition-colors",l.is_read?"bg-gray-50 dark:bg-gray-800/50":"bg-primary/5 border border-primary/20"])},[l.type==="test_upcoming"?(s(),v($,{key:0,class:"w-5 h-5 flex-shrink-0 text-primary"})):l.type==="test_today"||l.type==="deadline_warning"?(s(),v(Y,{key:1,class:"w-5 h-5 flex-shrink-0 text-warning"})):l.type==="test_overdue"||l.type==="deadline_critical"?(s(),v(U,{key:2,class:"w-5 h-5 flex-shrink-0 text-danger"})):l.type==="schedule_change"?(s(),v(Q,{key:3,class:"w-5 h-5 flex-shrink-0 text-info"})):l.type==="grade_posted"?(s(),v(R,{key:4,class:"w-5 h-5 flex-shrink-0 text-success"})):l.type==="certificate_issued"?(s(),v(g,{key:5,class:"w-5 h-5 flex-shrink-0 text-success"})):l.type==="info"?(s(),v(st,{key:6,class:"w-5 h-5 flex-shrink-0 text-info"})):(s(),v(V,{key:7,class:"w-5 h-5 flex-shrink-0 text-primary"})),t("div",js,[t("div",Ds,[t("div",Ss,[t("h5",Ms,o(l.title),1),t("p",Bs,o(l.message),1),t("p",Ls,o(Z(l.created_at)),1)]),l.is_read?D("",!0):(s(),r("button",{key:0,onClick:at=>z(l.id),class:"text-xs text-primary hover:underline flex-shrink-0"}," Прочитано ",8,Ts))]),l.action_url?(s(),v(F,{key:0,to:l.action_url,class:"inline-flex items-center gap-1 text-sm text-primary hover:underline mt-2"},{default:y(()=>[C(o(l.action_text||"Перейти")+" ",1),a(rt,{class:"w-3 h-3"})]),_:2},1032,["to"])):D("",!0)])],2))),128))])])])):D("",!0)])}}},Hs={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},Fs={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Vs={class:"text-title-md2 font-bold text-black dark:text-white"},Rs={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mt-1"},Es={key:0},Ns={key:1,class:"text-success"},Us={class:"grid grid-cols-1 gap-4 md:grid-cols-4 mb-6"},Ps={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},Zs={class:"flex items-center gap-4"},zs={class:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10"},Os={class:"text-2xl font-bold text-black dark:text-white"},Gs={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},Ws={class:"flex items-center gap-4"},qs={class:"flex h-12 w-12 items-center justify-center rounded-full bg-success/10"},Qs={class:"text-2xl font-bold text-black dark:text-white"},Ys={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},Js={class:"flex items-center gap-4"},Xs={class:"flex h-12 w-12 items-center justify-center rounded-full bg-warning/10"},Ks={class:"text-2xl font-bold text-black dark:text-white"},tr={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},er={class:"flex items-center gap-4"},sr={class:"text-2xl font-bold text-black dark:text-white"},rr={class:"grid grid-cols-1 gap-6 xl:grid-cols-3"},or={class:"xl:col-span-2 rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},nr={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex justify-between items-center"},ar={class:"flex items-center gap-3"},ir={class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},lr={class:"p-6"},dr={key:0,class:"flex justify-center py-8"},cr={key:1,class:"flex flex-col items-center justify-center py-8 text-center"},ur={class:"h-12 w-12 rounded-full bg-success/10 flex items-center justify-center mb-3"},gr={key:2,class:"flex flex-col gap-4"},mr={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},xr={class:"flex-1"},hr={class:"flex items-center gap-2 mb-1"},pr={class:"text-lg font-bold text-primary"},fr={class:"font-semibold text-black dark:text-white"},_r={class:"text-sm text-gray-500 mt-1"},yr={key:0},br={key:1},vr={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},wr={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex justify-between items-center"},kr={class:"flex items-center gap-3"},$r={class:"h-10 w-10 rounded-lg bg-success/10 flex items-center justify-center"},Cr={class:"p-6"},Ir={key:0,class:"flex justify-center py-8"},jr={key:1,class:"text-center text-gray-500 py-4"},Dr={key:2,class:"flex flex-col gap-4"},Sr={class:"font-bold text-black dark:text-white mb-1"},Mr={class:"text-sm text-gray-500 mb-2"},Br={class:"flex items-center justify-between text-xs"},Lr={class:"text-gray-400"},Tr={class:"mt-2 relative h-1.5 w-full rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden"},Ar={key:0,class:"mt-6 rounded-lg bg-warning/5 border border-warning/30 shadow-md overflow-hidden"},Hr={class:"border-b border-warning/30 py-4 px-6 flex justify-between items-center"},Fr={class:"flex items-center gap-3"},Vr={class:"h-10 w-10 rounded-lg bg-warning/10 flex items-center justify-center"},Rr={class:"bg-warning text-white text-xs px-2 py-0.5 rounded-full"},Er={class:"p-6"},Nr={class:"flex flex-col gap-3"},Ur={class:"text-sm font-medium text-black dark:text-white"},Pr={class:"text-sm text-gray-600 dark:text-gray-400"},Zr={class:"text-sm text-gray-500"},zr={class:"mt-6 grid grid-cols-1 gap-6"},Or={__name:"DashboardTeacher",setup(S){const{user:h}=dt(),{authFetch:m}=ct(),k=P(null),c=P(!0),I=new Date().toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),M=async()=>{c.value=!0;try{const j=await m("/api/teacher/dashboard");j&&(k.value=j)}catch(j){console.error("Failed to fetch teacher dashboard stats:",j)}finally{c.value=!1}},x=j=>new Date(j).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),w=j=>new Date(j).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),b=j=>({theory:"Лекция",practice:"Практика",assessment:"Тест",other:"Другое"})[j]||j,G=j=>{const u=new Date,H=new Date(j.start_time),N=new Date(j.end_time);return u>=H&&u<=N?"border-success bg-success/5":u>N?"border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800/50":"border-gray-200 dark:border-gray-700"},z=j=>{const u=new Date,H=new Date(j.start_time),N=new Date(j.end_time);return u>=H&&u<=N?"bg-success animate-pulse":u>N?"bg-gray-400":"bg-primary"};return et(()=>{M()}),(j,u)=>{const H=ht,N=it,Z=lt,q=_t,O=yt,J=bt,f=ut;return s(),r("div",Hs,[t("div",Fs,[t("div",null,[t("h2",Vs," Добрый день, "+o(A(h)?.name||"Преподаватель")+"! ",1),t("p",Rs,[C(o(A(I))+" ",1),k.value?.todayLessons>0?(s(),r("span",Es," • У вас запланировано "+o(k.value.todayLessons)+" занятие(й) ",1)):(s(),r("span",Ns," • Сегодня нет запланированных занятий "))])]),a(Z,{to:"/schedule"},{default:y(()=>[a(N,{class:"flex items-center gap-2"},{default:y(()=>[a(H,{class:"w-5 h-5"}),u[0]||(u[0]=C(" Моё расписание ",-1))]),_:1})]),_:1})]),t("div",Us,[t("div",Ps,[t("div",Zs,[t("div",zs,[a(q,{class:"w-6 h-6 text-primary"})]),t("div",null,[u[1]||(u[1]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Мои группы ",-1)),t("p",Os,o(k.value?.myGroups||0),1)])])]),t("div",Gs,[t("div",Ws,[t("div",qs,[a(O,{class:"w-6 h-6 text-success"})]),t("div",null,[u[2]||(u[2]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Мои студенты ",-1)),t("p",Qs,o(k.value?.myStudents||0),1)])])]),t("div",Ys,[t("div",Js,[t("div",Xs,[a(H,{class:"w-6 h-6 text-warning"})]),t("div",null,[u[3]||(u[3]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Занятий сегодня ",-1)),t("p",Ks,o(k.value?.todayLessons||0),1)])])]),t("div",tr,[t("div",er,[u[5]||(u[5]=t("div",{class:"flex h-12 w-12 items-center justify-center rounded-full bg-info/10"},[t("svg",{class:"w-6 h-6 text-info",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[u[4]||(u[4]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Часов за месяц ",-1)),t("p",sr,o(k.value?.monthlyHours||0),1)])])])]),t("div",rr,[t("div",or,[t("div",nr,[t("div",ar,[t("div",ir,[a(H,{class:"w-5 h-5 text-primary"})]),u[6]||(u[6]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Мои занятия сегодня ",-1))]),a(Z,{to:"/schedule",class:"text-sm text-primary hover:underline"},{default:y(()=>[...u[7]||(u[7]=[C(" Полное расписание ",-1)])]),_:1})]),t("div",lr,[c.value?(s(),r("div",dr,[...u[8]||(u[8]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):k.value?.todaySchedule?.length?(s(),r("div",gr,[(s(!0),r(L,null,T(k.value.todaySchedule,i=>(s(),r("div",{key:i.id,class:B(["rounded-lg border p-4 transition-all",G(i)])},[t("div",mr,[t("div",xr,[t("div",hr,[t("span",{class:B(["inline-flex h-2.5 w-2.5 rounded-full",z(i)])},null,2),t("span",pr,o(x(i.start_time))+" - "+o(x(i.end_time)),1)]),t("h4",fr,o(b(i.event_type))+": "+o(i.title),1),t("p",_r,[C(" Группа: "+o(i.group_code)+" ",1),i.classroom_name?(s(),r("span",yr," • Ауд. "+o(i.classroom_name),1)):D("",!0),i.student_count?(s(),r("span",br," • "+o(i.student_count)+" студентов",1)):D("",!0)])]),a(Z,{to:`/groups/journal/${i.group_id}_${i.discipline_id}`},{default:y(()=>[a(N,{size:"sm",variant:"outline",class:"flex items-center gap-1"},{default:y(()=>[a(J,{class:"w-4 h-4"}),u[10]||(u[10]=C(" Посещаемость ",-1))]),_:1})]),_:1},8,["to"])])],2))),128))])):(s(),r("div",cr,[t("div",ur,[a(J,{class:"h-6 w-6 text-success"})]),u[9]||(u[9]=t("p",{class:"text-sm text-gray-500"}," Сегодня нет запланированных занятий ",-1))]))])]),t("div",vr,[t("div",wr,[t("div",kr,[t("div",$r,[a(q,{class:"w-5 h-5 text-success"})]),u[11]||(u[11]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Мои группы ",-1))]),a(Z,{to:"/groups",class:"text-sm text-primary hover:underline"},{default:y(()=>[...u[12]||(u[12]=[C(" Все группы ",-1)])]),_:1})]),t("div",Cr,[c.value?(s(),r("div",Ir,[...u[13]||(u[13]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):k.value?.groups?.length?(s(),r("div",Dr,[(s(!0),r(L,null,T(k.value.groups,i=>(s(),v(Z,{key:i.id,to:`/groups/${i.id}`,class:"block rounded-lg border border-gray-200 dark:border-gray-700 p-4 transition-all hover:bg-gray-50 hover:border-primary dark:hover:bg-gray-800"},{default:y(()=>[t("h4",Sr,o(i.code),1),t("p",Mr,o(i.course_name),1),t("div",Br,[t("span",Lr,o(i.student_count)+" студентов",1),t("span",{class:B(["font-medium",i.attendance_rate>=80?"text-success":i.attendance_rate>=60?"text-warning":"text-danger"])}," Посещаемость: "+o(i.attendance_rate)+"% ",3)]),t("div",Tr,[t("div",{class:B(["absolute left-0 h-full rounded-full transition-all",i.attendance_rate>=80?"bg-success":i.attendance_rate>=60?"bg-warning":"bg-danger"]),style:nt({width:`${i.attendance_rate}%`})},null,6)])]),_:2},1032,["to"]))),128))])):(s(),r("div",jr," Нет назначенных групп "))])])]),k.value?.pendingAttendance?.length?(s(),r("div",Ar,[t("div",Hr,[t("div",Fr,[t("div",Vr,[a(f,{class:"w-5 h-5 text-warning"})]),u[14]||(u[14]=t("h3",{class:"text-lg font-semibold text-warning"}," Требуется заполнить посещаемость ",-1)),t("span",Rr,o(k.value.pendingAttendance.length),1)])]),t("div",Er,[t("div",Nr,[(s(!0),r(L,null,T(k.value.pendingAttendance,i=>(s(),r("div",{key:i.id,class:"flex items-center justify-between p-3 rounded-lg bg-white dark:bg-boxdark border border-gray-200 dark:border-gray-700"},[t("div",null,[t("span",Ur,o(w(i.date)),1),u[15]||(u[15]=t("span",{class:"text-gray-500 mx-2"},"•",-1)),t("span",Pr,o(i.title),1),u[16]||(u[16]=t("span",{class:"text-gray-500 mx-2"},"•",-1)),t("span",Zr,o(i.group_code),1)]),a(Z,{to:`/groups/journal/${i.group_id}_${i.discipline_id}`},{default:y(()=>[a(N,{size:"sm",variant:"warning"},{default:y(()=>[...u[17]||(u[17]=[C("Заполнить",-1)])]),_:1})]),_:1},8,["to"])]))),128))])])])):D("",!0),t("div",zr,[A(h)?.instructorId?(s(),v(zt,{key:0,"instructor-id":A(h).instructorId,"initial-load":!0},null,8,["instructor-id"])):D("",!0),A(h)?.instructorId?(s(),v(Ot,{key:1,"instructor-id":A(h).instructorId,"initial-load":!0},null,8,["instructor-id"])):D("",!0)])])}}},Gr={},Wr={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function qr(S,h){return s(),r("svg",Wr,[...h[0]||(h[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 2C11.5858 2 11.25 2.33579 11.25 2.75V12C11.25 12.4142 11.5858 12.75 12 12.75H21.25C21.6642 12.75 22 12.4142 22 12C22 6.47715 17.5228 2 12 2ZM12.75 11.25V3.53263C13.2645 3.57761 13.7659 3.66843 14.25 3.80098V3.80099C15.6929 4.19606 16.9827 4.96184 18.0104 5.98959C19.0382 7.01734 19.8039 8.30707 20.199 9.75C20.3316 10.2341 20.4224 10.7355 20.4674 11.25H12.75ZM2 12C2 7.25083 5.31065 3.27489 9.75 2.25415V3.80099C6.14748 4.78734 3.5 8.0845 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C15.9155 20.5 19.2127 17.8525 20.199 14.25H21.7459C20.7251 18.6894 16.7492 22 12 22C6.47715 22 2 17.5229 2 12Z",fill:"currentColor"},null,-1)])])}const Lt=Object.assign(W(Gr,[["render",qr]]),{__name:"IconsPieChartIcon"}),Qr={class:"max-w-full overflow-x-auto custom-scrollbar"},Yr=["id"],Tt={__name:"ChartsDonutChart",props:{chartId:{type:String,default:"donut-chart"},title:{type:String,default:""},series:{type:Array,default:()=>[]},labels:{type:Array,default:()=>[]},colors:{type:Array,default:()=>["#465FFF","#9CB9FF","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316"]},height:{type:[Number,String],default:350},showLegend:{type:Boolean,default:!0},legendPosition:{type:String,default:"bottom"}},emits:["click"],setup(S,{emit:h}){const m=S,k=h,c=P(!1),I=E(()=>m.series.map(x=>Number(x)||0)),M=E(()=>({chart:{fontFamily:"Inter, system-ui, sans-serif",type:"donut",toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:1200,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:450}},events:{dataPointSelection:(x,w,b)=>{k("click",{seriesIndex:b.seriesIndex,dataPointIndex:b.dataPointIndex,label:m.labels[b.dataPointIndex],value:m.series[b.dataPointIndex]})},dataPointMouseEnter:function(x){x&&x.target&&(x.target.style.cursor="pointer")}}},colors:m.colors.slice(0,m.series.length),labels:m.labels,legend:{show:m.showLegend,position:m.legendPosition,fontFamily:"Inter, system-ui, sans-serif",fontSize:"14px",fontWeight:500,labels:{colors:"#6B7280",useSeriesColors:!1},markers:{width:12,height:12,radius:12,offsetX:-2},itemMargin:{horizontal:12,vertical:6},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,name:{show:!0,fontSize:"14px",fontWeight:600,offsetY:-5},value:{show:!0,fontSize:"20px",fontWeight:700,formatter:function(x){return x}},total:{show:!0,showAlways:!0,label:"Всего",fontSize:"14px",fontWeight:600,color:"#6b7280",formatter:function(x){return x&&x.globals&&x.globals.seriesTotals?x.globals.seriesTotals.reduce((w,b)=>w+b,0):0}}}}}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},tooltip:{enabled:!0,y:{formatter:function(x,w){const b=w?w.w:void 0;if(b&&b.globals&&b.globals.seriesTotals){const G=b.globals.seriesTotals.reduce((j,u)=>j+u,0),z=G>0?(x/G*100).toFixed(1):0;return`${x} (${z}%)`}return x}}},responsive:[{breakpoint:480,options:{chart:{height:280},legend:{position:"bottom"}}}]}));return et(()=>{c.value=!0}),(x,w)=>{const b=jt;return s(),r("div",Qr,[t("div",{id:S.chartId,class:"min-w-[300px]"},[a(b,null,{fallback:y(()=>[t("div",{class:"flex justify-center items-center",style:nt({height:S.height+"px"})},[...w[0]||(w[0]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])],4)]),default:y(()=>[c.value?(s(),v(A(It),{key:0,type:"donut",height:S.height,options:M.value,series:I.value},null,8,["height","options","series"])):D("",!0)]),_:1})],8,Yr)])}}},Jr={class:"max-w-full overflow-x-auto custom-scrollbar"},Xr=["id"],Kr={__name:"ChartsDynamicBarChart",props:{chartId:{type:String,default:"dynamic-bar-chart"},title:{type:String,default:""},series:{type:Array,default:()=>[{name:"Data",data:[]}]},categories:{type:Array,default:()=>[]},colors:{type:Array,default:()=>["#465FFF","#10B981","#F59E0B"]},height:{type:[Number,String],default:280},horizontal:{type:Boolean,default:!1},showLegend:{type:Boolean,default:!1},showDataLabels:{type:Boolean,default:!1},yAxisTitle:{type:String,default:""},columnWidth:{type:String,default:"50%"},borderRadius:{type:Number,default:5},formatTooltip:{type:Function,default:null},animationSpeed:{type:Number,default:1e3}},emits:["click"],setup(S,{emit:h}){const m=S,k=h,c=P(!1),I=E(()=>m.series.map(x=>({name:x.name||"Данные",data:(x.data||[]).map(w=>Number(w)||0)}))),M=E(()=>({colors:m.colors,chart:{fontFamily:"Inter, system-ui, sans-serif",type:"bar",toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:m.animationSpeed,animateGradually:{enabled:!0,delay:100},dynamicAnimation:{enabled:!0,speed:400}},events:{dataPointSelection:(x,w,b)=>{k("click",{seriesIndex:b.seriesIndex,dataPointIndex:b.dataPointIndex,category:m.categories[b.dataPointIndex],value:b.w.globals.series[b.seriesIndex][b.dataPointIndex]})},dataPointMouseEnter:function(x){x&&x.target&&(x.target.style.cursor="pointer")}}},plotOptions:{bar:{horizontal:m.horizontal,columnWidth:m.columnWidth,borderRadius:m.borderRadius,borderRadiusApplication:"end",distributed:m.series.length===1&&m.colors.length>1,dataLabels:{position:"top"}}},dataLabels:{enabled:m.showDataLabels,offsetY:-20,style:{fontSize:"12px",fontWeight:600,colors:["#6B7280"]}},stroke:{show:!0,width:4,colors:["transparent"]},xaxis:{categories:m.categories,axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{fontSize:"13px",fontWeight:500,colors:"#6B7280",fontFamily:"Inter, system-ui, sans-serif"},rotate:m.horizontal?0:-45,rotateAlways:!1,trim:!1}},legend:{show:m.showLegend,position:"top",horizontalAlign:"left",fontFamily:"Inter, system-ui, sans-serif",fontSize:"14px",fontWeight:500,markers:{radius:12}},yaxis:{title:{text:m.yAxisTitle,style:{fontSize:"13px",fontWeight:600,color:"#6B7280",fontFamily:"Inter, system-ui, sans-serif"}},labels:{formatter:function(x){return Math.round(x)},style:{fontSize:"13px",fontWeight:500,colors:"#6B7280",fontFamily:"Inter, system-ui, sans-serif"}}},grid:{yaxis:{lines:{show:!0}},xaxis:{lines:{show:!1}},borderColor:"#E5E7EB",strokeDashArray:4},fill:{opacity:1,type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.25,gradientToColors:void 0,inverseColors:!1,opacityFrom:.95,opacityTo:.75,stops:[0,100]}},tooltip:{enabled:!0,shared:!0,intersect:!1,theme:"light",style:{fontSize:"13px",fontFamily:"Inter, system-ui, sans-serif"},x:{show:!0,formatter:function(x){return x}},y:{formatter:m.formatTooltip||function(x){return x.toString()}},marker:{show:!0}},states:{hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.1}}},responsive:[{breakpoint:640,options:{chart:{height:250},xaxis:{labels:{rotate:-90,style:{fontSize:"11px"}}}}}]}));return Ut(()=>m.series,(x,w)=>{JSON.stringify(x),JSON.stringify(w)},{deep:!0}),et(()=>{c.value=!0}),(x,w)=>{const b=jt;return s(),r("div",Jr,[t("div",{id:S.chartId,class:"-ml-5 min-w-[500px] xl:min-w-full pl-2"},[a(b,null,{fallback:y(()=>[t("div",{class:"flex justify-center items-center",style:nt({height:S.height+"px"})},[...w[0]||(w[0]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])],4)]),default:y(()=>[c.value?(s(),v(A(It),{key:0,type:"bar",height:S.height,options:M.value,series:I.value},null,8,["height","options","series"])):D("",!0)]),_:1})],8,Xr)])}}},At=W(Kr,[["__scopeId","data-v-c7ea2314"]]),to={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},eo={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},so={class:"text-title-md2 font-bold text-black dark:text-white"},ro={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mt-1"},oo={key:0},no={class:"grid grid-cols-1 gap-4 md:grid-cols-4 mb-6"},ao={class:"flex items-center gap-4"},io={class:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10"},lo={class:"text-2xl font-bold text-black dark:text-white"},co={class:"flex items-center gap-4"},uo={class:"flex h-12 w-12 items-center justify-center rounded-full bg-success/10"},go={class:"text-2xl font-bold text-black dark:text-white"},mo={class:"flex items-center gap-4"},xo={class:"flex h-12 w-12 items-center justify-center rounded-full bg-warning/10"},ho={class:"text-2xl font-bold text-black dark:text-white"},po={class:"flex items-center gap-4"},fo={class:"flex h-12 w-12 items-center justify-center rounded-full bg-info/10"},_o={class:"text-2xl font-bold text-black dark:text-white"},yo={class:"grid grid-cols-1 gap-6 xl:grid-cols-2 mb-6"},bo={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},vo={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center justify-between"},wo={class:"flex items-center gap-3"},ko={class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},$o={class:"p-6"},Co={key:0,class:"flex justify-center py-16"},Io={key:1,class:"flex flex-col items-center justify-center py-16 text-center"},jo={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},Do={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center justify-between flex-wrap gap-3"},So={class:"flex items-center gap-3"},Mo={class:"h-10 w-10 rounded-lg bg-success/10 flex items-center justify-center"},Bo={class:"flex items-center gap-3"},Lo={class:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg"},To=["onClick"],Ao={class:"p-6"},Ho={key:0,class:"flex justify-center py-16"},Fo={key:1,class:"flex flex-col items-center justify-center py-16 text-center"},Vo={class:"grid grid-cols-1 gap-6 xl:grid-cols-2 mb-6"},Ro={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},Eo={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center justify-between"},No={class:"flex items-center gap-3"},Uo={class:"h-10 w-10 rounded-lg bg-info/10 flex items-center justify-center"},Po={class:"p-6"},Zo={key:0,class:"flex justify-center py-8"},zo={key:1,class:"flex flex-col items-center justify-center py-8 text-center"},Oo={key:2,class:"space-y-4"},Go=["onClick"],Wo={class:"flex-1 min-w-0"},qo={class:"font-medium text-black dark:text-white truncate"},Qo={class:"text-xs text-gray-500"},Yo={class:"text-right flex-shrink-0"},Jo={class:"text-lg font-bold text-info"},Xo={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},Ko={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex justify-between items-center"},tn={class:"flex items-center gap-3"},en={class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},sn={class:"p-6"},rn={key:0,class:"flex justify-center py-8"},on={key:1,class:"text-center text-gray-500 py-4"},nn={key:2,class:"flex flex-col gap-3"},an={class:"flex justify-between items-start mb-2"},ln={class:"font-bold text-black dark:text-white"},dn={class:"text-xs text-gray-500"},cn={class:"text-xs font-medium px-2 py-0.5 rounded-full bg-primary/10 text-primary"},un={class:"flex items-center justify-between text-xs mb-1"},gn={class:"font-medium text-primary"},mn={class:"relative h-1.5 w-full rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden"},xn={class:"mt-2 text-right"},hn={class:"text-xs text-gray-400"},pn={class:"grid grid-cols-1 gap-6 xl:grid-cols-3 mb-6"},fn={class:"xl:col-span-2 rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},_n={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex justify-between items-center"},yn={class:"flex items-center gap-3"},bn={class:"h-10 w-10 rounded-lg bg-success/10 flex items-center justify-center"},vn={class:"p-6"},wn={key:0,class:"flex justify-center py-8"},kn={key:1,class:"text-center text-gray-500 py-4"},$n={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Cn={class:"flex items-center justify-between"},In={class:"text-sm font-bold text-primary bg-primary/10 px-2 py-0.5 rounded"},jn={class:"text-sm font-medium text-black dark:text-white truncate"},Dn={class:"flex items-center gap-2 text-xs text-gray-500"},Sn={key:0,class:"flex items-center gap-1 border-l border-gray-300 pl-2 ml-1"},Mn={key:0,class:"rounded-lg bg-warning/5 border border-warning/30 shadow-md overflow-hidden"},Bn={class:"border-b border-warning/30 py-4 px-6 flex justify-between items-center"},Ln={class:"flex items-center gap-3"},Tn={class:"h-10 w-10 rounded-lg bg-warning/10 flex items-center justify-center"},An={class:"bg-warning text-white text-xs px-2 py-0.5 rounded-full"},Hn={class:"p-6"},Fn={class:"flex flex-col gap-3"},Vn={class:"flex items-center gap-3"},Rn={class:"font-medium text-black dark:text-white text-sm"},En={class:"text-xs text-gray-500"},Nn={class:"text-right"},Un={key:1,class:"rounded-lg bg-danger/5 border border-danger/30 shadow-md overflow-hidden"},Pn={class:"border-b border-danger/30 py-4 px-6"},Zn={class:"flex items-center gap-3"},zn={class:"h-10 w-10 rounded-lg bg-danger/10 flex items-center justify-center"},On={class:"p-6"},Gn={class:"space-y-3"},Wn={__name:"DashboardManager",setup(S){const h=Dt(),{user:m}=dt(),{authFetch:k}=ct(),c=P(null),I=P(!0),M=P("months"),x=P(!1),w=[{value:"months",label:"Месяцы"},{value:"quarters",label:"Кварталы"},{value:"years",label:"Годы"}],b=new Date().toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),G=async()=>{I.value=!0;try{const n=await k("/api/manager/dashboard");n&&(c.value=n)}catch(n){console.error("Failed to fetch manager dashboard stats:",n)}finally{I.value=!1}},z=n=>{h.push(n)},j=n=>{M.value!==n&&(x.value=!0,setTimeout(()=>{M.value=n,setTimeout(()=>{x.value=!1},100)},250))},u=E(()=>{const n=c.value?.studentsByCourse||[];return{series:n.map(e=>Number(e.count)||0),labels:n.map(e=>e.name||"Не указано")}}),H=E(()=>{const n=c.value?.certificatesByMonth||[],e=["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"];return{series:[{name:"Сертификаты",data:n.map($=>Number($.count)||0)}],categories:n.map($=>{const[g,d]=$.month.split("-");return e[parseInt(d)-1]+" "+g.slice(2)}),rawData:n}}),N=E(()=>{const n=H.value.rawData||[],e=new Map;n.forEach(g=>{const[d,R]=g.month.split("-"),V=Math.ceil(parseInt(R)/3),U=`${d}-Q${V}`;e.has(U)||e.set(U,{count:0,year:d,quarter:V}),e.get(U).count+=Number(g.count)||0});const $=Array.from(e.entries()).sort((g,d)=>g[0].localeCompare(d[0])).map(([g,d])=>({label:`Q${d.quarter} ${d.year.slice(2)}`,count:d.count}));return{series:[{name:"Сертификаты",data:$.map(g=>g.count)}],categories:$.map(g=>g.label)}}),Z=E(()=>{const n=H.value.rawData||[],e=new Map;n.forEach(g=>{const[d]=g.month.split("-");e.has(d)||e.set(d,0),e.set(d,e.get(d)+(Number(g.count)||0))});const $=Array.from(e.entries()).sort((g,d)=>g[0].localeCompare(d[0])).map(([g,d])=>({year:g,count:d}));return{series:[{name:"Сертификаты",data:$.map(g=>g.count)}],categories:$.map(g=>g.year)}}),q=E(()=>{switch(M.value){case"quarters":return N.value;case"years":return Z.value;default:return H.value}}),O=n=>{console.log("Clicked on course:",n.label)},J=n=>new Date(n).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),f=n=>new Date(n).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),i=n=>new Date(n).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"}),Q=n=>({theory:"Лекция",practice:"Практика",assessment:"Тест",other:"Другое"})[n]||n,K=n=>{const e={theory:"bg-primary/10 text-primary",practice:"bg-success/10 text-success",assessment:"bg-warning/10 text-warning",other:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"};return e[n]||e.other},F=n=>{const e=Math.ceil((new Date(n)-new Date)/864e5);return e<=1?"bg-danger animate-pulse":e<=3?"bg-warning":"bg-success"},Y=n=>n===0?"bg-gradient-to-br from-yellow-400 to-yellow-600 text-white":n===1?"bg-gradient-to-br from-gray-300 to-gray-500 text-white":n===2?"bg-gradient-to-br from-orange-400 to-orange-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400";return et(()=>{G()}),(n,e)=>{const $=_t,g=it,d=lt,R=yt,V=$t,U=ft,st=Lt,rt=Tt,l=vt,at=At,ot=pt,gt=ht,mt=ut,xt=wt;return s(),r("div",to,[t("div",eo,[t("div",null,[t("h2",so," Добрый день, "+o(A(m)?.name||"Менеджер")+"! ",1),t("p",ro,[C(o(A(b))+" ",1),c.value?.activeGroups>0?(s(),r("span",oo," • В работе "+o(c.value.activeGroups)+" групп(ы) ",1)):D("",!0)])]),a(d,{to:"/groups"},{default:y(()=>[a(g,{class:"flex items-center gap-2"},{default:y(()=>[a($,{class:"w-5 h-5"}),e[4]||(e[4]=C(" Все группы ",-1))]),_:1})]),_:1})]),t("div",no,[t("div",{class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:e[0]||(e[0]=p=>z("/groups"))},[t("div",ao,[t("div",io,[a($,{class:"w-6 h-6 text-primary"})]),t("div",null,[e[5]||(e[5]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Активные группы ",-1)),t("p",lo,o(c.value?.activeGroups||0),1)])])]),t("div",{class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:e[1]||(e[1]=p=>z("/groups"))},[t("div",co,[t("div",uo,[a(R,{class:"w-6 h-6 text-success"})]),t("div",null,[e[6]||(e[6]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Студенты на курсах ",-1)),t("p",go,o(c.value?.studentsOnCourses||0),1)])])]),t("div",{class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:e[2]||(e[2]=p=>z("/schedule"))},[t("div",mo,[t("div",xo,[a(V,{class:"w-6 h-6 text-warning"})]),t("div",null,[e[7]||(e[7]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Тесты сегодня ",-1)),t("p",ho,o(c.value?.testsToday||0),1)])])]),t("div",{class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:e[3]||(e[3]=p=>z("/certificates"))},[t("div",po,[t("div",fo,[a(U,{class:"w-6 h-6 text-info"})]),t("div",null,[e[8]||(e[8]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," К выдаче сертификатов ",-1)),t("p",_o,o(c.value?.certificatesPending||0),1)])])])]),t("div",yo,[t("div",bo,[t("div",vo,[t("div",wo,[t("div",ko,[a(st,{class:"w-5 h-5 text-primary"})]),e[9]||(e[9]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Студенты по курсам ",-1))]),a(d,{to:"/groups",class:"text-sm text-primary hover:underline"},{default:y(()=>[...e[10]||(e[10]=[C(" Все курсы ",-1)])]),_:1})]),t("div",$o,[I.value?(s(),r("div",Co,[...e[11]||(e[11]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):u.value.series.length?(s(),v(rt,{key:2,"chart-id":"students-by-course",series:u.value.series,labels:u.value.labels,height:350,"legend-position":"bottom",onClick:O},null,8,["series","labels"])):(s(),r("div",Io,[a($,{class:"h-12 w-12 text-gray-300 mb-3"}),e[12]||(e[12]=t("p",{class:"text-sm text-gray-500"},"Нет данных о студентах",-1))]))])]),t("div",jo,[t("div",Do,[t("div",So,[t("div",Mo,[a(l,{class:"w-5 h-5 text-success"})]),e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Сертификаты ",-1))]),t("div",Bo,[t("div",Lo,[(s(),r(L,null,T(w,p=>t("button",{key:p.value,class:B(["px-3 py-1.5 rounded-md text-xs font-medium transition-all duration-300",M.value===p.value?"bg-success text-white shadow-md transform scale-105":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"]),onClick:tt=>j(p.value)},o(p.label),11,To)),64))]),a(d,{to:"/certificates",class:"text-sm text-primary hover:underline whitespace-nowrap"},{default:y(()=>[...e[14]||(e[14]=[C(" Все сертификаты ",-1)])]),_:1})])]),t("div",Ao,[I.value?(s(),r("div",Ho,[...e[15]||(e[15]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):q.value.series[0]?.data?.length?(s(),r("div",{key:2,class:B(["transition-opacity duration-500",x.value?"opacity-50":"opacity-100"])},[(s(),v(at,{key:M.value,"chart-id":"certificates-chart-manager",series:q.value.series,categories:q.value.categories,colors:["#10B981"],height:320,"y-axis-title":"Количество","animation-speed":800},null,8,["series","categories"]))],2)):(s(),r("div",Fo,[a(U,{class:"h-12 w-12 text-gray-300 mb-3"}),e[16]||(e[16]=t("p",{class:"text-sm text-gray-500"},"Нет данных о сертификатах",-1))]))])])]),t("div",Vo,[t("div",Ro,[t("div",Eo,[t("div",No,[t("div",Uo,[a(ot,{class:"w-5 h-5 text-info"})]),e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Популярные курсы ",-1))]),a(d,{to:"/groups",class:"text-sm text-primary hover:underline"},{default:y(()=>[...e[18]||(e[18]=[C(" Все курсы ",-1)])]),_:1})]),t("div",Po,[I.value?(s(),r("div",Zo,[...e[19]||(e[19]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):c.value?.topCourses?.length?(s(),r("div",Oo,[(s(!0),r(L,null,T(c.value.topCourses,(p,tt)=>(s(),r("div",{key:p.id,class:"flex items-center gap-4 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:kt=>z(`/groups?course=${p.id}`)},[t("span",{class:B(["flex h-8 w-8 items-center justify-center rounded-full text-sm font-bold flex-shrink-0",Y(tt)])},o(tt+1),3),t("div",Wo,[t("p",qo,o(p.name),1),t("p",Qo,o(p.code),1)]),t("div",Yo,[t("p",Jo,o(p.students_count),1),e[21]||(e[21]=t("p",{class:"text-xs text-gray-500"},"студентов",-1))])],8,Go))),128))])):(s(),r("div",zo,[a(ot,{class:"h-12 w-12 text-gray-300 mb-3"}),e[20]||(e[20]=t("p",{class:"text-sm text-gray-500"},"Нет данных о курсах",-1))]))])]),t("div",Xo,[t("div",Ko,[t("div",tn,[t("div",en,[a($,{class:"w-5 h-5 text-primary"})]),e[22]||(e[22]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Группы в работе ",-1))]),a(d,{to:"/groups",class:"text-sm text-primary hover:underline"},{default:y(()=>[...e[23]||(e[23]=[C(" Все группы ",-1)])]),_:1})]),t("div",sn,[I.value?(s(),r("div",rn,[...e[24]||(e[24]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):c.value?.groups?.length?(s(),r("div",nn,[(s(!0),r(L,null,T(c.value.groups,p=>(s(),v(d,{key:p.id,to:`/groups/${p.id}`,class:"block rounded-lg border border-gray-200 dark:border-gray-700 p-4 transition-all hover:bg-gray-50 hover:border-primary dark:hover:bg-gray-800 hover:scale-[1.01]"},{default:y(()=>[t("div",an,[t("div",null,[t("h4",ln,o(p.code),1),t("p",dn,o(p.course_name),1)]),t("span",cn,o(p.student_count)+" студ. ",1)]),t("div",un,[e[25]||(e[25]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Прогресс группы",-1)),t("span",gn,o(p.progress)+"%",1)]),t("div",mn,[t("div",{class:"absolute left-0 h-full rounded-full bg-primary transition-all duration-1000",style:nt({width:`${p.progress}%`})},null,4)]),t("div",xn,[t("span",hn,"До "+o(i(p.end_date)),1)])]),_:2},1032,["to"]))),128))])):(s(),r("div",on," Нет активных групп "))])])]),t("div",pn,[t("div",fn,[t("div",_n,[t("div",yn,[t("div",bn,[a(gt,{class:"w-5 h-5 text-success"})]),e[26]||(e[26]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Сегодня ",-1))]),a(d,{to:"/schedule",class:"text-sm text-primary hover:underline"},{default:y(()=>[...e[27]||(e[27]=[C(" Календарь ",-1)])]),_:1})]),t("div",vn,[I.value?(s(),r("div",wn,[...e[28]||(e[28]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):c.value?.todaySchedule?.length?(s(),r("div",$n,[(s(!0),r(L,null,T(c.value.todaySchedule,p=>(s(),r("div",{key:p.id,class:"flex flex-col gap-2 p-3 rounded-lg border border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[t("div",Cn,[t("span",In,o(J(p.start_time)),1),t("span",{class:B(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium",K(p.event_type)])},o(Q(p.event_type)),3)]),t("h5",jn,o(p.title),1),t("div",Dn,[a($,{class:"w-3 h-3"}),t("span",null,o(p.group_code),1),p.instructor_name?(s(),r("span",Sn," • "+o(p.instructor_name),1)):D("",!0)])]))),128))])):(s(),r("div",kn," Нет занятий на сегодня "))])]),c.value?.groupsEndingSoon?.length?(s(),r("div",Mn,[t("div",Bn,[t("div",Ln,[t("div",Tn,[a(mt,{class:"w-5 h-5 text-warning"})]),e[29]||(e[29]=t("h3",{class:"text-lg font-semibold text-warning"}," Завершаются скоро ",-1)),t("span",An,o(c.value.groupsEndingSoon.length),1)])]),t("div",Hn,[t("div",Fn,[(s(!0),r(L,null,T(c.value.groupsEndingSoon,p=>(s(),r("div",{key:p.id,class:"flex items-center justify-between p-3 rounded-lg bg-white dark:bg-boxdark border border-gray-200 dark:border-gray-700"},[t("div",Vn,[t("span",{class:B(["flex h-2.5 w-2.5 rounded-full",F(p.end_date)])},null,2),t("div",null,[t("h5",Rn,o(p.code),1),t("p",En,o(f(p.end_date)),1)])]),t("div",Nn,[a(d,{to:`/groups/${p.id}/certificates`,class:"block text-xs text-white bg-primary hover:bg-primary/90 px-3 py-1 rounded-md transition-colors"},{default:y(()=>[...e[30]||(e[30]=[C(" Сертификаты ",-1)])]),_:1},8,["to"])])]))),128))])])])):c.value?.alerts?.length?(s(),r("div",Un,[t("div",Pn,[t("div",Zn,[t("div",zn,[a(xt,{class:"w-5 h-5 text-danger"})]),e[31]||(e[31]=t("h3",{class:"text-lg font-semibold text-danger"},"Требуют внимания",-1))])]),t("div",On,[t("ul",Gn,[(s(!0),r(L,null,T(c.value.alerts,(p,tt)=>(s(),r("li",{key:tt,class:"flex items-start gap-2 text-sm text-gray-700 dark:text-gray-300"},[e[32]||(e[32]=t("span",{class:"mt-1 h-1.5 w-1.5 rounded-full bg-danger flex-shrink-0"},null,-1)),C(" "+o(p),1)]))),128))])])])):D("",!0)])])}}},qn=W(Wn,[["__scopeId","data-v-9edef435"]]),Qn={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Yn=St({__name:"InstructorIcon",setup(S){return(h,m)=>(s(),r("svg",Qn,[...m[0]||(m[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"},null,-1)])]))}}),Jn=Object.assign(Yn,{__name:"IconsInstructorIcon"}),Xn={},Kn={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ta(S,h){return s(),r("svg",Kn,[...h[0]||(h[0]=[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.5 3.25C4.25736 3.25 3.25 4.25736 3.25 5.5V18.5C3.25 19.7426 4.25736 20.75 5.5 20.75H18.5001C19.7427 20.75 20.7501 19.7426 20.7501 18.5V5.5C20.7501 4.25736 19.7427 3.25 18.5001 3.25H5.5ZM4.75 5.5C4.75 5.08579 5.08579 4.75 5.5 4.75H18.5001C18.9143 4.75 19.2501 5.08579 19.2501 5.5V18.5C19.2501 18.9142 18.9143 19.25 18.5001 19.25H5.5C5.08579 19.25 4.75 18.9142 4.75 18.5V5.5ZM6.25005 9.7143C6.25005 9.30008 6.58583 8.9643 7.00005 8.9643L17 8.96429C17.4143 8.96429 17.75 9.30008 17.75 9.71429C17.75 10.1285 17.4143 10.4643 17 10.4643L7.00005 10.4643C6.58583 10.4643 6.25005 10.1285 6.25005 9.7143ZM6.25005 14.2857C6.25005 13.8715 6.58583 13.5357 7.00005 13.5357H17C17.4143 13.5357 17.75 13.8715 17.75 14.2857C17.75 14.6999 17.4143 15.0357 17 15.0357H7.00005C6.58583 15.0357 6.25005 14.6999 6.25005 14.2857Z",fill:"currentColor"},null,-1)])])}const ea=Object.assign(W(Xn,[["render",ta]]),{__name:"IconsListIcon"}),sa={},ra={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function oa(S,h){return s(),r("svg",ra,[...h[0]||(h[0]=[t("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.70186 12.0001C3.70186 7.41711 7.41711 3.70186 12.0001 3.70186C16.5831 3.70186 20.2984 7.41711 20.2984 12.0001C20.2984 16.5831 16.5831 20.2984 12.0001 20.2984C7.41711 20.2984 3.70186 16.5831 3.70186 12.0001ZM12.0001 1.90186C6.423 1.90186 1.90186 6.423 1.90186 12.0001C1.90186 17.5772 6.423 22.0984 12.0001 22.0984C17.5772 22.0984 22.0984 17.5772 22.0984 12.0001C22.0984 6.423 17.5772 1.90186 12.0001 1.90186ZM15.6197 10.7395C15.9712 10.388 15.9712 9.81819 15.6197 9.46672C15.2683 9.11525 14.6984 9.11525 14.347 9.46672L11.1894 12.6243L9.6533 11.0883C9.30183 10.7368 8.73198 10.7368 8.38051 11.0883C8.02904 11.4397 8.02904 12.0096 8.38051 12.3611L10.553 14.5335C10.7217 14.7023 10.9507 14.7971 11.1894 14.7971C11.428 14.7971 11.657 14.7023 11.8257 14.5335L15.6197 10.7395Z",fill:"currentColor"},null,-1)])])}const na=Object.assign(W(sa,[["render",oa]]),{__name:"IconsSuccessIcon"}),aa={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},ia={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},la={class:"text-title-md2 font-bold text-black dark:text-white"},da={class:"text-sm font-medium text-gray-500 dark:text-gray-400 mt-1"},ca={class:"grid grid-cols-1 gap-4 md:grid-cols-4 mb-6"},ua={class:"flex items-center gap-4"},ga={class:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10"},ma={class:"flex items-center gap-2"},xa={class:"text-2xl font-bold text-black dark:text-white"},ha={key:0,class:"text-xs font-medium text-success"},pa={class:"flex items-center gap-4"},fa={class:"flex h-12 w-12 items-center justify-center rounded-full bg-success/10"},_a={class:"text-2xl font-bold text-black dark:text-white"},ya={class:"flex items-center gap-4"},ba={class:"flex h-12 w-12 items-center justify-center rounded-full bg-warning/10"},va={class:"text-2xl font-bold text-black dark:text-white"},wa={class:"flex items-center gap-4"},ka={class:"flex h-12 w-12 items-center justify-center rounded-full bg-info/10"},$a={class:"text-2xl font-bold text-black dark:text-white"},Ca={class:"grid grid-cols-1 gap-6 xl:grid-cols-2 mb-6"},Ia={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},ja={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center justify-between"},Da={class:"flex items-center gap-3"},Sa={class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},Ma={class:"p-6"},Ba={key:0,class:"flex justify-center py-16"},La={key:1,class:"flex flex-col items-center justify-center py-16 text-center"},Ta={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},Aa={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center justify-between flex-wrap gap-3"},Ha={class:"flex items-center gap-3"},Fa={class:"h-10 w-10 rounded-lg bg-success/10 flex items-center justify-center"},Va={class:"flex items-center gap-3"},Ra={class:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg"},Ea=["onClick"],Na={class:"p-6"},Ua={key:0,class:"flex justify-center py-16"},Pa={key:1,class:"flex flex-col items-center justify-center py-16 text-center"},Za={class:"grid grid-cols-1 gap-6 xl:grid-cols-2 mb-6"},za={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},Oa={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center justify-between"},Ga={class:"flex items-center gap-3"},Wa={class:"h-10 w-10 rounded-lg bg-warning/10 flex items-center justify-center"},qa={class:"p-6"},Qa={key:0,class:"flex justify-center py-8"},Ya={key:1,class:"flex flex-col items-center justify-center py-8 text-center"},Ja={key:2,class:"overflow-x-auto"},Xa={class:"w-full text-sm"},Ka={class:"py-3"},ti={class:"py-3"},ei={class:"flex items-center gap-3"},si={class:"h-8 w-8 rounded-full bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center text-white text-xs font-bold"},ri={class:"font-medium text-black dark:text-white truncate max-w-[150px]"},oi={class:"py-3 text-right"},ni={class:"font-bold text-warning"},ai={class:"py-3 text-right text-gray-600 dark:text-gray-400"},ii={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},li={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center justify-between"},di={class:"flex items-center gap-3"},ci={class:"h-10 w-10 rounded-lg bg-info/10 flex items-center justify-center"},ui={class:"flex gap-2"},gi={class:"p-6"},mi={key:0,class:"flex justify-center py-8"},xi={key:1,class:"flex flex-col items-center justify-center py-8 text-center"},hi={key:2,class:"space-y-4"},pi=["onClick"],fi={class:"flex-1 min-w-0"},_i={class:"font-medium text-black dark:text-white truncate"},yi={class:"text-xs text-gray-500"},bi={class:"text-right flex-shrink-0"},vi={class:"text-lg font-bold text-info"},wi={class:"text-xs text-gray-500"},ki={class:"grid grid-cols-1 gap-6 xl:grid-cols-3 mb-6"},$i={class:"xl:col-span-2 rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},Ci={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center gap-3"},Ii={class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},ji={class:"p-6"},Di={key:0,class:"flex justify-center py-8"},Si={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Mi={class:"text-2xl font-bold text-black dark:text-white mt-1"},Bi={class:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center"},Li={class:"flex items-center justify-between p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},Ti={class:"text-2xl font-bold text-black dark:text-white mt-1"},Ai={class:"h-12 w-12 rounded-full bg-success/10 flex items-center justify-center"},Hi={class:"flex items-center justify-between p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},Fi={class:"text-2xl font-bold text-black dark:text-white mt-1"},Vi={class:"h-12 w-12 rounded-full bg-warning/10 flex items-center justify-center"},Ri={class:"text-2xl font-bold text-black dark:text-white mt-1"},Ei={class:"h-12 w-12 rounded-full bg-info/10 flex items-center justify-center"},Ni={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},Ui={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex items-center gap-3"},Pi={class:"h-10 w-10 rounded-lg bg-warning/10 flex items-center justify-center"},Zi={class:"p-6"},zi={key:0,class:"flex justify-center py-8"},Oi={key:1,class:"flex flex-col items-center justify-center py-8 text-center"},Gi={class:"h-12 w-12 rounded-full bg-success/10 flex items-center justify-center mb-3"},Wi={key:2,class:"flex flex-col gap-3"},qi={class:"flex-1"},Qi={class:"text-sm font-medium text-black dark:text-white"},Yi={key:0,class:"text-xs text-primary hover:underline cursor-pointer mt-1"},Ji={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden mb-6"},Xi={class:"border-b border-gray-200 dark:border-gray-700 py-4 px-6 flex justify-between items-center"},Ki={class:"flex items-center gap-3"},tl={class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},el={class:"p-6"},sl={key:0,class:"flex justify-center py-8"},rl={key:1,class:"text-center text-gray-500 py-4"},ol={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},nl={class:"flex-1 min-w-0"},al={class:"text-sm text-black dark:text-white truncate"},il={class:"font-medium"},ll={class:"text-gray-600 dark:text-gray-400"},dl={class:"text-xs text-gray-500 mt-0.5"},cl={__name:"DashboardAdmin",setup(S){const{user:h}=dt(),{authFetch:m}=ct(),k=Dt(),c=P(null),I=P(!0),M=P("groups"),x=new Date().toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),w=P("months"),b=P(!1),G=[{value:"months",label:"Месяцы"},{value:"quarters",label:"Кварталы"},{value:"years",label:"Годы"}],z=n=>{w.value!==n&&(b.value=!0,setTimeout(()=>{w.value=n,setTimeout(()=>{b.value=!1},100)},250))},j=E(()=>{const n=c.value?.studentsByOrganization||[];return{series:n.map(e=>Number(e.count)||0),labels:n.map(e=>e.name||"Не указано")}}),u=E(()=>{const n=c.value?.certificatesByMonth||[],e=["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"];return{series:[{name:"Сертификаты",data:n.map($=>Number($.count)||0)}],categories:n.map($=>{const[g,d]=$.month.split("-");return e[parseInt(d)-1]+" "+g.slice(2)}),rawData:n}}),H=E(()=>{const n=u.value.rawData||[],e=new Map;n.forEach(g=>{const[d,R]=g.month.split("-"),V=Math.ceil(parseInt(R)/3),U=`${d}-Q${V}`;e.has(U)||e.set(U,{count:0,year:d,quarter:V}),e.get(U).count+=Number(g.count)||0});const $=Array.from(e.entries()).sort((g,d)=>g[0].localeCompare(d[0])).map(([g,d])=>({label:`Q${d.quarter} ${d.year.slice(2)}`,count:d.count}));return{series:[{name:"Сертификаты",data:$.map(g=>g.count)}],categories:$.map(g=>g.label)}}),N=E(()=>{const n=u.value.rawData||[],e=new Map;n.forEach(g=>{const[d]=g.month.split("-");e.has(d)||e.set(d,0),e.set(d,e.get(d)+(Number(g.count)||0))});const $=Array.from(e.entries()).sort((g,d)=>g[0].localeCompare(d[0])).map(([g,d])=>({year:g,count:d}));return{series:[{name:"Сертификаты",data:$.map(g=>g.count)}],categories:$.map(g=>g.year)}}),Z=E(()=>{switch(w.value){case"quarters":return H.value;case"years":return N.value;default:return u.value}}),q=E(()=>M.value==="groups"?c.value?.topCoursesByGroups||[]:c.value?.topCoursesByStudents||[]),O=n=>{k.push(n)},J=n=>{console.log("Clicked on organization:",n.label)},f=async()=>{I.value=!0;try{const n=await m("/api/admin/dashboard");n&&(c.value=n)}catch(n){console.error("Failed to fetch admin dashboard stats:",n)}finally{I.value=!1}},i=n=>{const e=new Date(n),g=new Date-e,d=Math.floor(g/6e4);if(d<1)return"только что";if(d<60)return`${d} мин назад`;const R=Math.floor(d/60);if(R<24)return`${R} ч назад`;const V=Math.floor(R/24);return V<7?`${V} дн назад`:e.toLocaleDateString("ru-RU")},Q=n=>{const e={warning:"bg-warning/10 border border-warning/30",info:"bg-info/10 border border-info/30",error:"bg-danger/10 border border-danger/30",success:"bg-success/10 border border-success/30"};return e[n]||e.info},K=n=>n.includes("создал")||n.includes("добавил")?"bg-success":n.includes("удалил")?"bg-danger":n.includes("изменил")||n.includes("обновил")?"bg-warning":n.includes("вход")?"bg-primary":"bg-gray-400",F=n=>n===0?"bg-gradient-to-br from-yellow-400 to-yellow-600 text-white":n===1?"bg-gradient-to-br from-gray-300 to-gray-500 text-white":n===2?"bg-gradient-to-br from-orange-400 to-orange-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400",Y=n=>{if(!n)return"?";const e=n.split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():n.slice(0,2).toUpperCase()};return et(()=>{f()}),(n,e)=>{const $=Et,g=it,d=lt,R=_t,V=Jn,U=ft,st=Lt,rt=Tt,l=vt,at=At,ot=pt,gt=yt,mt=Gt,xt=Nt,p=ea,tt=Bt,kt=bt,Ht=ut,Ft=Mt,Vt=wt,Rt=na;return s(),r("div",aa,[t("div",ia,[t("div",null,[t("h2",la," Добро пожаловать, "+o(A(h)?.name||"Администратор")+"! ",1),t("p",da,o(A(x)),1)]),a(d,{to:"/settings"},{default:y(()=>[a(g,{variant:"outline",class:"flex items-center gap-2"},{default:y(()=>[a($,{class:"w-5 h-5"}),e[8]||(e[8]=C(" Настройки системы ",-1))]),_:1})]),_:1})]),t("div",ca,[t("div",{class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:e[0]||(e[0]=_=>O("/users?tab=students"))},[t("div",ua,[t("div",ga,[a(R,{class:"w-6 h-6 text-primary"})]),t("div",null,[e[9]||(e[9]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Всего студентов ",-1)),t("div",ma,[t("p",xa,o(c.value?.totalStudents||0),1),c.value?.studentsTrend?(s(),r("span",ha," +"+o(c.value.studentsTrend)+"% ",1)):D("",!0)])])])]),t("div",{class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:e[1]||(e[1]=_=>O("/programs"))},[t("div",pa,[t("div",fa,[a(V,{class:"w-6 h-6 text-success"})]),t("div",null,[e[10]||(e[10]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Преподаватели ",-1)),t("p",_a,o(c.value?.totalInstructors||0),1)])])]),t("div",{class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:e[2]||(e[2]=_=>O("/groups"))},[t("div",ya,[t("div",ba,[a(R,{class:"w-6 h-6 text-warning"})]),t("div",null,[e[11]||(e[11]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Активные группы ",-1)),t("p",va,o(c.value?.activeGroups||0),1)])])]),t("div",{class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:e[3]||(e[3]=_=>O("/certificates"))},[t("div",wa,[t("div",ka,[a(U,{class:"w-6 h-6 text-info"})]),t("div",null,[e[12]||(e[12]=t("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," Сертификаты за месяц ",-1)),t("p",$a,o(c.value?.certificatesThisMonth||0),1)])])])]),t("div",Ca,[t("div",Ia,[t("div",ja,[t("div",Da,[t("div",Sa,[a(st,{class:"w-5 h-5 text-primary"})]),e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Студенты по организациям ",-1))]),a(d,{to:"/database?tab=organizations",class:"text-sm text-primary hover:underline"},{default:y(()=>[...e[14]||(e[14]=[C(" Все организации ",-1)])]),_:1})]),t("div",Ma,[I.value?(s(),r("div",Ba,[...e[15]||(e[15]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):j.value.series.length?(s(),v(rt,{key:2,"chart-id":"students-by-org",series:j.value.series,labels:j.value.labels,height:350,"legend-position":"bottom",onClick:J},null,8,["series","labels"])):(s(),r("div",La,[a(R,{class:"h-12 w-12 text-gray-300 mb-3"}),e[16]||(e[16]=t("p",{class:"text-sm text-gray-500"},"Нет данных об организациях",-1))]))])]),t("div",Ta,[t("div",Aa,[t("div",Ha,[t("div",Fa,[a(l,{class:"w-5 h-5 text-success"})]),e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Сертификаты ",-1))]),t("div",Va,[t("div",Ra,[(s(),r(L,null,T(G,_=>t("button",{key:_.value,class:B(["px-3 py-1.5 rounded-md text-xs font-medium transition-all duration-300",w.value===_.value?"bg-success text-white shadow-md transform scale-105":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"]),onClick:X=>z(_.value)},o(_.label),11,Ea)),64))]),a(d,{to:"/certificates",class:"text-sm text-primary hover:underline whitespace-nowrap"},{default:y(()=>[...e[18]||(e[18]=[C(" Все сертификаты ",-1)])]),_:1})])]),t("div",Na,[I.value?(s(),r("div",Ua,[...e[19]||(e[19]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):Z.value.series[0]?.data?.length?(s(),r("div",{key:2,class:B(["transition-opacity duration-500",b.value?"opacity-50":"opacity-100"])},[(s(),v(at,{key:w.value,"chart-id":"certificates-chart",series:Z.value.series,categories:Z.value.categories,colors:["#10B981"],height:320,"y-axis-title":"Количество","animation-speed":800},null,8,["series","categories"]))],2)):(s(),r("div",Pa,[a(U,{class:"h-12 w-12 text-gray-300 mb-3"}),e[20]||(e[20]=t("p",{class:"text-sm text-gray-500"},"Нет данных о сертификатах",-1))]))])])]),t("div",Za,[t("div",za,[t("div",Oa,[t("div",Ga,[t("div",Wa,[a(V,{class:"w-5 h-5 text-warning"})]),e[21]||(e[21]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Топ инструкторов по часам ",-1))]),a(d,{to:"/programs",class:"text-sm text-primary hover:underline"},{default:y(()=>[...e[22]||(e[22]=[C(" Все инструкторы ",-1)])]),_:1})]),t("div",qa,[I.value?(s(),r("div",Qa,[...e[23]||(e[23]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):c.value?.topInstructors?.length?(s(),r("div",Ja,[t("table",Xa,[e[25]||(e[25]=t("thead",null,[t("tr",{class:"text-left text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"pb-3 font-medium"},"#"),t("th",{class:"pb-3 font-medium"},"Инструктор"),t("th",{class:"pb-3 font-medium text-right"},"Часы"),t("th",{class:"pb-3 font-medium text-right"},"Занятий")])],-1)),t("tbody",null,[(s(!0),r(L,null,T(c.value.topInstructors,(_,X)=>(s(),r("tr",{key:_.id,class:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors"},[t("td",Ka,[t("span",{class:B(["flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold",F(X)])},o(X+1),3)]),t("td",ti,[t("div",ei,[t("div",si,o(Y(_.name)),1),t("span",ri,o(_.name),1)])]),t("td",oi,[t("span",ni,o(_.hours)+" ч",1)]),t("td",ai,o(_.lessonsCount),1)]))),128))])])])):(s(),r("div",Ya,[a(V,{class:"h-12 w-12 text-gray-300 mb-3"}),e[24]||(e[24]=t("p",{class:"text-sm text-gray-500"},"Нет данных об инструкторах",-1))]))])]),t("div",ii,[t("div",li,[t("div",di,[t("div",ci,[a(ot,{class:"w-5 h-5 text-info"})]),e[26]||(e[26]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Топ курсов ",-1))]),t("div",ui,[t("button",{class:B(["px-3 py-1 rounded-lg text-xs font-medium transition-colors",M.value==="groups"?"bg-primary text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"]),onClick:e[4]||(e[4]=_=>M.value="groups")}," По группам ",2),t("button",{class:B(["px-3 py-1 rounded-lg text-xs font-medium transition-colors",M.value==="students"?"bg-primary text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"]),onClick:e[5]||(e[5]=_=>M.value="students")}," По слушателям ",2)])]),t("div",gi,[I.value?(s(),r("div",mi,[...e[27]||(e[27]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):q.value?.length?(s(),r("div",hi,[(s(!0),r(L,null,T(q.value,(_,X)=>(s(),r("div",{key:_.id,class:"flex items-center gap-4 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:ml=>O(`/programs/${_.id}`)},[t("span",{class:B(["flex h-8 w-8 items-center justify-center rounded-full text-sm font-bold flex-shrink-0",F(X)])},o(X+1),3),t("div",fi,[t("p",_i,o(_.name),1),t("p",yi,o(_.code),1)]),t("div",bi,[t("p",vi,o(M.value==="groups"?_.groups_count:_.students_count),1),t("p",wi,o(M.value==="groups"?"групп":"слушателей"),1)])],8,pi))),128))])):(s(),r("div",xi,[a(ot,{class:"h-12 w-12 text-gray-300 mb-3"}),e[28]||(e[28]=t("p",{class:"text-sm text-gray-500"},"Нет данных о курсах",-1))]))])])]),t("div",ki,[t("div",$i,[t("div",Ci,[t("div",Ii,[a(l,{class:"w-5 h-5 text-primary"})]),e[29]||(e[29]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Статистика системы ",-1))]),t("div",ji,[I.value?(s(),r("div",Di,[...e[30]||(e[30]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):(s(),r("div",Si,[t("div",{class:"flex items-center justify-between p-4 rounded-lg bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer",onClick:e[6]||(e[6]=_=>O("/users"))},[t("div",null,[e[31]||(e[31]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Всего пользователей ",-1)),t("p",Mi,o(c.value?.totalUsers||0),1)]),t("div",Bi,[a(gt,{class:"w-6 h-6 text-primary"})])]),t("div",Li,[t("div",null,[e[32]||(e[32]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Зарегистрировано сегодня ",-1)),t("p",Ti,o(c.value?.todayRegistrations||0),1)]),t("div",Ai,[a(mt,{class:"w-6 h-6 text-success"})])]),t("div",Hi,[t("div",null,[e[33]||(e[33]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Активных сессий ",-1)),t("p",Fi,o(c.value?.activeSessions||0),1)]),t("div",Vi,[a(xt,{class:"w-6 h-6 text-warning"})])]),t("div",{class:"flex items-center justify-between p-4 rounded-lg bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors cursor-pointer",onClick:e[7]||(e[7]=_=>O("/activity-logs"))},[t("div",null,[e[34]||(e[34]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Логов сегодня ",-1)),t("p",Ri,o(c.value?.todayLogs||0),1)]),t("div",Ei,[a(p,{class:"w-6 h-6 text-info"})])])]))])]),t("div",Ni,[t("div",Ui,[t("div",Pi,[a(tt,{class:"w-5 h-5 text-warning"})]),e[35]||(e[35]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Системные уведомления ",-1))]),t("div",Zi,[I.value?(s(),r("div",zi,[...e[36]||(e[36]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):c.value?.systemAlerts?.length?(s(),r("div",Wi,[(s(!0),r(L,null,T(c.value.systemAlerts,(_,X)=>(s(),r("div",{key:X,class:B(["flex items-start gap-3 p-3 rounded-lg cursor-pointer transition-transform hover:scale-[1.02]",Q(_.type)])},[_.type==="warning"?(s(),v(Ht,{key:0,class:"w-5 h-5 text-warning flex-shrink-0"})):_.type==="info"?(s(),v(Ft,{key:1,class:"w-5 h-5 text-info flex-shrink-0"})):_.type==="error"?(s(),v(Vt,{key:2,class:"w-5 h-5 text-danger flex-shrink-0"})):(s(),v(Rt,{key:3,class:"w-5 h-5 text-success flex-shrink-0"})),t("div",qi,[t("p",Qi,o(_.message),1),_.action?(s(),r("p",Yi,o(_.action),1)):D("",!0)])],2))),128))])):(s(),r("div",Oi,[t("div",Gi,[a(kt,{class:"h-6 w-6 text-success"})]),e[37]||(e[37]=t("p",{class:"text-sm text-gray-500"},"Нет системных уведомлений",-1))]))])])]),t("div",Ji,[t("div",Xi,[t("div",Ki,[t("div",tl,[a(p,{class:"w-5 h-5 text-primary"})]),e[38]||(e[38]=t("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Последние действия ",-1))]),a(d,{to:"/activity-logs",class:"text-sm text-primary hover:underline"},{default:y(()=>[...e[39]||(e[39]=[C(" Все логи ",-1)])]),_:1})]),t("div",el,[I.value?(s(),r("div",sl,[...e[40]||(e[40]=[t("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):c.value?.recentActivities?.length?(s(),r("div",ol,[(s(!0),r(L,null,T(c.value.recentActivities,_=>(s(),r("div",{key:_.id,class:"flex items-center gap-4 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[t("span",{class:B(["flex h-2 w-2 rounded-full flex-shrink-0",K(_.action)])},null,2),t("div",nl,[t("p",al,[t("span",il,o(_.user_name),1),e[41]||(e[41]=t("span",{class:"text-gray-500 mx-1"},"•",-1)),t("span",ll,o(_.action),1)]),t("p",dl,o(i(_.created_at)),1)])]))),128))])):(s(),r("div",rl," Нет недавних действий "))])])])}}},ul=W(cl,[["__scopeId","data-v-b9f45082"]]),gl={key:4,class:"grid grid-cols-12 gap-4 md:gap-6"},Dl=St({__name:"index",setup(S){Pt({title:"Панель управления"});const{isStudent:h,isTeacher:m,isManager:k,isAdmin:c}=Wt();return(I,M)=>{const x=As,w=Or,b=qn,G=ul;return s(),r("div",null,[A(h)?(s(),v(x,{key:0})):A(m)?(s(),v(w,{key:1})):A(k)?(s(),v(b,{key:2})):A(c)?(s(),v(G,{key:3})):(s(),r("div",gl,[...M[0]||(M[0]=[Ct('<div class="col-span-12"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm"><h1 class="text-2xl font-bold text-gray-800 dark:text-white mb-4"> Панель управления </h1><p class="text-gray-600 dark:text-gray-400"> Welcome to TailAdmin Nuxt 4 Dashboard! </p></div></div><div class="col-span-12 lg:col-span-6"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm"><h2 class="text-lg font-semibold text-gray-800 dark:text-white mb-2"> Monthly Revenue </h2><p class="text-3xl font-bold text-brand-500">$24,780</p></div></div><div class="col-span-12 lg:col-span-6"><div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm"><h2 class="text-lg font-semibold text-gray-800 dark:text-white mb-2"> Total Orders </h2><p class="text-3xl font-bold text-success-500">1,234</p></div></div>',3)])]))])}}});export{Dl as default};
