import{_ as Se}from"./BMofnORk.js";import{v as be,c as C,a as t,F as Me,j as _e,t as y,n as ee,h as P,d as z,z as jt,o as x,r as H,f as vt,q as Be,g as Ue,k as he,w as J,b as K,x as q,A as re,G as dn,I as un,J as pt,i as Ce,D as Ye,$ as cn,E as Ge,O as fn,m as mn,y as _t,X as pn,W as gn}from"./GLV6bXvn.js";import{_ as vn}from"./DV0XJymg.js";import{_ as Re}from"./CyDLpZDf.js";import{u as We}from"./DlZaGH1J.js";import{u as tt}from"./DVL-QcDc.js";import{_ as hn}from"./BNigTcCY.js";import{_ as bn}from"./BKg9m4wI.js";import{_ as xn}from"./DCvMrdi-.js";import{u as st,w as kn}from"./BTp1RmNK.js";import{_ as yn}from"./Caj9Z7Wo.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const wn={class:"overflow-x-auto"},Cn={class:"w-full table-auto"},Dn={key:0},Mn={key:1},_n=["onClick"],En={class:"py-4 px-4"},Tn={class:"font-medium text-black dark:text-white"},$n={class:"py-4 px-4"},On={class:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800 dark:bg-meta-4 dark:text-gray-300"},Sn={class:"py-4 px-4 text-center"},In={class:"py-4 px-4"},An={class:"flex flex-col gap-1 text-sm"},jn={key:0,class:"flex items-center gap-2 text-gray-600 dark:text-gray-400"},Fn={key:1,class:"flex items-center gap-2 text-gray-600 dark:text-gray-400"},zn={key:2,class:"text-gray-400 dark:text-gray-500"},Pn={class:"py-4 px-4 text-center"},Nn={class:"flex items-center justify-center gap-2"},Hn=["onClick"],Ln=["onClick"],Bn=["onClick","disabled","title"],Yn=be({__name:"OrganizationTable",props:{organizations:{},loading:{type:Boolean}},emits:["edit","delete","view","download"],setup(a,{emit:o}){const e=o;return(b,c)=>(x(),C("div",wn,[t("table",Cn,[c[8]||(c[8]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-meta-4 text-left"},[t("th",{class:"py-4 px-4 font-medium text-black dark:text-white"}," Название "),t("th",{class:"py-4 px-4 font-medium text-black dark:text-white"},"Код"),t("th",{class:"py-4 px-4 font-medium text-black dark:text-white text-center"}," Слушатели "),t("th",{class:"py-4 px-4 font-medium text-black dark:text-white"}," Контакты "),t("th",{class:"py-4 px-4 font-medium text-black dark:text-white text-center"}," Статус "),t("th",{class:"py-4 px-4 font-medium text-black dark:text-white text-center"}," Действия ")])],-1)),t("tbody",null,[a.loading?(x(),C("tr",Dn,[...c[1]||(c[1]=[t("td",{colspan:"6",class:"py-10 text-center"},[t("div",{class:"flex items-center justify-center gap-2"},[t("svg",{class:"animate-spin h-5 w-5 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),t("span",{class:"text-gray-500 dark:text-gray-400"},"Загрузка...")])],-1)])])):a.organizations.length===0?(x(),C("tr",Mn,[...c[2]||(c[2]=[t("td",{colspan:"6",class:"py-10 text-center"},[t("div",{class:"flex flex-col items-center gap-3"},[t("div",{class:"h-16 w-16 rounded-full bg-gray-100 dark:bg-meta-4 flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])]),t("p",{class:"text-gray-500 dark:text-gray-400"}," Организации не найдены ")])],-1)])])):(x(!0),C(Me,{key:2},_e(a.organizations,u=>(x(),C("tr",{key:u.id,class:"border-b border-stroke dark:border-strokedark hover:bg-gray-50 dark:hover:bg-meta-4 transition-colors cursor-pointer",onClick:v=>e("view",u)},[t("td",En,[t("span",Tn,y(u.name),1)]),t("td",$n,[t("span",On,y(u.code),1)]),t("td",Sn,[t("span",{class:ee(["inline-flex items-center justify-center min-w-10 px-2 py-1 rounded-full text-sm font-semibold",u.studentsCount>0?"bg-primary/10 text-primary":"bg-gray-100 text-gray-500 dark:bg-meta-4 dark:text-gray-400"])},y(u.studentsCount),3)]),t("td",In,[t("div",An,[u.contactPhone?(x(),C("div",jn,[c[3]||(c[3]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),z(" "+y(u.contactPhone),1)])):P("",!0),u.contactEmail?(x(),C("div",Fn,[c[4]||(c[4]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),z(" "+y(u.contactEmail),1)])):P("",!0),!u.contactPhone&&!u.contactEmail?(x(),C("span",zn," Не указаны ")):P("",!0)])]),t("td",Pn,[t("span",{class:ee(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium",u.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"])},y(u.isActive?"Активна":"Неактивна"),3)]),t("td",{class:"py-4 px-4",onClick:c[0]||(c[0]=jt(()=>{},["stop"]))},[t("div",Nn,[t("button",{onClick:v=>e("edit",u),class:"p-2 rounded-lg text-gray-500 hover:text-primary hover:bg-primary/10 transition-all",title:"Редактировать"},[...c[5]||(c[5]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Hn),t("button",{onClick:v=>e("download",u),class:"p-2 rounded-lg text-gray-500 hover:text-green-600 hover:bg-green-100 dark:hover:bg-green-900/30 transition-all",title:"Скачать сертификаты (ZIP)"},[...c[6]||(c[6]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])],8,Ln),t("button",{onClick:v=>e("delete",u.id),class:ee(["p-2 rounded-lg text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",{"opacity-50 cursor-not-allowed":u.studentsCount>0}]),disabled:u.studentsCount>0,title:u.studentsCount>0?"Нельзя удалить: есть слушатели":"Удалить"},[...c[7]||(c[7]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],10,Bn)])])],8,_n))),128))])])]))}}),Vn=Object.assign(Yn,{__name:"OrganizationsOrganizationTable"}),Un={class:"text-xl font-semibold text-black dark:text-white"},Rn={key:0,class:"mt-1 text-sm text-red-500"},Wn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Kn={key:0,class:"mt-1 text-sm text-red-500"},qn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Jn={key:0,class:"mt-1 text-sm text-red-500"},Xn={class:"flex items-center gap-3"},Gn={class:"relative inline-flex items-center cursor-pointer"},Zn={class:"flex justify-end gap-3"},Qn=be({__name:"OrganizationFormModal",props:{organization:{},isOpen:{type:Boolean}},emits:["close","submit"],setup(a,{emit:o}){const e=a,b=o,c=H(!1),u=H({}),v=vt(()=>!!e.organization),d=H({name:"",code:"",shortName:"",contactPhone:"",contactEmail:"",address:"",description:"",isActive:!0}),m=()=>{e.organization?d.value={name:e.organization.name,code:e.organization.code,nameUz:e.organization.nameUz||"",nameEn:e.organization.nameEn||"",nameRu:e.organization.nameRu||"",contactPhone:e.organization.contactPhone||"",contactEmail:e.organization.contactEmail||"",address:e.organization.address||"",description:e.organization.description||"",isActive:e.organization.isActive}:d.value={name:"",code:"",nameUz:"",nameEn:"",nameRu:"",contactPhone:"",contactEmail:"",address:"",description:"",isActive:!0},u.value={}};Be(()=>e.isOpen,w=>{w&&m()}),Ue(()=>{e.isOpen&&m()});const R=()=>(u.value={},d.value.name.trim()||(u.value.name="Название обязательно"),d.value.contactEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.value.contactEmail)&&(u.value.contactEmail="Некорректный email"),Object.keys(u.value).length===0),$=async()=>{if(!c.value&&R()){c.value=!0;try{const w={name:d.value.name.trim(),isActive:d.value.isActive};d.value.code.trim()&&(w.code=d.value.code.trim()),d.value.nameUz.trim()?w.nameUz=d.value.nameUz.trim():w.nameUz=null,d.value.nameEn.trim()?w.nameEn=d.value.nameEn.trim():w.nameEn=null,d.value.nameRu.trim()?w.nameRu=d.value.nameRu.trim():w.nameRu=null,d.value.contactPhone.trim()?w.contactPhone=d.value.contactPhone.trim():w.contactPhone=null,d.value.contactEmail.trim()?w.contactEmail=d.value.contactEmail.trim():w.contactEmail=null,d.value.address.trim()?w.address=d.value.address.trim():w.address=null,d.value.description.trim()?w.description=d.value.description.trim():w.description=null,b("submit",w)}finally{c.value=!1}}},E=()=>{c.value||b("close")};return(w,f)=>{const p=Se,h=Re;return x(),he(h,{"is-open":a.isOpen,onClose:E,size:"lg"},{header:J(()=>[t("h3",Un,y(v.value?"Редактирование организации":"Создание организации"),1)]),default:J(()=>[t("form",{onSubmit:jt($,["prevent"]),class:"space-y-5"},[t("div",null,[f[10]||(f[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[z(" Название "),t("span",{class:"text-red-500"},"*")],-1)),q(t("input",{"onUpdate:modelValue":f[0]||(f[0]=F=>d.value.name=F),type:"text",placeholder:"Полное название организации",class:ee(["w-full rounded-lg border border-stroke bg-transparent py-3 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",{"border-red-500":u.value.name}])},null,2),[[re,d.value.name]]),u.value.name?(x(),C("p",Rn,y(u.value.name),1)):P("",!0)]),f[21]||(f[21]=t("h4",{class:"font-medium text-black dark:text-white border-b border-stroke dark:border-strokedark pb-2"}," Названия на языках (необязательно) ",-1)),t("div",Wn,[t("div",null,[f[11]||(f[11]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Название (UZ) ",-1)),q(t("input",{"onUpdate:modelValue":f[1]||(f[1]=F=>d.value.nameUz=F),type:"text",placeholder:"O'zbek tilida",class:"w-full rounded-lg border border-stroke bg-transparent py-3 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary"},null,512),[[re,d.value.nameUz]])]),t("div",null,[f[12]||(f[12]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Name (EN) ",-1)),q(t("input",{"onUpdate:modelValue":f[2]||(f[2]=F=>d.value.nameEn=F),type:"text",placeholder:"In English",class:"w-full rounded-lg border border-stroke bg-transparent py-3 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary"},null,512),[[re,d.value.nameEn]])]),t("div",null,[f[13]||(f[13]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Название (RU) ",-1)),q(t("input",{"onUpdate:modelValue":f[3]||(f[3]=F=>d.value.nameRu=F),type:"text",placeholder:"На русском",class:"w-full rounded-lg border border-stroke bg-transparent py-3 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary"},null,512),[[re,d.value.nameRu]])])]),f[22]||(f[22]=t("div",{class:"border-t border-stroke dark:border-strokedark pt-2"},null,-1)),t("div",null,[f[14]||(f[14]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Код организации ",-1)),q(t("input",{"onUpdate:modelValue":f[4]||(f[4]=F=>d.value.code=F),type:"text",placeholder:"Уникальный код (генерируется автоматически)",class:ee(["w-full rounded-lg border border-stroke bg-transparent py-3 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",{"border-red-500":u.value.code}])},null,2),[[re,d.value.code]]),u.value.code?(x(),C("p",Kn,y(u.value.code),1)):P("",!0)]),t("div",qn,[t("div",null,[f[15]||(f[15]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Контактный телефон ",-1)),q(t("input",{"onUpdate:modelValue":f[5]||(f[5]=F=>d.value.contactPhone=F),type:"tel",placeholder:"+998 XX XXX XX XX",class:"w-full rounded-lg border border-stroke bg-transparent py-3 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary"},null,512),[[re,d.value.contactPhone]])]),t("div",null,[f[16]||(f[16]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Email ",-1)),q(t("input",{"onUpdate:modelValue":f[6]||(f[6]=F=>d.value.contactEmail=F),type:"email",placeholder:"email@example.com",class:ee(["w-full rounded-lg border border-stroke bg-transparent py-3 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",{"border-red-500":u.value.contactEmail}])},null,2),[[re,d.value.contactEmail]]),u.value.contactEmail?(x(),C("p",Jn,y(u.value.contactEmail),1)):P("",!0)])]),t("div",null,[f[17]||(f[17]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Адрес ",-1)),q(t("input",{"onUpdate:modelValue":f[7]||(f[7]=F=>d.value.address=F),type:"text",placeholder:"Полный адрес организации",class:"w-full rounded-lg border border-stroke bg-transparent py-3 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary"},null,512),[[re,d.value.address]])]),t("div",null,[f[18]||(f[18]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Описание ",-1)),q(t("textarea",{"onUpdate:modelValue":f[8]||(f[8]=F=>d.value.description=F),rows:"3",placeholder:"Дополнительная информация об организации",class:"w-full rounded-lg border border-stroke bg-transparent py-3 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary resize-none"},null,512),[[re,d.value.description]])]),t("div",Xn,[t("label",Gn,[q(t("input",{"onUpdate:modelValue":f[9]||(f[9]=F=>d.value.isActive=F),type:"checkbox",class:"sr-only peer"},null,512),[[dn,d.value.isActive]]),f[19]||(f[19]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"},null,-1))]),f[20]||(f[20]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," Активная организация ",-1))])],32)]),footer:J(()=>[t("div",Zn,[K(p,{variant:"outline",onClick:E,disabled:c.value},{default:J(()=>[...f[23]||(f[23]=[z(" Отмена ",-1)])]),_:1},8,["disabled"]),K(p,{variant:"primary",onClick:$,loading:c.value},{default:J(()=>[z(y(v.value?"Сохранить":"Создать"),1)]),_:1},8,["loading"])])]),_:1},8,["is-open"])}}}),ea=Object.assign(Qn,{__name:"OrganizationsOrganizationFormModal"}),ta={class:"flex items-center gap-3"},na={class:"text-xl font-semibold text-black dark:text-white"},aa={class:"text-sm text-gray-500 dark:text-gray-400"},ra={key:0,class:"space-y-6"},oa={class:"flex items-center gap-2 flex-wrap"},ia={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary/10 text-primary"},sa={class:"bg-gradient-to-r from-primary/5 to-success/5 dark:from-primary/10 dark:to-success/10 rounded-xl p-5 border border-primary/10 dark:border-primary/20"},la={key:0,class:"flex items-center justify-center py-6"},da={key:1,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ua={class:"bg-white dark:bg-boxdark rounded-lg p-4 text-center shadow-sm"},ca={class:"text-3xl font-bold text-primary"},fa={class:"bg-white dark:bg-boxdark rounded-lg p-4 text-center shadow-sm"},ma={class:"text-3xl font-bold text-success"},pa={class:"bg-white dark:bg-boxdark rounded-lg p-4 text-center shadow-sm"},ga={class:"text-3xl font-bold text-info"},va={class:"bg-white dark:bg-boxdark rounded-lg p-4 text-center shadow-sm"},ha={class:"text-3xl font-bold text-warning"},ba={key:2,class:"text-center py-4 text-gray-500 dark:text-gray-400"},xa={key:0,class:"bg-white dark:bg-meta-4 rounded-xl p-5 border border-stroke dark:border-strokedark"},ka={class:"space-y-3"},ya={class:"flex-1 min-w-0"},wa={class:"font-medium text-black dark:text-white truncate"},Ca={key:0,class:"text-xs text-gray-500 dark:text-gray-400 font-mono"},Da={class:"flex items-center gap-3 ml-3"},Ma={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary"},_a={key:1,class:"bg-white dark:bg-meta-4 rounded-xl p-5 border border-stroke dark:border-strokedark"},Ea={class:"overflow-x-auto"},Ta={class:"w-full text-sm"},$a={class:"py-2 text-black dark:text-white"},Oa={class:"py-2 text-gray-600 dark:text-gray-400 max-w-[200px] truncate"},Sa={class:"py-2 font-mono text-xs text-gray-600 dark:text-gray-400"},Ia={class:"py-2 text-right text-gray-600 dark:text-gray-400"},Aa={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ja={key:0},Fa={class:"text-black dark:text-white"},za={class:"text-black dark:text-white flex items-center gap-2"},Pa={class:"text-black dark:text-white flex items-center gap-2"},Na={key:1,class:"md:col-span-2"},Ha={class:"text-black dark:text-white flex items-start gap-2"},La={key:2},Ba={class:"bg-gray-50 dark:bg-meta-4 rounded-lg p-4"},Ya={class:"text-black dark:text-white whitespace-pre-wrap"},Va={class:"border-t border-stroke dark:border-strokedark pt-4"},Ua={class:"grid grid-cols-2 gap-4 text-sm"},Ra={class:"ml-2 text-black dark:text-white"},Wa={class:"ml-2 text-black dark:text-white"},Ka={class:"flex justify-between w-full"},qa={__name:"OrganizationsOrganizationDetailModal",props:{organization:{type:Object,default:null},isOpen:{type:Boolean,default:!1}},emits:["close","edit"],setup(a,{emit:o}){const{authFetch:e}=We(),b=a,c=o,u=H(!1),v=H(null),d=H([]),m=H([]),R=async()=>{if(b.organization?.id){u.value=!0;try{const f=await e(`/api/organizations/${b.organization.id}/stats`,{method:"GET"});f.success&&f.data&&(v.value=f.data.stats,d.value=f.data.popularCourses||[],m.value=f.data.recentCertificates||[])}catch(f){console.error("Ошибка загрузки статистики организации:",f)}finally{u.value=!1}}};Be(()=>b.isOpen,async f=>{f&&b.organization?.id?await R():(v.value=null,d.value=[],m.value=[])},{immediate:!0});const $=f=>f?new Date(f).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",E=f=>f?new Date(f).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",w=()=>{c("close")};return(f,p)=>{const h=Se,F=Re;return x(),he(F,{"is-open":a.isOpen,onClose:w,size:"xl"},{header:J(()=>[t("div",ta,[p[1]||(p[1]=t("div",{class:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),t("div",null,[t("h3",na,y(a.organization?.name),1),t("p",aa," Код: "+y(a.organization?.code),1)])])]),default:J(()=>[a.organization?(x(),C("div",ra,[t("div",oa,[t("span",{class:ee(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",a.organization.isActive?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"])},y(a.organization.isActive?"Активна":"Неактивна"),3),t("span",ia,y(a.organization.studentsCount)+" слушателей ",1)]),t("div",sa,[p[7]||(p[7]=t("h4",{class:"text-lg font-semibold text-black dark:text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),z(" Статистика обучения ")],-1)),u.value?(x(),C("div",la,[...p[2]||(p[2]=[t("div",{class:"h-6 w-6 animate-spin rounded-full border-2 border-solid border-primary border-t-transparent mr-2"},null,-1),t("span",{class:"text-gray-500 dark:text-gray-400"},"Загрузка статистики...",-1)])])):v.value?(x(),C("div",da,[t("div",ua,[t("p",ca,y(v.value.totalStudents),1),p[3]||(p[3]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Всего сотрудников",-1))]),t("div",fa,[t("p",ma,y(v.value.trainedLastMonth),1),p[4]||(p[4]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Обучено за месяц",-1))]),t("div",pa,[t("p",ga,y(v.value.trainedLast3Months),1),p[5]||(p[5]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Обучено за 3 месяца",-1))]),t("div",va,[t("p",ha,y(v.value.totalCertificates),1),p[6]||(p[6]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Всего сертификатов",-1))])])):(x(),C("div",ba," Не удалось загрузить статистику "))]),d.value&&d.value.length>0?(x(),C("div",xa,[p[8]||(p[8]=t("h4",{class:"text-lg font-semibold text-black dark:text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})]),z(" Популярные курсы ")],-1)),t("div",ka,[(x(!0),C(Me,null,_e(d.value,(U,T)=>(x(),C("div",{key:T,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-boxdark rounded-lg"},[t("div",ya,[t("p",wa,y(U.name),1),U.code?(x(),C("p",Ca,y(U.code),1)):P("",!0)]),t("div",Da,[t("span",Ma,y(U.certificatesCount)+" серт. ",1)])]))),128))])])):P("",!0),m.value&&m.value.length>0?(x(),C("div",_a,[p[10]||(p[10]=t("h4",{class:"text-lg font-semibold text-black dark:text-white mb-4 flex items-center gap-2"},[t("svg",{class:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})]),z(" Последние выданные сертификаты ")],-1)),t("div",Ea,[t("table",Ta,[p[9]||(p[9]=t("thead",null,[t("tr",{class:"text-left border-b border-stroke dark:border-strokedark"},[t("th",{class:"pb-2 font-medium text-gray-500 dark:text-gray-400"},"Слушатель"),t("th",{class:"pb-2 font-medium text-gray-500 dark:text-gray-400"},"Курс"),t("th",{class:"pb-2 font-medium text-gray-500 dark:text-gray-400"},"Номер"),t("th",{class:"pb-2 font-medium text-gray-500 dark:text-gray-400 text-right"},"Дата")])],-1)),t("tbody",null,[(x(!0),C(Me,null,_e(m.value,U=>(x(),C("tr",{key:U.id,class:"border-b border-stroke dark:border-strokedark last:border-0"},[t("td",$a,y(U.studentName),1),t("td",Oa,y(U.courseName),1),t("td",Sa,y(U.certificateNumber),1),t("td",Ia,y(E(U.issueDate)),1)]))),128))])])])])):P("",!0),t("div",Aa,[a.organization.shortName?(x(),C("div",ja,[p[11]||(p[11]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"}," Краткое название ",-1)),t("p",Fa,y(a.organization.shortName),1)])):P("",!0),t("div",null,[p[13]||(p[13]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"}," Контактный телефон ",-1)),t("p",za,[p[12]||(p[12]=t("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),z(" "+y(a.organization.contactPhone||"Не указан"),1)])]),t("div",null,[p[15]||(p[15]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"}," Email ",-1)),t("p",Pa,[p[14]||(p[14]=t("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),z(" "+y(a.organization.contactEmail||"Не указан"),1)])]),a.organization.address?(x(),C("div",Na,[p[17]||(p[17]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"}," Адрес ",-1)),t("p",Ha,[p[16]||(p[16]=t("svg",{class:"w-4 h-4 text-gray-400 mt-1 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),z(" "+y(a.organization.address),1)])])):P("",!0)]),a.organization.description?(x(),C("div",La,[p[18]||(p[18]=t("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"}," Описание ",-1)),t("div",Ba,[t("p",Ya,y(a.organization.description),1)])])):P("",!0),t("div",Va,[t("div",Ua,[t("div",null,[p[19]||(p[19]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Создана:",-1)),t("span",Ra,y($(a.organization.createdAt)),1)]),t("div",null,[p[20]||(p[20]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Обновлена:",-1)),t("span",Wa,y($(a.organization.updatedAt)),1)])])])])):P("",!0)]),footer:J(()=>[t("div",Ka,[K(h,{variant:"outline",onClick:p[0]||(p[0]=U=>c("edit"))},{default:J(()=>[...p[21]||(p[21]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),z(" Редактировать ",-1)])]),_:1}),K(h,{variant:"primary",onClick:w},{default:J(()=>[...p[22]||(p[22]=[z(" Закрыть ",-1)])]),_:1})])]),_:1},8,["is-open"])}}};var lt=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],$e={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(a){return typeof console<"u"&&console.warn(a)},getWeek:function(a){var o=new Date(a.getTime());o.setHours(0,0,0,0),o.setDate(o.getDate()+3-(o.getDay()+6)%7);var e=new Date(o.getFullYear(),0,4);return 1+Math.round(((o.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Ve={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(a){var o=a%100;if(o>3&&o<21)return"th";switch(o%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ie=function(a,o){return o===void 0&&(o=2),("000"+a).slice(o*-1)},fe=function(a){return a===!0?1:0};function Et(a,o){var e;return function(){var b=this,c=arguments;clearTimeout(e),e=setTimeout(function(){return a.apply(b,c)},o)}}var dt=function(a){return a instanceof Array?a:[a]};function ae(a,o,e){if(e===!0)return a.classList.add(o);a.classList.remove(o)}function V(a,o,e){var b=window.document.createElement(a);return o=o||"",e=e||"",b.className=o,e!==void 0&&(b.textContent=e),b}function Ze(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Ft(a,o){if(o(a))return a;if(a.parentNode)return Ft(a.parentNode,o)}function Qe(a,o){var e=V("div","numInputWrapper"),b=V("input","numInput "+a),c=V("span","arrowUp"),u=V("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?b.type="number":(b.type="text",b.pattern="\\d*"),o!==void 0)for(var v in o)b.setAttribute(v,o[v]);return e.appendChild(b),e.appendChild(c),e.appendChild(u),e}function le(a){try{if(typeof a.composedPath=="function"){var o=a.composedPath();return o[0]}return a.target}catch{return a.target}}var ut=function(){},et=function(a,o,e){return e.months[o?"shorthand":"longhand"][a]},Ja={D:ut,F:function(a,o,e){a.setMonth(e.months.longhand.indexOf(o))},G:function(a,o){a.setHours((a.getHours()>=12?12:0)+parseFloat(o))},H:function(a,o){a.setHours(parseFloat(o))},J:function(a,o){a.setDate(parseFloat(o))},K:function(a,o,e){a.setHours(a.getHours()%12+12*fe(new RegExp(e.amPM[1],"i").test(o)))},M:function(a,o,e){a.setMonth(e.months.shorthand.indexOf(o))},S:function(a,o){a.setSeconds(parseFloat(o))},U:function(a,o){return new Date(parseFloat(o)*1e3)},W:function(a,o,e){var b=parseInt(o),c=new Date(a.getFullYear(),0,2+(b-1)*7,0,0,0,0);return c.setDate(c.getDate()-c.getDay()+e.firstDayOfWeek),c},Y:function(a,o){a.setFullYear(parseFloat(o))},Z:function(a,o){return new Date(o)},d:function(a,o){a.setDate(parseFloat(o))},h:function(a,o){a.setHours((a.getHours()>=12?12:0)+parseFloat(o))},i:function(a,o){a.setMinutes(parseFloat(o))},j:function(a,o){a.setDate(parseFloat(o))},l:ut,m:function(a,o){a.setMonth(parseFloat(o)-1)},n:function(a,o){a.setMonth(parseFloat(o)-1)},s:function(a,o){a.setSeconds(parseFloat(o))},u:function(a,o){return new Date(parseFloat(o))},w:ut,y:function(a,o){a.setFullYear(2e3+parseFloat(o))}},De={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Le={Z:function(a){return a.toISOString()},D:function(a,o,e){return o.weekdays.shorthand[Le.w(a,o,e)]},F:function(a,o,e){return et(Le.n(a,o,e)-1,!1,o)},G:function(a,o,e){return ie(Le.h(a,o,e))},H:function(a){return ie(a.getHours())},J:function(a,o){return o.ordinal!==void 0?a.getDate()+o.ordinal(a.getDate()):a.getDate()},K:function(a,o){return o.amPM[fe(a.getHours()>11)]},M:function(a,o){return et(a.getMonth(),!0,o)},S:function(a){return ie(a.getSeconds())},U:function(a){return a.getTime()/1e3},W:function(a,o,e){return e.getWeek(a)},Y:function(a){return ie(a.getFullYear(),4)},d:function(a){return ie(a.getDate())},h:function(a){return a.getHours()%12?a.getHours()%12:12},i:function(a){return ie(a.getMinutes())},j:function(a){return a.getDate()},l:function(a,o){return o.weekdays.longhand[a.getDay()]},m:function(a){return ie(a.getMonth()+1)},n:function(a){return a.getMonth()+1},s:function(a){return a.getSeconds()},u:function(a){return a.getTime()},w:function(a){return a.getDay()},y:function(a){return String(a.getFullYear()).substring(2)}},zt=function(a){var o=a.config,e=o===void 0?$e:o,b=a.l10n,c=b===void 0?Ve:b,u=a.isMobile,v=u===void 0?!1:u;return function(d,m,R){var $=R||c;return e.formatDate!==void 0&&!v?e.formatDate(d,m,$):m.split("").map(function(E,w,f){return Le[E]&&f[w-1]!=="\\"?Le[E](d,$,e):E!=="\\"?E:""}).join("")}},gt=function(a){var o=a.config,e=o===void 0?$e:o,b=a.l10n,c=b===void 0?Ve:b;return function(u,v,d,m){if(!(u!==0&&!u)){var R=m||c,$,E=u;if(u instanceof Date)$=new Date(u.getTime());else if(typeof u!="string"&&u.toFixed!==void 0)$=new Date(u);else if(typeof u=="string"){var w=v||(e||$e).dateFormat,f=String(u).trim();if(f==="today")$=new Date,d=!0;else if(e&&e.parseDate)$=e.parseDate(u,w);else if(/Z$/.test(f)||/GMT$/.test(f))$=new Date(u);else{for(var p=void 0,h=[],F=0,U=0,T="";F<w.length;F++){var O=w[F],G=O==="\\",j=w[F-1]==="\\"||G;if(De[O]&&!j){T+=De[O];var L=new RegExp(T).exec(u);L&&(p=!0)&&h[O!=="Y"?"push":"unshift"]({fn:Ja[O],val:L[++U]})}else G||(T+=".")}$=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),h.forEach(function(Q){var oe=Q.fn,ue=Q.val;return $=oe($,ue,R)||$}),$=p?$:void 0}}if(!($ instanceof Date&&!isNaN($.getTime()))){e.errorHandler(new Error("Invalid date provided: "+E));return}return d===!0&&$.setHours(0,0,0,0),$}}};function de(a,o,e){return e===void 0&&(e=!0),e!==!1?new Date(a.getTime()).setHours(0,0,0,0)-new Date(o.getTime()).setHours(0,0,0,0):a.getTime()-o.getTime()}var Xa=function(a,o,e){return a>Math.min(o,e)&&a<Math.max(o,e)},ct=function(a,o,e){return a*3600+o*60+e},Ga=function(a){var o=Math.floor(a/3600),e=(a-o*3600)/60;return[o,e,a-o*3600-e*60]},Za={DAY:864e5};function ft(a){var o=a.defaultHour,e=a.defaultMinute,b=a.defaultSeconds;if(a.minDate!==void 0){var c=a.minDate.getHours(),u=a.minDate.getMinutes(),v=a.minDate.getSeconds();o<c&&(o=c),o===c&&e<u&&(e=u),o===c&&e===u&&b<v&&(b=a.minDate.getSeconds())}if(a.maxDate!==void 0){var d=a.maxDate.getHours(),m=a.maxDate.getMinutes();o=Math.min(o,d),o===d&&(e=Math.min(m,e)),o===d&&e===m&&(b=a.maxDate.getSeconds())}return{hours:o,minutes:e,seconds:b}}typeof Object.assign!="function"&&(Object.assign=function(a){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];if(!a)throw TypeError("Cannot convert undefined or null to object");for(var b=function(d){d&&Object.keys(d).forEach(function(m){return a[m]=d[m]})},c=0,u=o;c<u.length;c++){var v=u[c];b(v)}return a});var te=function(){return te=Object.assign||function(a){for(var o,e=1,b=arguments.length;e<b;e++){o=arguments[e];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(a[c]=o[c])}return a},te.apply(this,arguments)},Tt=function(){for(var a=0,o=0,e=arguments.length;o<e;o++)a+=arguments[o].length;for(var b=Array(a),c=0,o=0;o<e;o++)for(var u=arguments[o],v=0,d=u.length;v<d;v++,c++)b[c]=u[v];return b},Qa=300;function er(a,o){var e={config:te(te({},$e),Z.defaultConfig),l10n:Ve};e.parseDate=gt({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=h,e._setHoursFromDate=w,e._positionCalendar=qe,e.changeMonth=s,e.changeYear=me,e.clear=ke,e.close=ze,e.onMouseOver=Ke,e._createElement=V,e.createDay=L,e.destroy=Pe,e.isEnabled=D,e.jumpToDate=T,e.updateValue=ve,e.open=Lt,e.redraw=yt,e.set=Ut,e.setDate=Rt,e.toggle=Jt;function b(){e.utils={getDaysInMonth:function(n,r){return n===void 0&&(n=e.currentMonth),r===void 0&&(r=e.currentYear),n===1&&(r%4===0&&r%100!==0||r%400===0)?29:e.l10n.daysInMonth[n]}}}function c(){e.element=e.input=a,e.isOpen=!1,Bt(),kt(),Kt(),Wt(),b(),e.isMobile||j(),U(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&w(e.config.noCalendar?e.latestSelectedDateObj:void 0),ve(!1)),d();var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&n&&qe(),X("onReady")}function u(){var n;return((n=e.calendarContainer)===null||n===void 0?void 0:n.getRootNode()).activeElement||document.activeElement}function v(n){return n.bind(e)}function d(){var n=e.config;n.weekNumbers===!1&&n.showMonths===1||n.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var r=(e.days.offsetWidth+1)*n.showMonths;e.daysContainer.style.width=r+"px",e.calendarContainer.style.width=r+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function m(n){if(e.selectedDates.length===0){var r=e.config.minDate===void 0||de(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),i=ft(e.config);r.setHours(i.hours,i.minutes,i.seconds,r.getMilliseconds()),e.selectedDates=[r],e.latestSelectedDateObj=r}n!==void 0&&n.type!=="blur"&&Zt(n);var l=e._input.value;E(),ve(),e._input.value!==l&&e._debouncedChange()}function R(n,r){return n%12+12*fe(r===e.l10n.amPM[1])}function $(n){switch(n%24){case 0:case 12:return 12;default:return n%12}}function E(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var n=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,r=(parseInt(e.minuteElement.value,10)||0)%60,i=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(n=R(n,e.amPM.textContent));var l=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&de(e.latestSelectedDateObj,e.config.minDate,!0)===0,g=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&de(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var k=ct(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),N=ct(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),_=ct(n,r,i);if(_>N&&_<k){var B=Ga(k);n=B[0],r=B[1],i=B[2]}}else{if(g){var M=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;n=Math.min(n,M.getHours()),n===M.getHours()&&(r=Math.min(r,M.getMinutes())),r===M.getMinutes()&&(i=Math.min(i,M.getSeconds()))}if(l){var I=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;n=Math.max(n,I.getHours()),n===I.getHours()&&r<I.getMinutes()&&(r=I.getMinutes()),r===I.getMinutes()&&(i=Math.max(i,I.getSeconds()))}}f(n,r,i)}}function w(n){var r=n||e.latestSelectedDateObj;r&&r instanceof Date&&f(r.getHours(),r.getMinutes(),r.getSeconds())}function f(n,r,i){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(n%24,r,i||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=ie(e.config.time_24hr?n:(12+n)%12+12*fe(n%12===0)),e.minuteElement.value=ie(r),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[fe(n>=12)]),e.secondElement!==void 0&&(e.secondElement.value=ie(i)))}function p(n){var r=le(n),i=parseInt(r.value)+(n.delta||0);(i/1e3>1||n.key==="Enter"&&!/[^\d]/.test(i.toString()))&&me(i)}function h(n,r,i,l){if(r instanceof Array)return r.forEach(function(g){return h(n,g,i,l)});if(n instanceof Array)return n.forEach(function(g){return h(g,r,i,l)});n.addEventListener(r,i,l),e._handlers.push({remove:function(){return n.removeEventListener(r,i,l)}})}function F(){X("onChange")}function U(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(i){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+i+"]"),function(l){return h(l,"click",e[i])})}),e.isMobile){qt();return}var n=Et(Ht,50);if(e._debouncedChange=Et(F,Qa),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&h(e.daysContainer,"mouseover",function(i){e.config.mode==="range"&&Ke(le(i))}),h(e._input,"keydown",ht),e.calendarContainer!==void 0&&h(e.calendarContainer,"keydown",ht),!e.config.inline&&!e.config.static&&h(window,"resize",n),window.ontouchstart!==void 0?h(window.document,"touchstart",we):h(window.document,"mousedown",we),h(window.document,"focus",we,{capture:!0}),e.config.clickOpens===!0&&(h(e._input,"focus",e.open),h(e._input,"click",e.open)),e.daysContainer!==void 0&&(h(e.monthNav,"click",Gt),h(e.monthNav,["keyup","increment"],p),h(e.daysContainer,"click",wt)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var r=function(i){return le(i).select()};h(e.timeContainer,["increment"],m),h(e.timeContainer,"blur",m,{capture:!0}),h(e.timeContainer,"click",O),h([e.hourElement,e.minuteElement],["focus","click"],r),e.secondElement!==void 0&&h(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&h(e.amPM,"click",function(i){m(i)})}e.config.allowInput&&h(e._input,"blur",Nt)}function T(n,r){var i=n!==void 0?e.parseDate(n):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),l=e.currentYear,g=e.currentMonth;try{i!==void 0&&(e.currentYear=i.getFullYear(),e.currentMonth=i.getMonth())}catch(k){k.message="Invalid date supplied: "+i,e.config.errorHandler(k)}r&&e.currentYear!==l&&(X("onYearChange"),ce()),r&&(e.currentYear!==l||e.currentMonth!==g)&&X("onMonthChange"),e.redraw()}function O(n){var r=le(n);~r.className.indexOf("arrow")&&G(n,r.classList.contains("arrowUp")?1:-1)}function G(n,r,i){var l=n&&le(n),g=i||l&&l.parentNode&&l.parentNode.firstChild,k=at("increment");k.delta=r,g&&g.dispatchEvent(k)}function j(){var n=window.document.createDocumentFragment();if(e.calendarContainer=V("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(n.appendChild(je()),e.innerContainer=V("div","flatpickr-innerContainer"),e.config.weekNumbers){var r=S(),i=r.weekWrapper,l=r.weekNumbers;e.innerContainer.appendChild(i),e.weekNumbers=l,e.weekWrapper=i}e.rContainer=V("div","flatpickr-rContainer"),e.rContainer.appendChild(Y()),e.daysContainer||(e.daysContainer=V("div","flatpickr-days"),e.daysContainer.tabIndex=-1),xe(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),n.appendChild(e.innerContainer)}e.config.enableTime&&n.appendChild(Fe()),ae(e.calendarContainer,"rangeMode",e.config.mode==="range"),ae(e.calendarContainer,"animate",e.config.animate===!0),ae(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(n);var g=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!g&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var k=V("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(k,e.element),k.appendChild(e.element),e.altInput&&k.appendChild(e.altInput),k.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function L(n,r,i,l){var g=D(r,!0),k=V("span",n,r.getDate().toString());return k.dateObj=r,k.$i=l,k.setAttribute("aria-label",e.formatDate(r,e.config.ariaDateFormat)),n.indexOf("hidden")===-1&&de(r,e.now)===0&&(e.todayDateElem=k,k.classList.add("today"),k.setAttribute("aria-current","date")),g?(k.tabIndex=-1,rt(r)&&(k.classList.add("selected"),e.selectedDateElem=k,e.config.mode==="range"&&(ae(k,"startRange",e.selectedDates[0]&&de(r,e.selectedDates[0],!0)===0),ae(k,"endRange",e.selectedDates[1]&&de(r,e.selectedDates[1],!0)===0),n==="nextMonthDay"&&k.classList.add("inRange")))):k.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Xt(r)&&!rt(r)&&k.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&n!=="prevMonthDay"&&l%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(r)+"</span>"),X("onDayCreate",k),k}function Q(n){n.focus(),e.config.mode==="range"&&Ke(n)}function oe(n){for(var r=n>0?0:e.config.showMonths-1,i=n>0?e.config.showMonths:-1,l=r;l!=i;l+=n)for(var g=e.daysContainer.children[l],k=n>0?0:g.children.length-1,N=n>0?g.children.length:-1,_=k;_!=N;_+=n){var B=g.children[_];if(B.className.indexOf("hidden")===-1&&D(B.dateObj))return B}}function ue(n,r){for(var i=n.className.indexOf("Month")===-1?n.dateObj.getMonth():e.currentMonth,l=r>0?e.config.showMonths:-1,g=r>0?1:-1,k=i-e.currentMonth;k!=l;k+=g)for(var N=e.daysContainer.children[k],_=i-e.currentMonth===k?n.$i+r:r<0?N.children.length-1:0,B=N.children.length,M=_;M>=0&&M<B&&M!=(r>0?B:-1);M+=g){var I=N.children[M];if(I.className.indexOf("hidden")===-1&&D(I.dateObj)&&Math.abs(n.$i-M)>=Math.abs(r))return Q(I)}e.changeMonth(g),ne(oe(g),0)}function ne(n,r){var i=u(),l=Ee(i||document.body),g=n!==void 0?n:l?i:e.selectedDateElem!==void 0&&Ee(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Ee(e.todayDateElem)?e.todayDateElem:oe(r>0?1:-1);g===void 0?e._input.focus():l?ue(g,r):Q(g)}function Ie(n,r){for(var i=(new Date(n,r,1).getDay()-e.l10n.firstDayOfWeek+7)%7,l=e.utils.getDaysInMonth((r-1+12)%12,n),g=e.utils.getDaysInMonth(r,n),k=window.document.createDocumentFragment(),N=e.config.showMonths>1,_=N?"prevMonthDay hidden":"prevMonthDay",B=N?"nextMonthDay hidden":"nextMonthDay",M=l+1-i,I=0;M<=l;M++,I++)k.appendChild(L("flatpickr-day "+_,new Date(n,r-1,M),M,I));for(M=1;M<=g;M++,I++)k.appendChild(L("flatpickr-day",new Date(n,r,M),M,I));for(var W=g+1;W<=42-i&&(e.config.showMonths===1||I%7!==0);W++,I++)k.appendChild(L("flatpickr-day "+B,new Date(n,r+1,W%g),W,I));var pe=V("div","dayContainer");return pe.appendChild(k),pe}function xe(){if(e.daysContainer!==void 0){Ze(e.daysContainer),e.weekNumbers&&Ze(e.weekNumbers);for(var n=document.createDocumentFragment(),r=0;r<e.config.showMonths;r++){var i=new Date(e.currentYear,e.currentMonth,1);i.setMonth(e.currentMonth+r),n.appendChild(Ie(i.getFullYear(),i.getMonth()))}e.daysContainer.appendChild(n),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Ke()}}function ce(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var n=function(l){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&l<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&l>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var r=0;r<12;r++)if(n(r)){var i=V("option","flatpickr-monthDropdown-month");i.value=new Date(e.currentYear,r).getMonth().toString(),i.textContent=et(r,e.config.shorthandCurrentMonth,e.l10n),i.tabIndex=-1,e.currentMonth===r&&(i.selected=!0),e.monthsDropdownContainer.appendChild(i)}}}function Ae(){var n=V("div","flatpickr-month"),r=window.document.createDocumentFragment(),i;e.config.showMonths>1||e.config.monthSelectorType==="static"?i=V("span","cur-month"):(e.monthsDropdownContainer=V("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),h(e.monthsDropdownContainer,"change",function(N){var _=le(N),B=parseInt(_.value,10);e.changeMonth(B-e.currentMonth),X("onMonthChange")}),ce(),i=e.monthsDropdownContainer);var l=Qe("cur-year",{tabindex:"-1"}),g=l.getElementsByTagName("input")[0];g.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&g.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(g.setAttribute("max",e.config.maxDate.getFullYear().toString()),g.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var k=V("div","flatpickr-current-month");return k.appendChild(i),k.appendChild(l),r.appendChild(k),n.appendChild(r),{container:n,yearElement:g,monthElement:i}}function ye(){Ze(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var n=e.config.showMonths;n--;){var r=Ae();e.yearElements.push(r.yearElement),e.monthElements.push(r.monthElement),e.monthNav.appendChild(r.container)}e.monthNav.appendChild(e.nextMonthNav)}function je(){return e.monthNav=V("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=V("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=V("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,ye(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(n){e.__hidePrevMonthArrow!==n&&(ae(e.prevMonthNav,"flatpickr-disabled",n),e.__hidePrevMonthArrow=n)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(n){e.__hideNextMonthArrow!==n&&(ae(e.nextMonthNav,"flatpickr-disabled",n),e.__hideNextMonthArrow=n)}}),e.currentYearElement=e.yearElements[0],Xe(),e.monthNav}function Fe(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var n=ft(e.config);e.timeContainer=V("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var r=V("span","flatpickr-time-separator",":"),i=Qe("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=i.getElementsByTagName("input")[0];var l=Qe("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=l.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=ie(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?n.hours:$(n.hours)),e.minuteElement.value=ie(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():n.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(i),e.timeContainer.appendChild(r),e.timeContainer.appendChild(l),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var g=Qe("flatpickr-second");e.secondElement=g.getElementsByTagName("input")[0],e.secondElement.value=ie(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():n.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(V("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(g)}return e.config.time_24hr||(e.amPM=V("span","flatpickr-am-pm",e.l10n.amPM[fe((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function Y(){e.weekdayContainer?Ze(e.weekdayContainer):e.weekdayContainer=V("div","flatpickr-weekdays");for(var n=e.config.showMonths;n--;){var r=V("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(r)}return A(),e.weekdayContainer}function A(){if(e.weekdayContainer){var n=e.l10n.firstDayOfWeek,r=Tt(e.l10n.weekdays.shorthand);n>0&&n<r.length&&(r=Tt(r.splice(n,r.length),r.splice(0,n)));for(var i=e.config.showMonths;i--;)e.weekdayContainer.children[i].innerHTML=`
      <span class='flatpickr-weekday'>
        `+r.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function S(){e.calendarContainer.classList.add("hasWeeks");var n=V("div","flatpickr-weekwrapper");n.appendChild(V("span","flatpickr-weekday",e.l10n.weekAbbreviation));var r=V("div","flatpickr-weeks");return n.appendChild(r),{weekWrapper:n,weekNumbers:r}}function s(n,r){r===void 0&&(r=!0);var i=r?n:n-e.currentMonth;i<0&&e._hidePrevMonthArrow===!0||i>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=i,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,X("onYearChange"),ce()),xe(),X("onMonthChange"),Xe())}function ke(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,r===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var i=ft(e.config),l=i.hours,g=i.minutes,k=i.seconds;f(l,g,k)}e.redraw(),n&&X("onChange")}function ze(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),X("onClose")}function Pe(){e.config!==void 0&&X("onDestroy");for(var n=e._handlers.length;n--;)e._handlers[n].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var r=e.calendarContainer.parentNode;if(r.lastChild&&r.removeChild(r.lastChild),r.parentNode){for(;r.firstChild;)r.parentNode.insertBefore(r.firstChild,r);r.parentNode.removeChild(r)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(i){try{delete e[i]}catch{}})}function ge(n){return e.calendarContainer.contains(n)}function we(n){if(e.isOpen&&!e.config.inline){var r=le(n),i=ge(r),l=r===e.input||r===e.altInput||e.element.contains(r)||n.path&&n.path.indexOf&&(~n.path.indexOf(e.input)||~n.path.indexOf(e.altInput)),g=!l&&!i&&!ge(n.relatedTarget),k=!e.config.ignoredFocusElements.some(function(N){return N.contains(r)});g&&k&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&m(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function me(n){if(!(!n||e.config.minDate&&n<e.config.minDate.getFullYear()||e.config.maxDate&&n>e.config.maxDate.getFullYear())){var r=n,i=e.currentYear!==r;e.currentYear=r||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),i&&(e.redraw(),X("onYearChange"),ce())}}function D(n,r){var i;r===void 0&&(r=!0);var l=e.parseDate(n,void 0,r);if(e.config.minDate&&l&&de(l,e.config.minDate,r!==void 0?r:!e.minDateHasTime)<0||e.config.maxDate&&l&&de(l,e.config.maxDate,r!==void 0?r:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(l===void 0)return!1;for(var g=!!e.config.enable,k=(i=e.config.enable)!==null&&i!==void 0?i:e.config.disable,N=0,_=void 0;N<k.length;N++){if(_=k[N],typeof _=="function"&&_(l))return g;if(_ instanceof Date&&l!==void 0&&_.getTime()===l.getTime())return g;if(typeof _=="string"){var B=e.parseDate(_,void 0,!0);return B&&B.getTime()===l.getTime()?g:!g}else if(typeof _=="object"&&l!==void 0&&_.from&&_.to&&l.getTime()>=_.from.getTime()&&l.getTime()<=_.to.getTime())return g}return!g}function Ee(n){return e.daysContainer!==void 0?n.className.indexOf("hidden")===-1&&n.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(n):!1}function Nt(n){var r=n.target===e._input,i=e._input.value.trimEnd()!==ot();r&&i&&!(n.relatedTarget&&ge(n.relatedTarget))&&e.setDate(e._input.value,!0,n.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function ht(n){var r=le(n),i=e.config.wrap?a.contains(r):r===e._input,l=e.config.allowInput,g=e.isOpen&&(!l||!i),k=e.config.inline&&i&&!l;if(n.keyCode===13&&i){if(l)return e.setDate(e._input.value,!0,r===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),r.blur();e.open()}else if(ge(r)||g||k){var N=!!e.timeContainer&&e.timeContainer.contains(r);switch(n.keyCode){case 13:N?(n.preventDefault(),m(),nt()):wt(n);break;case 27:n.preventDefault(),nt();break;case 8:case 46:i&&!e.config.allowInput&&(n.preventDefault(),e.clear());break;case 37:case 39:if(!N&&!i){n.preventDefault();var _=u();if(e.daysContainer!==void 0&&(l===!1||_&&Ee(_))){var B=n.keyCode===39?1:-1;n.ctrlKey?(n.stopPropagation(),s(B),ne(oe(1),0)):ne(void 0,B)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:n.preventDefault();var M=n.keyCode===40?1:-1;e.daysContainer&&r.$i!==void 0||r===e.input||r===e.altInput?n.ctrlKey?(n.stopPropagation(),me(e.currentYear-M),ne(oe(1),0)):N||ne(void 0,M*7):r===e.currentYearElement?me(e.currentYear-M):e.config.enableTime&&(!N&&e.hourElement&&e.hourElement.focus(),m(n),e._debouncedChange());break;case 9:if(N){var I=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(se){return se}),W=I.indexOf(r);if(W!==-1){var pe=I[W+(n.shiftKey?-1:1)];n.preventDefault(),(pe||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(r)&&n.shiftKey&&(n.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&r===e.amPM)switch(n.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],E(),ve();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],E(),ve();break}(i||ge(r))&&X("onKeyDown",n)}function Ke(n,r){if(r===void 0&&(r="flatpickr-day"),!(e.selectedDates.length!==1||n&&(!n.classList.contains(r)||n.classList.contains("flatpickr-disabled")))){for(var i=n?n.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),l=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),g=Math.min(i,e.selectedDates[0].getTime()),k=Math.max(i,e.selectedDates[0].getTime()),N=!1,_=0,B=0,M=g;M<k;M+=Za.DAY)D(new Date(M),!0)||(N=N||M>g&&M<k,M<l&&(!_||M>_)?_=M:M>l&&(!B||M<B)&&(B=M));var I=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+r));I.forEach(function(W){var pe=W.dateObj,se=pe.getTime(),Ne=_>0&&se<_||B>0&&se>B;if(Ne){W.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Te){W.classList.remove(Te)});return}else if(N&&!Ne)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Te){W.classList.remove(Te)}),n!==void 0&&(n.classList.add(i<=e.selectedDates[0].getTime()?"startRange":"endRange"),l<i&&se===l?W.classList.add("startRange"):l>i&&se===l&&W.classList.add("endRange"),se>=_&&(B===0||se<=B)&&Xa(se,l,i)&&W.classList.add("inRange"))})}}function Ht(){e.isOpen&&!e.config.static&&!e.config.inline&&qe()}function Lt(n,r){if(r===void 0&&(r=e._positionElement),e.isMobile===!0){if(n){n.preventDefault();var i=le(n);i&&i.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),X("onOpen");return}else if(e._input.disabled||e.config.inline)return;var l=e.isOpen;e.isOpen=!0,l||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),X("onOpen"),qe(r)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(n===void 0||!e.timeContainer.contains(n.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function bt(n){return function(r){var i=e.config["_"+n+"Date"]=e.parseDate(r,e.config.dateFormat),l=e.config["_"+(n==="min"?"max":"min")+"Date"];i!==void 0&&(e[n==="min"?"minDateHasTime":"maxDateHasTime"]=i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(g){return D(g)}),!e.selectedDates.length&&n==="min"&&w(i),ve()),e.daysContainer&&(yt(),i!==void 0?e.currentYearElement[n]=i.getFullYear().toString():e.currentYearElement.removeAttribute(n),e.currentYearElement.disabled=!!l&&i!==void 0&&l.getFullYear()===i.getFullYear())}}function Bt(){var n=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],r=te(te({},JSON.parse(JSON.stringify(a.dataset||{}))),o),i={};e.config.parseDate=r.parseDate,e.config.formatDate=r.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(I){e.config._enable=Dt(I)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(I){e.config._disable=Dt(I)}});var l=r.mode==="time";if(!r.dateFormat&&(r.enableTime||l)){var g=Z.defaultConfig.dateFormat||$e.dateFormat;i.dateFormat=r.noCalendar||l?"H:i"+(r.enableSeconds?":S":""):g+" H:i"+(r.enableSeconds?":S":"")}if(r.altInput&&(r.enableTime||l)&&!r.altFormat){var k=Z.defaultConfig.altFormat||$e.altFormat;i.altFormat=r.noCalendar||l?"h:i"+(r.enableSeconds?":S K":" K"):k+(" h:i"+(r.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:bt("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:bt("max")});var N=function(I){return function(W){e.config[I==="min"?"_minTime":"_maxTime"]=e.parseDate(W,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:N("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:N("max")}),r.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,i,r);for(var _=0;_<n.length;_++)e.config[n[_]]=e.config[n[_]]===!0||e.config[n[_]]==="true";lt.filter(function(I){return e.config[I]!==void 0}).forEach(function(I){e.config[I]=dt(e.config[I]||[]).map(v)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var _=0;_<e.config.plugins.length;_++){var B=e.config.plugins[_](e)||{};for(var M in B)lt.indexOf(M)>-1?e.config[M]=dt(B[M]).map(v).concat(e.config[M]):typeof r[M]>"u"&&(e.config[M]=B[M])}r.altInputClass||(e.config.altInputClass=xt().className+" "+e.config.altInputClass),X("onParseConfig")}function xt(){return e.config.wrap?a.querySelector("[data-input]"):a}function kt(){typeof e.config.locale!="object"&&typeof Z.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=te(te({},Z.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?Z.l10ns[e.config.locale]:void 0),De.D="("+e.l10n.weekdays.shorthand.join("|")+")",De.l="("+e.l10n.weekdays.longhand.join("|")+")",De.M="("+e.l10n.months.shorthand.join("|")+")",De.F="("+e.l10n.months.longhand.join("|")+")",De.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var n=te(te({},o),JSON.parse(JSON.stringify(a.dataset||{})));n.time_24hr===void 0&&Z.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=zt(e),e.parseDate=gt({config:e.config,l10n:e.l10n})}function qe(n){if(typeof e.config.position=="function")return void e.config.position(e,n);if(e.calendarContainer!==void 0){X("onPreCalendarPosition");var r=n||e._positionElement,i=Array.prototype.reduce.call(e.calendarContainer.children,(function(sn,ln){return sn+ln.offsetHeight}),0),l=e.calendarContainer.offsetWidth,g=e.config.position.split(" "),k=g[0],N=g.length>1?g[1]:null,_=r.getBoundingClientRect(),B=window.innerHeight-_.bottom,M=k==="above"||k!=="below"&&B<i&&_.top>i,I=window.pageYOffset+_.top+(M?-i-2:r.offsetHeight+2);if(ae(e.calendarContainer,"arrowTop",!M),ae(e.calendarContainer,"arrowBottom",M),!e.config.inline){var W=window.pageXOffset+_.left,pe=!1,se=!1;N==="center"?(W-=(l-_.width)/2,pe=!0):N==="right"&&(W-=l-_.width,se=!0),ae(e.calendarContainer,"arrowLeft",!pe&&!se),ae(e.calendarContainer,"arrowCenter",pe),ae(e.calendarContainer,"arrowRight",se);var Ne=window.document.body.offsetWidth-(window.pageXOffset+_.right),Te=W+l>window.document.body.offsetWidth,Qt=Ne+l>window.document.body.offsetWidth;if(ae(e.calendarContainer,"rightMost",Te),!e.config.static)if(e.calendarContainer.style.top=I+"px",!Te)e.calendarContainer.style.left=W+"px",e.calendarContainer.style.right="auto";else if(!Qt)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Ne+"px";else{var it=Yt();if(it===void 0)return;var en=window.document.body.offsetWidth,tn=Math.max(0,en/2-l/2),nn=".flatpickr-calendar.centerMost:before",an=".flatpickr-calendar.centerMost:after",rn=it.cssRules.length,on="{left:"+_.left+"px;right:auto;}";ae(e.calendarContainer,"rightMost",!1),ae(e.calendarContainer,"centerMost",!0),it.insertRule(nn+","+an+on,rn),e.calendarContainer.style.left=tn+"px",e.calendarContainer.style.right="auto"}}}}function Yt(){for(var n=null,r=0;r<document.styleSheets.length;r++){var i=document.styleSheets[r];if(i.cssRules){try{i.cssRules}catch{continue}n=i;break}}return n??Vt()}function Vt(){var n=document.createElement("style");return document.head.appendChild(n),n.sheet}function yt(){e.config.noCalendar||e.isMobile||(ce(),Xe(),xe())}function nt(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function wt(n){n.preventDefault(),n.stopPropagation();var r=function(I){return I.classList&&I.classList.contains("flatpickr-day")&&!I.classList.contains("flatpickr-disabled")&&!I.classList.contains("notAllowed")},i=Ft(le(n),r);if(i!==void 0){var l=i,g=e.latestSelectedDateObj=new Date(l.dateObj.getTime()),k=(g.getMonth()<e.currentMonth||g.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=l,e.config.mode==="single")e.selectedDates=[g];else if(e.config.mode==="multiple"){var N=rt(g);N?e.selectedDates.splice(parseInt(N),1):e.selectedDates.push(g)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=g,e.selectedDates.push(g),de(g,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(I,W){return I.getTime()-W.getTime()}));if(E(),k){var _=e.currentYear!==g.getFullYear();e.currentYear=g.getFullYear(),e.currentMonth=g.getMonth(),_&&(X("onYearChange"),ce()),X("onMonthChange")}if(Xe(),xe(),ve(),!k&&e.config.mode!=="range"&&e.config.showMonths===1?Q(l):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var B=e.config.mode==="single"&&!e.config.enableTime,M=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(B||M)&&nt()}F()}}var Je={locale:[kt,A],showMonths:[ye,d,Y],minDate:[T],maxDate:[T],positionElement:[Mt],clickOpens:[function(){e.config.clickOpens===!0?(h(e._input,"focus",e.open),h(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function Ut(n,r){if(n!==null&&typeof n=="object"){Object.assign(e.config,n);for(var i in n)Je[i]!==void 0&&Je[i].forEach(function(l){return l()})}else e.config[n]=r,Je[n]!==void 0?Je[n].forEach(function(l){return l()}):lt.indexOf(n)>-1&&(e.config[n]=dt(r));e.redraw(),ve(!0)}function Ct(n,r){var i=[];if(n instanceof Array)i=n.map(function(l){return e.parseDate(l,r)});else if(n instanceof Date||typeof n=="number")i=[e.parseDate(n,r)];else if(typeof n=="string")switch(e.config.mode){case"single":case"time":i=[e.parseDate(n,r)];break;case"multiple":i=n.split(e.config.conjunction).map(function(l){return e.parseDate(l,r)});break;case"range":i=n.split(e.l10n.rangeSeparator).map(function(l){return e.parseDate(l,r)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(n)));e.selectedDates=e.config.allowInvalidPreload?i:i.filter(function(l){return l instanceof Date&&D(l,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(l,g){return l.getTime()-g.getTime()})}function Rt(n,r,i){if(r===void 0&&(r=!1),i===void 0&&(i=e.config.dateFormat),n!==0&&!n||n instanceof Array&&n.length===0)return e.clear(r);Ct(n,i),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),T(void 0,r),w(),e.selectedDates.length===0&&e.clear(!1),ve(r),r&&X("onChange")}function Dt(n){return n.slice().map(function(r){return typeof r=="string"||typeof r=="number"||r instanceof Date?e.parseDate(r,void 0,!0):r&&typeof r=="object"&&r.from&&r.to?{from:e.parseDate(r.from,void 0),to:e.parseDate(r.to,void 0)}:r}).filter(function(r){return r})}function Wt(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var n=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);n&&Ct(n,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function Kt(){if(e.input=xt(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=V(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Mt()}function Mt(){e._positionElement=e.config.positionElement||e._input}function qt(){var n=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=V("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=n,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=n==="datetime-local"?"Y-m-d\\TH:i:S":n==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}h(e.mobileInput,"change",function(r){e.setDate(le(r).value,!1,e.mobileFormatStr),X("onChange"),X("onClose")})}function Jt(n){if(e.isOpen===!0)return e.close();e.open(n)}function X(n,r){if(e.config!==void 0){var i=e.config[n];if(i!==void 0&&i.length>0)for(var l=0;i[l]&&l<i.length;l++)i[l](e.selectedDates,e.input.value,e,r);n==="onChange"&&(e.input.dispatchEvent(at("change")),e.input.dispatchEvent(at("input")))}}function at(n){var r=document.createEvent("Event");return r.initEvent(n,!0,!0),r}function rt(n){for(var r=0;r<e.selectedDates.length;r++){var i=e.selectedDates[r];if(i instanceof Date&&de(i,n)===0)return""+r}return!1}function Xt(n){return e.config.mode!=="range"||e.selectedDates.length<2?!1:de(n,e.selectedDates[0])>=0&&de(n,e.selectedDates[1])<=0}function Xe(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(n,r){var i=new Date(e.currentYear,e.currentMonth,1);i.setMonth(e.currentMonth+r),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[r].textContent=et(i.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=i.getMonth().toString(),n.value=i.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function ot(n){var r=n||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(i){return e.formatDate(i,r)}).filter(function(i,l,g){return e.config.mode!=="range"||e.config.enableTime||g.indexOf(i)===l}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function ve(n){n===void 0&&(n=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=ot(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=ot(e.config.altFormat)),n!==!1&&X("onValueUpdate")}function Gt(n){var r=le(n),i=e.prevMonthNav.contains(r),l=e.nextMonthNav.contains(r);i||l?s(i?-1:1):e.yearElements.indexOf(r)>=0?r.select():r.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):r.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Zt(n){n.preventDefault();var r=n.type==="keydown",i=le(n),l=i;e.amPM!==void 0&&i===e.amPM&&(e.amPM.textContent=e.l10n.amPM[fe(e.amPM.textContent===e.l10n.amPM[0])]);var g=parseFloat(l.getAttribute("min")),k=parseFloat(l.getAttribute("max")),N=parseFloat(l.getAttribute("step")),_=parseInt(l.value,10),B=n.delta||(r?n.which===38?1:-1:0),M=_+N*B;if(typeof l.value<"u"&&l.value.length===2){var I=l===e.hourElement,W=l===e.minuteElement;M<g?(M=k+M+fe(!I)+(fe(I)&&fe(!e.amPM)),W&&G(void 0,-1,e.hourElement)):M>k&&(M=l===e.hourElement?M-k-fe(!e.amPM):g,W&&G(void 0,1,e.hourElement)),e.amPM&&I&&(N===1?M+_===23:Math.abs(M-_)>N)&&(e.amPM.textContent=e.l10n.amPM[fe(e.amPM.textContent===e.l10n.amPM[0])]),l.value=ie(M)}}return c(),e}function Oe(a,o){for(var e=Array.prototype.slice.call(a).filter(function(v){return v instanceof HTMLElement}),b=[],c=0;c<e.length;c++){var u=e[c];try{if(u.getAttribute("data-fp-omit")!==null)continue;u._flatpickr!==void 0&&(u._flatpickr.destroy(),u._flatpickr=void 0),u._flatpickr=er(u,o||{}),b.push(u._flatpickr)}catch(v){console.error(v)}}return b.length===1?b[0]:b}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(a){return Oe(this,a)},HTMLElement.prototype.flatpickr=function(a){return Oe([this],a)});var Z=function(a,o){return typeof a=="string"?Oe(window.document.querySelectorAll(a),o):a instanceof Node?Oe([a],o):Oe(a,o)};Z.defaultConfig={};Z.l10ns={en:te({},Ve),default:te({},Ve)};Z.localize=function(a){Z.l10ns.default=te(te({},Z.l10ns.default),a)};Z.setDefaults=function(a){Z.defaultConfig=te(te({},Z.defaultConfig),a)};Z.parseDate=gt({});Z.formatDate=zt({});Z.compareDates=de;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(a){return Oe(this,a)});Date.prototype.fp_incr=function(a){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof a=="string"?parseInt(a,10):a))};typeof window<"u"&&(window.flatpickr=Z);const Pt=["onChange","onClose","onDestroy","onMonthChange","onOpen","onYearChange"],tr=["onValueUpdate","onDayCreate","onParseConfig","onReady","onPreCalendarPosition","onKeyDown"];function $t(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ot(a){return a instanceof Array?a:[a]}function mt(a){return a&&a.length?a:null}const St=[...Pt,...tr],nr=["locale","showMonths"],It=be({name:"FlatPickr",compatConfig:{MODE:3},render(){return pt("input",{type:"text","data-input":!0,disabled:this.disabled,onInput:this.onInput})},emits:["blur","update:modelValue",...St.map($t)],props:{modelValue:{type:[String,Number,Date,Array,null],required:!0},config:{type:Object,default:()=>({defaultDate:null,wrap:!1})},events:{type:Array,default:()=>Pt},disabled:{type:Boolean,default:!1}},data(){return{fp:null}},mounted(){this.fp||(this.fp=Z(this.getElem(),this.prepareConfig()),this.fpInput().addEventListener("blur",this.onBlur),this.$watch("disabled",this.watchDisabled,{immediate:!0}))},methods:{prepareConfig(){let a=Object.assign({},this.config);this.events.forEach(e=>{let b=Z.defaultConfig[e]||[],c=(...u)=>{this.$emit($t(e),...u)};a[e]=Ot(a[e]||[]).concat(b,c)});const o=this.onClose.bind(this);return a.onClose=Ot(a.onClose||[]).concat(o),a.defaultDate=this.modelValue||a.defaultDate,a},getElem(){return this.config.wrap?this.$el.parentNode:this.$el},onInput(a){const o=a.target;un().then(()=>{this.$emit("update:modelValue",mt(o.value))})},fpInput(){return this.fp.altInput||this.fp.input},onBlur(a){this.$emit("blur",mt(a.target.value))},onClose(a,o){this.$emit("update:modelValue",o)},watchDisabled(a){a?this.fpInput().setAttribute("disabled",""):this.fpInput().removeAttribute("disabled")}},watch:{config:{deep:!0,handler(a){if(!this.fp)return;let o=Object.assign({},a);St.forEach(e=>{delete o[e]}),this.fp.set(o),nr.forEach(e=>{typeof o[e]<"u"&&this.fp.set(e,o[e])})}},modelValue(a){var o;!this.$el||a===mt(this.$el.value)||(o=this.fp)===null||o===void 0||o.setDate(a,!0)}},beforeUnmount(){this.fp&&(this.fpInput().removeEventListener("blur",this.onBlur),this.fp.destroy(),this.fp=null)}});var He={exports:{}},ar=He.exports,At;function rr(){return At||(At=1,(function(a,o){(function(e,b){b(o)})(ar,(function(e){var b=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},c={weekdays:{shorthand:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],longhand:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]},months:{shorthand:["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Ноя","Дек"],longhand:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"]},firstDayOfWeek:1,ordinal:function(){return""},rangeSeparator:" — ",weekAbbreviation:"Нед.",scrollTitle:"Прокрутите для увеличения",toggleTitle:"Нажмите для переключения",amPM:["ДП","ПП"],yearAriaLabel:"Год",time_24hr:!0};b.l10ns.ru=c;var u=b.l10ns;e.Russian=c,e.default=u,Object.defineProperty(e,"__esModule",{value:!0})}))})(He,He.exports)),He.exports}var or=rr();const ir={class:"space-y-5"},sr={class:"text-sm text-gray-500 dark:text-gray-400"},lr={class:"font-semibold text-black dark:text-white"},dr={class:"grid grid-cols-2 gap-4"},ur=["disabled"],cr=["value"],fr={key:0,class:"mt-1 text-xs text-primary"},mr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},pr={key:0,class:"ml-2 text-xs text-primary animate-pulse"},gr=["disabled"],vr=["value"],hr={key:0,class:"mt-1 text-xs text-gray-500"},br={class:"flex justify-end gap-3 w-full"},xr={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},kr=be({__name:"DownloadCertificatesModal",props:{organization:{},isOpen:{type:Boolean}},emits:["close"],setup(a,{emit:o}){const{authFetch:e}=We(),b=tt(),c=a,u=o,v=H([]),d=H([]),m=H(!1),R=H(!1),$=H(!1),E=H({courseId:"all",groupId:"all",startDate:"",endDate:""}),w={locale:or.Russian,dateFormat:"Y-m-d",allowInput:!0,altInput:!0,altFormat:"d.m.Y"};Ue(()=>{c.isOpen&&c.organization&&f()}),Be(()=>c.isOpen,async T=>{T&&c.organization&&(E.value={courseId:"all",groupId:"all",startDate:"",endDate:""},await f())}),Be(()=>E.value.courseId,async T=>{E.value.groupId="all",T!=="all"?await p(T):d.value=[]});const f=async()=>{if(c.organization){m.value=!0;try{const T=await e(`/api/organizations/${c.organization.id}/courses`,{method:"GET"});T.success&&(v.value=T.data)}catch(T){console.error("Ошибка загрузки курсов:",T),b.error("Не удалось загрузить список курсов")}finally{m.value=!1}}},p=async T=>{if(c.organization){R.value=!0;try{const O=await e(`/api/organizations/${c.organization.id}/groups?courseId=${T}`,{method:"GET"});O.success&&(d.value=O.data)}catch(O){console.error("Ошибка загрузки групп:",O),b.error("Не удалось загрузить список групп")}finally{R.value=!1}}},h=T=>T?new Date(T).toLocaleDateString("ru-RU"):"",F=async()=>{if(c.organization){$.value=!0;try{const T=new URLSearchParams;E.value.courseId!=="all"&&T.append("courseId",E.value.courseId),E.value.groupId!=="all"&&T.append("groupId",E.value.groupId),E.value.startDate&&T.append("startDate",E.value.startDate),E.value.endDate&&T.append("endDate",E.value.endDate);const O=cn("auth_token").value,G=await fetch(`/api/organizations/${c.organization.id}/certificates/archive?${T.toString()}`,{headers:{Authorization:`Bearer ${O}`}});if(!G.ok){const ne=await G.json();throw new Error(ne.message||"Ошибка скачивания")}const j=await G.blob(),L=window.URL.createObjectURL(j),Q=document.createElement("a"),oe=G.headers.get("content-disposition");let ue=`certificates_${c.organization.id}.zip`;if(oe){const ne=/filename="?([^"]+)"?/.exec(oe);ne&&ne[1]&&(ue=ne[1])}Q.href=L,Q.setAttribute("download",ue),document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),window.URL.revokeObjectURL(L),b.success("Архив успешно скачан"),U()}catch(T){console.error("Ошибка скачивания архива:",T),b.error(T.message||"Не удалось скачать архив сертификатов")}finally{$.value=!1}}},U=()=>{$.value||u("close")};return(T,O)=>{const G=Se,j=Re;return x(),he(j,{"is-open":a.isOpen,onClose:U,size:"md"},{header:J(()=>[...O[4]||(O[4]=[t("div",{class:"flex items-center gap-3"},[t("div",{class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])]),t("h3",{class:"text-xl font-semibold text-black dark:text-white"}," Скачивание сертификатов ")],-1)])]),default:J(()=>[t("div",ir,[t("p",sr,[O[5]||(O[5]=z(" Выберите параметры для скачивания архива сертификатов организации ",-1)),t("span",lr,y(a.organization?.name),1),O[6]||(O[6]=z(". ",-1))]),t("div",dr,[t("div",null,[O[7]||(O[7]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," С даты выдачи ",-1)),K(Ce(It),{modelValue:E.value.startDate,"onUpdate:modelValue":O[0]||(O[0]=L=>E.value.startDate=L),config:w,class:"w-full rounded-lg border border-stroke bg-transparent py-2.5 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",placeholder:"ДД.ММ.ГГГГ"},null,8,["modelValue"])]),t("div",null,[O[8]||(O[8]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," По дату выдачи ",-1)),K(Ce(It),{modelValue:E.value.endDate,"onUpdate:modelValue":O[1]||(O[1]=L=>E.value.endDate=L),config:w,class:"w-full rounded-lg border border-stroke bg-transparent py-2.5 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",placeholder:"ДД.ММ.ГГГГ"},null,8,["modelValue"])])]),t("div",null,[O[10]||(O[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Курс ",-1)),q(t("select",{"onUpdate:modelValue":O[2]||(O[2]=L=>E.value.courseId=L),class:"w-full rounded-lg border border-stroke bg-transparent py-2.5 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary disabled:opacity-50",disabled:m.value},[O[9]||(O[9]=t("option",{value:"all"},"Все курсы",-1)),(x(!0),C(Me,null,_e(v.value,L=>(x(),C("option",{key:L.id,value:L.id},y(L.name)+" "+y(L.code?`(${L.code})`:""),9,cr))),128))],8,ur),[[Ye,E.value.courseId]]),m.value?(x(),C("p",fr," Загрузка курсов... ")):P("",!0)]),t("div",null,[t("label",mr,[O[11]||(O[11]=z(" Группа ",-1)),R.value?(x(),C("span",pr,"(Загрузка...)")):P("",!0)]),q(t("select",{"onUpdate:modelValue":O[3]||(O[3]=L=>E.value.groupId=L),class:"w-full rounded-lg border border-stroke bg-transparent py-2.5 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800",disabled:E.value.courseId==="all"||R.value},[O[12]||(O[12]=t("option",{value:"all"},"Все группы курса",-1)),(x(!0),C(Me,null,_e(d.value,L=>(x(),C("option",{key:L.id,value:L.id},y(L.name)+" ("+y(h(L.start_date))+" - "+y(h(L.end_date))+") ",9,vr))),128))],8,gr),[[Ye,E.value.groupId]]),E.value.courseId==="all"?(x(),C("p",hr," Выберите курс, чтобы увидеть список групп ")):P("",!0)])])]),footer:J(()=>[t("div",br,[K(G,{variant:"outline",onClick:U,disabled:$.value},{default:J(()=>[...O[13]||(O[13]=[z(" Отмена ",-1)])]),_:1},8,["disabled"]),K(G,{variant:"primary",onClick:F,loading:$.value,class:"flex items-center gap-2"},{default:J(()=>[$.value?P("",!0):(x(),C("svg",xr,[...O[14]||(O[14]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),O[15]||(O[15]=z(" Скачать архив ",-1))]),_:1},8,["loading"])])]),_:1},8,["is-open"])}}}),yr=Object.assign(kr,{__name:"OrganizationsDownloadCertificatesModal"}),wr={class:"flex flex-col gap-6"},Cr={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Dr={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},Mr={key:0,class:"text-primary"},_r={class:"flex flex-wrap items-center gap-3"},Er={class:"bg-white dark:bg-boxdark rounded-xl shadow-md p-6"},Tr={class:"flex items-center gap-3 mb-4"},$r={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Or={class:"relative"},Sr={class:"bg-white dark:bg-boxdark rounded-xl shadow-md overflow-hidden"},Ir=be({__name:"OrganizationManagementPanel",setup(a){const{authFetch:o}=We(),e=tt(),b=H([]),c=H(!1),u=H(!1),v=H(!1),d=H(!1),m=H(!1),R=H(!1),$=H(null),E=H(null),w=H({page:1,limit:20,total:0,totalPages:0}),f=H({search:"",isActive:""});let p=null;const h=vt(()=>f.value.search!==""||f.value.isActive!==""),F=()=>{p&&clearTimeout(p),p=setTimeout(()=>{w.value.page=1,j()},300)},U=()=>{w.value.page=1,j()},T=()=>{f.value={search:"",isActive:""},w.value.page=1,j()},O=Y=>{w.value.page=Y,j()},G=Y=>{w.value.limit=Y,w.value.page=1,j()},j=async()=>{c.value=!0;try{const Y=new URLSearchParams;Y.append("page",w.value.page.toString()),Y.append("limit",w.value.limit.toString()),f.value.search&&Y.append("search",f.value.search),f.value.isActive!==""&&Y.append("isActive",f.value.isActive);const A=await o(`/api/organizations?${Y.toString()}`,{method:"GET"});A.success&&(b.value=A.data,w.value.total=A.total,w.value.totalPages=A.totalPages,w.value.page=A.page,w.value.limit=A.limit)}catch(Y){console.error("Ошибка загрузки организаций:",Y),e.error("Не удалось загрузить список организаций","Ошибка")}finally{c.value=!1}},L=()=>{$.value=null,u.value=!0},Q=Y=>{$.value=Y,u.value=!0},oe=()=>{v.value=!1,u.value=!0},ue=()=>{u.value=!1,$.value=null},ne=Y=>{$.value=Y,v.value=!0},Ie=()=>{v.value=!1,$.value=null},xe=Y=>{$.value=Y,d.value=!0},ce=()=>{d.value=!1,$.value=null},Ae=Y=>{const A=b.value.find(S=>S.id===Y);A&&(E.value=A,m.value=!0)},ye=()=>{R.value||(m.value=!1,E.value=null)},je=async()=>{if(E.value){R.value=!0;try{(await o(`/api/organizations/${E.value.id}`,{method:"DELETE"})).success&&(e.success("Организация успешно удалена","Успех"),await j(),ye())}catch(Y){console.error("Ошибка удаления организации:",Y);const A=Y.data?.statusMessage||"Не удалось удалить организацию";e.error(A,"Ошибка")}finally{R.value=!1}}},Fe=async Y=>{try{if($.value){const A=await o(`/api/organizations/${$.value.id}`,{method:"PUT",body:Y});if(A.success){const S=b.value.findIndex(s=>s.id===$.value.id);S!==-1&&(b.value[S]=A.data),e.success("Организация успешно обновлена","Успех"),ue()}}else(await o("/api/organizations",{method:"POST",body:Y})).success&&(await j(),e.success("Организация успешно создана","Успех"),ue())}catch(A){console.error("Ошибка сохранения организации:",A);const S=A.data?.statusMessage||"Не удалось сохранить организацию";e.error(S,"Ошибка")}};return Ue(()=>{j()}),(Y,A)=>{const S=Se,s=Vn,ke=vn,ze=ea,Pe=qa,ge=yr,we=hn;return x(),C("div",wr,[t("div",Cr,[t("div",null,[A[2]||(A[2]=t("h3",{class:"text-xl font-semibold text-black dark:text-white"}," Управление организациями ",-1)),t("p",Dr,[z(" Всего организаций: "+y(w.value.total)+" ",1),h.value?(x(),C("span",Mr," (отфильтровано) ")):P("",!0)])]),t("div",_r,[K(S,{variant:"primary",onClick:L,class:"flex items-center gap-2"},{default:J(()=>[...A[3]||(A[3]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),z(" Добавить организацию ",-1)])]),_:1})])]),t("div",Er,[t("div",Tr,[A[5]||(A[5]=t("div",{class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})])],-1)),A[6]||(A[6]=t("h4",{class:"text-lg font-semibold text-black dark:text-white"}," Фильтры ",-1)),h.value?(x(),C("button",{key:0,onClick:T,class:"ml-auto text-sm text-primary hover:text-primary/80 transition-colors flex items-center gap-1"},[...A[4]||(A[4]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),z(" Сбросить фильтры ",-1)])])):P("",!0)]),t("div",$r,[t("div",null,[A[8]||(A[8]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Поиск ",-1)),t("div",Or,[q(t("input",{"onUpdate:modelValue":A[0]||(A[0]=me=>f.value.search=me),type:"text",placeholder:"Название, код...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-10 pr-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onInput:F},null,544),[[re,f.value.search]]),A[7]||(A[7]=t("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),t("div",null,[A[10]||(A[10]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Статус ",-1)),q(t("select",{"onUpdate:modelValue":A[1]||(A[1]=me=>f.value.isActive=me),class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onChange:U},[...A[9]||(A[9]=[t("option",{value:""},"Все",-1),t("option",{value:"true"},"Активные",-1),t("option",{value:"false"},"Неактивные",-1)])],544),[[Ye,f.value.isActive]])])])]),t("div",Sr,[K(s,{organizations:b.value,loading:c.value,onEdit:Q,onDelete:Ae,onView:ne,onDownload:xe},null,8,["organizations","loading"]),w.value.totalPages>0?(x(),he(ke,{key:0,"current-page":w.value.page,"total-pages":w.value.totalPages,total:w.value.total,limit:w.value.limit,loading:c.value,"onUpdate:page":O,"onUpdate:limit":G},null,8,["current-page","total-pages","total","limit","loading"])):P("",!0)]),u.value?(x(),he(ze,{key:0,organization:$.value,"is-open":u.value,onClose:ue,onSubmit:Fe},null,8,["organization","is-open"])):P("",!0),v.value?(x(),he(Pe,{key:1,organization:$.value,"is-open":v.value,onClose:Ie,onEdit:oe},null,8,["organization","is-open"])):P("",!0),d.value?(x(),he(ge,{key:2,organization:$.value,"is-open":d.value,onClose:ce},null,8,["organization","is-open"])):P("",!0),K(we,{"is-open":m.value,title:"Удаление организации",message:"Вы уверены, что хотите удалить эту организацию?","item-name":E.value?.name,warning:"Это действие нельзя отменить. Организация будет удалена.",loading:R.value,onConfirm:je,onCancel:ye},null,8,["is-open","item-name","loading"])])}}}),Ar=Object.assign(Ir,{__name:"OrganizationsOrganizationManagementPanel"}),jr={class:"space-y-6"},Fr={class:"space-y-4"},zr={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Pr={class:"flex items-center gap-3"},Nr={key:0,class:"h-1.5 w-1.5 rounded-full bg-white"},Hr={class:"flex flex-col"},Lr={class:"mt-1 flex items-center text-xs text-gray-500 dark:text-gray-400"},Br={class:"flex items-center gap-3"},Yr={key:0,class:"h-1.5 w-1.5 rounded-full bg-white"},Vr={class:"flex flex-col"},Ur={class:"mt-1 flex items-center text-xs text-gray-500 dark:text-gray-400"},Rr={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Wr={class:"flex items-center gap-3"},Kr={key:0,class:"h-1.5 w-1.5 rounded-full bg-white"},qr={class:"flex items-center gap-3"},Jr={key:0,class:"h-1.5 w-1.5 rounded-full bg-white"},Xr={class:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-strokedark"},Gr={key:0,class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Zr=be({__name:"CertificateExportModal",props:{isOpen:{type:Boolean},filters:{},totalCount:{},currentCount:{},currentPageData:{}},emits:["close"],setup(a,{emit:o}){const e=a,b=o,{authFetch:c}=We(),u=tt(),v=H("current"),d=H("xlsx"),m=H(!1);function R(){m.value||b("close")}async function $(){m.value=!0;try{let p=[];if(v.value==="current")p=e.currentPageData;else{const j=new URLSearchParams({limit:String(e.totalCount+100),sortBy:e.filters.sortBy,sortOrder:e.filters.sortOrder,disablePagination:"true"});e.filters.search&&j.append("search",e.filters.search),e.filters.status!=="all"&&j.append("status",e.filters.status),e.filters.sourceType!=="all"&&j.append("sourceType",e.filters.sourceType),e.filters.organizationName&&j.append("organizationName",e.filters.organizationName),e.filters.dateFrom&&j.append("dateFrom",e.filters.dateFrom),e.filters.dateTo&&j.append("dateTo",e.filters.dateTo);const L=await c(`/api/certificates?${j.toString()}`);if(!L.success)throw new Error(L.message||"Ошибка загрузки данных");p=L.data.items}const h=p.map(j=>({"Номер сертификата":j.certificateNumber,Слушатель:j.student?.fullName||"",ПИНФЛ:j.student?.pinfl||"",Организация:j.student?.organization||"",Курс:j.course?.name||"",Группа:j.group?.code||"Без группы","Дата выдачи":E(j.issueDate),Выдал:j.issuedBy?.name||"",Статус:w(j),Источник:f(j.sourceType),Примечание:j.revokeReason||""})),F=st.book_new(),U=st.json_to_sheet(h),T=Object.keys(h[0]||{}).map(j=>({wch:Math.max(j.length,...h.map(L=>String(L[j]||"").length))+2}));U["!cols"]=T,st.book_append_sheet(F,U,"Сертификаты");const G=`certificates_export_${new Date().toISOString().split("T")[0]}.${d.value}`;kn(F,G),u.success("Экспорт завершен",`Файл ${G} успешно сохранен`),b("close")}catch(p){console.error("Export error:",p),u.error("Ошибка экспорта",p.message||"Не удалось экспортировать данные")}finally{m.value=!1}}function E(p){return p?new Date(p).toLocaleDateString("ru-RU"):""}function w(p){return p.status==="issued"?"Выдан":p.status==="revoked"?"Отозван":p.status}function f(p){return{group_journal:"Журнал группы",import:"Импорт",manual:"Ручной ввод"}[p]||p}return(p,h)=>{const F=Se,U=Re;return x(),he(U,{"is-open":a.isOpen,onClose:R,title:"Экспорт сертификатов",size:"md"},{default:J(()=>[t("div",jr,[h[13]||(h[13]=t("div",{class:"bg-primary/5 rounded-lg p-4 border border-primary/10"},[t("div",{class:"flex items-start gap-3"},[t("div",{class:"p-2 bg-primary/10 rounded-full shrink-0"},[t("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})])]),t("div",null,[t("h4",{class:"font-medium text-primary"},"Экспорт данных"),t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Выберите параметры экспорта. Файл будет сформирован на основе текущих фильтров. ")])])],-1)),t("div",Fr,[t("div",null,[h[6]||(h[6]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Объем данных ",-1)),t("div",zr,[t("label",{class:ee(["relative flex cursor-pointer rounded-lg border p-4 shadow-sm focus:outline-none transition-all hover:bg-gray-50 dark:hover:bg-meta-4",[v.value==="current"?"border-primary ring-1 ring-primary bg-primary/5":"border-gray-200 dark:border-strokedark"]])},[q(t("input",{type:"radio","onUpdate:modelValue":h[0]||(h[0]=T=>v.value=T),value:"current",class:"sr-only"},null,512),[[Ge,v.value]]),t("div",Pr,[t("div",{class:ee(["h-4 w-4 rounded-full border flex items-center justify-center shrink-0",[v.value==="current"?"border-primary bg-primary":"border-gray-300"]])},[v.value==="current"?(x(),C("div",Nr)):P("",!0)],2),t("div",Hr,[h[4]||(h[4]=t("span",{class:"block text-sm font-medium text-gray-900 dark:text-white"}," Текущая страница ",-1)),t("span",Lr,y(a.currentCount)+" записей ",1)])])],2),t("label",{class:ee(["relative flex cursor-pointer rounded-lg border p-4 shadow-sm focus:outline-none transition-all hover:bg-gray-50 dark:hover:bg-meta-4",[v.value==="all"?"border-primary ring-1 ring-primary bg-primary/5":"border-gray-200 dark:border-strokedark"]])},[q(t("input",{type:"radio","onUpdate:modelValue":h[1]||(h[1]=T=>v.value=T),value:"all",class:"sr-only"},null,512),[[Ge,v.value]]),t("div",Br,[t("div",{class:ee(["h-4 w-4 rounded-full border flex items-center justify-center shrink-0",[v.value==="all"?"border-primary bg-primary":"border-gray-300"]])},[v.value==="all"?(x(),C("div",Yr)):P("",!0)],2),t("div",Vr,[h[5]||(h[5]=t("span",{class:"block text-sm font-medium text-gray-900 dark:text-white"}," Весь список ",-1)),t("span",Ur,y(a.totalCount)+" записей ",1)])])],2)])]),t("div",null,[h[9]||(h[9]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Формат файла ",-1)),t("div",Rr,[t("label",{class:ee(["relative flex cursor-pointer rounded-lg border p-4 shadow-sm focus:outline-none transition-all hover:bg-gray-50 dark:hover:bg-meta-4",[d.value==="xlsx"?"border-primary ring-1 ring-primary bg-primary/5":"border-gray-200 dark:border-strokedark"]])},[q(t("input",{type:"radio","onUpdate:modelValue":h[2]||(h[2]=T=>d.value=T),value:"xlsx",class:"sr-only"},null,512),[[Ge,d.value]]),t("div",Wr,[t("div",{class:ee(["h-4 w-4 rounded-full border flex items-center justify-center shrink-0",[d.value==="xlsx"?"border-primary bg-primary":"border-gray-300"]])},[d.value==="xlsx"?(x(),C("div",Kr)):P("",!0)],2),h[7]||(h[7]=t("span",{class:"block text-sm font-medium text-gray-900 dark:text-white"}," Excel (.xlsx) ",-1))])],2),t("label",{class:ee(["relative flex cursor-pointer rounded-lg border p-4 shadow-sm focus:outline-none transition-all hover:bg-gray-50 dark:hover:bg-meta-4",[d.value==="csv"?"border-primary ring-1 ring-primary bg-primary/5":"border-gray-200 dark:border-strokedark"]])},[q(t("input",{type:"radio","onUpdate:modelValue":h[3]||(h[3]=T=>d.value=T),value:"csv",class:"sr-only"},null,512),[[Ge,d.value]]),t("div",qr,[t("div",{class:ee(["h-4 w-4 rounded-full border flex items-center justify-center shrink-0",[d.value==="csv"?"border-primary bg-primary":"border-gray-300"]])},[d.value==="csv"?(x(),C("div",Jr)):P("",!0)],2),h[8]||(h[8]=t("span",{class:"block text-sm font-medium text-gray-900 dark:text-white"}," CSV (.csv) ",-1))])],2)])])]),t("div",Xr,[K(F,{variant:"secondary",onClick:R,disabled:m.value},{default:J(()=>[...h[10]||(h[10]=[z(" Отмена ",-1)])]),_:1},8,["disabled"]),K(F,{variant:"primary",onClick:$,loading:m.value,disabled:m.value},{default:J(()=>[m.value?P("",!0):(x(),C("svg",Gr,[...h[11]||(h[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),h[12]||(h[12]=z(" Экспортировать ",-1))]),_:1},8,["loading","disabled"])])])]),_:1},8,["is-open"])}}}),Qr=Object.assign(Zr,{__name:"DatabaseCertificateExportModal"}),eo={class:"flex flex-col gap-6"},to={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},no={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},ao={key:0,class:"text-primary"},ro={class:"flex flex-wrap items-center gap-3"},oo={class:"grid grid-cols-2 sm:grid-cols-4 gap-4"},io={class:"bg-white dark:bg-boxdark rounded-lg p-4 shadow-sm border border-stroke dark:border-strokedark"},so={class:"flex items-center gap-3"},lo={class:"text-2xl font-bold text-success"},uo={class:"bg-white dark:bg-boxdark rounded-lg p-4 shadow-sm border border-stroke dark:border-strokedark"},co={class:"flex items-center gap-3"},fo={class:"text-2xl font-bold text-danger"},mo={class:"bg-white dark:bg-boxdark rounded-lg p-4 shadow-sm border border-stroke dark:border-strokedark"},po={class:"flex items-center gap-3"},go={class:"text-2xl font-bold text-warning"},vo={class:"bg-white dark:bg-boxdark rounded-lg p-4 shadow-sm border border-stroke dark:border-strokedark"},ho={class:"flex items-center gap-3"},bo={class:"text-2xl font-bold text-info"},xo={class:"bg-white dark:bg-boxdark rounded-xl shadow-md p-6"},ko={class:"flex items-center gap-3 mb-4"},yo={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},wo={class:"md:col-span-2"},Co={class:"relative"},Do={class:"md:col-span-2"},Mo={class:"md:col-span-1"},_o={class:"md:col-span-1"},Eo={class:"md:col-span-2"},To={class:"flex gap-2"},$o={class:"bg-white dark:bg-boxdark rounded-xl shadow-md overflow-hidden"},Oo={class:"overflow-x-auto"},So={class:"w-full"},Io={class:"border-b border-stroke dark:border-strokedark bg-gray-50 dark:bg-meta-4"},Ao={class:"flex items-center gap-1"},jo={class:"flex items-center gap-1"},Fo={class:"flex items-center gap-1"},zo={class:"flex items-center gap-1"},Po={class:"divide-y divide-gray-200 dark:divide-gray-700"},No={key:0},Ho={key:1},Lo={colspan:"6",class:"px-4 py-12 text-center"},Bo={class:"flex flex-col items-center gap-3"},Yo={class:"text-gray-500 dark:text-gray-400"},Vo={class:"px-4 py-4"},Uo={class:"flex items-center gap-2"},Ro={class:"font-mono text-sm font-semibold text-primary"},Wo={key:0,class:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-warning/20 text-warning",title:"Выдан с предупреждениями"},Ko={class:"px-4 py-4"},qo={class:"font-medium text-black dark:text-white"},Jo={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Xo={key:1,class:"text-xs text-gray-400 font-mono"},Go={class:"px-4 py-4"},Zo={class:"flex items-center gap-2"},Qo={class:"font-medium text-black dark:text-white"},ei=["title"],ti={key:0,class:"ml-0.5 opacity-80"},ni={key:1,class:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-md text-[10px] font-medium bg-success/10 text-success border border-success/20",title:"Импортирован из Excel"},ai={key:2,class:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-500/20 text-purple-600 dark:text-purple-400",title:"Добавлен вручную"},ri={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},oi={key:1,class:"text-xs text-gray-400 italic"},ii={class:"px-4 py-4"},si={class:"text-sm"},li={class:"text-black dark:text-white"},di={key:0,class:"text-gray-500 dark:text-gray-400"},ui={class:"px-4 py-4 text-center"},ci={class:"mr-1"},fi=["title"],mi={class:"px-4 py-4 text-center"},pi={class:"flex items-center justify-center gap-2"},gi=["href"],vi=["onClick"],hi=["onClick"],bi={key:0,class:"flex items-center justify-between px-6 py-4 border-t border-stroke dark:border-strokedark"},xi={class:"text-sm text-gray-600 dark:text-gray-400"},ki={class:"flex items-center gap-2"},yi=["disabled"],wi={class:"px-3 py-1 text-sm"},Ci=["disabled"],Di={class:"space-y-4"},Mi={class:"p-4 bg-danger/10 border border-danger/20 rounded-lg"},_i={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},Ei={class:"font-mono font-semibold"},Ti={class:"font-semibold"},$i={class:"flex justify-end gap-3"},Oi=be({__name:"CertificateManagementPanel",setup(a){const{authFetch:o}=We(),e=tt(),b=be({props:{active:Boolean,order:String},setup(S){return()=>pt("svg",{class:["h-4 w-4 transition-colors",S.active?"text-primary":"text-gray-400"],fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[pt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:S.active&&S.order==="asc"?"M5 15l7-7 7 7":"M19 9l-7 7-7-7"})])}}),c=H([]),u=H(!1),v=H({page:1,limit:20,total:0,totalPages:0}),d=H({total:0,issued:0,revoked:0,organizations:0,groups:0}),m=H({search:"",status:"all",sourceType:"all",organizationName:"",dateFrom:"",dateTo:"",sortBy:"issue_date",sortOrder:"desc"}),R=H(null),$=H(!1),E=H(!1),w=H(null),f=H(""),p=H(!1),h=H(!1),F=H(!1),U=vt(()=>!!(m.value.search||m.value.status!=="all"||m.value.sourceType!=="all"||m.value.organizationName||m.value.dateFrom||m.value.dateTo));async function T(){u.value=!0;try{const S=new URLSearchParams({page:String(v.value.page),limit:String(v.value.limit),sortBy:m.value.sortBy,sortOrder:m.value.sortOrder});m.value.search&&S.append("search",m.value.search),m.value.status!=="all"&&S.append("status",m.value.status),m.value.sourceType!=="all"&&S.append("sourceType",m.value.sourceType),m.value.organizationName&&S.append("organizationName",m.value.organizationName),m.value.dateFrom&&S.append("dateFrom",m.value.dateFrom),m.value.dateTo&&S.append("dateTo",m.value.dateTo);const s=await o(`/api/certificates?${S.toString()}`);s.success&&(c.value=s.data.items,v.value=s.data.pagination,d.value=s.data.stats)}catch(S){console.error("Error loading certificates:",S),e.error("Ошибка загрузки",S.message||"Не удалось загрузить сертификаты")}finally{u.value=!1}}let O=null;function G(){O&&clearTimeout(O),O=setTimeout(()=>{v.value.page=1,T()},350)}function j(){v.value.page=1,T()}function L(){m.value={search:"",status:"all",sourceType:"all",organizationName:"",dateFrom:"",dateTo:"",sortBy:"issue_date",sortOrder:"desc"},v.value.page=1,T()}function Q(S){m.value.sortBy===S?m.value.sortOrder=m.value.sortOrder==="asc"?"desc":"asc":(m.value.sortBy=S,m.value.sortOrder="desc"),T()}function oe(S){v.value.page=S,T()}function ue(S){return new Date(S).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"})}function ne(S){R.value=S,$.value=!0}function Ie(){$.value=!1,R.value=null}function xe(S){w.value=S,f.value="",E.value=!0}function ce(){E.value=!1,w.value=null,f.value=""}async function Ae(){if(!(!w.value||!f.value.trim())){h.value=!0;try{const S=await o(`/api/certificates/${w.value.id}/revoke`,{method:"PATCH",body:{reason:f.value.trim()}});S.success?(e.success("Сертификат отозван",`Сертификат ${w.value.certificateNumber} успешно отозван`),ce(),T()):e.error("Ошибка",S.message||"Не удалось отозвать сертификат")}catch(S){console.error("Error revoking certificate:",S),e.error("Ошибка",S.message||"Не удалось отозвать сертификат")}finally{h.value=!1}}}function ye(){F.value=!0}function je(){F.value=!1}function Fe(){p.value=!0}function Y(){p.value=!1}function A(S){e.success("Сертификат создан",`Сертификат ${S.certificateNumber} успешно добавлен`),T()}return Ue(()=>{T()}),(S,s)=>{const ke=Se,ze=bn,Pe=xn,ge=Re,we=Qr,me=yn;return x(),C("div",eo,[t("div",to,[t("div",null,[s[14]||(s[14]=t("h3",{class:"text-xl font-semibold text-black dark:text-white"}," База сертификатов ",-1)),t("p",no,[z(" Всего сертификатов: "+y(d.value.total)+" ",1),U.value?(x(),C("span",ao," (отфильтровано: "+y(v.value.total)+") ",1)):P("",!0)])]),t("div",ro,[K(ke,{variant:"primary",size:"sm",onClick:Fe},{default:J(()=>[...s[15]||(s[15]=[t("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),z(" Добавить вручную ",-1)])]),_:1}),K(ze,{to:"/database/import-certificates",class:"inline-flex items-center gap-2 rounded-lg bg-primary/10 px-4 py-2 text-sm font-medium text-primary transition-colors hover:bg-primary/20"},{default:J(()=>[...s[16]||(s[16]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1),z(" Импорт из Excel ",-1)])]),_:1}),t("button",{onClick:s[0]||(s[0]=D=>("navigateTo"in S?S.navigateTo:Ce(fn))("/admin/database/ai-import-certificates")),class:"inline-flex items-center gap-2 rounded-lg bg-indigo-50 px-4 py-2 text-sm font-medium text-indigo-600 transition-colors hover:bg-indigo-100 dark:bg-indigo-500/10 dark:text-indigo-400 dark:hover:bg-indigo-500/20"},[...s[17]||(s[17]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),z(" AI Импорт ",-1)])]),K(ke,{variant:"secondary",size:"sm",onClick:ye,disabled:u.value||!c.value.length},{default:J(()=>[...s[18]||(s[18]=[t("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),z(" Экспорт ",-1)])]),_:1},8,["disabled"])])]),t("div",oo,[t("div",io,[t("div",so,[s[20]||(s[20]=t("div",{class:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[s[19]||(s[19]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Выдано",-1)),t("p",lo,y(d.value.issued),1)])])]),t("div",uo,[t("div",co,[s[22]||(s[22]=t("div",{class:"h-10 w-10 rounded-full bg-danger/10 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[s[21]||(s[21]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Отозвано",-1)),t("p",fo,y(d.value.revoked),1)])])]),t("div",mo,[t("div",po,[s[24]||(s[24]=t("div",{class:"h-10 w-10 rounded-full bg-warning/10 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),t("div",null,[s[23]||(s[23]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Организаций",-1)),t("p",go,y(d.value.organizations),1)])])]),t("div",vo,[t("div",ho,[s[26]||(s[26]=t("div",{class:"h-10 w-10 rounded-full bg-info/10 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-info",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),t("div",null,[s[25]||(s[25]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Групп",-1)),t("p",bo,y(d.value.groups),1)])])])]),t("div",xo,[t("div",ko,[s[28]||(s[28]=t("div",{class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},[t("svg",{class:"h-5 w-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})])],-1)),s[29]||(s[29]=t("h4",{class:"font-semibold text-black dark:text-white"},"Фильтры",-1)),U.value?(x(),C("button",{key:0,onClick:L,class:"ml-auto text-sm text-primary hover:underline flex items-center gap-1"},[...s[27]||(s[27]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),z(" Сбросить фильтры ",-1)])])):P("",!0)]),t("div",yo,[t("div",wo,[s[31]||(s[31]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Поиск ",-1)),t("div",Co,[q(t("input",{"onUpdate:modelValue":s[1]||(s[1]=D=>m.value.search=D),type:"text",placeholder:"ФИО, номер сертификата, ПИНФЛ...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-10 pr-4 text-black outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:text-white",onInput:G},null,544),[[re,m.value.search]]),s[30]||(s[30]=t("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),t("div",Do,[s[32]||(s[32]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Организация ",-1)),q(t("input",{"onUpdate:modelValue":s[2]||(s[2]=D=>m.value.organizationName=D),type:"text",placeholder:"Название организации...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 text-black outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:text-white",onInput:G},null,544),[[re,m.value.organizationName]])]),t("div",Mo,[s[34]||(s[34]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Статус ",-1)),q(t("select",{"onUpdate:modelValue":s[3]||(s[3]=D=>m.value.status=D),class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 text-black outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:text-white",onChange:j},[...s[33]||(s[33]=[t("option",{value:"all"},"Все статусы",-1),t("option",{value:"issued"},"Выданные",-1),t("option",{value:"revoked"},"Отозванные",-1)])],544),[[Ye,m.value.status]])]),t("div",_o,[s[36]||(s[36]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Источник ",-1)),q(t("select",{"onUpdate:modelValue":s[4]||(s[4]=D=>m.value.sourceType=D),class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 text-black outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:text-white",onChange:j},[...s[35]||(s[35]=[mn('<option value="all">Все источники</option><option value="group_journal">📋 Журнал группы</option><option value="import">📥 Импорт (Excel)</option><option value="ai">✨ AI Импорт</option><option value="manual">✍️ Ручной ввод</option>',5)])],544),[[Ye,m.value.sourceType]])]),t("div",Eo,[s[37]||(s[37]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Период выдачи ",-1)),t("div",To,[q(t("input",{"onUpdate:modelValue":s[5]||(s[5]=D=>m.value.dateFrom=D),type:"date",class:"flex-1 rounded-lg border border-stroke bg-transparent py-2 px-3 text-black outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:text-white",onChange:j},null,544),[[re,m.value.dateFrom]]),q(t("input",{"onUpdate:modelValue":s[6]||(s[6]=D=>m.value.dateTo=D),type:"date",class:"flex-1 rounded-lg border border-stroke bg-transparent py-2 px-3 text-black outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:text-white",onChange:j},null,544),[[re,m.value.dateTo]])])])])]),t("div",$o,[t("div",Oo,[t("table",So,[t("thead",null,[t("tr",Io,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:text-primary transition-colors",onClick:s[7]||(s[7]=D=>Q("certificate_number"))},[t("div",Ao,[s[38]||(s[38]=z(" № Сертификата ",-1)),K(Ce(b),{active:m.value.sortBy==="certificate_number",order:m.value.sortOrder},null,8,["active","order"])])]),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:text-primary transition-colors",onClick:s[8]||(s[8]=D=>Q("student_name"))},[t("div",jo,[s[39]||(s[39]=z(" Слушатель ",-1)),K(Ce(b),{active:m.value.sortBy==="student_name",order:m.value.sortOrder},null,8,["active","order"])])]),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:text-primary transition-colors",onClick:s[9]||(s[9]=D=>Q("course_name"))},[t("div",Fo,[s[40]||(s[40]=z(" Курс / Группа ",-1)),K(Ce(b),{active:m.value.sortBy==="course_name",order:m.value.sortOrder},null,8,["active","order"])])]),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:text-primary transition-colors",onClick:s[10]||(s[10]=D=>Q("issue_date"))},[t("div",zo,[s[41]||(s[41]=z(" Дата выдачи ",-1)),K(Ce(b),{active:m.value.sortBy==="issue_date",order:m.value.sortOrder},null,8,["active","order"])])]),s[42]||(s[42]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Статус ",-1)),s[43]||(s[43]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Действия ",-1))])]),t("tbody",Po,[u.value?(x(),C("tr",No,[...s[44]||(s[44]=[t("td",{colspan:"6",class:"px-4 py-12 text-center"},[t("div",{class:"flex flex-col items-center gap-3"},[t("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"}),t("p",{class:"text-gray-500 dark:text-gray-400"}," Загрузка сертификатов... ")])],-1)])])):c.value.length?(x(!0),C(Me,{key:2},_e(c.value,D=>(x(),C("tr",{key:D.id,class:"hover:bg-gray-50 dark:hover:bg-meta-4 transition-colors"},[t("td",Vo,[t("div",Uo,[t("span",Ro,y(D.certificateNumber),1),D.hasWarnings?(x(),C("span",Wo," ⚠️ ")):P("",!0)])]),t("td",Ko,[t("div",null,[t("p",qo,y(D.student.fullName),1),D.student.organization?(x(),C("p",Jo,y(D.student.organization),1)):P("",!0),D.student.pinfl?(x(),C("p",Xo," ПИНФЛ: "+y(D.student.pinfl),1)):P("",!0)])]),t("td",Go,[t("div",null,[t("div",Zo,[t("p",Qo,y(D.course.name),1),D.sourceType==="import"&&D.importSource==="ai"?(x(),C("span",{key:0,class:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-md text-[10px] font-bold bg-linear-to-r from-violet-500/10 to-indigo-500/10 text-indigo-700 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-500/30 shadow-sm",title:D.aiConfidence?"Уверенность AI: "+Math.round(D.aiConfidence*100)+"%":"Импортирован через AI"},[s[46]||(s[46]=t("svg",{class:"h-3 w-3 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),s[47]||(s[47]=z(" AI Import ",-1)),D.aiConfidence?(x(),C("span",ti,y(Math.round(D.aiConfidence*100))+"% ",1)):P("",!0)],8,ei)):D.sourceType==="import"?(x(),C("span",ni,[...s[48]||(s[48]=[t("svg",{class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),z(" Excel ",-1)])])):D.sourceType==="manual"?(x(),C("span",ai," ✍️ Ручной ")):P("",!0)]),D.group.code?(x(),C("p",ri," Группа: "+y(D.group.code),1)):D.sourceType!=="group_journal"?(x(),C("p",oi," Без группы ")):P("",!0)])]),t("td",ii,[t("div",si,[t("p",li,y(ue(D.issueDate)),1),D.issuedBy?(x(),C("p",di,y(D.issuedBy.name),1)):P("",!0)])]),t("td",ui,[t("span",{class:ee(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium",D.status==="issued"?"bg-success/20 text-success":"bg-danger/20 text-danger"])},[t("span",ci,y(D.status==="issued"?"✓":"✕"),1),z(" "+y(D.status==="issued"?"Выдан":"Отозван"),1)],2),D.status==="revoked"&&D.revokeReason?(x(),C("p",{key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1 max-w-32 truncate",title:D.revokeReason},y(D.revokeReason),9,fi)):P("",!0)]),t("td",mi,[t("div",pi,[D.id?(x(),C("a",{key:0,href:`/api/certificates/download/${D.id}`,target:"_blank",class:"p-2 rounded-lg text-primary hover:bg-primary/10 transition-colors",title:"Скачать PDF"},[...s[49]||(s[49]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])],8,gi)):P("",!0),t("button",{onClick:Ee=>ne(D),class:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 transition-colors",title:"Подробнее"},[...s[50]||(s[50]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,vi),D.status==="issued"?(x(),C("button",{key:1,onClick:Ee=>xe(D),class:"p-2 rounded-lg text-danger hover:bg-danger/10 transition-colors",title:"Отозвать сертификат"},[...s[51]||(s[51]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1)])],8,hi)):P("",!0)])])]))),128)):(x(),C("tr",Ho,[t("td",Lo,[t("div",Bo,[s[45]||(s[45]=t("svg",{class:"h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("p",Yo,y(U.value?"По заданным фильтрам сертификаты не найдены":"Сертификаты пока не выданы"),1)])])]))])])]),v.value.totalPages>1?(x(),C("div",bi,[t("p",xi," Показано "+y((v.value.page-1)*v.value.limit+1)+" - "+y(Math.min(v.value.page*v.value.limit,v.value.total))+" из "+y(v.value.total),1),t("div",ki,[t("button",{disabled:v.value.page<=1,onClick:s[11]||(s[11]=D=>oe(v.value.page-1)),class:"px-3 py-1 rounded border border-stroke dark:border-strokedark hover:bg-gray-100 dark:hover:bg-meta-4 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," ← ",8,yi),t("span",wi,y(v.value.page)+" / "+y(v.value.totalPages),1),t("button",{disabled:v.value.page>=v.value.totalPages,onClick:s[12]||(s[12]=D=>oe(v.value.page+1)),class:"px-3 py-1 rounded border border-stroke dark:border-strokedark hover:bg-gray-100 dark:hover:bg-meta-4 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," → ",8,Ci)])])):P("",!0)]),R.value?(x(),he(Pe,{key:0,certificate:R.value,"is-open":$.value,onClose:Ie},null,8,["certificate","is-open"])):P("",!0),K(ge,{"is-open":E.value,onClose:ce,title:"Отзыв сертификата",size:"md"},{default:J(()=>[t("div",Di,[t("div",Mi,[s[55]||(s[55]=t("p",{class:"text-danger font-medium"},"⚠️ Внимание!",-1)),t("p",_i,[s[52]||(s[52]=z(" Вы собираетесь отозвать сертификат ",-1)),t("span",Ei,y(w.value?.certificateNumber),1),s[53]||(s[53]=z(" слушателя ",-1)),t("span",Ti,y(w.value?.student.fullName),1),s[54]||(s[54]=z(". Это действие будет записано в журнал. ",-1))])]),t("div",null,[s[56]||(s[56]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[z(" Причина отзыва "),t("span",{class:"text-danger"},"*")],-1)),q(t("textarea",{"onUpdate:modelValue":s[13]||(s[13]=D=>f.value=D),rows:"3",placeholder:"Укажите причину отзыва сертификата...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 text-black outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:text-white resize-none"},null,512),[[re,f.value]])]),t("div",$i,[K(ke,{variant:"secondary",onClick:ce},{default:J(()=>[...s[57]||(s[57]=[z(" Отмена ",-1)])]),_:1}),K(ke,{variant:"danger",onClick:Ae,disabled:!f.value.trim()||h.value,loading:h.value},{default:J(()=>[...s[58]||(s[58]=[z(" Отозвать сертификат ",-1)])]),_:1},8,["disabled","loading"])])])]),_:1},8,["is-open"]),K(we,{"is-open":F.value,filters:m.value,"total-count":d.value.total,"current-count":c.value.length,"current-page-data":c.value,onClose:je},null,8,["is-open","filters","total-count","current-count","current-page-data"]),K(me,{"is-open":p.value,onClose:Y,onCreated:A},null,8,["is-open"])])}}}),Si=Object.assign(Oi,{__name:"DatabaseCertificateManagementPanel"}),Ii={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},Ai={class:"flex flex-col gap-6"},ji={class:"rounded-lg bg-gray-50 p-1 dark:bg-gray-800"},Fi={class:"flex gap-1","aria-label":"Tabs"},zi=["onClick","disabled"],Pi={class:"flex items-center justify-center gap-2"},Ni={key:0,class:"inline-flex items-center rounded-full bg-gray-200 px-2 py-0.5 text-xs font-medium text-gray-700 dark:bg-gray-600 dark:text-gray-300"},Hi={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},Li={class:"p-6"},Bi={class:"p-6"},ts=be({__name:"index",setup(a){const o=pn(),e=gn(),b=[{id:"organizations",label:"База организаций",disabled:!1},{id:"courses",label:"База курсов",disabled:!0},{id:"certificates",label:"База сертификатов",disabled:!1}],c=H("organizations"),u=()=>{const d=o.query.tab;d&&b.some(m=>m.id===d&&!m.disabled)?c.value=d:c.value="organizations"};Be(()=>o.query.tab,()=>{u()}),Ue(()=>{u()});const v=d=>{c.value!==d&&(c.value=d,e.push({query:{...o.query,tab:d}}))};return(d,m)=>{const R=Ar,$=Si;return x(),C("div",Ii,[m[0]||(m[0]=t("div",{class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},[t("h2",{class:"text-title-md2 font-bold text-black dark:text-white"}," База данных ")],-1)),t("div",Ai,[t("div",ji,[t("nav",Fi,[(x(),C(Me,null,_e(b,E=>t("button",{key:E.id,onClick:w=>v(E.id),disabled:E.disabled,class:ee(["flex-1 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200",c.value===E.id?"bg-primary text-white shadow-sm":"text-gray-600 hover:bg-white hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",E.disabled&&"opacity-50 cursor-not-allowed hover:bg-transparent dark:hover:bg-transparent"])},[t("span",Pi,[z(y(E.label)+" ",1),E.disabled?(x(),C("span",Ni," Скоро ")):P("",!0)])],10,zi)),64))])]),t("div",Hi,[q(t("div",Li,[K(R)],512),[[_t,c.value==="organizations"]]),q(t("div",Bi,[K($)],512),[[_t,c.value==="certificates"]])])])])}}});export{ts as default};
