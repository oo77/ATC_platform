import{_ as q}from"./BMofnORk.js";import{_ as fe}from"./BKg9m4wI.js";import{v as H,f as F,e as ue,c as l,a as e,h as g,F as W,j as Q,b as h,w as C,t as u,o as a,r as k,g as Z,k as S,x as A,A as X,D as me,d as D,n as O,s as Re,z as J,G as te,q as _e,T as Y,K as xe,E as ye,C as ze,U as Be,y as de,i as he,V as we,W as De,X as Se}from"./GLV6bXvn.js";import{_ as Ne,a as Ee}from"./pWOVuSBC.js";import{_ as be}from"./BNigTcCY.js";import{_ as Pe}from"./BJSmDEn_.js";import{_ as Le}from"./DV0XJymg.js";import{_ as Ve,a as Ie}from"./CkN6Qlmg.js";import{u as ve}from"./DlZaGH1J.js";import{u as le}from"./DVL-QcDc.js";import"./CyDLpZDf.js";import"./Caj9Z7Wo.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const He={class:"overflow-x-auto"},Oe={class:"w-full table-auto"},Fe={class:"bg-gray-2 text-left dark:bg-meta-4"},Ge={key:0,class:"min-w-[120px] px-4 py-4 font-medium text-black dark:text-white"},qe={key:1,class:"min-w-[120px] px-4 py-4 font-medium text-black dark:text-white"},We={key:0},Qe=["colspan"],Ke={key:1},Xe=["colspan"],Je={class:"px-4 py-5 pl-9 xl:pl-11"},Ye={class:"shrink-0"},Ze={class:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center transition-colors group-hover:bg-primary/20"},et={class:"text-primary font-medium text-lg"},tt={class:"font-medium text-black dark:text-white group-hover:text-primary transition-colors"},st={class:"text-sm text-gray-600 dark:text-gray-400"},at={class:"px-4 py-5"},ot={class:"text-black dark:text-white"},rt={class:"px-4 py-5"},nt={class:"text-black dark:text-white"},lt={key:0,class:"px-4 py-5"},it={class:"text-black dark:text-white"},dt={key:1,class:"px-4 py-5"},ut={class:"text-black dark:text-white"},ct={class:"px-4 py-5"},pt={class:"text-black dark:text-white"},mt={class:"px-4 py-5"},vt={class:"flex items-center gap-2"},xt=H({__name:"UserTable",props:{users:{},loading:{type:Boolean},role:{}},emits:["edit","reset-password","delete"],setup(i){const w=i,b=F(()=>["ADMIN","MANAGER","TEACHER"].includes(w.role)),c=F(()=>["ADMIN","MANAGER","TEACHER"].includes(w.role)),r=F(()=>{let f=5;return b.value&&f++,c.value&&f++,f}),p=f=>{const t=f.split(" ").filter(o=>o.length>0);return t.length>=2&&t[0]&&t[1]&&t[0].length>0&&t[1].length>0?(t[0][0]+t[1][0]).toUpperCase():f.length>=2?f.substring(0,2).toUpperCase():f.toUpperCase()},n=f=>new Date(f).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric"}),{user:v}=ue(),m=f=>v.value?.id===f;return(f,t)=>{const o=fe,M=q;return a(),l("div",He,[e("table",Oe,[e("thead",null,[e("tr",Fe,[t[0]||(t[0]=e("th",{class:"min-w-[220px] px-4 py-4 font-medium text-black dark:text-white xl:pl-11"}," Пользователь ",-1)),t[1]||(t[1]=e("th",{class:"min-w-[150px] px-4 py-4 font-medium text-black dark:text-white"}," Email ",-1)),t[2]||(t[2]=e("th",{class:"min-w-[120px] px-4 py-4 font-medium text-black dark:text-white"}," Телефон ",-1)),b.value?(a(),l("th",Ge," Место работы ")):g("",!0),c.value?(a(),l("th",qe," Должность ")):g("",!0),t[3]||(t[3]=e("th",{class:"min-w-[120px] px-4 py-4 font-medium text-black dark:text-white"}," Дата создания ",-1)),t[4]||(t[4]=e("th",{class:"px-4 py-4 font-medium text-black dark:text-white"}," Действия ",-1))])]),e("tbody",null,[i.loading?(a(),l("tr",We,[e("td",{colspan:r.value,class:"text-center py-12"},[...t[5]||(t[5]=[e("div",{class:"flex justify-center items-center"},[e("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"}),e("span",{class:"ml-3 text-gray-600 dark:text-gray-400"},"Загрузка...")],-1)])],8,Qe)])):i.users.length===0?(a(),l("tr",Ke,[e("td",{colspan:r.value,class:"text-center py-12"},[...t[6]||(t[6]=[e("p",{class:"text-gray-600 dark:text-gray-400"}," Пользователи не найдены ",-1)])],8,Xe)])):g("",!0),(a(!0),l(W,null,Q(i.users,x=>(a(),l("tr",{key:x.id,class:"border-b border-stroke dark:border-strokedark hover:bg-gray-50 dark:hover:bg-meta-4 transition-colors"},[e("td",Je,[h(o,{to:`/users/${x.id}`,class:"flex items-center gap-3 group"},{default:C(()=>[e("div",Ye,[e("div",Ze,[e("span",et,u(p(x.name)),1)])]),e("div",null,[e("h5",tt,u(x.name),1),e("p",st," ID: "+u(x.id.substring(0,8))+"... ",1)])]),_:2},1032,["to"])]),e("td",at,[e("p",ot,u(x.email),1)]),e("td",rt,[e("p",nt,u(x.phone||"—"),1)]),b.value?(a(),l("td",lt,[e("p",it,u(x.workplace||"—"),1)])):g("",!0),c.value?(a(),l("td",dt,[e("p",ut,u(x.position||"—"),1)])):g("",!0),e("td",ct,[e("p",pt,u(n(x.created_at)),1)]),e("td",mt,[e("div",vt,[h(o,{to:`/users/${x.id}`},{default:C(()=>[h(M,{variant:"outline",size:"sm",title:"Просмотр профиля"},{default:C(()=>[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:1})]),_:1},8,["to"]),h(M,{variant:"primary",size:"sm",onClick:j=>f.$emit("edit",x),title:"Редактировать"},{default:C(()=>[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["onClick"]),h(M,{variant:"warning",size:"sm",onClick:j=>f.$emit("reset-password",x),title:"Сбросить пароль"},{default:C(()=>[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})],-1)])]),_:1},8,["onClick"]),h(M,{variant:"danger",size:"sm",onClick:j=>f.$emit("delete",x.id),disabled:m(x.id),title:m(x.id)?"Нельзя удалить самого себя":"Удалить"},{default:C(()=>[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})],-1)])]),_:1},8,["onClick","disabled","title"])])])]))),128))])])])}}}),kt=Object.assign(xt,{__name:"UsersUserTable"}),gt={class:"flex flex-col gap-6"},ft={class:"flex items-center justify-between"},bt={class:"text-xl font-semibold text-black dark:text-white"},yt={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},ht={class:"flex flex-col sm:flex-row gap-4"},wt={class:"flex-1"},_t={class:"sm:w-48"},$t={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},Ct=H({__name:"UserManagementPanel",props:{role:{}},setup(i){const w=i,b=k(!1),c=k([]),r=k(""),p=k("all"),n=k(!1),v=k(!1),m=k(!1),f=k(null),t=k(null),o=F(()=>({ADMIN:"Администратор",MANAGER:"Модератор",TEACHER:"Учитель",STUDENT:"Студент"})[w.role]),M=F(()=>{let z=c.value;if(r.value){const R=r.value.toLowerCase();z=z.filter(G=>G.name.toLowerCase().includes(R)||G.email.toLowerCase().includes(R))}return z}),x=async()=>{b.value=!0;try{const{token:z}=ue(),R=await $fetch(`/api/users?role=${w.role}`,{headers:{Authorization:`Bearer ${z.value}`}});R.success&&(c.value=R.users)}catch(z){console.error("Error fetching users:",z)}finally{b.value=!1}},j=()=>{f.value=null,n.value=!0},E=z=>{f.value=z,n.value=!0},N=z=>{f.value=z,v.value=!0},y=()=>{n.value=!1,f.value=null},s=()=>{v.value=!1,f.value=null},B=async()=>{await x(),y()},U=()=>{s()},ee=z=>{const R=c.value.find(G=>G.id===z);R&&(t.value=R,m.value=!0)},ie=async()=>{if(t.value)try{const{token:z}=ue();await $fetch(`/api/users/${t.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${z.value}`}}),m.value=!1,t.value=null,await x()}catch(z){console.error("Error deleting user:",z),alert("Ошибка при удалении пользователя"),m.value=!1}},P=()=>{m.value=!1,t.value=null};return Z(()=>{x()}),(z,R)=>{const G=q,se=kt,K=Ne,ae=Ee,oe=be;return a(),l("div",gt,[e("div",ft,[e("div",null,[e("h3",bt,u(o.value),1),e("p",yt,' Управление пользователями с ролью "'+u(o.value)+'" ',1)]),h(G,{variant:"success",size:"md",onClick:j},{iconLeft:C(()=>[...R[2]||(R[2]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:C(()=>[D(" Добавить "+u(o.value.toLowerCase())+"а ",1)]),_:1})]),e("div",ht,[e("div",wt,[A(e("input",{"onUpdate:modelValue":R[0]||(R[0]=_=>r.value=_),type:"text",placeholder:"Поиск по имени, email...",class:"w-full rounded-lg border border-stroke bg-transparent py-3 px-5 outline-none focus:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},null,512),[[X,r.value]])]),e("div",_t,[A(e("select",{"onUpdate:modelValue":R[1]||(R[1]=_=>p.value=_),class:"w-full rounded-lg border border-stroke bg-transparent py-3 px-5 outline-none focus:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},[...R[3]||(R[3]=[e("option",{value:"all"},"Все статусы",-1),e("option",{value:"active"},"Активные",-1),e("option",{value:"inactive"},"Неактивные",-1)])],512),[[me,p.value]])])]),e("div",$t,[h(se,{users:M.value,loading:b.value,role:i.role,onEdit:E,onResetPassword:N,onDelete:ee},null,8,["users","loading","role"])]),n.value?(a(),S(K,{key:0,user:f.value,role:i.role,onClose:y,onSave:B},null,8,["user","role"])):g("",!0),v.value&&f.value?(a(),S(ae,{key:1,"is-open":v.value,"user-id":f.value.id,"user-name":f.value.name,onClose:s,onSuccess:U},null,8,["is-open","user-id","user-name"])):g("",!0),h(oe,{"is-open":m.value,title:"Удаление пользователя",message:"Вы действительно хотите удалить пользователя?","item-name":t.value?.name,warning:"Это действие необратимо.","confirm-text":"Удалить",variant:"danger",onConfirm:ie,onCancel:P},null,8,["is-open","item-name"])])}}}),Mt=Object.assign(Ct,{__name:"UsersUserManagementPanel"}),Ut={class:"overflow-x-auto"},Tt={class:"w-full table-auto"},jt={key:0},At={key:1},Rt={class:"px-4 py-5 pl-9 xl:pl-11"},zt={class:"shrink-0"},Bt={class:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center"},Dt={class:"text-primary font-medium text-lg"},St={class:"font-medium text-black dark:text-white hover:text-primary transition-colors"},Nt={class:"text-sm text-gray-600 dark:text-gray-400"},Et={class:"px-4 py-5"},Pt={class:"text-black dark:text-white"},Lt={class:"px-4 py-5"},Vt={class:"text-black dark:text-white"},It={class:"px-4 py-5"},Ht={class:"text-black dark:text-white"},Ot={class:"px-4 py-5"},Ft={class:"text-black dark:text-white font-medium"},Gt={class:"px-4 py-5"},qt=H({__name:"InstructorTable",props:{instructors:{default:()=>[]},loading:{type:Boolean,default:!1}},setup(i){const w=c=>{const r=c.split(" ").filter(p=>p.length>0);return r.length>=2&&r[0]&&r[1]&&r[0].length>0&&r[1].length>0?(r[0][0]+r[1][0]).toUpperCase():c.length>=2?c.substring(0,2).toUpperCase():c.toUpperCase()},b=c=>new Date(c).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric"});return(c,r)=>{const p=fe;return a(),l("div",Ut,[e("table",Tt,[r[2]||(r[2]=e("thead",null,[e("tr",{class:"bg-gray-2 text-left dark:bg-meta-4"},[e("th",{class:"min-w-[220px] px-4 py-4 font-medium text-black dark:text-white xl:pl-11"}," ФИО "),e("th",{class:"min-w-[150px] px-4 py-4 font-medium text-black dark:text-white"}," Email "),e("th",{class:"min-w-[120px] px-4 py-4 font-medium text-black dark:text-white"}," Телефон "),e("th",{class:"min-w-[120px] px-4 py-4 font-medium text-black dark:text-white"}," Прием на работу "),e("th",{class:"min-w-[120px] px-4 py-4 font-medium text-black dark:text-white"}," Часы (Отраб./Макс.) "),e("th",{class:"min-w-[100px] px-4 py-4 font-medium text-black dark:text-white"}," Статус ")])],-1)),e("tbody",null,[i.loading?(a(),l("tr",jt,[...r[0]||(r[0]=[e("td",{colspan:"6",class:"text-center py-12"},[e("div",{class:"flex justify-center items-center"},[e("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"}),e("span",{class:"ml-3 text-gray-600 dark:text-gray-400"},"Загрузка...")])],-1)])])):i.instructors.length===0?(a(),l("tr",At,[...r[1]||(r[1]=[e("td",{colspan:"6",class:"text-center py-12"},[e("p",{class:"text-gray-600 dark:text-gray-400"},"Инструкторы не найдены")],-1)])])):g("",!0),(a(!0),l(W,null,Q(i.instructors,n=>(a(),l("tr",{key:n.id,class:"border-b border-stroke dark:border-strokedark hover:bg-gray-50 dark:hover:bg-meta-4 transition-colors"},[e("td",Rt,[h(p,{to:`/instructors/${n.id}`,class:"flex items-center gap-3 hover:opacity-80 transition-opacity cursor-pointer"},{default:C(()=>[e("div",zt,[e("div",Bt,[e("span",Dt,u(w(n.fullName)),1)])]),e("div",null,[e("h5",St,u(n.fullName),1),e("p",Nt," ID: "+u(n.id.substring(0,8))+"... ",1)])]),_:2},1032,["to"])]),e("td",Et,[e("p",Pt,u(n.email||"—"),1)]),e("td",Lt,[e("p",Vt,u(n.phone||"—"),1)]),e("td",It,[e("p",Ht,u(n.hireDate?b(n.hireDate):"—"),1)]),e("td",Ot,[e("p",Ft,u(n.usedHours!==void 0?Math.round(n.usedHours):0)+" / "+u(n.maxHours),1)]),e("td",Gt,[e("span",{class:O(["inline-flex rounded-full px-3 py-1 text-sm font-medium",n.isActive?"bg-success/10 text-success":"bg-danger/10 text-danger"])},u(n.isActive?"Активен":"Неактивен"),3)])]))),128))])])])}}}),Wt=Object.assign(qt,{__name:"UsersInstructorTable"}),Qt={class:"flex flex-col gap-6"},Kt={class:"flex items-center justify-between"},Xt={class:"flex flex-col sm:flex-row gap-4"},Jt={class:"flex-1"},Yt={class:"sm:w-48"},Zt={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},es=H({__name:"InstructorManagementPanel",setup(i){const w=k(!1),b=k([]),c=k(""),r=k("all"),p=k(!1),n=k(null),v=F(()=>{let M=b.value;if(c.value){const x=c.value.toLowerCase();M=M.filter(j=>j.fullName.toLowerCase().includes(x)||j.email?.toLowerCase().includes(x)||j.phone?.toLowerCase().includes(x))}if(r.value!=="all"){const x=r.value==="active";M=M.filter(j=>j.isActive===x)}return M}),m=async()=>{w.value=!0;try{const{token:M}=ue(),x=await $fetch("/api/instructors",{headers:{Authorization:`Bearer ${M.value}`}});x.success&&(b.value=x.instructors)}catch(M){console.error("Error fetching instructors:",M)}finally{w.value=!1}},f=()=>{n.value=null,p.value=!0},t=()=>{p.value=!1,n.value=null},o=async()=>{await m(),t()};return Z(()=>{m()}),(M,x)=>{const j=q,E=Wt,N=Pe;return a(),l("div",Qt,[e("div",Kt,[x[4]||(x[4]=e("div",null,[e("h3",{class:"text-xl font-semibold text-black dark:text-white"}," Инструкторы "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Управление инструкторами учебного центра ")],-1)),h(j,{variant:"success",size:"md",onClick:f},{iconLeft:C(()=>[...x[2]||(x[2]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),default:C(()=>[x[3]||(x[3]=D(" Добавить инструктора ",-1))]),_:1})]),e("div",Xt,[e("div",Jt,[A(e("input",{"onUpdate:modelValue":x[0]||(x[0]=y=>c.value=y),type:"text",placeholder:"Поиск по ФИО, email, телефону...",class:"w-full rounded-lg border border-stroke bg-transparent py-3 px-5 outline-none focus:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},null,512),[[X,c.value]])]),e("div",Yt,[A(e("select",{"onUpdate:modelValue":x[1]||(x[1]=y=>r.value=y),class:"w-full rounded-lg border border-stroke bg-transparent py-3 px-5 outline-none focus:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},[...x[5]||(x[5]=[e("option",{value:"all"},"Все статусы",-1),e("option",{value:"active"},"Активные",-1),e("option",{value:"inactive"},"Неактивные",-1)])],512),[[me,r.value]])])]),e("div",Zt,[h(E,{instructors:v.value,loading:w.value},null,8,["instructors","loading"])]),p.value?(a(),S(N,{key:0,instructor:n.value,onClose:t,onSaved:o},null,8,["instructor"])):g("",!0)])}}}),ts=Object.assign(es,{__name:"UsersInstructorManagementPanel"}),ss={class:"overflow-x-auto"},as={class:"w-full table-auto"},os={key:0},rs={key:1},ns=["onClick"],ls={class:"px-4 py-5 pl-9 xl:pl-11"},is={class:"flex items-center gap-3"},ds={class:"flex-shrink-0"},us={class:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center"},cs={class:"text-primary font-medium text-lg"},ps={class:"font-medium text-black dark:text-white"},ms={class:"text-sm text-gray-600 dark:text-gray-400"},vs={class:"px-4 py-5"},xs={class:"text-black dark:text-white"},ks={class:"px-4 py-5"},gs={class:"text-black dark:text-white"},fs={class:"px-4 py-5"},bs={class:"flex items-center justify-center gap-2"},ys=H({__name:"StudentTable",props:{students:{},loading:{type:Boolean}},emits:["edit","delete","view-certificates"],setup(i){const w=Re(),b=r=>{w.push(`/students/${r}`)},c=r=>{const p=r.split(" ").filter(n=>n.length>0);return p.length>=2&&p[0]&&p[1]&&p[0].length>0&&p[1].length>0?(p[0][0]+p[1][0]).toUpperCase():r.length>=2?r.substring(0,2).toUpperCase():r.toUpperCase()};return(r,p)=>{const n=q;return a(),l("div",ss,[e("table",as,[p[4]||(p[4]=e("thead",null,[e("tr",{class:"bg-gray-2 text-left dark:bg-meta-4"},[e("th",{class:"min-w-[250px] px-4 py-4 font-medium text-black dark:text-white xl:pl-11"}," Ф.И.О "),e("th",{class:"min-w-[200px] px-4 py-4 font-medium text-black dark:text-white"}," Организация "),e("th",{class:"min-w-[180px] px-4 py-4 font-medium text-black dark:text-white"}," Должность "),e("th",{class:"px-4 py-4 font-medium text-black dark:text-white text-center"}," Действия ")])],-1)),e("tbody",null,[i.loading?(a(),l("tr",os,[...p[0]||(p[0]=[e("td",{colspan:"4",class:"text-center py-12"},[e("div",{class:"flex justify-center items-center"},[e("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"}),e("span",{class:"ml-3 text-gray-600 dark:text-gray-400"},"Загрузка...")])],-1)])])):i.students.length===0?(a(),l("tr",rs,[...p[1]||(p[1]=[e("td",{colspan:"4",class:"text-center py-12"},[e("p",{class:"text-gray-600 dark:text-gray-400"},"Студенты не найдены")],-1)])])):g("",!0),(a(!0),l(W,null,Q(i.students,v=>(a(),l("tr",{key:v.id,onClick:m=>b(v.id),class:"border-b border-stroke dark:border-strokedark hover:bg-gray-50 dark:hover:bg-meta-4 transition-colors cursor-pointer"},[e("td",ls,[e("div",is,[e("div",ds,[e("div",us,[e("span",cs,u(c(v.fullName)),1)])]),e("div",null,[e("h5",ps,u(v.fullName),1),e("p",ms," ПИНФЛ: "+u(v.pinfl),1)])])]),e("td",vs,[e("p",xs,u(v.organization),1)]),e("td",ks,[e("p",gs,u(v.position),1)]),e("td",fs,[e("div",bs,[h(n,{variant:"primary",size:"sm",onClick:J(m=>r.$emit("edit",v),["stop"]),title:"Редактировать"},{default:C(()=>[...p[2]||(p[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["onClick"]),h(n,{variant:"danger",size:"sm",onClick:J(m=>r.$emit("delete",v.id),["stop"]),title:"Удалить"},{default:C(()=>[...p[3]||(p[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1v3M4 7h16"})],-1)])]),_:1},8,["onClick"])])])],8,ns))),128))])])])}}}),hs=Object.assign(ys,{__name:"DatabaseStudentTable"}),ws={class:"flex flex-col gap-6"},_s={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},$s={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},Cs={key:0,class:"text-primary"},Ms={class:"flex flex-wrap items-center gap-3"},Us={class:"bg-white dark:bg-boxdark rounded-xl shadow-md p-6"},Ts={class:"flex items-center gap-3 mb-4"},js={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},As={class:"relative"},Rs={class:"relative"},zs={class:"relative"},Bs={class:"relative"},Ds={class:"mt-4 flex flex-wrap gap-3"},Ss={class:"inline-flex items-center gap-2 cursor-pointer"},Ns={class:"inline-flex items-center gap-2 cursor-pointer"},Es={class:"bg-white dark:bg-boxdark rounded-xl shadow-md overflow-hidden"},Ps=H({__name:"StudentManagementPanel",setup(i){const{authFetch:w}=ve(),b=k([]),c=k(!1),r=k(!1),p=k(!1),n=k(!1),v=k(!1),m=k(null),f=k(null),t=k({page:1,limit:10,total:0,totalPages:0}),o=k({fullName:"",pinfl:"",organization:"",position:"",hasCertificates:!1,noCertificates:!1});let M=null;const x=F(()=>o.value.fullName!==""||o.value.pinfl!==""||o.value.organization!==""||o.value.position!==""||o.value.hasCertificates||o.value.noCertificates),j=()=>{M&&clearTimeout(M),M=setTimeout(()=>{t.value.page=1,B()},300)},E=()=>{t.value.page=1,B()},N=()=>{o.value={fullName:"",pinfl:"",organization:"",position:"",hasCertificates:!1,noCertificates:!1},t.value.page=1,B()},y=_=>{t.value.page=_,B()},s=_=>{t.value.limit=_,t.value.page=1,B()},B=async()=>{c.value=!0;try{const _=new URLSearchParams;_.append("page",t.value.page.toString()),_.append("limit",t.value.limit.toString()),o.value.fullName&&_.append("fullName",o.value.fullName),o.value.pinfl&&_.append("pinfl",o.value.pinfl),o.value.organization&&_.append("organization",o.value.organization),o.value.position&&_.append("position",o.value.position),o.value.hasCertificates&&_.append("hasCertificates","true"),o.value.noCertificates&&_.append("noCertificates","true");const d=await w(`/api/students?${_.toString()}`,{method:"GET"});d.success&&(b.value=d.students,t.value.total=d.total,t.value.totalPages=d.totalPages,t.value.page=d.page,t.value.limit=d.limit)}catch(_){console.error("Ошибка загрузки студентов:",_)}finally{c.value=!1}},U=async _=>{try{const d=await w(`/api/students/${_}`,{method:"GET"});if(d.success){const L=b.value.findIndex(re=>re.id===_);L!==-1&&(b.value[L]=d.student,m.value?.id===_&&(m.value=d.student))}}catch(d){console.error("Ошибка обновления студента:",d)}},ee=()=>{m.value=null,r.value=!0},ie=_=>{m.value=_,r.value=!0},P=()=>{r.value=!1,m.value=null},z=_=>{m.value=_,p.value=!0},R=()=>{p.value=!1,m.value=null},G=_=>{const d=b.value.find(L=>L.id===_);d&&(f.value=d,n.value=!0)},se=()=>{v.value||(n.value=!1,f.value=null)},K=async()=>{if(f.value){v.value=!0;try{(await w(`/api/students/${f.value.id}`,{method:"DELETE"})).success&&(await B(),se())}catch(_){console.error("Ошибка удаления студента:",_)}finally{v.value=!1}}},ae=()=>{m.value&&U(m.value.id)},oe=async _=>{try{if(m.value){const d=await w(`/api/students/${m.value.id}`,{method:"PUT",body:_});if(d.success){const L=b.value.findIndex(ne=>ne.id===m.value.id);L!==-1&&(b.value[L]=d.student),le().success("Студент успешно обновлен","Успех"),P()}}else{const d=await w("/api/students",{method:"POST",body:_});if(d.success){await B();const L=le();d.generatedPassword&&d.accountEmail?L.success(`Учётная запись создана!
Email: ${d.accountEmail}
Пароль: ${d.generatedPassword}`,"Студент и аккаунт созданы",1e4):_.createAccount?L.success("Студент и учётная запись успешно созданы","Успех"):L.success("Студент успешно создан","Успех"),P()}}}catch(d){console.error("Ошибка сохранения студента:",d)}};return Z(()=>{B()}),(_,d)=>{const L=fe,re=q,ne=hs,ce=Le,ke=Ve,ge=Ie,pe=be;return a(),l("div",ws,[e("div",_s,[e("div",null,[d[6]||(d[6]=e("h3",{class:"text-xl font-semibold text-black dark:text-white"}," Управление студентами ",-1)),e("p",$s,[D(" Всего студентов: "+u(t.value.total)+" ",1),x.value?(a(),l("span",Cs," (отфильтровано) ")):g("",!0)])]),e("div",Ms,[h(L,{to:"/database/import",class:"inline-flex items-center gap-2 rounded-lg border-2 border-primary bg-transparent px-4 py-2 text-sm font-medium text-primary transition-all duration-200 hover:bg-primary hover:text-white"},{default:C(()=>[...d[7]||(d[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),D(" Импорт студентов ",-1)])]),_:1}),h(re,{variant:"primary",onClick:ee,class:"flex items-center gap-2"},{default:C(()=>[...d[8]||(d[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),D(" Добавить студента ",-1)])]),_:1})])]),e("div",Us,[e("div",Ts,[d[10]||(d[10]=e("div",{class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})])],-1)),d[11]||(d[11]=e("h4",{class:"text-lg font-semibold text-black dark:text-white"},"Фильтры",-1)),x.value?(a(),l("button",{key:0,onClick:N,class:"ml-auto text-sm text-primary hover:text-primary/80 transition-colors flex items-center gap-1"},[...d[9]||(d[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),D(" Сбросить фильтры ",-1)])])):g("",!0)]),e("div",js,[e("div",null,[d[13]||(d[13]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Поиск по ФИО ",-1)),e("div",As,[A(e("input",{"onUpdate:modelValue":d[0]||(d[0]=I=>o.value.fullName=I),type:"text",placeholder:"Введите имя...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-10 pr-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onInput:j},null,544),[[X,o.value.fullName]]),d[12]||(d[12]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),e("div",null,[d[15]||(d[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Поиск по ПИНФЛ ",-1)),e("div",Rs,[A(e("input",{"onUpdate:modelValue":d[1]||(d[1]=I=>o.value.pinfl=I),type:"text",placeholder:"Введите ПИНФЛ...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-10 pr-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onInput:j},null,544),[[X,o.value.pinfl]]),d[14]||(d[14]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})],-1))])]),e("div",null,[d[17]||(d[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Организация ",-1)),e("div",zs,[A(e("input",{"onUpdate:modelValue":d[2]||(d[2]=I=>o.value.organization=I),type:"text",placeholder:"Введите организацию...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-10 pr-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onInput:j},null,544),[[X,o.value.organization]]),d[16]||(d[16]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1))])]),e("div",null,[d[19]||(d[19]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Должность ",-1)),e("div",Bs,[A(e("input",{"onUpdate:modelValue":d[3]||(d[3]=I=>o.value.position=I),type:"text",placeholder:"Введите должность...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-10 pr-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onInput:j},null,544),[[X,o.value.position]]),d[18]||(d[18]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1))])])]),e("div",Ds,[e("label",Ss,[A(e("input",{"onUpdate:modelValue":d[4]||(d[4]=I=>o.value.hasCertificates=I),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary",onChange:E},null,544),[[te,o.value.hasCertificates]]),d[20]||(d[20]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Только с сертификатами",-1))]),e("label",Ns,[A(e("input",{"onUpdate:modelValue":d[5]||(d[5]=I=>o.value.noCertificates=I),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary",onChange:E},null,544),[[te,o.value.noCertificates]]),d[21]||(d[21]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Только без сертификатов",-1))])])]),e("div",Es,[h(ne,{students:b.value,loading:c.value,onEdit:ie,onDelete:G,onViewCertificates:z},null,8,["students","loading"]),t.value.totalPages>0?(a(),S(ce,{key:0,"current-page":t.value.page,"total-pages":t.value.totalPages,total:t.value.total,limit:t.value.limit,loading:c.value,"onUpdate:page":y,"onUpdate:limit":s},null,8,["current-page","total-pages","total","limit","loading"])):g("",!0)]),r.value?(a(),S(ke,{key:0,student:m.value,"is-open":r.value,onClose:P,onSubmit:oe},null,8,["student","is-open"])):g("",!0),p.value?(a(),S(ge,{key:1,student:m.value,"is-open":p.value,onClose:R,onRefresh:ae},null,8,["student","is-open"])):g("",!0),h(pe,{"is-open":n.value,title:"Удаление студента",message:"Вы уверены, что хотите удалить этого студента?","item-name":f.value?.fullName,warning:"Это действие нельзя отменить. Все данные студента будут удалены.",loading:v.value,onConfirm:K,onCancel:se},null,8,["is-open","item-name","loading"])])}}}),Ls=Object.assign(Ps,{__name:"DatabaseStudentManagementPanel"}),Vs={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},Is={key:0,class:"p-8 text-center"},Hs={key:1,class:"overflow-x-auto"},Os={class:"w-full table-auto"},Fs={class:"py-4 px-4"},Gs={class:"font-medium text-black dark:text-white"},qs={class:"py-4 px-4"},Ws={class:"text-sm text-gray-600 dark:text-gray-400"},Qs={class:"py-4 px-4"},Ks={class:"text-sm font-mono text-gray-600 dark:text-gray-400"},Xs={class:"py-4 px-4"},Js={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Ys={key:1,class:"text-sm text-gray-400 dark:text-gray-500 italic"},Zs={class:"py-4 px-4"},ea={class:"py-4 px-4"},ta={class:"text-sm text-gray-600 dark:text-gray-400"},sa={class:"py-4 px-4"},aa={class:"flex items-center justify-center gap-2"},oa={key:2,class:"p-8 text-center"},ra=H({__name:"RepresentativeTable",props:{representatives:{},loading:{type:Boolean}},emits:["view","approve","block","unblock","delete"],setup(i){const w=c=>({pending:"Ожидает",approved:"Одобрен",blocked:"Заблокирован"})[c]||c,b=c=>(typeof c=="string"?new Date(c):c).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"});return(c,r)=>{const p=q;return a(),l("div",Vs,[i.loading?(a(),l("div",Is,[...r[0]||(r[0]=[e("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},"Загрузка...",-1)])])):i.representatives.length>0?(a(),l("div",Hs,[e("table",Os,[r[6]||(r[6]=e("thead",null,[e("tr",{class:"bg-gray-2 text-left dark:bg-meta-4"},[e("th",{class:"py-4 px-4 font-medium text-black dark:text-white"}," ФИО "),e("th",{class:"py-4 px-4 font-medium text-black dark:text-white"}," Организация "),e("th",{class:"py-4 px-4 font-medium text-black dark:text-white"}," Телефон "),e("th",{class:"py-4 px-4 font-medium text-black dark:text-white"}," Telegram "),e("th",{class:"py-4 px-4 font-medium text-black dark:text-white"}," Статус "),e("th",{class:"py-4 px-4 font-medium text-black dark:text-white"}," Дата заявки "),e("th",{class:"py-4 px-4 font-medium text-black dark:text-white text-center"}," Действия ")])],-1)),e("tbody",null,[(a(!0),l(W,null,Q(i.representatives,n=>(a(),l("tr",{key:n.id,class:"border-b border-stroke dark:border-strokedark hover:bg-gray-50 dark:hover:bg-meta-4 transition-colors"},[e("td",Fs,[e("p",Gs,u(n.fullName),1)]),e("td",qs,[e("p",Ws,u(n.organizationName||"Не указана"),1)]),e("td",Qs,[e("p",Ks,u(n.phone),1)]),e("td",Xs,[n.telegramUsername?(a(),l("p",Js," @"+u(n.telegramUsername),1)):(a(),l("p",Ys," Не указан "))]),e("td",Zs,[e("span",{class:O(["inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-xs font-medium",n.status==="pending"&&"bg-warning/10 text-warning",n.status==="approved"&&"bg-success/10 text-success",n.status==="blocked"&&"bg-danger/10 text-danger"])},[e("span",{class:O(["h-2 w-2 rounded-full",n.status==="pending"&&"bg-warning",n.status==="approved"&&"bg-success",n.status==="blocked"&&"bg-danger"])},null,2),D(" "+u(w(n.status)),1)],2)]),e("td",ea,[e("p",ta,u(b(n.createdAt)),1)]),e("td",sa,[e("div",aa,[h(p,{variant:"outline",size:"sm",onClick:v=>c.$emit("view",n),title:"Просмотр"},{default:C(()=>[...r[1]||(r[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:1},8,["onClick"]),n.status==="pending"?(a(),S(p,{key:0,variant:"success",size:"sm",onClick:v=>c.$emit("approve",n),title:"Одобрить"},{default:C(()=>[...r[2]||(r[2]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])]),_:1},8,["onClick"])):g("",!0),n.status!=="blocked"?(a(),S(p,{key:1,variant:"warning",size:"sm",onClick:v=>c.$emit("block",n),title:"Заблокировать"},{default:C(()=>[...r[3]||(r[3]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1)])]),_:1},8,["onClick"])):g("",!0),n.status==="blocked"?(a(),S(p,{key:2,variant:"success",size:"sm",onClick:v=>c.$emit("unblock",n),title:"Разблокировать"},{default:C(()=>[...r[4]||(r[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})],-1)])]),_:1},8,["onClick"])):g("",!0),h(p,{variant:"danger",size:"sm",onClick:v=>c.$emit("delete",n),title:"Удалить"},{default:C(()=>[...r[5]||(r[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),_:1},8,["onClick"])])])]))),128))])])])):(a(),l("div",oa,[...r[7]||(r[7]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("p",{class:"mt-4 text-gray-500 dark:text-gray-400"}," Представители не найдены ",-1)])]))])}}}),na=Object.assign(ra,{__name:"RepresentativesRepresentativeTable"}),la={key:0,class:"fixed inset-0 z-999999 flex items-center justify-center bg-black/80 px-4 py-5"},ia={class:"p-6 space-y-6"},da={class:"flex items-center justify-between"},ua={class:"flex gap-2"},ca={class:"rounded-lg border border-stroke dark:border-strokedark p-4"},pa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ma={class:"font-medium text-black dark:text-white"},va={class:"font-medium text-black dark:text-white font-mono"},xa={class:"md:col-span-2"},ka={class:"font-medium text-black dark:text-white"},ga={class:"rounded-lg border border-stroke dark:border-strokedark p-4"},fa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ba={class:"font-medium text-black dark:text-white"},ya={class:"font-medium text-black dark:text-white font-mono"},ha={class:"rounded-lg border border-stroke dark:border-strokedark p-4"},wa={class:"space-y-3"},_a={class:"font-medium text-black dark:text-white"},$a={class:"rounded-lg border border-stroke dark:border-strokedark p-4"},Ca={class:"flex items-center justify-between mb-4"},Ma={class:"space-y-3"},Ua={class:"flex items-center gap-3 cursor-pointer group"},Ta={class:"flex items-center gap-3 cursor-pointer group"},ja={class:"flex items-center gap-3 cursor-pointer group"},Aa={class:"flex items-center gap-3 cursor-pointer group"},Ra=["disabled"],za={class:"flex-1"},Ba={key:0,class:"text-xs text-warning mt-1"},Da={key:0,class:"rounded-lg border border-stroke dark:border-strokedark p-4"},Sa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Na={class:"font-medium text-black dark:text-white"},Ea={class:"font-medium text-black dark:text-white"},Pa={key:1,class:"rounded-lg border border-danger/20 bg-danger/5 p-4"},La={class:"text-sm text-gray-700 dark:text-gray-300"},Va={class:"rounded-lg border border-stroke dark:border-strokedark p-4"},Ia={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ha={class:"font-medium text-black dark:text-white"},Oa={class:"font-medium text-black dark:text-white"},Fa={key:2,class:"rounded-lg border border-stroke dark:border-strokedark p-4"},Ga={class:"flex items-center justify-between mb-4"},qa={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4"},Wa={class:"rounded-lg bg-gray-50 dark:bg-meta-4 p-3"},Qa={class:"text-lg font-bold text-black dark:text-white"},Ka={class:"rounded-lg bg-success/10 p-3"},Xa={class:"text-lg font-bold text-success"},Ja={class:"rounded-lg bg-danger/10 p-3"},Ya={class:"text-lg font-bold text-danger"},Za={class:"rounded-lg bg-warning/10 p-3"},eo={class:"text-lg font-bold text-warning"},to={key:1},so={key:0,class:"text-center py-4"},ao={key:1,class:"text-center py-4"},oo={key:2,class:"space-y-2 max-h-96 overflow-y-auto"},ro={class:"flex-1 min-w-0"},no={class:"flex items-center gap-2 mb-1"},lo={class:"font-medium text-black dark:text-white font-mono text-sm"},io={class:"text-xs text-gray-600 dark:text-gray-400"},uo={key:0,class:"ml-2"},co={key:0,class:"text-xs text-danger mt-1"},po={class:"sticky bottom-0 border-t border-stroke px-6 py-4 dark:border-strokedark bg-white dark:bg-boxdark"},mo={class:"flex justify-end"},vo=H({__name:"RepresentativeDetailModal",props:{representative:{},isOpen:{type:Boolean}},emits:["close","approve","block","unblock","updated"],setup(i,{emit:w}){const b=i,c=w,r=k(!1),p=k(!1),n=k(!1),v=k(!1),m=k([]),f=k(null),t=k({can_view_students:!0,can_view_schedule:!0,can_view_certificates:!0,can_request_certificates:!0}),o=F(()=>{const y=b.representative.permissions,s=t.value;return y.can_view_students!==s.can_view_students||y.can_view_schedule!==s.can_view_schedule||y.can_view_certificates!==s.can_view_certificates||y.can_request_certificates!==s.can_request_certificates});_e(()=>t.value.can_view_certificates,y=>{y||(t.value.can_request_certificates=!1)});const M=()=>{r.value=!1,setTimeout(()=>{c("close")},300)},x=async()=>{p.value=!0;try{const{authFetch:y}=ve();await y(`/api/representatives/${b.representative.id}`,{method:"PATCH",body:{permissions:t.value}}),le().success("Разрешения обновлены","Успешно"),c("updated")}catch(y){console.error("Ошибка сохранения разрешений:",y),le().error(y.message||"Не удалось сохранить разрешения","Ошибка")}finally{p.value=!1}},j=async()=>{if(n.value){n.value=!1;return}v.value=!0,n.value=!0;try{const{authFetch:y}=ve(),s=await y(`/api/representatives/${b.representative.id}/requests?limit=10`,{method:"GET"});s.success&&(m.value=s.data.history,f.value=s.data.stats)}catch(y){console.error("Ошибка загрузки истории запросов:",y),le().error("Не удалось загрузить историю запросов","Ошибка")}finally{v.value=!1}},E=y=>({pending:"Ожидает одобрения",approved:"Одобрен",blocked:"Заблокирован"})[y]||y,N=y=>y?(typeof y=="string"?new Date(y):y).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Не указано";return Z(()=>{b.representative.permissions&&(t.value={...b.representative.permissions}),setTimeout(()=>{r.value=!0},10)}),(y,s)=>{const B=q;return a(),S(xe,{to:"body"},[h(Y,{"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:C(()=>[r.value?(a(),l("div",la,[h(Y,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95 -translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 -translate-y-4"},{default:C(()=>[r.value?(a(),l("div",{key:0,class:"w-full max-w-3xl rounded-lg bg-white dark:bg-boxdark shadow-xl max-h-[90vh] overflow-y-auto",onClick:s[8]||(s[8]=J(()=>{},["stop"]))},[e("div",{class:"sticky top-0 z-10 border-b border-stroke px-6 py-4 dark:border-strokedark flex items-center justify-between bg-white dark:bg-boxdark"},[s[10]||(s[10]=e("h3",{class:"text-xl font-semibold text-black dark:text-white"}," Детали представителя ",-1)),e("button",{onClick:M,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[...s[9]||(s[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",ia,[e("div",da,[e("span",{class:O(["inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium",i.representative.status==="pending"&&"bg-warning/10 text-warning",i.representative.status==="approved"&&"bg-success/10 text-success",i.representative.status==="blocked"&&"bg-danger/10 text-danger"])},[e("span",{class:O(["h-2.5 w-2.5 rounded-full",i.representative.status==="pending"&&"bg-warning",i.representative.status==="approved"&&"bg-success",i.representative.status==="blocked"&&"bg-danger"])},null,2),D(" "+u(E(i.representative.status)),1)],2),e("div",ua,[i.representative.status==="pending"?(a(),S(B,{key:0,variant:"success",onClick:s[0]||(s[0]=U=>y.$emit("approve",i.representative))},{default:C(()=>[...s[11]||(s[11]=[D(" Одобрить ",-1)])]),_:1})):g("",!0),i.representative.status!=="blocked"?(a(),S(B,{key:1,variant:"warning",onClick:s[1]||(s[1]=U=>y.$emit("block",i.representative))},{default:C(()=>[...s[12]||(s[12]=[D(" Заблокировать ",-1)])]),_:1})):g("",!0),i.representative.status==="blocked"?(a(),S(B,{key:2,variant:"success",onClick:s[2]||(s[2]=U=>y.$emit("unblock",i.representative))},{default:C(()=>[...s[13]||(s[13]=[D(" Разблокировать ",-1)])]),_:1})):g("",!0)])]),e("div",ca,[s[17]||(s[17]=e("h4",{class:"font-medium text-black dark:text-white mb-4"}," Основная информация ",-1)),e("div",pa,[e("div",null,[s[14]||(s[14]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"ФИО",-1)),e("p",ma,u(i.representative.fullName),1)]),e("div",null,[s[15]||(s[15]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Телефон ",-1)),e("p",va,u(i.representative.phone),1)]),e("div",xa,[s[16]||(s[16]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Организация ",-1)),e("p",ka,u(i.representative.organizationName||"Не указана"),1)])])]),e("div",ga,[s[20]||(s[20]=e("h4",{class:"font-medium text-black dark:text-white mb-4"}," Telegram ",-1)),e("div",fa,[e("div",null,[s[18]||(s[18]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Username ",-1)),e("p",ba,u(i.representative.telegramUsername?`@${i.representative.telegramUsername}`:"Не указан"),1)]),e("div",null,[s[19]||(s[19]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Chat ID ",-1)),e("p",ya,u(i.representative.telegramChatId||"Не указан"),1)])])]),e("div",ha,[s[23]||(s[23]=e("h4",{class:"font-medium text-black dark:text-white mb-4"}," Настройки доступа ",-1)),e("div",wa,[e("div",null,[s[21]||(s[21]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Доступ к группам ",-1)),e("p",_a,u(i.representative.accessGroups?`${i.representative.accessGroups.length} групп`:"Все группы организации"),1)]),e("div",null,[s[22]||(s[22]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Уведомления ",-1)),e("span",{class:O(["inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs font-medium",i.representative.notificationsEnabled?"bg-success/10 text-success":"bg-gray-100 text-gray-600 dark:bg-meta-4 dark:text-gray-400"])},u(i.representative.notificationsEnabled?"Включены":"Выключены"),3)])])]),e("div",$a,[e("div",Ca,[s[24]||(s[24]=e("h4",{class:"font-medium text-black dark:text-white"}," Разрешения Telegram-бота ",-1)),o.value?(a(),S(B,{key:0,variant:"primary",size:"sm",onClick:x,disabled:p.value},{default:C(()=>[D(u(p.value?"Сохранение...":"Сохранить"),1)]),_:1},8,["disabled"])):g("",!0)]),e("div",Ma,[e("label",Ua,[A(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=U=>t.value.can_view_students=U),class:"w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary focus:ring-offset-0 cursor-pointer"},null,512),[[te,t.value.can_view_students]]),s[25]||(s[25]=e("div",{class:"flex-1"},[e("p",{class:"font-medium text-black dark:text-white group-hover:text-primary transition-colors"}," Просмотр списка слушателей "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Команда /students - показывает список всех слушателей организации ")],-1))]),e("label",Ta,[A(e("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=U=>t.value.can_view_schedule=U),class:"w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary focus:ring-offset-0 cursor-pointer"},null,512),[[te,t.value.can_view_schedule]]),s[26]||(s[26]=e("div",{class:"flex-1"},[e("p",{class:"font-medium text-black dark:text-white group-hover:text-primary transition-colors"}," Просмотр расписания "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Команда /schedule - показывает расписание занятий на неделю ")],-1))]),e("label",ja,[A(e("input",{type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=U=>t.value.can_view_certificates=U),class:"w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary focus:ring-offset-0 cursor-pointer"},null,512),[[te,t.value.can_view_certificates]]),s[27]||(s[27]=e("div",{class:"flex-1"},[e("p",{class:"font-medium text-black dark:text-white group-hover:text-primary transition-colors"}," Просмотр сертификатов "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Команда /certificates - показывает список выданных сертификатов ")],-1))]),e("label",Aa,[A(e("input",{type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=U=>t.value.can_request_certificates=U),disabled:!t.value.can_view_certificates,class:"w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary focus:ring-offset-0 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"},null,8,Ra),[[te,t.value.can_request_certificates]]),e("div",za,[s[28]||(s[28]=e("p",{class:"font-medium text-black dark:text-white group-hover:text-primary transition-colors"}," Запрос файлов сертификатов ",-1)),s[29]||(s[29]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Возможность скачивать PDF файлы сертификатов через бота ",-1)),t.value.can_view_certificates?g("",!0):(a(),l("p",Ba," ⚠️ Требуется разрешение на просмотр сертификатов "))])])])]),i.representative.status==="approved"&&i.representative.approvedBy?(a(),l("div",Da,[s[32]||(s[32]=e("h4",{class:"font-medium text-black dark:text-white mb-4"}," Информация об одобрении ",-1)),e("div",Sa,[e("div",null,[s[30]||(s[30]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Одобрил ",-1)),e("p",Na,u(i.representative.approvedByName||"Неизвестно"),1)]),e("div",null,[s[31]||(s[31]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Дата одобрения ",-1)),e("p",Ea,u(N(i.representative.approvedAt)),1)])])])):g("",!0),i.representative.status==="blocked"&&i.representative.blockedReason?(a(),l("div",Pa,[s[33]||(s[33]=e("h4",{class:"font-medium text-danger mb-2"},"Причина блокировки",-1)),e("p",La,u(i.representative.blockedReason),1)])):g("",!0),e("div",Va,[s[36]||(s[36]=e("h4",{class:"font-medium text-black dark:text-white mb-4"}," Активность ",-1)),e("div",Ia,[e("div",null,[s[34]||(s[34]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Дата регистрации ",-1)),e("p",Ha,u(N(i.representative.createdAt)),1)]),e("div",null,[s[35]||(s[35]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Последняя активность ",-1)),e("p",Oa,u(i.representative.lastActivityAt?N(i.representative.lastActivityAt):"Нет данных"),1)])])]),i.representative.status==="approved"?(a(),l("div",Fa,[e("div",Ga,[s[37]||(s[37]=e("h4",{class:"font-medium text-black dark:text-white"}," Журнал запросов к боту ",-1)),n.value?g("",!0):(a(),l("button",{key:0,onClick:j,class:"text-sm text-primary hover:underline"}," Показать историю "))]),f.value?(a(),l("div",qa,[e("div",Wa,[s[38]||(s[38]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"}," Всего запросов ",-1)),e("p",Qa,u(f.value.total),1)]),e("div",Ka,[s[39]||(s[39]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"}," Успешных ",-1)),e("p",Xa,u(f.value.success),1)]),e("div",Ja,[s[40]||(s[40]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"}," Ошибок ",-1)),e("p",Ya,u(f.value.error),1)]),e("div",Za,[s[41]||(s[41]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"}," Отказано ",-1)),e("p",eo,u(f.value.denied),1)])])):g("",!0),n.value?(a(),l("div",to,[v.value?(a(),l("div",so,[...s[42]||(s[42]=[e("p",{class:"text-sm text-gray-500"},"Загрузка...",-1)])])):m.value.length===0?(a(),l("div",ao,[...s[43]||(s[43]=[e("p",{class:"text-sm text-gray-500"},"Нет запросов",-1)])])):(a(),l("div",oo,[(a(!0),l(W,null,Q(m.value,U=>(a(),l("div",{key:U.id,class:"flex items-start gap-3 p-3 rounded-lg bg-gray-50 dark:bg-meta-4"},[e("div",{class:O(["mt-1 h-2 w-2 rounded-full shrink-0",U.status==="success"&&"bg-success",U.status==="error"&&"bg-danger",U.status==="denied"&&"bg-warning"])},null,2),e("div",ro,[e("div",no,[e("span",lo,u(U.command),1),e("span",{class:O(["text-xs px-2 py-0.5 rounded-full",U.requestType==="command"&&"bg-primary/10 text-primary",U.requestType==="callback"&&"bg-info/10 text-info",U.requestType==="message"&&"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"])},u(U.requestType),3)]),e("p",io,[D(u(N(U.createdAt))+" ",1),U.responseTimeMs?(a(),l("span",uo," • "+u(U.responseTimeMs)+"ms ",1)):g("",!0)]),U.errorMessage?(a(),l("p",co,u(U.errorMessage),1)):g("",!0)])]))),128))])),m.value.length>0?(a(),l("button",{key:3,onClick:s[7]||(s[7]=U=>n.value=!1),class:"mt-3 text-sm text-gray-600 dark:text-gray-400 hover:text-primary transition-colors"}," Скрыть историю ")):g("",!0)])):g("",!0)])):g("",!0)]),e("div",po,[e("div",mo,[h(B,{variant:"secondary",onClick:M},{default:C(()=>[...s[44]||(s[44]=[D(" Закрыть ",-1)])]),_:1})])])])):g("",!0)]),_:1})])):g("",!0)]),_:1})])}}}),xo=Object.assign(vo,{__name:"RepresentativesRepresentativeDetailModal"}),ko={key:0,class:"fixed inset-0 z-999999 flex items-center justify-center bg-black/80 px-4 py-5"},go={class:"mb-6 rounded-lg bg-gray-50 dark:bg-meta-4 p-4"},fo={class:"grid grid-cols-2 gap-3 text-sm"},bo={class:"ml-2 font-medium text-black dark:text-white"},yo={class:"ml-2 font-medium text-black dark:text-white"},ho={class:"col-span-2"},wo={class:"ml-2 font-medium text-black dark:text-white"},_o={key:0},$o={class:"ml-2 font-medium text-black dark:text-white"},Co={class:"mb-6"},Mo={class:"space-y-3"},Uo={class:"flex items-center gap-3 cursor-pointer"},To={class:"flex items-center gap-3 cursor-pointer"},jo={key:0,class:"mt-4 p-4 rounded-lg border border-stroke dark:border-strokedark"},Ao={class:"max-h-48 overflow-y-auto space-y-2"},Ro=["value"],zo={class:"text-sm text-black dark:text-white"},Bo={key:0,class:"text-sm text-gray-500 dark:text-gray-400 italic"},Do={class:"flex justify-end gap-4"},So=H({__name:"ApproveRepresentativeModal",props:{representative:{},isOpen:{type:Boolean}},emits:["close","submit"],setup(i,{emit:w}){const b=w,c=k(!1),r=k(!1),p=k("all"),n=k([]),v=k([]),m=()=>{r.value=!1,setTimeout(()=>{b("close")},300)},f=async()=>{if(!c.value){c.value=!0;try{const t={};if(p.value==="specific"){if(n.value.length===0){alert("Выберите хотя бы одну группу");return}t.accessGroups=n.value}b("submit",t)}finally{c.value=!1}}};return Z(()=>{setTimeout(()=>{r.value=!0},10),v.value=[]}),(t,o)=>{const M=q;return a(),S(xe,{to:"body"},[h(Y,{"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:C(()=>[r.value?(a(),l("div",ko,[h(Y,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95 -translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 -translate-y-4"},{default:C(()=>[r.value?(a(),l("div",{key:0,class:"w-full max-w-2xl rounded-lg bg-white dark:bg-boxdark shadow-xl",onClick:o[3]||(o[3]=J(()=>{},["stop"]))},[e("div",{class:"border-b border-stroke px-6 py-4 dark:border-strokedark flex items-center justify-between"},[o[5]||(o[5]=e("h3",{class:"text-xl font-semibold text-black dark:text-white"}," Одобрение представителя ",-1)),e("button",{onClick:m,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[...o[4]||(o[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:J(f,["prevent"]),class:"p-6"},[e("div",go,[o[10]||(o[10]=e("h4",{class:"font-medium text-black dark:text-white mb-3"},"Информация о представителе",-1)),e("div",fo,[e("div",null,[o[6]||(o[6]=e("span",{class:"text-gray-600 dark:text-gray-400"},"ФИО:",-1)),e("span",bo,u(i.representative.fullName),1)]),e("div",null,[o[7]||(o[7]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Телефон:",-1)),e("span",yo,u(i.representative.phone),1)]),e("div",ho,[o[8]||(o[8]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Организация:",-1)),e("span",wo,u(i.representative.organizationName),1)]),i.representative.telegramUsername?(a(),l("div",_o,[o[9]||(o[9]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Telegram:",-1)),e("span",$o,"@"+u(i.representative.telegramUsername),1)])):g("",!0)])]),e("div",Co,[o[14]||(o[14]=e("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white"}," Доступ к группам ",-1)),e("div",Mo,[e("label",Uo,[A(e("input",{"onUpdate:modelValue":o[0]||(o[0]=x=>p.value=x),type:"radio",value:"all",class:"h-4 w-4 text-primary focus:ring-primary"},null,512),[[ye,p.value]]),o[11]||(o[11]=e("div",null,[e("div",{class:"font-medium text-black dark:text-white"},"Все группы организации"),e("div",{class:"text-sm text-gray-500 dark:text-gray-400"}," Представитель сможет видеть всех слушателей и расписание всех групп своей организации ")],-1))]),e("label",To,[A(e("input",{"onUpdate:modelValue":o[1]||(o[1]=x=>p.value=x),type:"radio",value:"specific",class:"h-4 w-4 text-primary focus:ring-primary"},null,512),[[ye,p.value]]),o[12]||(o[12]=e("div",null,[e("div",{class:"font-medium text-black dark:text-white"},"Выбранные группы"),e("div",{class:"text-sm text-gray-500 dark:text-gray-400"}," Ограничить доступ только к определённым группам ")],-1))])]),p.value==="specific"?(a(),l("div",jo,[o[13]||(o[13]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-3"}," Выберите группы для доступа: ",-1)),e("div",Ao,[(a(!0),l(W,null,Q(v.value,x=>(a(),l("label",{key:x.id,class:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-meta-4 p-2 rounded"},[A(e("input",{"onUpdate:modelValue":o[2]||(o[2]=j=>n.value=j),type:"checkbox",value:x.id,class:"h-4 w-4 text-primary focus:ring-primary"},null,8,Ro),[[te,n.value]]),e("span",zo,u(x.code)+" - "+u(x.courseName),1)]))),128))]),v.value.length===0?(a(),l("p",Bo," Нет доступных групп для этой организации ")):g("",!0)])):g("",!0)]),e("div",Do,[h(M,{variant:"danger",onClick:m,disabled:c.value},{default:C(()=>[...o[15]||(o[15]=[D(" Отмена ",-1)])]),_:1},8,["disabled"]),h(M,{variant:"success",type:"submit",loading:c.value},{default:C(()=>[...o[16]||(o[16]=[D(" Одобрить ",-1)])]),_:1},8,["loading"])])],32)])):g("",!0)]),_:1})])):g("",!0)]),_:1})])}}}),No=Object.assign(So,{__name:"RepresentativesApproveRepresentativeModal"}),Eo={key:0,class:"fixed inset-0 z-999999 flex items-center justify-center bg-black/80 px-4 py-5"},Po={class:"mb-6 rounded-lg bg-gray-50 dark:bg-meta-4 p-4"},Lo={class:"text-sm"},Vo={class:"ml-2 font-medium text-black dark:text-white"},Io={class:"text-sm mt-2"},Ho={class:"ml-2 font-medium text-black dark:text-white"},Oo={class:"mb-6"},Fo={key:0,class:"mt-1 text-sm text-danger"},Go={class:"flex justify-end gap-4"},qo=H({__name:"BlockRepresentativeModal",props:{representative:{},isOpen:{type:Boolean}},emits:["close","submit"],setup(i,{emit:w}){const b=w,c=k(!1),r=k(!1),p=k(""),n=k(""),v=()=>{r.value=!1,setTimeout(()=>{b("close")},300)},m=async()=>{if(!c.value){if(n.value="",!p.value.trim()){n.value="Укажите причину блокировки";return}if(p.value.trim().length<10){n.value="Причина должна содержать минимум 10 символов";return}c.value=!0;try{b("submit",{reason:p.value.trim()})}finally{c.value=!1}}};return Z(()=>{setTimeout(()=>{r.value=!0},10)}),(f,t)=>{const o=q;return a(),S(xe,{to:"body"},[h(Y,{"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:C(()=>[r.value?(a(),l("div",Eo,[h(Y,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95 -translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 -translate-y-4"},{default:C(()=>[r.value?(a(),l("div",{key:0,class:"w-full max-w-lg rounded-lg bg-white dark:bg-boxdark shadow-xl",onClick:t[1]||(t[1]=J(()=>{},["stop"]))},[e("div",{class:"border-b border-stroke px-6 py-4 dark:border-strokedark flex items-center justify-between"},[t[3]||(t[3]=e("h3",{class:"text-xl font-semibold text-black dark:text-white"}," Блокировка представителя ",-1)),e("button",{onClick:v,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[...t[2]||(t[2]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:J(m,["prevent"]),class:"p-6"},[e("div",Po,[e("div",Lo,[t[4]||(t[4]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Представитель:",-1)),e("span",Vo,u(i.representative.fullName),1)]),e("div",Io,[t[5]||(t[5]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Организация:",-1)),e("span",Ho,u(i.representative.organizationName),1)])]),e("div",Oo,[t[6]||(t[6]=e("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white"},[D(" Причина блокировки "),e("span",{class:"text-danger"},"*")],-1)),A(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=M=>p.value=M),rows:"4",placeholder:"Укажите причину блокировки...",class:O(["w-full rounded-lg border border-stroke bg-transparent py-3 px-5 outline-none focus:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary resize-none",{"border-danger":n.value}]),required:""},null,2),[[X,p.value]]),n.value?(a(),l("p",Fo,u(n.value),1)):g("",!0),t[7]||(t[7]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Причина будет отправлена представителю в Telegram ",-1))]),t[10]||(t[10]=e("div",{class:"mb-6 rounded-lg bg-warning/10 border border-warning/20 p-4"},[e("div",{class:"flex gap-3"},[e("svg",{class:"w-5 h-5 text-warning shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("div",{class:"text-sm text-gray-700 dark:text-gray-300"},[e("p",{class:"font-medium mb-1"},"Внимание!"),e("p",null,"После блокировки представитель потеряет доступ к информации через Telegram-бота.")])])],-1)),e("div",Go,[h(o,{variant:"secondary",onClick:v,disabled:c.value},{default:C(()=>[...t[8]||(t[8]=[D(" Отмена ",-1)])]),_:1},8,["disabled"]),h(o,{variant:"danger",type:"submit",loading:c.value},{default:C(()=>[...t[9]||(t[9]=[D(" Заблокировать ",-1)])]),_:1},8,["loading"])])],32)])):g("",!0)]),_:1})])):g("",!0)]),_:1})])}}}),Wo=Object.assign(qo,{__name:"RepresentativesBlockRepresentativeModal"}),Qo={key:0,class:"fixed inset-0 z-999999 flex items-center justify-center bg-black/80 px-4 py-5"},Ko={class:"p-6"},Xo={class:"mb-6 rounded-lg bg-gray-50 dark:bg-meta-4 p-4"},Jo={class:"text-sm"},Yo={class:"ml-2 font-medium text-black dark:text-white"},Zo={class:"text-sm mt-2"},er={class:"ml-2 font-medium text-black dark:text-white"},tr={key:0,class:"mb-6"},sr={class:"text-sm text-gray-700 dark:text-gray-300 bg-danger/5 p-3 rounded-md border border-danger/20"},ar={class:"flex justify-end gap-4"},or=H({__name:"UnblockRepresentativeModal",props:{representative:{},isOpen:{type:Boolean}},emits:["close","submit"],setup(i,{emit:w}){const b=w,c=k(!1),r=k(!1),p=()=>{r.value=!1,setTimeout(()=>{b("close")},300)},n=async()=>{if(!c.value){c.value=!0;try{b("submit")}finally{c.value=!1}}};return Z(()=>{setTimeout(()=>{r.value=!0},10)}),(v,m)=>{const f=q;return a(),S(xe,{to:"body"},[h(Y,{"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:C(()=>[r.value?(a(),l("div",Qo,[h(Y,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 scale-95 -translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 -translate-y-4"},{default:C(()=>[r.value?(a(),l("div",{key:0,class:"w-full max-w-lg rounded-lg bg-white dark:bg-boxdark shadow-xl",onClick:m[0]||(m[0]=J(()=>{},["stop"]))},[e("div",{class:"border-b border-stroke px-6 py-4 dark:border-strokedark flex items-center justify-between"},[m[2]||(m[2]=e("h3",{class:"text-xl font-semibold text-black dark:text-white"}," Разблокировка представителя ",-1)),e("button",{onClick:p,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[...m[1]||(m[1]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ko,[e("div",Xo,[e("div",Jo,[m[3]||(m[3]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Представитель:",-1)),e("span",Yo,u(i.representative.fullName),1)]),e("div",Zo,[m[4]||(m[4]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Организация:",-1)),e("span",er,u(i.representative.organizationName),1)])]),i.representative.blockedReason?(a(),l("div",tr,[m[5]||(m[5]=e("p",{class:"text-sm font-medium text-danger mb-1"}," Причина блокировки: ",-1)),e("p",sr,u(i.representative.blockedReason),1)])):g("",!0),m[8]||(m[8]=e("div",{class:"mb-6 rounded-lg bg-success/10 border border-success/20 p-4"},[e("div",{class:"flex gap-3"},[e("svg",{class:"w-5 h-5 text-success shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",{class:"text-sm text-gray-700 dark:text-gray-300"},[e("p",{class:"font-medium mb-1"},"Подтверждение"),e("p",null,' После разблокировки представитель снова получит доступ к информации через Telegram-бота. Статус будет изменён на "Одобрен". ')])])],-1)),e("div",ar,[h(f,{variant:"secondary",onClick:p,disabled:c.value},{default:C(()=>[...m[6]||(m[6]=[D(" Отмена ",-1)])]),_:1},8,["disabled"]),h(f,{variant:"success",onClick:n,loading:c.value},{default:C(()=>[...m[7]||(m[7]=[D(" Разблокировать ",-1)])]),_:1},8,["loading"])])])])):g("",!0)]),_:1})])):g("",!0)]),_:1})])}}}),rr=Object.assign(or,{__name:"RepresentativesUnblockRepresentativeModal"}),nr={class:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},lr={key:0,class:"flex gap-3"},ir={class:"rounded-lg bg-primary/10 px-4 py-2"},dr={class:"text-lg font-bold text-primary"},ur={class:"rounded-lg bg-warning/10 px-4 py-2"},cr={class:"text-lg font-bold text-warning"},pr={class:"rounded-lg bg-success/10 px-4 py-2"},mr={class:"text-lg font-bold text-success"},vr={class:"mb-6 rounded-lg bg-white dark:bg-boxdark p-4 shadow-sm"},xr={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},kr=["value"],gr={key:0,class:"mt-6 flex justify-center"},fr={class:"flex gap-2"},br=["onClick"],yr=20,hr=H({__name:"RepresentativeManagementPanel",setup(i){const{authFetch:w}=ve(),b=le(),c=k(!1),r=k([]),p=k([]),n=k(null),v=ze({search:"",status:"",organizationId:""}),m=k(1),f=k(1),t=k(!1),o=k(null),M=k(!1),x=k(null),j=k(!1),E=k(null),N=k(!1),y=k(null),s=k(!1),B=k(null),U=k(!1);let ee=null;const ie=()=>{ee&&clearTimeout(ee),ee=setTimeout(()=>{m.value=1,P()},300)},P=async()=>{c.value=!0;try{const $=new URLSearchParams({page:m.value.toString(),limit:yr.toString()});v.search&&$.append("search",v.search),v.status&&$.append("status",v.status),v.organizationId&&$.append("organizationId",v.organizationId);const T=await w(`/api/representatives?${$.toString()}`,{method:"GET"});T.success&&(r.value=T.data,f.value=T.totalPages)}catch($){console.error("Error loading representatives:",$),b.error("Ошибка при загрузке представителей")}finally{c.value=!1}},z=async()=>{try{const $=await w("/api/organizations?limit=1000",{method:"GET"});$.success&&(p.value=$.data)}catch($){console.error("Error loading organizations:",$)}},R=async()=>{try{const $=await w("/api/representatives/stats",{method:"GET"});$.success&&(n.value=$.data)}catch($){console.error("Error loading stats:",$)}},G=$=>{m.value=$,P()},se=$=>{o.value=$,t.value=!0},K=()=>{t.value=!1,o.value=null},ae=$=>{x.value=$,M.value=!0,K()},oe=()=>{M.value=!1,x.value=null},_=async $=>{if(x.value)try{(await w(`/api/representatives/${x.value.id}/approve`,{method:"POST",body:$})).success&&(b.success("Представитель успешно одобрен"),oe(),await Promise.all([P(),R()]))}catch(T){b.error(T.data?.message||"Ошибка при одобрении")}},d=$=>{E.value=$,j.value=!0,K()},L=()=>{j.value=!1,E.value=null},re=async $=>{if(E.value)try{(await w(`/api/representatives/${E.value.id}/block`,{method:"POST",body:$})).success&&(b.success("Представитель заблокирован"),L(),await Promise.all([P(),R()]))}catch(T){b.error(T.data?.message||"Ошибка при блокировке")}},ne=$=>{y.value=$,N.value=!0,K()},ce=()=>{N.value=!1,y.value=null},ke=async()=>{if(y.value)try{(await w(`/api/representatives/${y.value.id}/unblock`,{method:"POST"})).success&&(b.success("Представитель разблокирован"),ce(),await Promise.all([P(),R()]))}catch($){b.error($.data?.message||"Ошибка при разблокировке")}},ge=$=>{B.value=$,s.value=!0},pe=()=>{s.value=!1,B.value=null},I=async()=>{if(B.value){U.value=!0;try{(await w(`/api/representatives/${B.value.id}`,{method:"DELETE"})).success&&(b.success("Представитель удалён"),pe(),await Promise.all([P(),R()]))}catch($){b.error($.data?.message||"Ошибка при удалении")}finally{U.value=!1}}},$e=async()=>{await P()};return Z(async()=>{await Promise.all([P(),z(),R()])}),($,T)=>{const Ce=na,Me=xo,Ue=No,Te=Wo,je=rr,Ae=be;return a(),l("div",null,[e("div",nr,[T[6]||(T[6]=e("div",null,[e("h3",{class:"text-xl font-semibold text-black dark:text-white"}," Представители организаций "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," Управление заявками и доступом представителей ")],-1)),n.value?(a(),l("div",lr,[e("div",ir,[T[3]||(T[3]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Всего",-1)),e("div",dr,u(n.value.total),1)]),e("div",ur,[T[4]||(T[4]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Ожидают",-1)),e("div",cr,u(n.value.pending),1)]),e("div",pr,[T[5]||(T[5]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Одобрено",-1)),e("div",mr,u(n.value.approved),1)])])):g("",!0)]),e("div",vr,[e("div",xr,[e("div",null,[T[7]||(T[7]=e("label",{class:"mb-2 block text-sm font-medium text-black dark:text-white"}," Поиск ",-1)),A(e("input",{"onUpdate:modelValue":T[0]||(T[0]=V=>v.search=V),type:"text",placeholder:"ФИО, телефон, организация...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-form-strokedark dark:bg-form-input",onInput:ie},null,544),[[X,v.search]])]),e("div",null,[T[9]||(T[9]=e("label",{class:"mb-2 block text-sm font-medium text-black dark:text-white"}," Статус ",-1)),A(e("select",{"onUpdate:modelValue":T[1]||(T[1]=V=>v.status=V),class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-form-strokedark dark:bg-form-input",onChange:P},[...T[8]||(T[8]=[e("option",{value:""},"Все статусы",-1),e("option",{value:"pending"},"Ожидают одобрения",-1),e("option",{value:"approved"},"Одобрены",-1),e("option",{value:"blocked"},"Заблокированы",-1)])],544),[[me,v.status]])]),e("div",null,[T[11]||(T[11]=e("label",{class:"mb-2 block text-sm font-medium text-black dark:text-white"}," Организация ",-1)),A(e("select",{"onUpdate:modelValue":T[2]||(T[2]=V=>v.organizationId=V),class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-form-strokedark dark:bg-form-input",onChange:P},[T[10]||(T[10]=e("option",{value:""},"Все организации",-1)),(a(!0),l(W,null,Q(p.value,V=>(a(),l("option",{key:V.id,value:V.id},u(V.name),9,kr))),128))],544),[[me,v.organizationId]])])])]),h(Ce,{representatives:r.value,loading:c.value,onView:se,onApprove:ae,onBlock:d,onUnblock:ne,onDelete:ge},null,8,["representatives","loading"]),f.value>1?(a(),l("div",gr,[e("nav",fr,[(a(!0),l(W,null,Q(f.value,V=>(a(),l("button",{key:V,onClick:Sr=>G(V),class:O(["px-4 py-2 rounded-lg font-medium transition-colors",m.value===V?"bg-primary text-white":"bg-white dark:bg-boxdark text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-meta-4"])},u(V),11,br))),128))])])):g("",!0),o.value?(a(),S(Me,{key:1,representative:o.value,"is-open":t.value,onClose:K,onApprove:ae,onBlock:d,onUnblock:ne,onUpdated:$e},null,8,["representative","is-open"])):g("",!0),x.value?(a(),S(Ue,{key:2,representative:x.value,"is-open":M.value,onClose:oe,onSubmit:_},null,8,["representative","is-open"])):g("",!0),E.value?(a(),S(Te,{key:3,representative:E.value,"is-open":j.value,onClose:L,onSubmit:re},null,8,["representative","is-open"])):g("",!0),y.value?(a(),S(je,{key:4,representative:y.value,"is-open":N.value,onClose:ce,onSubmit:ke},null,8,["representative","is-open"])):g("",!0),h(Ae,{"is-open":s.value,title:"Удаление представителя",message:"Вы уверены, что хотите удалить этого представителя?","item-name":B.value?.fullName,warning:"Это действие нельзя отменить. Все данные представителя будут удалены.","confirm-text":"Удалить","cancel-text":"Отмена",variant:"danger",loading:U.value,onConfirm:I,onCancel:pe},null,8,["is-open","item-name","loading"])])}}}),wr=Object.assign(hr,{__name:"RepresentativesRepresentativeManagementPanel"}),_r={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},$r={class:"flex flex-col gap-6"},Cr={class:"rounded-lg bg-gray-50 p-1 dark:bg-gray-800"},Mr={class:"flex gap-1","aria-label":"Tabs"},Ur=["onClick"],Tr={class:"flex items-center justify-center gap-2"},jr={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},Ar={key:0,class:"p-6"},Rr={key:1,class:"p-6"},zr={class:"p-6"},Br={class:"p-6"},Dr={key:2,class:"p-6"},Xr=H({__name:"index",setup(i){const w=Se(),b=De(),{user:c}=ue(),r=F(()=>c.value?.role==="ADMIN");F(()=>c.value?.role==="MANAGER");const p=[{id:"admin",label:"Администраторы",roles:["ADMIN"]},{id:"manager",label:"Модераторы",roles:["ADMIN"]},{id:"instructors",label:"Инструкторы",roles:["ADMIN","MANAGER"]},{id:"students",label:"Студенты",roles:["ADMIN","MANAGER"]},{id:"representatives",label:"Представители",roles:["ADMIN"]}],n=F(()=>{const t=c.value?.role||"";return p.filter(o=>o.roles.includes(t))}),v=k(""),m=()=>{const t=w.query.tab;t&&n.value.some(o=>o.id===t)?v.value=t:n.value.length>0&&!v.value&&(v.value=n.value[0].id)};_e(()=>w.query.tab,()=>{m()}),Be(()=>{n.value.length>0&&m()});const f=t=>{v.value!==t&&(v.value=t,b.push({query:{...w.query,tab:t}}))};return(t,o)=>{const M=Mt,x=ts,j=Ls,E=wr;return a(),l("div",_r,[o[0]||(o[0]=e("div",{class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},[e("div",null,[e("h2",{class:"text-title-md2 font-bold text-black dark:text-white"}," Управление пользователями "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Создание и управление учётными записями ")])],-1)),e("div",$r,[e("div",Cr,[e("nav",Mr,[(a(!0),l(W,null,Q(n.value,N=>(a(),l("button",{key:N.id,onClick:y=>f(N.id),class:O(["flex-1 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 relative",v.value===N.id?"bg-primary text-white shadow-sm":"text-gray-600 hover:bg-white hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"])},[e("span",Tr,u(N.label),1)],10,Ur))),128))])]),e("div",jr,[r.value?A((a(),l("div",Ar,[h(M,{role:he(we).ADMIN},null,8,["role"])],512)),[[de,v.value==="admin"]]):g("",!0),r.value?A((a(),l("div",Rr,[h(M,{role:he(we).MANAGER},null,8,["role"])],512)),[[de,v.value==="manager"]]):g("",!0),A(e("div",zr,[h(x)],512),[[de,v.value==="instructors"]]),A(e("div",Br,[h(j)],512),[[de,v.value==="students"]]),r.value?A((a(),l("div",Dr,[h(E)],512)),[[de,v.value==="representatives"]]):g("",!0)])])])}}});export{Xr as default};
