import{_ as fe}from"./BKg9m4wI.js";import{_ as Z}from"./BMofnORk.js";import{_ as he}from"./BNigTcCY.js";import{v as W,r as x,f as q,g as ee,c as u,a as e,h as y,x as P,D as we,i as r,H as _e,F as G,j as Q,t as a,o as i,q as Ce,k as z,w as M,b as D,d as v,A as F,n as N,z as He,Q as Me,s as $e,u as je,m as De}from"./GLV6bXvn.js";import{u as X}from"./DlZaGH1J.js";import{_ as Ve}from"./CyDLpZDf.js";import{u as te}from"./DVL-QcDc.js";import{u as Ae}from"./DW2J_Y_n.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const Ie={class:"space-y-4"},Be={class:"relative"},Ee=["value"],ze={key:0,class:"space-y-2"},Se={class:"space-y-2"},Ue={class:"flex items-center gap-3"},Pe={class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold"},Ne={class:"font-medium text-gray-900 dark:text-white"},Te={key:0,type:"button",class:"text-xs text-primary"},Oe=["onClick"],Fe=["onClick"],Le=W({__name:"InstructorMultiSelect",props:{modelValue:{}},emits:["update:modelValue"],setup(V,{emit:T}){const p=V,f=T,{authFetch:$}=X(),C=x([]),h=x(""),w=x(!1),m=q(()=>C.value.filter(g=>!p.modelValue.includes(g.id))),c=async()=>{w.value=!0;try{const g=await $("/api/instructors",{method:"GET",params:{isActive:!0,limit:1e3}});g.success&&g.instructors&&(C.value=g.instructors)}catch(g){console.error("Error loading instructors:",g)}finally{w.value=!1}},B=()=>{h.value&&!p.modelValue.includes(h.value)&&(f("update:modelValue",[...p.modelValue,h.value]),h.value="")},o=g=>{const l=[...p.modelValue];l.splice(g,1),f("update:modelValue",l)},A=g=>{const l=[...p.modelValue],d=l.splice(g,1)[0];d&&(l.unshift(d),f("update:modelValue",l))},j=g=>C.value.find(d=>d.id===g)?.fullName||"Неизвестный инструктор",I=g=>{const l=j(g),d=l.split(" "),s=d[0],_=d[1];return d.length>=2&&s&&_&&s[0]&&_[0]?(s[0]+_[0]).toUpperCase():l.substring(0,2).toUpperCase()};return ee(()=>{c()}),(g,l)=>(i(),u("div",Ie,[e("div",null,[l[2]||(l[2]=e("label",{class:"mb-2.5 block text-sm font-medium text-black dark:text-white"}," Инструкторы ",-1)),e("div",Be,[P(e("select",{"onUpdate:modelValue":l[0]||(l[0]=d=>_e(h)?h.value=d:null),onChange:B,class:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},[l[1]||(l[1]=e("option",{value:""},"Выберите инструктора...",-1)),(i(!0),u(G,null,Q(r(m),d=>(i(),u("option",{key:d.id,value:d.id},a(d.fullName),9,Ee))),128))],544),[[we,r(h)]])])]),V.modelValue.length>0?(i(),u("div",ze,[l[4]||(l[4]=e("label",{class:"block text-sm font-medium text-black dark:text-white"}," Выбранные инструкторы ",-1)),e("div",Se,[(i(!0),u(G,null,Q(V.modelValue,(d,s)=>(i(),u("div",{key:d,class:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-700 dark:bg-gray-800"},[e("div",Ue,[e("div",Pe,a(I(d)),1),e("div",null,[e("p",Ne,a(j(d)),1),s===0?(i(),u("button",Te," ★ Основной инструктор ")):(i(),u("button",{key:1,type:"button",onClick:_=>A(s),class:"text-xs text-gray-500 hover:text-primary transition-colors"}," ☆ Сделать основным ",8,Oe))])]),e("button",{type:"button",onClick:_=>o(s),class:"text-danger hover:text-danger/80 transition-colors"},[...l[3]||(l[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Fe)]))),128))])])):y("",!0)]))}}),Re=Object.assign(Le,{__name:"ProgramsInstructorMultiSelect"}),qe={key:0,class:"mt-1 text-sm text-danger"},Ge={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Qe={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},Je={class:"relative"},Ke={key:0,class:"mt-1 text-xs text-danger"},We={class:"relative"},Xe={key:0,class:"mt-1 text-xs text-danger"},Ye={class:"relative"},Ze={key:0,class:"mt-1 text-xs text-danger"},et={class:"mt-4 flex items-center justify-between rounded-lg border border-primary/20 bg-primary/5 p-3"},tt={class:"text-lg font-bold text-primary"},rt={key:0,class:"mt-2 text-sm text-danger"},st={class:"flex justify-end gap-3 border-t border-stroke pt-6 dark:border-strokedark"},ot=W({__name:"DisciplineFormModal",props:{isOpen:{type:Boolean},courseId:{},discipline:{}},emits:["close","success"],setup(V,{emit:T}){const p=V,f=T,{authFetch:$}=X(),{success:C,error:h}=te(),w=x(!1),m=x({}),c=x({name:"",description:"",theoryHours:0,practiceHours:0,assessmentHours:0,instructorIds:[]}),B=q(()=>p.discipline?"Редактировать дисциплину":"Добавить дисциплину"),o=q(()=>c.value.theoryHours+c.value.practiceHours+c.value.assessmentHours),A=()=>{c.value={name:"",description:"",theoryHours:0,practiceHours:0,assessmentHours:0,instructorIds:[]},m.value={}},j=()=>{p.discipline?c.value={name:p.discipline.name,description:p.discipline.description||"",theoryHours:p.discipline.theoryHours,practiceHours:p.discipline.practiceHours,assessmentHours:p.discipline.assessmentHours,instructorIds:p.discipline.instructors?.map(d=>d.instructorId)||[]}:A()},I=()=>(m.value={},c.value.name.trim()||(m.value.name="Название обязательно"),c.value.theoryHours<0&&(m.value.theoryHours="Не может быть отрицательным"),c.value.practiceHours<0&&(m.value.practiceHours="Не может быть отрицательным"),c.value.assessmentHours<0&&(m.value.assessmentHours="Не может быть отрицательным"),o.value===0&&(m.value.totalHours="Общее количество часов должно быть больше нуля"),Object.keys(m.value).length===0),g=async()=>{if(!w.value&&I()){w.value=!0;try{p.discipline?(await $(`/api/courses/${p.courseId}/disciplines/${p.discipline.id}`,{method:"PATCH",body:c.value}),C("Дисциплина успешно обновлена","Успех")):(await $(`/api/courses/${p.courseId}/disciplines`,{method:"POST",body:c.value}),C("Дисциплина успешно добавлена","Успех")),f("success"),l()}catch(d){console.error("Error saving discipline:",d),h(d.data?.message||"Не удалось сохранить дисциплину","Ошибка")}finally{w.value=!1}}},l=()=>{w.value||(A(),f("close"))};return Ce(()=>p.isOpen,d=>{d&&j()}),(d,s)=>{const _=Re,S=Z,H=Ve;return i(),z(H,{"is-open":V.isOpen,title:r(B),size:"lg",onClose:l},{default:M(()=>[e("form",{onSubmit:He(g,["prevent"]),class:"space-y-6"},[e("div",null,[s[6]||(s[6]=e("label",{class:"mb-2.5 block text-sm font-medium text-black dark:text-white"},[v(" Название дисциплины "),e("span",{class:"text-danger"},"*")],-1)),P(e("input",{"onUpdate:modelValue":s[0]||(s[0]=k=>r(c).name=k),type:"text",placeholder:"Введите название дисциплины",class:N(["w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",{"border-danger":r(m).name}]),required:""},null,2),[[F,r(c).name]]),r(m).name?(i(),u("p",qe,a(r(m).name),1)):y("",!0)]),e("div",null,[s[7]||(s[7]=e("label",{class:"mb-2.5 block text-sm font-medium text-black dark:text-white"}," Описание ",-1)),P(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=k=>r(c).description=k),rows:"3",placeholder:"Введите описание дисциплины",class:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},null,512),[[F,r(c).description]])]),e("div",Ge,[s[15]||(s[15]=e("h4",{class:"mb-4 text-sm font-semibold text-gray-900 dark:text-white"}," Распределение часов по видам обучения ",-1)),e("div",Qe,[e("div",null,[s[9]||(s[9]=e("label",{class:"mb-2 block text-sm font-medium text-black dark:text-white"},[v(" Теория "),e("span",{class:"text-danger"},"*")],-1)),e("div",Je,[P(e("input",{"onUpdate:modelValue":s[2]||(s[2]=k=>r(c).theoryHours=k),type:"number",min:"0",placeholder:"0",class:N(["w-full rounded border-[1.5px] border-stroke bg-white px-4 py-2.5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",{"border-danger":r(m).theoryHours}]),required:""},null,2),[[F,r(c).theoryHours,void 0,{number:!0}]]),s[8]||(s[8]=e("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-gray-500"},"ч",-1))]),r(m).theoryHours?(i(),u("p",Ke,a(r(m).theoryHours),1)):y("",!0)]),e("div",null,[s[11]||(s[11]=e("label",{class:"mb-2 block text-sm font-medium text-black dark:text-white"},[v(" Практика "),e("span",{class:"text-danger"},"*")],-1)),e("div",We,[P(e("input",{"onUpdate:modelValue":s[3]||(s[3]=k=>r(c).practiceHours=k),type:"number",min:"0",placeholder:"0",class:N(["w-full rounded border-[1.5px] border-stroke bg-white px-4 py-2.5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",{"border-danger":r(m).practiceHours}]),required:""},null,2),[[F,r(c).practiceHours,void 0,{number:!0}]]),s[10]||(s[10]=e("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-gray-500"},"ч",-1))]),r(m).practiceHours?(i(),u("p",Xe,a(r(m).practiceHours),1)):y("",!0)]),e("div",null,[s[13]||(s[13]=e("label",{class:"mb-2 block text-sm font-medium text-black dark:text-white"},[v(" Проверка знаний "),e("span",{class:"text-danger"},"*")],-1)),e("div",Ye,[P(e("input",{"onUpdate:modelValue":s[4]||(s[4]=k=>r(c).assessmentHours=k),type:"number",min:"0",placeholder:"0",class:N(["w-full rounded border-[1.5px] border-stroke bg-white px-4 py-2.5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",{"border-danger":r(m).assessmentHours}]),required:""},null,2),[[F,r(c).assessmentHours,void 0,{number:!0}]]),s[12]||(s[12]=e("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-gray-500"},"ч",-1))]),r(m).assessmentHours?(i(),u("p",Ze,a(r(m).assessmentHours),1)):y("",!0)])]),e("div",et,[s[14]||(s[14]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Всего часов:",-1)),e("span",tt,a(r(o))+" ч",1)]),r(m).totalHours?(i(),u("p",rt,a(r(m).totalHours),1)):y("",!0)]),D(_,{modelValue:r(c).instructorIds,"onUpdate:modelValue":s[5]||(s[5]=k=>r(c).instructorIds=k)},null,8,["modelValue"]),e("div",st,[D(S,{type:"button",variant:"outline",onClick:l,disabled:r(w)},{default:M(()=>[...s[16]||(s[16]=[v(" Отмена ",-1)])]),_:1},8,["disabled"]),D(S,{type:"submit",variant:"primary",loading:r(w),disabled:r(w)},{default:M(()=>[v(a(V.discipline?"Сохранить изменения":"Добавить дисциплину"),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["is-open","title"])}}}),at=Object.assign(ot,{__name:"ProgramsDisciplineFormModal"}),nt={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},it={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},dt={class:"mb-3"},lt={key:0,class:"flex justify-center items-center py-20"},ut={key:1,class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-8"},ct={class:"text-center"},mt={class:"text-gray-600 dark:text-gray-400 mb-4"},gt={key:2},pt={class:"mb-6 rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},bt={class:"px-6 pb-6"},xt={class:"relative -mt-16 mb-6 flex flex-col items-center gap-4 sm:flex-row sm:items-end"},yt={class:"relative"},vt={class:"h-32 w-32 overflow-hidden rounded-full border-4 border-white bg-white shadow-lg dark:border-gray-900 dark:bg-boxdark"},kt={class:"h-full w-full flex items-center justify-center bg-primary/10"},ft={class:"text-primary font-bold text-4xl"},ht={class:"flex-1 text-center sm:text-left"},wt={class:"mb-1 text-2xl font-bold text-gray-900 dark:text-white"},_t={class:"mb-2 text-gray-600 dark:text-gray-400"},Ct={class:"flex flex-wrap items-center justify-center gap-3 sm:justify-start"},Ht={key:0,class:"inline-flex items-center gap-1.5 rounded-full bg-gray-500/10 px-3 py-1 text-sm font-medium text-gray-600 dark:text-gray-400"},Mt={class:"inline-flex items-center gap-1.5 rounded-full bg-primary/10 px-3 py-1 text-sm font-medium text-primary"},$t={class:"flex gap-3"},jt={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},Dt={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},Vt={class:"flex items-center gap-3"},At={class:"text-2xl font-bold text-gray-900 dark:text-white"},It={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-success/50 dark:border-gray-700 dark:bg-gray-800/50"},Bt={class:"flex items-center gap-3"},Et={class:"text-2xl font-bold text-gray-900 dark:text-white"},zt={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-warning/50 dark:border-gray-700 dark:bg-gray-800/50"},St={class:"flex items-center gap-3"},Ut={class:"text-2xl font-bold text-gray-900 dark:text-white"},Pt={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Nt={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-6"},Tt={class:"space-y-3"},Ot={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Ft={class:"font-medium text-gray-900 dark:text-white"},Lt={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Rt={class:"font-medium text-gray-900 dark:text-white"},qt={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Gt={class:"font-medium text-gray-900 dark:text-white font-mono"},Qt={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Jt={class:"font-medium text-gray-900 dark:text-white"},Kt={class:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-6"},Wt={class:"space-y-3"},Xt={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Yt={class:"font-medium text-gray-900 dark:text-white"},Zt={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},er={class:"font-medium text-gray-900 dark:text-white"},tr={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},rr={class:"font-medium text-gray-900 dark:text-white"},sr={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},or={class:"font-medium text-gray-900 dark:text-white font-mono text-sm"},ar={class:"mt-6 rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-6"},nr={class:"flex items-center justify-between mb-4"},ir={key:0,class:"text-center py-8"},dr={key:1,class:"space-y-4"},lr={class:"flex items-start gap-4"},ur={class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold shrink-0"},cr={class:"flex-1 min-w-0"},mr={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},gr={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mb-3"},pr={class:"mb-3 rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-700 dark:bg-gray-800/50"},br={class:"grid grid-cols-2 gap-3 sm:grid-cols-4"},xr={class:"text-sm font-semibold text-gray-900 dark:text-white"},yr={class:"text-sm font-semibold text-gray-900 dark:text-white"},vr={class:"text-sm font-semibold text-gray-900 dark:text-white"},kr={class:"col-span-2 sm:col-span-1"},fr={class:"text-sm font-bold text-primary"},hr={class:"flex flex-wrap gap-3"},wr={key:0,class:"inline-flex items-center gap-1.5 rounded-full bg-success/10 px-3 py-1 text-sm font-medium text-success"},_r={key:1,class:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700"},Cr={class:"flex flex-wrap gap-2"},Hr={key:0,class:"text-primary"},Mr={key:0,class:"flex gap-2 shrink-0"},$r=["onClick"],jr=["onClick"],Nr=W({__name:"[id]",setup(V){const T=Me(),p=$e(),f=T.params.id,{authFetch:$}=X(),{success:C,error:h}=te(),{canEditCourses:w,canDeleteCourses:m,canArchiveCourses:c,canManageDisciplines:B}=Ae(),o=x(null),A=x(!0),j=x(null),I=x(!1),g=x(!1),l=x(!1),d=x(!1),s=x(!1),_=x(!1),S=x(!1),H=x(void 0),k=x(!1),L=x(!1);je({title:"Учебная программа - АТЦ Платформа"});const re=q(()=>{if(!o.value?.disciplines)return 0;const n=new Set;return o.value.disciplines.forEach(t=>{t.instructors?.forEach(K=>{n.add(K.instructorId)})}),n.size}),U=async()=>{A.value=!0,j.value=null;try{console.log("Loading course with ID:",f);const n=await $(`/api/courses/${f}`,{method:"GET"});console.log("API Response:",n),n.success&&n.course?(o.value=n.course,console.log("Course loaded successfully:",o.value)):(j.value=n.message||"Не удалось загрузить данные учебной программы",console.error("API returned error:",n.message))}catch(n){console.error("Error loading course:",n),console.error("Error details:",{message:n.message,data:n.data,statusCode:n.statusCode,response:n.response}),j.value=n.data?.message||n.message||"Не удалось загрузить данные учебной программы"}finally{A.value=!1}},se=()=>{p.push(`/programs/edit/${f}`)},oe=()=>{I.value=!0},ae=()=>{g.value||(I.value=!1)},ne=async()=>{g.value=!0;try{await $(`/api/courses/${f}`,{method:"DELETE"}),C("Учебная программа успешно удалена","Успех"),setTimeout(()=>{p.push("/programs")},1e3)}catch(n){console.error("Error deleting course:",n),h(n.data?.message||"Не удалось удалить учебную программу","Ошибка")}finally{g.value=!1,I.value=!1}},ie=()=>{l.value=!0},de=()=>{d.value||(l.value=!1)},le=async()=>{d.value=!0;try{await $(`/api/courses/${f}/archive`,{method:"PUT",body:{isArchived:!0}}),C("Учебная программа перемещена в архив","Успех"),await U()}catch(n){console.error("Error archiving course:",n),h(n.data?.message||"Не удалось переместить учебную программу в архив","Ошибка")}finally{d.value=!1,l.value=!1}},ue=()=>{s.value=!0},ce=()=>{_.value||(s.value=!1)},me=async()=>{_.value=!0;try{await $(`/api/courses/${f}/archive`,{method:"PUT",body:{isArchived:!1}}),C("Учебная программа восстановлена из архива","Успех"),await U()}catch(n){console.error("Error restoring course:",n),h(n.data?.message||"Не удалось восстановить учебную программу из архива","Ошибка")}finally{_.value=!1,s.value=!1}},J=n=>{H.value=n,S.value=!0},ge=()=>{S.value=!1,H.value=void 0},pe=()=>{U()},be=n=>{H.value=n,k.value=!0},xe=()=>{L.value||(k.value=!1,H.value=void 0)},ye=async()=>{if(H.value){L.value=!0;try{await $(`/api/courses/${f}/disciplines/${H.value.id}`,{method:"DELETE"}),C("Дисциплина успешно удалена","Успех"),await U()}catch(n){console.error("Error deleting discipline:",n),h(n.data?.message||"Не удалось удалить дисциплину","Ошибка")}finally{L.value=!1,k.value=!1,H.value=void 0}}},Y=n=>new Date(n).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return ee(()=>{U()}),(n,t)=>{const K=fe,E=Z,R=he,ve=at;return i(),u("div",nt,[e("div",it,[e("div",null,[e("div",dt,[D(K,{to:"/programs",class:"flex items-center gap-2 text-gray-600 hover:text-primary dark:text-gray-400 dark:hover:text-primary transition-colors"},{default:M(()=>[...t[2]||(t[2]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),v(" Назад к списку учебных программ ",-1)])]),_:1})]),t[3]||(t[3]=e("h2",{class:"text-title-md2 font-bold text-black dark:text-white"}," Учебная программа ",-1))])]),r(A)?(i(),u("div",lt,[...t[4]||(t[4]=[e("div",{class:"h-12 w-12 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"},null,-1)])])):r(j)?(i(),u("div",ut,[e("div",ct,[t[6]||(t[6]=e("div",{class:"mx-auto mb-4 h-16 w-16 rounded-full bg-danger/10 flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[7]||(t[7]=e("h3",{class:"mb-2 text-xl font-semibold text-black dark:text-white"}," Ошибка загрузки ",-1)),e("p",mt,a(r(j)),1),D(E,{variant:"primary",onClick:U},{default:M(()=>[...t[5]||(t[5]=[v(" Попробовать снова ",-1)])]),_:1})])])):r(o)?(i(),u("div",gt,[e("div",pt,[t[20]||(t[20]=De('<div class="relative h-48 overflow-hidden rounded-t-sm bg-linear-to-r from-primary to-primary-600"><div class="absolute inset-0 bg-black/10"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-24 h-24 text-white/20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg></div></div>',1)),e("div",bt,[e("div",xt,[e("div",yt,[e("div",vt,[e("div",kt,[e("span",ft,a(r(o).shortName),1)])])]),e("div",ht,[e("h3",wt,a(r(o).name),1),e("p",_t," Код: "+a(r(o).code),1),e("div",Ct,[e("span",{class:N(["inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-sm font-medium",r(o).isActive?"bg-success/10 text-success":"bg-danger/10 text-danger"])},[e("span",{class:N(["h-2 w-2 rounded-full",r(o).isActive?"bg-success":"bg-danger"])},null,2),v(" "+a(r(o).isActive?"Активна":"Неактивна"),1)],2),r(o).isArchived?(i(),u("span",Ht,[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1),v(" В архиве ",-1)])])):y("",!0),e("span",Mt,[t[9]||(t[9]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),v(" "+a(r(o).totalHours)+" часов ",1)])])]),e("div",$t,[r(w)&&!r(o).isArchived?(i(),z(E,{key:0,variant:"outline",size:"md",onClick:se},{default:M(()=>[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),v(" Редактировать ",-1)])]),_:1})):y("",!0),r(c)&&!r(o).isArchived?(i(),z(E,{key:1,variant:"warning",size:"md",onClick:ie},{default:M(()=>[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1),v(" В архив ",-1)])]),_:1})):y("",!0),r(c)&&r(o).isArchived?(i(),z(E,{key:2,variant:"success",size:"md",onClick:ue},{default:M(()=>[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),v(" Восстановить ",-1)])]),_:1})):y("",!0),r(m)?(i(),z(E,{key:3,variant:"danger",size:"md",onClick:oe},{default:M(()=>[...t[13]||(t[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),v(" Удалить ",-1)])]),_:1})):y("",!0)])]),e("div",jt,[e("div",Dt,[e("div",Vt,[t[15]||(t[15]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10"},[e("svg",{class:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),e("div",null,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Дисциплин ",-1)),e("p",At,a(r(o).disciplines?.length||0),1)])])]),e("div",It,[e("div",Bt,[t[17]||(t[17]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-success/10"},[e("svg",{class:"w-6 h-6 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",null,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Инструкторов ",-1)),e("p",Et,a(r(re)),1)])])]),e("div",zt,[e("div",St,[t[19]||(t[19]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-warning/10"},[e("svg",{class:"w-6 h-6 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[t[18]||(t[18]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Всего часов ",-1)),e("p",Ut,a(r(o).totalHours),1)])])])])])]),e("div",Pt,[e("div",Nt,[t[25]||(t[25]=e("h3",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"}," Основная информация ",-1)),e("div",Tt,[e("div",Ot,[t[21]||(t[21]=e("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Полное название ",-1)),e("p",Ft,a(r(o).name),1)]),e("div",Lt,[t[22]||(t[22]=e("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Короткое название ",-1)),e("p",Rt,a(r(o).shortName),1)]),e("div",qt,[t[23]||(t[23]=e("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Код программы ",-1)),e("p",Gt,a(r(o).code),1)]),e("div",Qt,[t[24]||(t[24]=e("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Описание ",-1)),e("p",Jt,a(r(o).description||"—"),1)])])]),e("div",Kt,[t[30]||(t[30]=e("h3",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"}," Дополнительная информация ",-1)),e("div",Wt,[e("div",Xt,[t[26]||(t[26]=e("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Шаблон сертификата ",-1)),e("p",Yt,a(r(o).certificateTemplate?.name||"Не указан"),1)]),e("div",Zt,[t[27]||(t[27]=e("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Дата создания ",-1)),e("p",er,a(Y(r(o).createdAt)),1)]),e("div",tr,[t[28]||(t[28]=e("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," Последнее обновление ",-1)),e("p",rr,a(Y(r(o).updatedAt)),1)]),e("div",sr,[t[29]||(t[29]=e("p",{class:"mb-1 text-sm text-gray-600 dark:text-gray-400"}," ID программы ",-1)),e("p",or,a(r(o).id),1)])])])]),e("div",ar,[e("div",nr,[t[32]||(t[32]=e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Дисциплины курса ",-1)),r(B)?(i(),z(E,{key:0,variant:"primary",size:"sm",onClick:t[0]||(t[0]=b=>J())},{default:M(()=>[...t[31]||(t[31]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),v(" Добавить дисциплину ",-1)])]),_:1})):y("",!0)]),!r(o).disciplines||r(o).disciplines.length===0?(i(),u("div",ir,[t[34]||(t[34]=e("div",{class:"mx-auto mb-4 h-16 w-16 rounded-full bg-gray-100 dark:bg-meta-4 flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),t[35]||(t[35]=e("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," Дисциплины пока не добавлены ",-1)),r(B)?(i(),z(E,{key:0,variant:"primary",onClick:t[1]||(t[1]=b=>J())},{default:M(()=>[...t[33]||(t[33]=[v(" Добавить первую дисциплину ",-1)])]),_:1})):y("",!0)])):(i(),u("div",dr,[(i(!0),u(G,null,Q(r(o).disciplines,(b,ke)=>(i(),u("div",{key:b.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-5 hover:border-primary/50 transition-all"},[e("div",lr,[e("div",ur,a(ke+1),1),e("div",cr,[e("h4",mr,a(b.name),1),b.description?(i(),u("p",gr,a(b.description),1)):y("",!0),e("div",pr,[e("div",br,[e("div",null,[t[36]||(t[36]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Теория ",-1)),e("p",xr,a(b.theoryHours)+" ч ",1)]),e("div",null,[t[37]||(t[37]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Практика ",-1)),e("p",yr,a(b.practiceHours)+" ч ",1)]),e("div",null,[t[38]||(t[38]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Проверка знаний ",-1)),e("p",vr,a(b.assessmentHours)+" ч ",1)]),e("div",kr,[t[39]||(t[39]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Всего ",-1)),e("p",fr,a(b.hours)+" ч ",1)])])]),e("div",hr,[b.instructors&&b.instructors.length>0?(i(),u("span",wr,[t[40]||(t[40]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),v(" "+a(b.instructors.length)+" "+a(b.instructors.length===1?"инструктор":"инструктора"),1)])):y("",!0)]),b.instructors&&b.instructors.length>0?(i(),u("div",_r,[t[41]||(t[41]=e("p",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2"}," Инструкторы: ",-1)),e("div",Cr,[(i(!0),u(G,null,Q(b.instructors,O=>(i(),u("span",{key:O.id,class:"inline-flex items-center gap-1.5 rounded-md bg-gray-100 dark:bg-gray-800 px-2.5 py-1 text-xs font-medium text-gray-700 dark:text-gray-300"},[v(a(O.instructor?.fullName)+" ",1),O.isPrimary?(i(),u("span",Hr,"★")):y("",!0)]))),128))])])):y("",!0)]),r(B)?(i(),u("div",Mr,[e("button",{onClick:O=>J(b),class:"flex h-8 w-8 items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-600 transition-colors hover:border-primary hover:text-primary dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:border-primary dark:hover:text-primary",title:"Редактировать"},[...t[42]||(t[42]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,$r),e("button",{onClick:O=>be(b),class:"flex h-8 w-8 items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-600 transition-colors hover:border-danger hover:text-danger dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:border-danger dark:hover:text-danger",title:"Удалить"},[...t[43]||(t[43]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,jr)])):y("",!0)])]))),128))]))])])):y("",!0),D(R,{"is-open":r(I),title:"Удаление учебной программы",message:"Вы уверены, что хотите удалить эту учебную программу?","item-name":r(o)?.name,warning:"Это действие нельзя отменить. Все данные программы и связанные дисциплины будут удалены.",loading:r(g),onConfirm:ne,onCancel:ae},null,8,["is-open","item-name","loading"]),D(R,{"is-open":r(l),title:"Архивация учебной программы",message:"Вы уверены, что хотите переместить эту учебную программу в архив?","item-name":r(o)?.name,warning:"Архивная программа не будет доступна для создания новых групп. Вы сможете восстановить её позже.",loading:r(d),onConfirm:le,onCancel:de},null,8,["is-open","item-name","loading"]),D(R,{"is-open":r(s),title:"Восстановление учебной программы",message:"Вы уверены, что хотите восстановить эту учебную программу из архива?","item-name":r(o)?.name,loading:r(_),onConfirm:me,onCancel:ce},null,8,["is-open","item-name","loading"]),D(ve,{"is-open":r(S),"course-id":r(f),discipline:r(H),onClose:ge,onSuccess:pe},null,8,["is-open","course-id","discipline"]),D(R,{"is-open":r(k),title:"Удаление дисциплины",message:"Вы уверены, что хотите удалить эту дисциплину?","item-name":r(H)?.name,warning:"Это действие нельзя отменить. Дисциплина будет удалена из курса.",loading:r(L),onConfirm:ye,onCancel:xe},null,8,["is-open","item-name","loading"])])}}});export{Nr as default};
