import{v as z,r as f,f as x,g as N,L as S,c as s,h as n,a as r,b as T,d as h,t as c,n as w,F as _,j as V,z as p,T as q,w as D,x as E,A as I,o}from"./GLV6bXvn.js";const U={key:0,class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},A={key:0,class:"text-danger"},F={class:"flex items-center justify-between"},R={class:"flex-1 min-w-0"},$={key:0,class:"text-gray-400"},Q={key:1,class:"flex flex-wrap gap-2 max-h-[100px] overflow-y-auto pr-1"},G=["onClick"],H={key:0,class:"absolute z-50 mt-2 w-full rounded-lg border border-stroke bg-white dark:bg-boxdark dark:border-strokedark shadow-lg max-h-60 overflow-auto"},J={key:0,class:"p-3 border-b border-stroke dark:border-strokedark sticky top-0 bg-white dark:bg-boxdark"},K={class:"relative"},P={class:"py-2"},W={key:0,class:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center"},X=["checked","onChange"],Y={class:"text-sm text-gray-900 dark:text-white flex-1"},Z={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},ee={key:1,class:"border-t border-stroke dark:border-strokedark p-3 bg-gray-50 dark:bg-meta-4"},te={class:"flex items-center justify-between text-sm"},re={class:"text-gray-600 dark:text-gray-400"},se={key:1,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},oe=z({__name:"MultiSelect",props:{modelValue:{},options:{},label:{},placeholder:{default:"Выберите элементы..."},hint:{},searchable:{type:Boolean,default:!0},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:C}){const i=l,y=C,g=f(null),d=f(!1),u=f(""),m=x(()=>{const a=i.modelValue||[];return i.options.filter(e=>a.includes(e.id))}),b=x(()=>{if(!u.value)return i.options;const a=u.value.toLowerCase();return i.options.filter(e=>e.label.toLowerCase().includes(a)||e.description?.toLowerCase().includes(a))}),M=a=>(i.modelValue||[]).includes(a),B=()=>{d.value=!d.value,d.value||(u.value="")},L=a=>{const t=[...i.modelValue||[]],k=t.indexOf(a.id);k>-1?t.splice(k,1):t.push(a.id),y("update:modelValue",t)},j=a=>{const t=(i.modelValue||[]).filter(k=>k!==a);y("update:modelValue",t)},O=()=>{y("update:modelValue",[])},v=a=>{g.value&&!g.value.contains(a.target)&&(d.value=!1,u.value="")};return N(()=>{document.addEventListener("click",v)}),S(()=>{document.removeEventListener("click",v)}),(a,e)=>(o(),s("div",{class:"relative",ref_key:"containerRef",ref:g},[l.label?(o(),s("label",U,[h(c(l.label)+" ",1),l.required?(o(),s("span",A,"*")):n("",!0)])):n("",!0),r("div",{onClick:B,class:w(["w-full rounded-lg border border-stroke bg-transparent py-3 px-5 outline-none focus:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary cursor-pointer transition-colors",{"border-primary":d.value}])},[r("div",F,[r("div",R,[m.value.length===0?(o(),s("div",$,c(l.placeholder),1)):(o(),s("div",Q,[(o(!0),s(_,null,V(m.value,t=>(o(),s("span",{key:t.id,class:"inline-flex items-center gap-1.5 rounded-full bg-primary/10 px-3 py-1 text-sm font-medium text-primary"},[h(c(t.label)+" ",1),r("button",{onClick:p(k=>j(t.id),["stop"]),class:"hover:text-primary/80 transition-colors",type:"button"},[...e[3]||(e[3]=[r("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,G)]))),128))]))]),(o(),s("svg",{class:w(["w-5 h-5 text-gray-400 transition-transform ml-2 shrink-0",{"rotate-180":d.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[4]||(e[4]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],2),T(q,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:D(()=>[d.value?(o(),s("div",H,[l.searchable?(o(),s("div",J,[r("div",K,[E(r("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),type:"text",placeholder:"Поиск...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-10 pr-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onClick:e[1]||(e[1]=p(()=>{},["stop"]))},null,512),[[I,u.value]]),e[5]||(e[5]=r("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])])):n("",!0),r("div",P,[b.value.length===0?(o(),s("div",W," Ничего не найдено ")):n("",!0),(o(!0),s(_,null,V(b.value,t=>(o(),s("label",{key:t.id,class:"flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 dark:hover:bg-meta-4 cursor-pointer transition-colors",onClick:e[2]||(e[2]=p(()=>{},["stop"]))},[r("input",{type:"checkbox",checked:M(t.id),onChange:k=>L(t),class:"w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary dark:focus:ring-primary dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,40,X),r("span",Y,c(t.label),1),t.description?(o(),s("span",Z,c(t.description),1)):n("",!0)]))),128))]),m.value.length>0?(o(),s("div",ee,[r("div",te,[r("span",re," Выбрано: "+c(m.value.length),1),r("button",{onClick:p(O,["stop"]),type:"button",class:"text-danger hover:text-danger/80 transition-colors font-medium"}," Очистить все ")])])):n("",!0)])):n("",!0)]),_:1}),l.hint?(o(),s("p",se,c(l.hint),1)):n("",!0)],512))}}),le=Object.assign(oe,{__name:"UiMultiSelect"});export{le as _};
