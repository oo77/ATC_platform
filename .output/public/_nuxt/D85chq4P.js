import{_ as w}from"./DV0XJymg.js";import{v as C,r as p,g as z,c as o,a as t,h as j,x as v,A as B,D as M,m as U,t as n,F as A,j as S,b as V,l as N,W as H,o as l}from"./GLV6bXvn.js";import{u as L}from"./DVL-QcDc.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const T={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},$={class:"bg-white dark:bg-boxdark rounded-xl shadow-md p-6 mb-6"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},E={class:"relative"},P={class:"relative"},R={key:0,class:"flex justify-center items-center py-20"},F={key:1,class:"bg-white dark:bg-boxdark rounded-xl shadow-md p-12 text-center"},K={class:"text-gray-600 dark:text-gray-400"},I={key:2,class:"bg-white dark:bg-boxdark rounded-xl shadow-md overflow-hidden"},O={class:"overflow-x-auto"},Q={class:"w-full"},W={class:"divide-y divide-stroke dark:divide-strokedark"},Z=["onClick"],q={class:"px-4 py-3"},G={class:"h-16 w-12 rounded bg-gray-100 dark:bg-gray-800 overflow-hidden shrink-0"},J=["src","alt"],X={key:1,class:"h-full w-full flex items-center justify-center bg-primary/10"},Y={class:"px-4 py-3"},tt={class:"max-w-md"},et={class:"font-semibold text-gray-900 dark:text-white line-clamp-2 group-hover:text-primary transition-colors"},at={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},st={class:"px-4 py-3"},rt={class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"},ot={class:"px-4 py-3 text-center"},lt={class:"flex items-center justify-center gap-1"},nt={class:"text-sm text-gray-900 dark:text-white"},it={class:"px-4 py-3"},dt={key:0},pt={class:"flex items-center gap-2 mb-1"},ct={class:"text-sm text-gray-600 dark:text-gray-400"},ut={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},gt={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},xt={key:3,class:"mt-8 flex justify-center"},bt=C({__name:"index",setup(mt){const h=H(),y=L(),u=p(!1),g=p([]),i=p(""),d=p(""),s=p({page:1,limit:12,total:0}),c=async()=>{u.value=!0;try{const r=new URLSearchParams({page:s.value.page.toString(),limit:s.value.limit.toString(),...i.value&&{search:i.value},...d.value&&{language:d.value}}),e=await $fetch(`/api/library/catalog?${r}`);g.value=e.books,s.value.total=e.total}catch(r){y.error(r.data?.message||"ĞÑˆĞ¸Ğ±ĞºĞ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ°")}finally{u.value=!1}};let x;const m=()=>{clearTimeout(x),x=setTimeout(()=>{s.value.page=1,c()},300)},k=r=>{s.value.page=r,c(),window.scrollTo({top:0,behavior:"smooth"})},f=r=>{h.push(`/library/${r.id}`)},_=r=>r?{ru:"ğŸ‡·ğŸ‡º RU",uz:"ğŸ‡ºğŸ‡¿ UZ",en:"ğŸ‡¬ğŸ‡§ EN",kk:"ğŸ‡°ğŸ‡¿ KK"}[r]||r.toUpperCase():"â€”";return z(()=>{c()}),(r,e)=>{const b=w;return l(),o("div",T,[e[13]||(e[13]=t("div",{class:"mb-6"},[t("h2",{class:"text-title-md2 font-bold text-black dark:text-white"}," Ğ‘Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° "),t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ²Ğ°Ğ¼ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ´Ğ»Ñ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ ")],-1)),t("div",$,[t("div",D,[t("div",E,[v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),type:"text",placeholder:"ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸Ğ»Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ñƒ...",class:"w-full rounded-lg border border-stroke bg-transparent py-3 pl-12 pr-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onInput:m},null,544),[[B,i.value]]),e[3]||(e[3]=t("svg",{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),t("div",P,[v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a),class:"w-full rounded-lg border border-stroke bg-transparent py-3 pl-4 pr-10 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary appearance-none",onChange:m},[...e[4]||(e[4]=[U('<option value="">Ğ’ÑĞµ ÑĞ·Ñ‹ĞºĞ¸</option><option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option><option value="uz">ğŸ‡ºğŸ‡¿ O&#39;zbekcha</option><option value="en">ğŸ‡¬ğŸ‡§ English</option><option value="kk">ğŸ‡°ğŸ‡¿ ÒšĞ°Ğ·Ğ°Ò›ÑˆĞ°</option>',5)])],544),[[M,d.value]]),e[5]||(e[5]=t("svg",{class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])])]),u.value?(l(),o("div",R,[...e[6]||(e[6]=[t("div",{class:"inline-block h-12 w-12 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):g.value.length===0?(l(),o("div",F,[e[7]||(e[7]=t("svg",{class:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)),e[8]||(e[8]=t("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"}," ĞĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ñ… ĞºĞ½Ğ¸Ğ³ ",-1)),t("p",K,n(i.value||d.value?"ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¿Ğ¾Ğ¸ÑĞºĞ°":"Ğ£ Ğ²Ğ°Ñ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº ĞºĞ½Ğ¸Ğ³Ğ°Ğ¼"),1)])):(l(),o("div",I,[t("div",O,[t("table",Q,[e[12]||(e[12]=t("thead",{class:"bg-gray-50 dark:bg-meta-4"},[t("tr",{class:"border-b border-stroke dark:border-strokedark"},[t("th",{class:"px-4 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," ĞĞ±Ğ»Ğ¾Ğ¶ĞºĞ° "),t("th",{class:"px-4 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ / ĞĞ²Ñ‚Ğ¾Ñ€ "),t("th",{class:"px-4 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Ğ¯Ğ·Ñ‹Ğº "),t("th",{class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ "),t("th",{class:"px-4 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ ")])],-1)),t("tbody",W,[(l(!0),o(A,null,S(g.value,a=>(l(),o("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-meta-4 transition-colors cursor-pointer",onClick:vt=>f(a)},[t("td",q,[t("div",G,[a.cover_url?(l(),o("img",{key:0,src:a.cover_url,alt:a.title,class:"h-full w-full object-cover"},null,8,J)):(l(),o("div",X,[...e[9]||(e[9]=[t("svg",{class:"w-6 h-6 text-primary/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)])]))])]),t("td",Y,[t("div",tt,[t("p",et,n(a.title),1),t("p",at,n(a.author||"ĞĞ²Ñ‚Ğ¾Ñ€ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½"),1)])]),t("td",st,[t("span",rt,n(_(a.language)),1)]),t("td",ot,[t("div",lt,[e[10]||(e[10]=t("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),t("span",nt,n(a.total_pages),1)])]),t("td",it,[a.progress&&a.progress.current_page>0?(l(),o("div",dt,[t("div",pt,[e[11]||(e[11]=t("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})],-1)),t("span",ct,n(a.progress.current_page)+" / "+n(a.total_pages),1)]),t("div",ut,[t("div",{class:"bg-primary rounded-full h-2 transition-all duration-300",style:N({width:`${a.progress.current_page/a.total_pages*100}%`})},null,4)])])):(l(),o("span",gt," ĞĞµ Ğ½Ğ°Ñ‡Ğ°Ñ‚Ğ° "))])],8,Z))),128))])])])])),s.value.total>s.value.limit?(l(),o("div",xt,[V(b,{"current-page":s.value.page,"total-pages":Math.ceil(s.value.total/s.value.limit),total:s.value.total,limit:s.value.limit,"onUpdate:page":k,"onUpdate:limit":e[2]||(e[2]=a=>{s.value.limit=a,c()})},null,8,["current-page","total-pages","total","limit"])])):j("",!0)])}}});export{bt as default};
