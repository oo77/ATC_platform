const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./B3Qfz7sO.js","./BylynD0E.js","./GLV6bXvn.js","./entry.Ccj0OWH5.css"])))=>i.map(i=>d[i]);
import{v as Q,k as q,w,a as t,c as i,h as M,d as h,t as o,j as W,F as N,b as C,o as r,f as L,i as s,n as K,r as u,q as ut,T as Mt,K as Bt,l as et,Q as jt,u as It,g as zt,x as at,D as Vt,H as it,A as St,al as dt}from"./GLV6bXvn.js";import{_ as Dt}from"./BKg9m4wI.js";import{_ as X}from"./BMofnORk.js";import{_ as ct}from"./CyDLpZDf.js";import{_ as Nt}from"./DlAUqK2U.js";import{u as Rt}from"./DlZaGH1J.js";import{u as Ot}from"./DVL-QcDc.js";import{u as Et}from"./DSdf2cDZ.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const Pt={class:"flex flex-col items-center text-center mb-6"},Lt={key:0,class:"text-gray-500 dark:text-gray-400 mb-4"},At={class:"font-medium text-gray-900 dark:text-white"},Ht={class:"space-y-3 mb-6"},Tt={class:"text-sm font-medium text-gray-900 dark:text-white"},Wt={class:"text-sm text-gray-600 dark:text-gray-400"},Ut={class:"flex justify-end gap-3"},Ft=Q({__name:"WarningsModal",props:{isOpen:{type:Boolean},student:{},warnings:{}},emits:["close","confirm"],setup(v,{emit:O}){const _=O,B={low_attendance:"Низкая посещаемость",missing_grades:"Не все оценки выставлены",low_grade:"Низкий балл",incomplete_disciplines:"Пройдены не все дисциплины"};return($,a)=>{const p=X,g=ct;return r(),q(g,{"is-open":v.isOpen,title:"Предупреждения перед выдачей",size:"sm",onClose:a[2]||(a[2]=c=>_("close"))},{footer:w(()=>[t("div",Ut,[C(p,{variant:"outline",onClick:a[0]||(a[0]=c=>_("close"))},{default:w(()=>[...a[6]||(a[6]=[h(" Отмена ",-1)])]),_:1}),C(p,{variant:"warning",onClick:a[1]||(a[1]=c=>_("confirm"))},{default:w(()=>[...a[7]||(a[7]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),h(" Всё равно выдать ",-1)])]),_:1})])]),default:w(()=>[t("div",Pt,[a[4]||(a[4]=t("div",{class:"mx-auto mb-4 h-14 w-14 rounded-full bg-warning/10 flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),v.student?(r(),i("p",Lt,[a[3]||(a[3]=h(" Студент: ",-1)),t("span",At,o(v.student.fullName),1)])):M("",!0)]),t("div",Ht,[(r(!0),i(N,null,W(v.warnings,(c,y)=>(r(),i("div",{key:y,class:"flex gap-3 p-3 bg-warning/5 border border-warning/20 rounded-lg"},[a[5]||(a[5]=t("svg",{class:"w-5 h-5 text-warning shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),t("div",null,[t("p",Tt,o(B[c.type]||c.type),1),t("p",Wt,o(c.message),1)])]))),128))]),a[8]||(a[8]=t("p",{class:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4"}," Вы уверены, что хотите выдать сертификат несмотря на предупреждения? ",-1))]),_:1},8,["is-open"])}}}),Gt=Object.assign(Ft,{__name:"CertificatesWarningsModal"}),Jt={class:"flex flex-col items-center text-center mb-6"},qt={class:"text-gray-500 dark:text-gray-400"},Kt={class:"text-success font-semibold"},Qt={class:"text-danger font-semibold"},Xt={class:"max-h-80 overflow-y-auto space-y-2"},Yt={key:0,class:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Zt={key:1,class:"w-5 h-5 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={class:"flex-1 min-w-0"},ee={class:"font-medium text-gray-900 dark:text-white truncate"},se={key:0,class:"text-sm text-success"},oe={key:1,class:"text-sm text-danger"},re={class:"flex justify-center"},ne=Q({__name:"ResultsModal",props:{isOpen:{type:Boolean},results:{}},emits:["close"],setup(v,{emit:O}){const _=v,B=O,$=L(()=>_.results.filter(p=>p.success).length),a=L(()=>_.results.filter(p=>!p.success).length);return(p,g)=>{const c=X,y=ct;return r(),q(y,{"is-open":v.isOpen,title:"Результаты выдачи",size:"md",onClose:g[1]||(g[1]=m=>B("close"))},{footer:w(()=>[t("div",re,[C(c,{onClick:g[0]||(g[0]=m=>B("close"))},{default:w(()=>[...g[7]||(g[7]=[h(" Закрыть ",-1)])]),_:1})])]),default:w(()=>[t("div",Jt,[g[4]||(g[4]=t("div",{class:"mx-auto mb-4 h-14 w-14 rounded-full bg-success/10 flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("p",qt,[g[2]||(g[2]=h(" Успешно: ",-1)),t("span",Kt,o(s($)),1),g[3]||(g[3]=h(" • Ошибок: ",-1)),t("span",Qt,o(s(a)),1)])]),t("div",Xt,[(r(!0),i(N,null,W(v.results,m=>(r(),i("div",{key:m.studentId,class:K(["flex items-center gap-3 p-3 rounded-lg",m.success?"bg-success/5 border border-success/20":"bg-danger/5 border border-danger/20"])},[t("div",{class:K(["shrink-0 w-8 h-8 rounded-full flex items-center justify-center",m.success?"bg-success/10":"bg-danger/10"])},[m.success?(r(),i("svg",Yt,[...g[5]||(g[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(r(),i("svg",Zt,[...g[6]||(g[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],2),t("div",te,[t("p",ee,o(m.studentName),1),m.success?(r(),i("p",se," Сертификат № "+o(m.certificateNumber),1)):(r(),i("p",oe,o(m.error),1))])],2))),128))])]),_:1},8,["is-open"])}}}),le=Object.assign(ne,{__name:"CertificatesResultsModal"}),ae={key:0,class:"fixed inset-0 z-9999 flex items-center justify-center"},ie={class:"relative bg-white dark:bg-boxdark rounded-2xl shadow-2xl w-full max-w-lg mx-4 overflow-hidden"},de={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ue={class:"flex items-center gap-3"},ce={class:"text-lg font-semibold text-gray-900 dark:text-white"},ge={class:"text-sm text-gray-500 dark:text-gray-400"},pe={class:"px-6 py-6"},xe={class:"text-gray-600 dark:text-gray-300 mb-4"},me={class:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-4"},fe={class:"flex items-center gap-3"},ve={class:"text-sm font-medium text-gray-900 dark:text-white"},ye={key:1,class:"space-y-4"},ke={class:"flex justify-between text-sm mb-2"},be={class:"font-medium text-gray-900 dark:text-white"},he={class:"relative w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},we={class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},_e={class:"min-w-0 flex-1"},Ce={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},$e={class:"grid grid-cols-3 gap-3 text-center"},Me={class:"p-2 bg-success/10 rounded-lg"},Be={class:"text-lg font-bold text-success"},je={class:"p-2 bg-warning/10 rounded-lg"},Ie={class:"text-lg font-bold text-warning"},ze={class:"p-2 bg-danger/10 rounded-lg"},Ve={class:"text-lg font-bold text-danger"},Se={key:2,class:"text-center py-4"},De={class:"text-gray-500 dark:text-gray-400 mb-4"},Ne={class:"grid grid-cols-3 gap-3 text-center mb-4"},Re={class:"p-3 bg-success/10 rounded-lg"},Oe={class:"text-2xl font-bold text-success"},Ee={class:"p-3 bg-warning/10 rounded-lg"},Pe={class:"text-2xl font-bold text-warning"},Le={class:"p-3 bg-danger/10 rounded-lg"},Ae={class:"text-2xl font-bold text-danger"},He={key:0,class:"text-left max-h-32 overflow-y-auto"},Te={class:"text-sm text-gray-600 dark:text-gray-400 space-y-1"},We={class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3"},Ue=Q({__name:"BulkIssueModal",props:{isOpen:{type:Boolean},studentsCount:{},templateName:{}},emits:["close","confirm","progress","complete"],setup(v,{expose:O,emit:_}){const B=v,$=_,a=u(!1),p=u(!1),g=u(!1),c=u(0),y=u(""),m=u(0),f=u(0),j=u(0),D=u([]),I=L(()=>B.studentsCount===0?0:Math.round(c.value/B.studentsCount*100)),U=()=>{a.value||k()},k=()=>{a.value||(V(),$("close"))},z=()=>{g.value||(g.value=!0,$("confirm"))},V=()=>{a.value=!1,p.value=!1,g.value=!1,c.value=0,y.value="",m.value=0,f.value=0,j.value=0,D.value=[]},F=()=>{a.value=!0,p.value=!1,c.value=0,m.value=0,f.value=0,j.value=0,D.value=[]},H=(b,n)=>{y.value=b,c.value=n},R=b=>{b.success?b.warnings&&b.warnings.length>0?f.value++:m.value++:(j.value++,D.value.push({studentName:b.studentName,error:b.error||"Неизвестная ошибка"}))},A=b=>{a.value=!1,p.value=!0,y.value="",$("complete",b)};return ut(()=>B.isOpen,b=>{b||V()}),O({startProcessing:F,updateProgress:H,addResult:R,completeProcessing:A}),(b,n)=>{const S=X;return r(),q(Bt,{to:"body"},[C(Mt,{name:"modal"},{default:w(()=>[v.isOpen?(r(),i("div",ae,[t("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:U}),t("div",ie,[t("div",de,[t("div",ue,[n[0]||(n[0]=t("div",{class:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})])],-1)),t("div",null,[t("h3",ce,o(s(a)?"Выдача сертификатов":"Подтверждение выдачи"),1),t("p",ge,o(s(a)?"Пожалуйста, подождите...":`${v.studentsCount} слушателей`),1)])])]),t("div",pe,[!s(a)&&!s(p)?(r(),i(N,{key:0},[t("p",xe,[n[1]||(n[1]=h(" Вы собираетесь выдать сертификаты ",-1)),t("strong",null,o(v.studentsCount),1),n[2]||(n[2]=h(" слушателям. ",-1))]),t("div",me,[t("div",fe,[n[4]||(n[4]=t("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("div",null,[t("p",ve,o(v.templateName),1),n[3]||(n[3]=t("p",{class:"text-xs text-gray-500"},"Шаблон сертификата",-1))])])]),n[5]||(n[5]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Продолжить выдачу? ",-1))],64)):s(a)?(r(),i("div",ye,[t("div",null,[t("div",ke,[n[6]||(n[6]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Прогресс",-1)),t("span",be,o(s(c))+" / "+o(v.studentsCount),1)]),t("div",he,[t("div",{class:"absolute left-0 top-0 h-full bg-linear-to-r from-primary to-primary/80 rounded-full transition-all duration-300 ease-out",style:et({width:`${s(I)}%`})},null,4),s(I)<100?(r(),i("div",{key:0,class:"absolute right-0 top-0 h-full w-12 bg-linear-to-l from-primary/30 to-transparent animate-pulse",style:et({left:`${Math.max(0,s(I)-5)}%`})},null,4)):M("",!0)])]),t("div",we,[n[8]||(n[8]=t("div",{class:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center animate-pulse"},[t("svg",{class:"w-4 h-4 text-primary animate-spin",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])],-1)),t("div",_e,[t("p",Ce,o(s(y)||"Обработка..."),1),n[7]||(n[7]=t("p",{class:"text-xs text-gray-500"},"Создание сертификата...",-1))])]),t("div",$e,[t("div",Me,[t("p",Be,o(s(m)),1),n[9]||(n[9]=t("p",{class:"text-xs text-success/80"},"Успешно",-1))]),t("div",je,[t("p",Ie,o(s(f)),1),n[10]||(n[10]=t("p",{class:"text-xs text-warning/80"},"С замечаниями",-1))]),t("div",ze,[t("p",Ve,o(s(j)),1),n[11]||(n[11]=t("p",{class:"text-xs text-danger/80"},"Ошибки",-1))])])])):s(p)?(r(),i("div",Se,[n[17]||(n[17]=t("div",{class:"mx-auto w-16 h-16 rounded-full bg-success/10 flex items-center justify-center mb-4"},[t("svg",{class:"w-8 h-8 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),n[18]||(n[18]=t("h4",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"}," Выдача завершена ",-1)),t("p",De," Обработано "+o(s(c))+" из "+o(v.studentsCount)+" слушателей ",1),t("div",Ne,[t("div",Re,[t("p",Oe,o(s(m)),1),n[12]||(n[12]=t("p",{class:"text-xs text-success/80"},"Выдано",-1))]),t("div",Ee,[t("p",Pe,o(s(f)),1),n[13]||(n[13]=t("p",{class:"text-xs text-warning/80"},"С замечаниями",-1))]),t("div",Le,[t("p",Ae,o(s(j)),1),n[14]||(n[14]=t("p",{class:"text-xs text-danger/80"},"Ошибки",-1))])]),s(D).length>0?(r(),i("div",He,[n[16]||(n[16]=t("p",{class:"text-sm font-medium text-danger mb-2"},"Ошибки:",-1)),t("ul",Te,[(r(!0),i(N,null,W(s(D),(G,E)=>(r(),i("li",{key:E,class:"flex items-start gap-2"},[n[15]||(n[15]=t("svg",{class:"w-4 h-4 text-danger shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,o(G.studentName)+": "+o(G.error),1)]))),128))])])):M("",!0)])):M("",!0)]),t("div",We,[!s(a)&&!s(p)?(r(),i(N,{key:0},[C(S,{variant:"outline",onClick:k},{default:w(()=>[...n[19]||(n[19]=[h(" Отмена ",-1)])]),_:1}),C(S,{variant:"primary",onClick:z,disabled:s(g)},{default:w(()=>[...n[20]||(n[20]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),h(" Выдать сертификаты ",-1)])]),_:1},8,["disabled"])],64)):s(p)?(r(),q(S,{key:1,variant:"primary",onClick:k},{default:w(()=>[...n[21]||(n[21]=[h(" Закрыть ",-1)])]),_:1})):M("",!0)])])])):M("",!0)]),_:1})])}}}),Fe=Object.assign(Nt(Ue,[["__scopeId","data-v-9464bcca"]]),{__name:"CertificatesBulkIssueModal"}),Ge={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},Je={class:"mb-6"},qe={key:0,class:"flex justify-center items-center py-20"},Ke={class:"mb-6"},Qe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Xe={class:"mt-1 text-gray-500 dark:text-gray-400"},Ye={class:"flex flex-wrap items-center gap-3"},Ze={key:0,class:"flex items-center gap-2 px-3 py-2 bg-primary/10 text-primary rounded-lg"},ts={class:"text-sm font-medium"},es={key:1,class:"flex items-center gap-2 px-3 py-2 bg-warning/10 text-warning rounded-lg"},ss={key:2,class:"flex items-center gap-2"},os=["value"],rs={class:"flex items-center gap-2"},ns={key:3,class:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg"},ls={class:"text-sm text-gray-600 dark:text-gray-400"},as={key:4,class:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg"},is={class:"grid grid-cols-2 sm:grid-cols-5 gap-4 mt-6"},ds={class:"bg-white dark:bg-boxdark rounded-lg p-4 shadow-sm"},us={class:"text-2xl font-bold text-gray-900 dark:text-white"},cs={class:"bg-white dark:bg-boxdark rounded-lg p-4 shadow-sm"},gs={class:"text-2xl font-bold text-success"},ps={class:"bg-white dark:bg-boxdark rounded-lg p-4 shadow-sm"},xs={class:"text-2xl font-bold text-warning"},ms={class:"bg-white dark:bg-boxdark rounded-lg p-4 shadow-sm"},fs={class:"text-2xl font-bold text-primary"},vs={class:"bg-white dark:bg-boxdark rounded-lg p-4 shadow-sm"},ys={class:"text-2xl font-bold text-danger"},ks={class:"flex flex-wrap gap-3 mt-6"},bs={class:"relative inline-block"},hs={key:0,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ws={key:1,class:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24"},_s={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-boxdark rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50"},Cs={key:0,class:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"},$s={class:"flex items-center gap-3"},Ms={class:"flex-1"},Bs={class:"flex items-center gap-2 mt-1"},js={class:"flex-1 h-2 bg-green-200 dark:bg-green-700 rounded-full overflow-hidden"},Is={class:"text-xs text-green-600 dark:text-green-400"},zs={class:"text-xs text-green-600 dark:text-green-400 mt-1"},Vs={class:"rounded-xl bg-white dark:bg-boxdark shadow-md overflow-hidden"},Ss={class:"overflow-x-auto"},Ds={class:"w-full"},Ns={class:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},Rs={class:"px-4 py-3 text-left"},Os=["checked","indeterminate"],Es={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ps={class:"px-4 py-4"},Ls=["checked","disabled","onChange"],As={class:"px-4 py-4"},Hs={class:"flex items-center gap-3"},Ts={class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold shrink-0"},Ws={class:"min-w-0"},Us={class:"font-medium text-gray-900 dark:text-white truncate"},Fs={class:"text-sm text-gray-500 dark:text-gray-400 truncate"},Gs={class:"px-4 py-4 text-center"},Js={class:"px-4 py-4 text-center text-sm text-gray-600 dark:text-gray-400"},qs={class:"px-4 py-4 text-center"},Ks={key:0,class:"font-medium text-gray-900 dark:text-white"},Qs={key:1,class:"text-gray-400"},Xs={class:"px-4 py-4 text-center"},Ys={key:0,class:"flex items-center justify-center gap-1 text-success"},Zs=["onClick"],to={class:"text-sm"},eo={class:"px-4 py-4 text-center"},so={key:1,class:"text-gray-400 text-sm"},oo={class:"px-4 py-4"},ro={class:"flex items-center justify-center gap-2"},no=["href"],lo=["onClick","disabled"],ao={key:0,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},io={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},bo=Q({__name:"certificates",setup(v){const O=jt(),{authFetch:_}=Rt(),{success:B,error:$}=Ot(),a=Et(),p=L(()=>O.params.id),g=u(!0),c=u(null),y=u([]),m=u({totalStudents:0,eligible:0,withWarnings:0,issued:0,revoked:0}),f=u(null),j=u(new Date().toISOString().split("T")[0]),D=u([]),I=u(null),U=u(!1),k=u([]),z=u(!1),V=u(null),F=u([]),H=u(!1),R=u(!1),A=u(!1),b=u(!1),n=u(null),S=u([]),G=u("eligible"),E=u(!1),Y=u(null),Z=u([]),T=u(null),gt={draft:"Черновик",issued:"Выдан",revoked:"Отозван"},tt=L(()=>{const l=y.value.filter(e=>e.certificate?.status!=="issued");return l.length>0&&l.every(e=>k.value.includes(e.student.id))}),pt=L(()=>tt.value?!1:k.value.length>0),st=L(()=>y.value.filter(l=>l.eligibility.isEligible&&l.certificate?.status!=="issued").length);It(()=>({title:c.value?`Выдача сертификатов — ${c.value.code}`:"Загрузка..."}));const J=async()=>{g.value=!0;try{const l=await _(`/api/certificates/issue/${p.value}`);l.success&&(c.value=l.group,y.value=l.journal,m.value=l.stats,f.value=l.template),U.value=!0;try{const e=await _(`/api/certificates/issue/${p.value}/instructors`);e.success&&(D.value=e.instructors,e.defaultInstructorId&&!I.value&&(I.value=e.defaultInstructorId))}catch(e){console.error("Error loading instructors:",e)}finally{U.value=!1}}catch(l){console.error("Error loading data:",l),$(l.message||"Ошибка загрузки данных")}finally{g.value=!1}},xt=l=>l?l.split(" ").slice(0,2).map(x=>x.charAt(0).toUpperCase()).join(""):"?",mt=()=>{const l=y.value.filter(e=>e.certificate?.status!=="issued");tt.value?k.value=[]:k.value=l.map(e=>e.student.id)},ft=l=>{const e=k.value.indexOf(l);e===-1?k.value.push(l):k.value.splice(e,1)},vt=l=>{Y.value=l.student,Z.value=l.eligibility.warnings,T.value=null,E.value=!0},yt=l=>{if(!(z.value||V.value)){if(!f.value){$("Шаблон сертификата не назначен для курса");return}if(!l.eligibility.isEligible){Y.value=l.student,Z.value=l.eligibility.warnings,T.value=l.student.id,E.value=!0;return}V.value=l.student.id,rt([l.student.id],!1)}},kt=()=>{z.value||V.value||(T.value&&(V.value=T.value,rt([T.value],!0)),E.value=!1)},ot=l=>{if(z.value||a.isIssuing.value){console.warn("[Certificates] Выдача уже выполняется");return}if(!f.value){$("Шаблон сертификата не назначен для курса");return}if(G.value=l,l==="eligible"?S.value=y.value.filter(e=>e.eligibility.isEligible&&e.certificate?.status!=="issued").map(e=>e.student.id):S.value=[...k.value],S.value.length===0){$("Нет студентов для выдачи сертификатов");return}b.value=!0},bt=async()=>{if(z.value||a.isIssuing.value){console.warn("[Certificates] executeBulkIssue уже выполняется, пропускаем");return}if(!f.value||!c.value)return;const l=y.value.filter(x=>S.value.includes(x.student.id)),e={groupId:p.value,groupCode:c.value.code,courseName:c.value.course?.name||"",templateId:f.value.id,templateName:f.value.name,issueDate:j.value??new Date().toISOString().split("T")[0],instructorId:I.value,studentIds:S.value,studentData:l.map(x=>({id:x.student.id,fullName:x.student.fullName,isEligible:x.eligibility.isEligible})),expiryMode:c.value.course?.certificateValidityMonths?"auto":"none"};b.value=!1,k.value=[],console.log(`[Certificates] Запускаем фоновую выдачу через store: ${e.studentIds.length} студентов`),a.startBulkIssue(e)},ht=async l=>{k.value=[],await J()};ut(()=>a.isCompleted.value,async l=>{l&&a.currentJob.value?.groupId===p.value&&(console.log("[Certificates] Выдача завершена, обновляем данные"),await J())});const rt=async(l,e)=>{z.value=!0;try{const x=await _(`/api/certificates/issue/${p.value}`,{method:"POST",body:{templateId:f.value.id,studentIds:l,issueDate:j.value,instructorId:I.value,expiryMode:c.value?.course?.certificateValidityMonths?"auto":"none",overrideWarnings:e}});x.success&&(F.value=x.results,H.value=!0,await J(),B(x.message))}catch(x){console.error("Issue error:",x),$(x.data?.message||x.message||"Ошибка выдачи сертификатов")}finally{z.value=!1,V.value=null}},wt=()=>{A.value=!A.value},nt=async(l="pdf")=>{if(!R.value){A.value=!1,R.value=!0;try{const e=await _(`/api/certificates/report/${p.value}`);if(!e.success)throw new Error("Не удалось получить данные для ведомости");if(l==="pdf"){const{generateCertificateReport:x}=await dt(async()=>{const{generateCertificateReport:P}=await import("./B3Qfz7sO.js");return{generateCertificateReport:P}},__vite__mapDeps([0,1,2,3]),import.meta.url);await x({groupCode:e.groupCode,courseName:e.courseName,instructors:e.instructors,students:e.students,startDate:e.startDate,endDate:e.endDate,generatedBy:e.generatedBy})}else{const{generateCertificateReportDocx:x}=await dt(async()=>{const{generateCertificateReportDocx:P}=await import("./BfNrAPXq.js");return{generateCertificateReportDocx:P}},[],import.meta.url);await x({groupCode:e.groupCode,courseName:e.courseName,instructors:e.instructors,students:e.students,startDate:e.startDate,endDate:e.endDate,generatedBy:e.generatedBy})}try{await _("/api/reports/log-download",{method:"POST",body:{reportType:"certificate_report",format:l,groupCode:e.groupCode,groupId:p.value}})}catch(x){console.error("Failed to log download:",x)}B(`Ведомость успешно сформирована (${l.toUpperCase()})`)}catch(e){console.error("Error generating certificate report:",e),$(e.message||"Ошибка при формировании ведомости")}finally{R.value=!1}}};return zt(()=>{J()}),(l,e)=>{const x=Dt,P=X,_t=Gt,Ct=le,$t=Fe;return r(),i("div",Ge,[t("div",Je,[C(x,{to:`/groups/${s(p)}`,class:"inline-flex items-center gap-2 text-gray-600 hover:text-primary dark:text-gray-400 dark:hover:text-primary transition-colors"},{default:w(()=>[...e[9]||(e[9]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),h(" Назад к группе ",-1)])]),_:1},8,["to"])]),s(g)?(r(),i("div",qe,[...e[10]||(e[10]=[t("div",{class:"h-12 w-12 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"},null,-1)])])):s(c)?(r(),i(N,{key:1},[t("div",Ke,[t("div",Qe,[t("div",null,[e[11]||(e[11]=t("h2",{class:"text-title-md2 font-bold text-black dark:text-white"}," Выдача сертификатов ",-1)),t("p",Xe," Группа "+o(s(c).code)+" • "+o(s(c).course?.name),1)]),t("div",Ye,[s(f)?(r(),i("div",Ze,[e[12]||(e[12]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t("span",ts,o(s(f).name),1)])):(r(),i("div",es,[e[14]||(e[14]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e[15]||(e[15]=t("span",{class:"text-sm font-medium"},"Шаблон не назначен для курса",-1)),C(x,{to:`/programs/edit/${s(c).course?.id}`,class:"text-xs underline hover:no-underline"},{default:w(()=>[...e[13]||(e[13]=[h(" Настроить ",-1)])]),_:1},8,["to"])])),s(D).length>0?(r(),i("div",ss,[e[17]||(e[17]=t("label",{class:"text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap"},"Инструктор:",-1)),at(t("select",{"onUpdate:modelValue":e[0]||(e[0]=d=>it(I)?I.value=d:null),class:"rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-gray-900 dark:text-white focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 min-w-[200px]"},[e[16]||(e[16]=t("option",{value:null},"Не указан",-1)),(r(!0),i(N,null,W(s(D),d=>(r(),i("option",{key:d.id,value:d.id},[h(o(d.fullName)+" ",1),d.isPrimary?(r(),i(N,{key:0},[h(" (основной)")],64)):M("",!0)],8,os))),128))],512),[[Vt,s(I)]])])):M("",!0),t("div",rs,[e[18]||(e[18]=t("label",{class:"text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap"},"Дата выдачи:",-1)),at(t("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>it(j)?j.value=d:null),type:"date",class:"rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-gray-900 dark:text-white focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[St,s(j)]])]),s(c).course?.certificateValidityMonths?(r(),i("div",ns,[e[19]||(e[19]=t("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",ls," Срок: "+o(s(c).course.certificateValidityMonths)+" мес. ",1)])):(r(),i("div",as,[...e[20]||(e[20]=[t("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Бессрочный",-1)])]))])]),t("div",is,[t("div",ds,[e[21]||(e[21]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Всего слушателей ",-1)),t("p",us,o(s(m).totalStudents),1)]),t("div",cs,[e[22]||(e[22]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Допущены",-1)),t("p",gs,o(s(m).eligible),1)]),t("div",ps,[e[23]||(e[23]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," С предупреждениями ",-1)),t("p",xs,o(s(m).withWarnings),1)]),t("div",ms,[e[24]||(e[24]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Выдано",-1)),t("p",fs,o(s(m).issued),1)]),t("div",vs,[e[25]||(e[25]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Отозвано",-1)),t("p",ys,o(s(m).revoked),1)])]),t("div",ks,[C(P,{onClick:e[2]||(e[2]=d=>ot("eligible")),disabled:!s(f)||s(st)===0||s(z)||s(a).isIssuing.value,variant:"primary"},{default:w(()=>[e[26]||(e[26]=t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})],-1)),h(" Выдать всем допущенным ("+o(s(st))+") ",1)]),_:1},8,["disabled"]),C(P,{onClick:e[3]||(e[3]=d=>ot("selected")),disabled:!s(f)||s(k).length===0||s(z)||s(a).isIssuing.value,variant:"outline"},{default:w(()=>[e[27]||(e[27]=t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),h(" Выдать выбранным ("+o(s(k).length)+") ",1)]),_:1},8,["disabled"]),t("div",bs,[C(P,{onClick:wt,disabled:s(R)||s(y).length===0,variant:"secondary"},{default:w(()=>[s(R)?(r(),i("svg",ws,[...e[29]||(e[29]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(r(),i("svg",hs,[...e[28]||(e[28]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])),t("span",null,o(s(R)?"Генерация...":"Ведомость"),1),e[30]||(e[30]=t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),_:1},8,["disabled"]),s(A)?(r(),i("div",_s,[t("button",{onClick:e[4]||(e[4]=d=>nt("pdf")),class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-2 rounded-t-lg text-gray-900 dark:text-white"},[...e[31]||(e[31]=[t("svg",{class:"w-4 h-4 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),t("span",null,"Скачать PDF",-1)])]),t("button",{onClick:e[5]||(e[5]=d=>nt("docx")),class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-2 rounded-b-lg text-gray-900 dark:text-white"},[...e[32]||(e[32]=[t("svg",{class:"w-4 h-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),t("span",null,"Скачать Word",-1)])])])):M("",!0)])]),s(a).isIssuing.value&&s(a).currentJob.value?.groupId===s(p)?(r(),i("div",Cs,[t("div",$s,[e[34]||(e[34]=t("div",{class:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-800 flex items-center justify-center"},[t("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400 animate-spin",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])],-1)),t("div",Ms,[e[33]||(e[33]=t("p",{class:"text-sm font-medium text-green-800 dark:text-green-200"}," Выдача сертификатов в процессе... ",-1)),t("div",Bs,[t("div",js,[t("div",{class:"h-full bg-green-500 rounded-full transition-all duration-300",style:et({width:`${s(a).percentage.value}%`})},null,4)]),t("span",Is,o(s(a).processedCount.value)+"/"+o(s(a).totalCount.value),1)]),t("p",zs,o(s(a).currentStudentName.value||"Обработка..."),1)])])])):M("",!0)]),t("div",Vs,[t("div",Ss,[t("table",Ds,[t("thead",null,[t("tr",Ns,[t("th",Rs,[t("input",{type:"checkbox",checked:s(tt),indeterminate:s(pt),onChange:mt,class:"rounded border-gray-300 text-primary focus:ring-primary"},null,40,Os)]),e[35]||(e[35]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Слушатель ",-1)),e[36]||(e[36]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Посещаемость ",-1)),e[37]||(e[37]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Дисциплин ",-1)),e[38]||(e[38]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Ср. балл ",-1)),e[39]||(e[39]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Допуск ",-1)),e[40]||(e[40]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Сертификат ",-1)),e[41]||(e[41]=t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Действия ",-1))])]),t("tbody",Es,[(r(!0),i(N,null,W(s(y),d=>(r(),i("tr",{key:d.student.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[t("td",Ps,[t("input",{type:"checkbox",checked:s(k).includes(d.student.id),disabled:d.certificate?.status==="issued",onChange:lt=>ft(d.student.id),class:"rounded border-gray-300 text-primary focus:ring-primary disabled:opacity-50"},null,40,Ls)]),t("td",As,[t("div",Hs,[t("div",Ts,o(xt(d.student.fullName)),1),t("div",Ws,[t("p",Us,o(d.student.fullName),1),t("p",Fs,o(d.student.organization),1)])])]),t("td",Gs,[t("span",{class:K(["px-2 py-1 rounded-full text-sm font-medium",d.totalAttendancePercent>=75?"bg-success/10 text-success":d.totalAttendancePercent>=50?"bg-warning/10 text-warning":"bg-danger/10 text-danger"])},o(d.totalAttendancePercent.toFixed(0))+"% ",3)]),t("td",Js,o(d.eligibility.completedDisciplines)+"/"+o(d.eligibility.totalDisciplines),1),t("td",qs,[d.averageGrade!==null?(r(),i("span",Ks,o(d.averageGrade.toFixed(1)),1)):(r(),i("span",Qs,"—"))]),t("td",Xs,[d.eligibility.isEligible?(r(),i("div",Ys,[...e[42]||(e[42]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("span",{class:"text-sm"},"Допущен",-1)])])):(r(),i("button",{key:1,onClick:lt=>vt(d),class:"flex items-center justify-center gap-1 text-warning hover:text-warning/80"},[e[43]||(e[43]=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),t("span",to,o(d.eligibility.warnings.length)+" замеч.",1)],8,Zs))]),t("td",eo,[d.certificate?(r(),i("span",{key:0,class:K(["px-2 py-1 rounded-full text-xs font-medium",d.certificate.status==="issued"?"bg-success/10 text-success":d.certificate.status==="revoked"?"bg-danger/10 text-danger":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"])},o(gt[d.certificate.status]),3)):(r(),i("span",so,"Не выдан"))]),t("td",oo,[t("div",ro,[d.certificate?.status==="issued"?(r(),i("a",{key:0,href:`/api/certificates/download/${d.certificate.id}`,target:"_blank",class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-primary transition-colors",title:"Скачать сертификат"},[...e[44]||(e[44]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])],8,no)):M("",!0),!d.certificate||d.certificate.status!=="issued"?(r(),i("button",{key:1,onClick:lt=>yt(d),disabled:!s(f)||s(z)||s(V)===d.student.id,class:"p-2 rounded-lg hover:bg-primary/10 text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Выдать сертификат"},[s(V)===d.student.id?(r(),i("svg",ao,[...e[45]||(e[45]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(r(),i("svg",io,[...e[46]||(e[46]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],8,lo)):M("",!0)])])]))),128))])])])])],64)):M("",!0),C(_t,{"is-open":s(E),student:s(Y),warnings:s(Z),onClose:e[6]||(e[6]=d=>E.value=!1),onConfirm:kt},null,8,["is-open","student","warnings"]),C(Ct,{"is-open":s(H),results:s(F),onClose:e[7]||(e[7]=d=>H.value=!1)},null,8,["is-open","results"]),C($t,{ref_key:"bulkIssueModalRef",ref:n,"is-open":s(b),"students-count":s(S).length,"template-name":s(f)?.name||"",onClose:e[8]||(e[8]=d=>b.value=!1),onConfirm:bt,onComplete:ht},null,8,["is-open","students-count","template-name"])])}}});export{bo as default};
