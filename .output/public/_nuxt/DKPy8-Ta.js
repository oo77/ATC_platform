import{_ as Y}from"./BMofnORk.js";import{_ as fe}from"./DV0XJymg.js";import{_ as Z}from"./CyDLpZDf.js";import{v as G,r as k,q as ee,k as te,w as D,a as e,c as o,h as B,d as F,n as P,z as H,t as i,x as A,A as E,D as T,l as ae,b as U,o as a,g as ne,E as re,F as O,j as I,f as be,m as he}from"./GLV6bXvn.js";import{u as q}from"./DVL-QcDc.js";import{s as we}from"./CRUGdXr-.js";import{_ as _e}from"./BNigTcCY.js";import"./CFbq0LVm.js";const $e={class:"space-y-6"},Me={key:0},Ce={key:1,class:"flex items-center justify-center gap-3"},Be={class:"text-left"},je={class:"font-medium text-gray-900 dark:text-white"},Ae={class:"text-sm text-gray-500"},ze={key:0,class:"mt-1 text-sm text-red-500"},Ue={class:"flex items-start gap-4"},Fe={key:0,class:"relative w-32 h-44 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 shrink-0"},De=["src"],Ve={class:"flex-1"},Le={key:0,class:"mt-1 text-sm text-red-500"},Se={key:0,class:"mt-1 text-sm text-red-500"},Oe={key:0,class:"space-y-2"},Ie={class:"flex items-center justify-between text-sm"},Ee={class:"font-medium text-primary"},He={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Pe={class:"flex justify-end gap-3"},Re={key:0,class:"flex items-center gap-2"},Ne={key:1},Te=G({__name:"UploadBookModal",props:{isOpen:{type:Boolean}},emits:["close","uploaded"],setup(_,{emit:M}){const $=_,C=M,w=q(),v=k(),x=k(),c=()=>{v.value?.click()},V=()=>{x.value?.click()},d=k(!1),g=k(!1),s=k(0),u=k(""),l=k({pdfFile:null,coverFile:null,title:"",author:"",description:"",language:""}),p=k({pdfFile:"",title:"",language:""}),f=m=>{d.value=!1;const r=m.dataTransfer?.files;r&&r[0]&&j(r[0])},n=m=>{const r=m.target;r.files&&r.files[0]&&j(r.files[0])},j=m=>{if(p.value.pdfFile="",m.type!=="application/pdf"){p.value.pdfFile="–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ PDF —Ñ–∞–π–ª";return}if(m.size>100*1024*1024){p.value.pdfFile="–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 100 –ú–ë";return}l.value.pdfFile=m},R=()=>{l.value.pdfFile=null,v.value&&(v.value.value="")},y=m=>{const r=m.target;if(r.files&&r.files[0]){const L=r.files[0];if(!L.type.startsWith("image/")){w.error("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ");return}l.value.coverFile=L;const S=new FileReader;S.onload=z=>{u.value=z.target?.result},S.readAsDataURL(L)}},K=()=>{l.value.coverFile=null,u.value="",x.value&&(x.value.value="")},W=()=>{p.value={pdfFile:"",title:"",language:""};let m=!0;return l.value.pdfFile||(p.value.pdfFile="–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ PDF —Ñ–∞–π–ª",m=!1),l.value.title.trim()||(p.value.title="–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏",m=!1),l.value.language||(p.value.language="–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫",m=!1),m},J=async()=>{if(W()){g.value=!0,s.value=0;try{const m=new FormData;m.append("file",l.value.pdfFile),l.value.coverFile&&m.append("cover",l.value.coverFile),m.append("title",l.value.title),m.append("author",l.value.author||""),m.append("description",l.value.description||""),m.append("language",l.value.language);const r=we(()=>{s.value<90&&(s.value+=10)},200);await $fetch("/api/library/admin/books",{method:"POST",body:m}),clearInterval(r),s.value=100,w.success("–ö–Ω–∏–≥–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞"),C("uploaded"),N()}catch(m){w.error(m.data?.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–∏–≥–∏")}finally{g.value=!1,s.value=0}}},Q=()=>{g.value||C("close")},N=()=>{l.value={pdfFile:null,coverFile:null,title:"",author:"",description:"",language:""},p.value={pdfFile:"",title:"",language:""},u.value="",v.value&&(v.value.value=""),x.value&&(x.value.value="")},se=m=>{if(m===0)return"0 Bytes";const r=1024,L=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(m)/Math.log(r));return Math.round(m/Math.pow(r,S)*100)/100+" "+L[S]};return ee(()=>$.isOpen,m=>{m||N()}),(m,r)=>{const L=Y,S=Z;return a(),te(S,{"is-open":_.isOpen,title:"–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–Ω–∏–≥—É",size:"lg",onClose:Q},{footer:D(()=>[e("div",Pe,[U(L,{variant:"secondary",disabled:g.value,onClick:Q},{default:D(()=>[...r[19]||(r[19]=[F(" –û—Ç–º–µ–Ω–∞ ",-1)])]),_:1},8,["disabled"]),U(L,{disabled:g.value,onClick:J},{default:D(()=>[g.value?(a(),o("span",Re,[...r[20]||(r[20]=[e("svg",{class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),F(" –ó–∞–≥—Ä—É–∑–∫–∞... ",-1)])])):(a(),o("span",Ne,"–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–Ω–∏–≥—É"))]),_:1},8,["disabled"])])]),default:D(()=>[e("form",{onSubmit:H(J,["prevent"])},[e("div",$e,[e("div",null,[r[9]||(r[9]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[F(" PDF —Ñ–∞–π–ª –∫–Ω–∏–≥–∏ "),e("span",{class:"text-red-500"},"*")],-1)),e("div",{onDrop:H(f,["prevent"]),onDragover:r[0]||(r[0]=H(z=>d.value=!0,["prevent"])),onDragleave:r[1]||(r[1]=H(z=>d.value=!1,["prevent"])),class:P(["border-2 border-dashed rounded-lg p-8 text-center transition-all cursor-pointer",d.value?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600 hover:border-primary",p.value.pdfFile?"border-red-500":""]),onClick:c},[e("input",{ref_key:"pdfInput",ref:v,type:"file",accept:".pdf",class:"hidden",onChange:n},null,544),l.value.pdfFile?(a(),o("div",Ce,[r[8]||(r[8]=e("svg",{class:"w-10 h-10 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z","clip-rule":"evenodd"})],-1)),e("div",Be,[e("p",je,i(l.value.pdfFile.name),1),e("p",Ae,i(se(l.value.pdfFile.size)),1)]),e("button",{type:"button",onClick:H(R,["stop"]),class:"ml-auto p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors"},[...r[7]||(r[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):(a(),o("div",Me,[...r[6]||(r[6]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),e("p",{class:"text-gray-600 dark:text-gray-400 mb-2"}," –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ PDF —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ ",-1),e("p",{class:"text-xs text-gray-500"},"–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 100 –ú–ë",-1)])]))],34),p.value.pdfFile?(a(),o("p",ze,i(p.value.pdfFile),1)):B("",!0)]),e("div",null,[r[12]||(r[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –û–±–ª–æ–∂–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ",-1)),e("div",Ue,[u.value?(a(),o("div",Fe,[e("img",{src:u.value,alt:"–û–±–ª–æ–∂–∫–∞",class:"w-full h-full object-cover"},null,8,De),e("button",{type:"button",onClick:K,class:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors"},[...r[10]||(r[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):B("",!0),e("div",Ve,[e("input",{ref_key:"coverInput",ref:x,type:"file",accept:"image/*",class:"hidden",onChange:y},null,544),e("button",{type:"button",onClick:V,class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},i(u.value?"–ò–∑–º–µ–Ω–∏—Ç—å –æ–±–ª–æ–∂–∫—É":"–í—ã–±—Ä–∞—Ç—å –æ–±–ª–æ–∂–∫—É"),1),r[11]||(r[11]=e("p",{class:"mt-2 text-xs text-gray-500"}," –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ PDF ",-1))])])]),e("div",null,[r[13]||(r[13]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[F(" –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ "),e("span",{class:"text-red-500"},"*")],-1)),A(e("input",{"onUpdate:modelValue":r[2]||(r[2]=z=>l.value.title=z),type:"text",placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏",class:P(["w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",{"border-red-500":p.value.title}])},null,2),[[E,l.value.title]]),p.value.title?(a(),o("p",Le,i(p.value.title),1)):B("",!0)]),e("div",null,[r[14]||(r[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –ê–≤—Ç–æ—Ä ",-1)),A(e("input",{"onUpdate:modelValue":r[3]||(r[3]=z=>l.value.author=z),type:"text",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∞–≤—Ç–æ—Ä–∞",class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary"},null,512),[[E,l.value.author]])]),e("div",null,[r[15]||(r[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –û–ø–∏—Å–∞–Ω–∏–µ ",-1)),A(e("textarea",{"onUpdate:modelValue":r[4]||(r[4]=z=>l.value.description=z),rows:"3",placeholder:"–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–Ω–∏–≥–∏",class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary resize-none"},null,512),[[E,l.value.description]])]),e("div",null,[r[17]||(r[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[F(" –Ø–∑—ã–∫ "),e("span",{class:"text-red-500"},"*")],-1)),A(e("select",{"onUpdate:modelValue":r[5]||(r[5]=z=>l.value.language=z),class:P(["w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary appearance-none",{"border-red-500":p.value.language}])},[...r[16]||(r[16]=[e("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫",-1),e("option",{value:"ru"},"–†—É—Å—Å–∫–∏–π",-1),e("option",{value:"uz"},"O'zbekcha",-1),e("option",{value:"en"},"English",-1),e("option",{value:"kk"},"“ö–∞–∑–∞“õ—à–∞",-1)])],2),[[T,l.value.language]]),p.value.language?(a(),o("p",Se,i(p.value.language),1)):B("",!0)]),s.value>0&&s.value<100?(a(),o("div",Oe,[e("div",Ie,[r[18]||(r[18]=e("span",{class:"text-gray-600 dark:text-gray-400"},"–ó–∞–≥—Ä—É–∑–∫–∞...",-1)),e("span",Ee,i(s.value)+"%",1)]),e("div",He,[e("div",{class:"bg-primary rounded-full h-2 transition-all duration-300",style:ae({width:`${s.value}%`})},null,4)])])):B("",!0)])],32)]),_:1},8,["is-open"])}}}),Ge=Object.assign(Te,{__name:"LibraryUploadBookModal"}),qe={key:0,class:"mt-1 text-sm text-red-500"},Ke={key:0,class:"mt-1 text-sm text-red-500"},We={class:"flex justify-end gap-3"},Je={key:0,class:"flex items-center gap-2"},Qe={key:1},Xe=G({__name:"EditBookModal",props:{isOpen:{type:Boolean},book:{}},emits:["close","updated"],setup(_,{emit:M}){const $=_,C=M,w=q(),v=k(!1),x=k({title:"",author:"",description:"",language:"ru"}),c=k({title:"",language:""}),V=()=>{c.value={title:"",language:""};let s=!0;return x.value.title.trim()||(c.value.title="–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏",s=!1),x.value.language||(c.value.language="–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫",s=!1),s},d=async()=>{if(!(!V()||!$.book)){v.value=!0;try{await $fetch(`/api/library/admin/books/${$.book.id}`,{method:"PATCH",body:{title:x.value.title,author:x.value.author||null,description:x.value.description||null,language:x.value.language}}),w.success("–ö–Ω–∏–≥–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞"),C("updated")}catch(s){w.error(s.data?.message||"–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏")}finally{v.value=!1}}},g=()=>{v.value||C("close")};return ee(()=>$.book,s=>{s&&(x.value={title:s.title,author:s.author||"",description:s.description||"",language:s.language})},{immediate:!0}),(s,u)=>{const l=Y,p=Z;return a(),te(p,{"is-open":_.isOpen,title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–∏–≥—É",size:"md",onClose:g},{footer:D(()=>[e("div",We,[U(l,{variant:"secondary",disabled:v.value,onClick:g},{default:D(()=>[...u[9]||(u[9]=[F(" –û—Ç–º–µ–Ω–∞ ",-1)])]),_:1},8,["disabled"]),U(l,{disabled:v.value,onClick:d},{default:D(()=>[v.value?(a(),o("span",Je,[...u[10]||(u[10]=[e("svg",{class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),F(" –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ... ",-1)])])):(a(),o("span",Qe,"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"))]),_:1},8,["disabled"])])]),default:D(()=>[e("form",{onSubmit:H(d,["prevent"]),class:"space-y-4"},[e("div",null,[u[4]||(u[4]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[F(" –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ "),e("span",{class:"text-red-500"},"*")],-1)),A(e("input",{"onUpdate:modelValue":u[0]||(u[0]=f=>x.value.title=f),type:"text",class:P(["w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",{"border-red-500":c.value.title}])},null,2),[[E,x.value.title]]),c.value.title?(a(),o("p",qe,i(c.value.title),1)):B("",!0)]),e("div",null,[u[5]||(u[5]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –ê–≤—Ç–æ—Ä ",-1)),A(e("input",{"onUpdate:modelValue":u[1]||(u[1]=f=>x.value.author=f),type:"text",class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary"},null,512),[[E,x.value.author]])]),e("div",null,[u[6]||(u[6]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –û–ø–∏—Å–∞–Ω–∏–µ ",-1)),A(e("textarea",{"onUpdate:modelValue":u[2]||(u[2]=f=>x.value.description=f),rows:"3",class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary resize-none"},null,512),[[E,x.value.description]])]),e("div",null,[u[8]||(u[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[F(" –Ø–∑—ã–∫ "),e("span",{class:"text-red-500"},"*")],-1)),A(e("select",{"onUpdate:modelValue":u[3]||(u[3]=f=>x.value.language=f),class:P(["w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary appearance-none",{"border-red-500":c.value.language}])},[...u[7]||(u[7]=[e("option",{value:"ru"},"–†—É—Å—Å–∫–∏–π",-1),e("option",{value:"uz"},"O'zbekcha",-1),e("option",{value:"en"},"English",-1),e("option",{value:"kk"},"“ö–∞–∑–∞“õ—à–∞",-1)])],2),[[T,x.value.language]]),c.value.language?(a(),o("p",Ke,i(c.value.language),1)):B("",!0)])],32)]),_:1},8,["is-open"])}}}),Ye=Object.assign(Xe,{__name:"LibraryEditBookModal"}),Ze={key:0,class:"space-y-6"},et={class:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},tt={class:"h-16 w-12 rounded bg-gray-200 dark:bg-gray-700 overflow-hidden shrink-0"},st=["src","alt"],rt={class:"font-semibold text-gray-900 dark:text-white"},at={class:"text-sm text-gray-600 dark:text-gray-400"},ot={class:"space-y-4"},lt={class:"flex gap-4"},nt={class:"flex items-center gap-2 cursor-pointer"},it={class:"flex items-center gap-2 cursor-pointer"},dt={class:"flex items-center gap-2 cursor-pointer"},ut={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ct={value:""},pt=["value"],gt=["value"],vt=["value"],mt={key:0,class:"flex items-center justify-center gap-2"},xt={key:1},yt={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},kt={key:0,class:"text-center py-8"},ft={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},bt={key:2,class:"space-y-2"},ht={class:"flex items-center gap-3"},wt={class:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center"},_t={key:0,class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$t={key:1,class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Mt={class:"font-medium text-gray-900 dark:text-white"},Ct={class:"text-xs text-gray-500 dark:text-gray-400"},Bt=["onClick"],jt=G({__name:"AccessModal",props:{isOpen:{type:Boolean},book:{}},emits:["close"],setup(_){const M=_,$=q(),C=k(!1),w=k(!1),v=k([]),x=k([]),c=k([]),V=[{id:"STUDENT",name:"–°–ª—É—à–∞—Ç–µ–ª—å"},{id:"TEACHER",name:"–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å"},{id:"MANAGER",name:"–ú–µ–Ω–µ–¥–∂–µ—Ä"},{id:"ADMIN",name:"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"}],d=k({type:"user",targetId:"",expiresAt:""}),g=async()=>{if(M.book){C.value=!0;try{const f=await $fetch(`/api/library/admin/books/${M.book.id}/access`);v.value=f.data.accessList}catch(f){$.error(f.data?.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–æ–≤")}finally{C.value=!1}}},s=async()=>{try{const f=await $fetch("/api/users");x.value=f.users.map(j=>({id:j.id,name:`${j.name} (${j.email})`}));const n=await $fetch("/api/groups");c.value=n.groups.map(j=>({id:j.id,name:j.name}))}catch(f){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–≥—Ä—É–ø–ø:",f)}},u=async()=>{if(!(!M.book||!d.value.targetId)){w.value=!0;try{await $fetch(`/api/library/admin/books/${M.book.id}/access`,{method:"POST",body:{type:d.value.type,userId:d.value.type==="user"?String(d.value.targetId):void 0,groupId:d.value.type==="group"?Number(d.value.targetId):void 0,roleName:d.value.type==="role"?d.value.targetId:void 0}}),$.success("–î–æ—Å—Ç—É–ø —É—Å–ø–µ—à–Ω–æ –Ω–∞–∑–Ω–∞—á–µ–Ω"),d.value.targetId="",d.value.expiresAt="",g()}catch(f){$.error(f.data?.message||"–û—à–∏–±–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞")}finally{w.value=!1}}},l=async f=>{if(M.book)try{await $fetch(`/api/library/admin/books/${M.book.id}/access`,{method:"DELETE",body:{accessId:f.id}}),$.success("–î–æ—Å—Ç—É–ø —É—Å–ø–µ—à–Ω–æ –æ—Ç–æ–∑–≤–∞–Ω"),g()}catch(n){$.error(n.data?.message||"–û—à–∏–±–∫–∞ –æ—Ç–∑—ã–≤–∞ –¥–æ—Å—Ç—É–ø–∞")}},p=f=>new Date(f).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"});return ee(()=>M.isOpen,f=>{f&&M.book&&g()}),ne(()=>{s()}),(f,n)=>{const j=Y,R=Z;return a(),te(R,{"is-open":_.isOpen,title:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º",size:"lg",onClose:n[4]||(n[4]=y=>f.$emit("close"))},{default:D(()=>[_.book?(a(),o("div",Ze,[e("div",et,[e("div",tt,[_.book.cover_url?(a(),o("img",{key:0,src:_.book.cover_url,alt:_.book.title,class:"h-full w-full object-cover"},null,8,st)):B("",!0)]),e("div",null,[e("h3",rt,i(_.book.title),1),e("p",at,i(_.book.author||"–ê–≤—Ç–æ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω"),1)])]),e("div",ot,[n[10]||(n[10]=e("h4",{class:"font-semibold text-gray-900 dark:text-white"}," –ù–∞–∑–Ω–∞—á–∏—Ç—å –¥–æ—Å—Ç—É–ø ",-1)),e("div",null,[n[8]||(n[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –¢–∏–ø –¥–æ—Å—Ç—É–ø–∞ ",-1)),e("div",lt,[e("label",nt,[A(e("input",{"onUpdate:modelValue":n[0]||(n[0]=y=>d.value.type=y),type:"radio",value:"user",class:"text-primary focus:ring-primary"},null,512),[[re,d.value.type]]),n[5]||(n[5]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"}," –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ",-1))]),e("label",it,[A(e("input",{"onUpdate:modelValue":n[1]||(n[1]=y=>d.value.type=y),type:"radio",value:"group",class:"text-primary focus:ring-primary"},null,512),[[re,d.value.type]]),n[6]||(n[6]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"}," –ì—Ä—É–ø–ø–∞ ",-1))]),e("label",dt,[A(e("input",{"onUpdate:modelValue":n[2]||(n[2]=y=>d.value.type=y),type:"radio",value:"role",class:"text-primary focus:ring-primary"},null,512),[[re,d.value.type]]),n[7]||(n[7]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"}," –†–æ–ª—å ",-1))])])]),e("div",null,[e("label",ut,i(d.value.type==="user"?"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å":d.value.type==="group"?"–ì—Ä—É–ø–ø–∞":"–†–æ–ª—å"),1),A(e("select",{"onUpdate:modelValue":n[3]||(n[3]=y=>d.value.targetId=y),class:"w-full rounded-lg border border-stroke bg-transparent py-2 px-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary appearance-none"},[e("option",ct,i(d.value.type==="user"?"–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è":d.value.type==="group"?"–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É":"–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å"),1),d.value.type==="user"?(a(!0),o(O,{key:0},I(x.value,y=>(a(),o("option",{key:y.id,value:y.id},i(y.name),9,pt))),128)):d.value.type==="group"?(a(!0),o(O,{key:1},I(c.value,y=>(a(),o("option",{key:y.id,value:y.id},i(y.name),9,gt))),128)):d.value.type==="role"?(a(),o(O,{key:2},I(V,y=>e("option",{key:y.id,value:y.id},i(y.name),9,vt)),64)):B("",!0)],512),[[T,d.value.targetId]])]),U(j,{onClick:u,disabled:!d.value.targetId||w.value,class:"w-full"},{default:D(()=>[w.value?(a(),o("span",mt,[...n[9]||(n[9]=[e("svg",{class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),F(" –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ... ",-1)])])):(a(),o("span",xt,"–ù–∞–∑–Ω–∞—á–∏—Ç—å –¥–æ—Å—Ç—É–ø"))]),_:1},8,["disabled"])]),e("div",yt,[n[16]||(n[16]=e("h4",{class:"font-semibold text-gray-900 dark:text-white mb-4"}," –¢–µ–∫—É—â–∏–µ –¥–æ—Å—Ç—É–ø—ã ",-1)),C.value?(a(),o("div",kt,[...n[11]||(n[11]=[e("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1)])])):v.value.length===0?(a(),o("div",ft,[...n[12]||(n[12]=[e("p",null,"–î–æ—Å—Ç—É–ø—ã –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã",-1)])])):(a(),o("div",bt,[(a(!0),o(O,null,I(v.value,y=>(a(),o("div",{key:y.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[e("div",ht,[e("div",wt,[y.type==="user"?(a(),o("svg",_t,[...n[13]||(n[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])])):(a(),o("svg",$t,[...n[14]||(n[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])]))]),e("div",null,[e("p",Mt,i(y.name),1),e("p",Ct,i(y.type==="user"?"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å":"–ì—Ä—É–ø–ø–∞")+" "+i(y.expires_at?` ‚Ä¢ –î–æ ${p(y.expires_at)}`:" ‚Ä¢ –ë–µ—Å—Å—Ä–æ—á–Ω–æ"),1)])]),e("button",{onClick:K=>l(y),class:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"–û—Ç–æ–∑–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø"},[...n[15]||(n[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Bt)]))),128))]))])])):B("",!0)]),_:1},8,["is-open"])}}}),At=Object.assign(jt,{__name:"LibraryAccessModal"}),zt={key:0,class:"space-y-6"},Ut={class:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},Ft={class:"h-16 w-12 rounded bg-gray-200 dark:bg-gray-700 overflow-hidden shrink-0"},Dt=["src","alt"],Vt={class:"font-semibold text-gray-900 dark:text-white"},Lt={class:"text-sm text-gray-600 dark:text-gray-400"},St={key:0,class:"text-center py-12"},Ot={key:1},It={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Et={class:"p-4 bg-primary/10 rounded-lg"},Ht={class:"flex items-center gap-3"},Pt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Rt={class:"p-4 bg-success/10 rounded-lg"},Nt={class:"flex items-center gap-3"},Tt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Gt={class:"p-4 bg-warning/10 rounded-lg"},qt={class:"flex items-center gap-3"},Kt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Wt={class:"p-4 bg-white dark:bg-boxdark border border-gray-200 dark:border-gray-700 rounded-lg"},Jt={class:"flex items-center gap-4"},Qt={class:"flex-1"},Xt={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3"},Yt={class:"text-lg font-semibold text-gray-900 dark:text-white"},Zt={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},es={key:1,class:"space-y-2"},ts={class:"flex items-center gap-3"},ss={class:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center"},rs={class:"text-sm font-semibold text-primary"},as={class:"font-medium text-gray-900 dark:text-white"},os={class:"text-xs text-gray-500 dark:text-gray-400"},ls={class:"text-right"},ns={class:"text-sm font-medium text-gray-900 dark:text-white"},is={class:"flex items-center gap-2 mt-1"},ds={class:"w-24 bg-gray-200 dark:bg-gray-700 rounded-full h-1.5"},us={class:"text-xs text-gray-500 dark:text-gray-400"},cs={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ps={key:1,class:"overflow-x-auto"},gs={class:"w-full"},vs={class:"divide-y divide-gray-200 dark:divide-gray-700"},ms={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},xs={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400"},ys={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400"},ks={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400 text-right"},fs=G({__name:"AnalyticsModal",props:{isOpen:{type:Boolean},book:{}},emits:["close"],setup(_){const M=_,$=q(),C=k(!1),w=k(null),v=async()=>{if(M.book){C.value=!0;try{const g=await $fetch(`/api/library/admin/books/${M.book.id}/analytics`);w.value=g}catch(g){$.error(g.data?.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏")}finally{C.value=!1}}},x=g=>g.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2),c=g=>new Date(g).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),V=g=>new Date(g).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),d=g=>{if(!g)return"‚Äî";const s=Math.floor(g/3600),u=Math.floor(g%3600/60);return s>0?`${s}—á ${u}–º`:`${u}–º`};return ee(()=>M.isOpen,g=>{g&&M.book&&v()}),(g,s)=>{const u=Z;return a(),te(u,{"is-open":_.isOpen,title:"–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–Ω–∏–≥–∏",size:"xl",onClose:s[0]||(s[0]=l=>g.$emit("close"))},{default:D(()=>[_.book?(a(),o("div",zt,[e("div",Ut,[e("div",Ft,[_.book.cover_url?(a(),o("img",{key:0,src:_.book.cover_url,alt:_.book.title,class:"h-full w-full object-cover"},null,8,Dt)):B("",!0)]),e("div",null,[e("h3",Vt,i(_.book.title),1),e("p",Lt,i(_.book.author||"–ê–≤—Ç–æ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω"),1)])]),C.value?(a(),o("div",St,[...s[1]||(s[1]=[e("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1),e("p",{class:"mt-4 text-gray-600 dark:text-gray-400"}," –ó–∞–≥—Ä—É–∑–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏... ",-1)])])):w.value?(a(),o("div",Ot,[e("div",It,[e("div",Et,[e("div",Ht,[s[3]||(s[3]=e("svg",{class:"w-8 h-8 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),e("div",null,[s[2]||(s[2]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," –í—Å–µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ",-1)),e("p",Pt,i(w.value.totalViews),1)])])]),e("div",Rt,[e("div",Nt,[s[5]||(s[5]=e("svg",{class:"w-8 h-8 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("div",null,[s[4]||(s[4]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —á–∏—Ç–∞—Ç–µ–ª–µ–π ",-1)),e("p",Tt,i(w.value.uniqueReaders),1)])])]),e("div",Gt,[e("div",qt,[s[7]||(s[7]=e("svg",{class:"w-8 h-8 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[s[6]||(s[6]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," –ó–∞–≤–µ—Ä—à–∏–ª–∏ —á—Ç–µ–Ω–∏–µ ",-1)),e("p",Kt,i(w.value.completedReaders),1)])])])]),e("div",Wt,[s[8]||(s[8]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," –°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å —á—Ç–µ–Ω–∏—è ",-1)),e("div",Jt,[e("div",Qt,[e("div",Xt,[e("div",{class:"bg-primary rounded-full h-3 transition-all duration-300",style:ae({width:`${w.value.averageProgress}%`})},null,4)])]),e("span",Yt,i(w.value.averageProgress)+"% ",1)])]),e("div",null,[s[10]||(s[10]=e("h4",{class:"font-semibold text-gray-900 dark:text-white mb-4"}," –ê–∫—Ç–∏–≤–Ω—ã–µ —á–∏—Ç–∞—Ç–µ–ª–∏ ",-1)),w.value.activeReaders.length===0?(a(),o("div",Zt,[...s[9]||(s[9]=[e("p",null,"–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∏—Ç–∞—Ç–µ–ª–µ–π",-1)])])):(a(),o("div",es,[(a(!0),o(O,null,I(w.value.activeReaders,l=>(a(),o("div",{key:l.userId,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[e("div",ts,[e("div",ss,[e("span",rs,i(x(l.userName)),1)]),e("div",null,[e("p",as,i(l.userName),1),e("p",os," –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: "+i(c(l.lastActivity)),1)])]),e("div",ls,[e("p",ns," –°—Ç—Ä. "+i(l.currentPage)+" / "+i(_.book.total_pages),1),e("div",is,[e("div",ds,[e("div",{class:"bg-primary rounded-full h-1.5",style:ae({width:`${l.progress}%`})},null,4)]),e("span",us,i(l.progress)+"% ",1)])])]))),128))]))]),e("div",null,[s[13]||(s[13]=e("h4",{class:"font-semibold text-gray-900 dark:text-white mb-4"}," –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–µ—Å—Å–∏–∏ —á—Ç–µ–Ω–∏—è ",-1)),w.value.recentSessions.length===0?(a(),o("div",cs,[...s[11]||(s[11]=[e("p",null,"–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –æ —Å–µ—Å—Å–∏—è—Ö",-1)])])):(a(),o("div",ps,[e("table",gs,[s[12]||(s[12]=e("thead",null,[e("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400"}," –ß–∏—Ç–∞—Ç–µ–ª—å "),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400"}," –ù–∞—á–∞–ª–æ "),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400"}," –û–∫–æ–Ω—á–∞–Ω–∏–µ "),e("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400"}," –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ")])],-1)),e("tbody",vs,[(a(!0),o(O,null,I(w.value.recentSessions,l=>(a(),o("tr",{key:l.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[e("td",ms,i(l.userName),1),e("td",xs,i(V(l.startedAt)),1),e("td",ys,i(l.endedAt?V(l.endedAt):"–í –ø—Ä–æ—Ü–µ—Å—Å–µ"),1),e("td",ks,i(d(l.duration)),1)]))),128))])])]))])])):B("",!0)])):B("",!0)]),_:1},8,["is-open"])}}}),bs=Object.assign(fs,{__name:"LibraryAnalyticsModal"}),hs={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},ws={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},_s={class:"flex gap-2"},$s={class:"grid grid-cols-1 gap-4 md:grid-cols-4 mb-6"},Ms={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},Cs={class:"flex items-center gap-4"},Bs={class:"text-2xl font-bold text-black dark:text-white"},js={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},As={class:"flex items-center gap-4"},zs={class:"text-2xl font-bold text-black dark:text-white"},Us={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},Fs={class:"flex items-center gap-4"},Ds={class:"text-2xl font-bold text-black dark:text-white"},Vs={class:"rounded-lg bg-white dark:bg-boxdark p-6 shadow-md"},Ls={class:"flex items-center gap-4"},Ss={class:"text-2xl font-bold text-black dark:text-white"},Os={class:"bg-white dark:bg-boxdark rounded-xl shadow-md p-6 mb-6"},Is={class:"flex items-center gap-3 mb-4"},Es={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Hs={class:"relative"},Ps={class:"relative"},Rs={class:"relative"},Ns={class:"rounded-lg bg-white dark:bg-boxdark shadow-md overflow-hidden"},Ts={key:0,class:"p-12 text-center"},Gs={key:1,class:"p-12 text-center text-gray-500 dark:text-gray-400"},qs={key:2,class:"overflow-x-auto"},Ks={class:"w-full"},Ws={class:"divide-y divide-stroke dark:divide-strokedark"},Js={class:"px-4 py-3"},Qs={class:"h-16 w-12 rounded bg-gray-100 dark:bg-gray-800 overflow-hidden shrink-0"},Xs=["src","alt"],Ys={key:1,class:"h-full w-full flex items-center justify-center bg-primary/10"},Zs={class:"px-4 py-3"},er={class:"max-w-md"},tr={class:"font-semibold text-gray-900 dark:text-white line-clamp-2"},sr={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},rr={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-1"},ar={class:"px-4 py-3"},or={class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"},lr={class:"px-4 py-3 text-center"},nr={class:"flex items-center justify-center gap-1"},ir={class:"text-sm text-gray-900 dark:text-white"},dr={class:"px-4 py-3 text-center"},ur={class:"px-4 py-3 text-center"},cr={class:"flex items-center justify-center gap-1"},pr={class:"text-sm text-gray-900 dark:text-white"},gr={class:"px-4 py-3"},vr={class:"text-sm text-gray-600 dark:text-gray-400"},mr={class:"px-4 py-3"},xr={class:"flex items-center justify-center gap-1"},yr=["onClick"],kr=["onClick"],fr=["onClick"],br=["onClick"],hr=["onClick"],wr={key:3,class:"border-t border-gray-200 dark:border-gray-700 px-6 py-4"},Ur=G({__name:"index",setup(_){const M=()=>{const b=new URLSearchParams({...c.value.search&&{search:c.value.search},...c.value.status&&{status:c.value.status},...c.value.language&&{language:c.value.language}});window.open(`/api/library/admin/books/export?${b}`,"_blank")},$=q(),C=k(!1),w=k([]),v=k({page:1,limit:20,total:0}),x=k({ready:0,processing:0,failed:0}),c=k({search:"",status:"",language:""}),V=k(!1),d=k(!1),g=k(!1),s=k(!1),u=k(!1),l=k(!1),p=k(null),f=be(()=>c.value.search||c.value.status||c.value.language),n=async()=>{C.value=!0;try{const b=new URLSearchParams({page:v.value.page.toString(),limit:v.value.limit.toString(),...c.value.search&&{search:c.value.search},...c.value.status&&{status:c.value.status},...c.value.language&&{language:c.value.language}}),t=await $fetch(`/api/library/admin/books?${b}`);w.value=t.books,v.value.total=t.total,x.value=t.stats}catch(b){$.error(b.data?.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–∏–≥")}finally{C.value=!1}},j=()=>{v.value.page=1,n()},R=()=>{c.value={search:"",status:"",language:""},j()},y=b=>{v.value.page=b,n()},K=()=>{V.value=!0},W=()=>{V.value=!1},J=()=>{W(),n(),$.success("–ö–Ω–∏–≥–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É")},Q=b=>{p.value=b,d.value=!0},N=()=>{d.value=!1,p.value=null},se=()=>{N(),n(),$.success("–ö–Ω–∏–≥–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞")},m=b=>{p.value=b,g.value=!0},r=()=>{g.value=!1,p.value=null},L=b=>{p.value=b,s.value=!0},S=()=>{s.value=!1,p.value=null},z=async b=>{try{await $fetch(`/api/library/admin/books/${b.id}/reprocess`,{method:"POST"}),$.success("–ö–Ω–∏–≥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É"),n()}catch(t){$.error(t.data?.message||"–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–∏–≥–∏")}},ie=b=>{p.value=b,u.value=!0},oe=()=>{u.value=!1,p.value=null},de=async()=>{if(p.value){l.value=!0;try{await $fetch(`/api/library/admin/books/${p.value.id}`,{method:"DELETE"}),$.success("–ö–Ω–∏–≥–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞"),oe(),n()}catch(b){$.error(b.data?.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏")}finally{l.value=!1}}},ue=b=>({ready:"–ì–æ—Ç–æ–≤–∞",processing:"–û–±—Ä–∞–±–æ—Ç–∫–∞",failed:"–û—à–∏–±–∫–∞"})[b]||b,ce=b=>new Date(b).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),pe=b=>b?{ru:"üá∑üá∫ –†—É—Å—Å–∫–∏–π",uz:"üá∫üáø O'zbekcha",en:"üá¨üáß English",kk:"üá∞üáø “ö–∞–∑–∞“õ—à–∞"}[b]||b.toUpperCase():"‚Äî";return ne(()=>{n()}),(b,t)=>{const le=Y,ge=fe,ve=Ge,me=Ye,xe=At,ye=bs,ke=_e;return a(),o("div",hs,[e("div",ws,[t[6]||(t[6]=e("div",null,[e("h2",{class:"text-title-md2 font-bold text-black dark:text-white"}," –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," –ó–∞–≥—Ä—É–∑–∫–∞, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–Ω–∏–≥–∞–º ")],-1)),e("div",_s,[U(le,{onClick:M,variant:"secondary",class:"flex items-center gap-2"},{default:D(()=>[...t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),F(" –≠–∫—Å–ø–æ—Ä—Ç ",-1)])]),_:1}),U(le,{onClick:K,class:"flex items-center gap-2"},{default:D(()=>[...t[5]||(t[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),F(" –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–Ω–∏–≥—É ",-1)])]),_:1})])]),e("div",$s,[e("div",Ms,[e("div",Cs,[t[8]||(t[8]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full bg-primary/10"},[e("svg",{class:"w-6 h-6 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})])],-1)),e("div",null,[t[7]||(t[7]=e("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," –í—Å–µ–≥–æ –∫–Ω–∏–≥ ",-1)),e("p",Bs,i(v.value.total),1)])])]),e("div",js,[e("div",As,[t[10]||(t[10]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full bg-success/10"},[e("svg",{class:"w-6 h-6 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[t[9]||(t[9]=e("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," –ì–æ—Ç–æ–≤—ã –∫ —á—Ç–µ–Ω–∏—é ",-1)),e("p",zs,i(x.value.ready),1)])])]),e("div",Us,[e("div",Fs,[t[12]||(t[12]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full bg-warning/10"},[e("svg",{class:"w-6 h-6 text-warning",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[t[11]||(t[11]=e("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," –í –æ–±—Ä–∞–±–æ—Ç–∫–µ ",-1)),e("p",Ds,i(x.value.processing),1)])])]),e("div",Vs,[e("div",Ls,[t[14]||(t[14]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full bg-danger/10"},[e("svg",{class:"w-6 h-6 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[t[13]||(t[13]=e("h3",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"}," –° –æ—à–∏–±–∫–∞–º–∏ ",-1)),e("p",Ss,i(x.value.failed),1)])])])]),e("div",Os,[e("div",Is,[t[16]||(t[16]=e("div",{class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})])],-1)),t[17]||(t[17]=e("h4",{class:"text-lg font-semibold text-black dark:text-white"}," –§–∏–ª—å—Ç—Ä—ã ",-1)),f.value?(a(),o("button",{key:0,onClick:R,class:"ml-auto text-sm text-primary hover:text-primary/80 transition-colors flex items-center gap-1"},[...t[15]||(t[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),F(" –°–±—Ä–æ—Å–∏—Ç—å ",-1)])])):B("",!0)]),e("div",Es,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –ü–æ–∏—Å–∫ ",-1)),e("div",Hs,[A(e("input",{"onUpdate:modelValue":t[0]||(t[0]=h=>c.value.search=h),type:"text",placeholder:"–ù–∞–∑–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä...",class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-10 pr-4 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onInput:j},null,544),[[E,c.value.search]]),t[18]||(t[18]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –°—Ç–∞—Ç—É—Å ",-1)),e("div",Ps,[A(e("select",{"onUpdate:modelValue":t[1]||(t[1]=h=>c.value.status=h),class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-4 pr-10 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary appearance-none",onChange:j},[...t[20]||(t[20]=[e("option",{value:""},"–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã",-1),e("option",{value:"ready"},"–ì–æ—Ç–æ–≤—ã –∫ —á—Ç–µ–Ω–∏—é",-1),e("option",{value:"processing"},"–í –æ–±—Ä–∞–±–æ—Ç–∫–µ",-1),e("option",{value:"failed"},"–° –æ—à–∏–±–∫–∞–º–∏",-1)])],544),[[T,c.value.status]]),t[21]||(t[21]=e("svg",{class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –Ø–∑—ã–∫ ",-1)),e("div",Rs,[A(e("select",{"onUpdate:modelValue":t[2]||(t[2]=h=>c.value.language=h),class:"w-full rounded-lg border border-stroke bg-transparent py-2 pl-4 pr-10 outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary appearance-none",onChange:j},[...t[23]||(t[23]=[he('<option value="">–í—Å–µ —è–∑—ã–∫–∏</option><option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="uz">O&#39;zbekcha</option><option value="en">English</option><option value="kk">“ö–∞–∑–∞“õ—à–∞</option>',5)])],544),[[T,c.value.language]]),t[24]||(t[24]=e("svg",{class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])])])]),e("div",Ns,[C.value?(a(),o("div",Ts,[...t[26]||(t[26]=[e("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1),e("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"–ó–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥...",-1)])])):w.value.length===0?(a(),o("div",Gs,[...t[27]||(t[27]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1),e("p",{class:"mt-4 text-lg font-medium"},"–ö–Ω–∏–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1),e("p",{class:"mt-2"},"–ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–µ—Ä–≤—É—é –∫–Ω–∏–≥—É –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É",-1)])])):(a(),o("div",qs,[e("table",Ks,[t[36]||(t[36]=e("thead",{class:"bg-gray-50 dark:bg-meta-4"},[e("tr",{class:"border-b border-stroke dark:border-strokedark"},[e("th",{class:"px-4 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," –û–±–ª–æ–∂–∫–∞ "),e("th",{class:"px-4 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," –ù–∞–∑–≤–∞–Ω–∏–µ / –ê–≤—Ç–æ—Ä "),e("th",{class:"px-4 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," –Ø–∑—ã–∫ "),e("th",{class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," –°—Ç—Ä–∞–Ω–∏—Ü—ã "),e("th",{class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," –°—Ç–∞—Ç—É—Å "),e("th",{class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," –ß–∏—Ç–∞—Ç–µ–ª–∏ "),e("th",{class:"px-4 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," –î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ "),e("th",{class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"}," –î–µ–π—Å—Ç–≤–∏—è ")])],-1)),e("tbody",Ws,[(a(!0),o(O,null,I(w.value,h=>(a(),o("tr",{key:h.id,class:"hover:bg-gray-50 dark:hover:bg-meta-4 transition-colors"},[e("td",Js,[e("div",Qs,[h.cover_url?(a(),o("img",{key:0,src:h.cover_url,alt:h.title,class:"h-full w-full object-cover"},null,8,Xs)):(a(),o("div",Ys,[...t[28]||(t[28]=[e("svg",{class:"w-6 h-6 text-primary/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})],-1)])]))])]),e("td",Zs,[e("div",er,[e("p",tr,i(h.title),1),e("p",sr,i(h.author||"–ê–≤—Ç–æ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω"),1),h.description?(a(),o("p",rr,i(h.description),1)):B("",!0)])]),e("td",ar,[e("span",or,i(pe(h.language)),1)]),e("td",lr,[e("div",nr,[t[29]||(t[29]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),e("span",ir,i(h.total_pages||0),1)])]),e("td",dr,[e("span",{class:P(["inline-flex items-center rounded-full px-3 py-1 text-xs font-medium",h.status==="ready"?"bg-success/10 text-success":h.status==="processing"?"bg-warning/10 text-warning":"bg-danger/10 text-danger"])},i(ue(h.status)),3)]),e("td",ur,[e("div",cr,[t[30]||(t[30]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),e("span",pr,i(h.readers_count||0),1)])]),e("td",gr,[e("span",vr,i(ce(h.created_at)),1)]),e("td",mr,[e("div",xr,[e("button",{onClick:X=>L(h),class:"p-2 text-gray-500 hover:text-primary hover:bg-primary/10 rounded-lg transition-colors",title:"–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"},[...t[31]||(t[31]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)])],8,yr),e("button",{onClick:X=>m(h),class:"p-2 text-gray-500 hover:text-success hover:bg-success/10 rounded-lg transition-colors",title:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º"},[...t[32]||(t[32]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)])],8,kr),e("button",{onClick:X=>Q(h),class:"p-2 text-gray-500 hover:text-warning hover:bg-warning/10 rounded-lg transition-colors",title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"},[...t[33]||(t[33]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,fr),h.status!=="processing"?(a(),o("button",{key:0,onClick:X=>z(h),class:"p-2 text-gray-500 hover:text-primary hover:bg-primary/10 rounded-lg transition-colors",title:"–ü–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å"},[...t[34]||(t[34]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],8,br)):B("",!0),e("button",{onClick:X=>ie(h),class:"p-2 text-gray-500 hover:text-danger hover:bg-danger/10 rounded-lg transition-colors",title:"–£–¥–∞–ª–∏—Ç—å"},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,hr)])])]))),128))])])])),v.value.total>v.value.limit?(a(),o("div",wr,[U(ge,{"current-page":v.value.page,"total-pages":Math.ceil(v.value.total/v.value.limit),total:v.value.total,limit:v.value.limit,"onUpdate:page":y,"onUpdate:limit":t[3]||(t[3]=h=>{v.value.limit=h,n()})},null,8,["current-page","total-pages","total","limit"])])):B("",!0)]),U(ve,{"is-open":V.value,onClose:W,onUploaded:J},null,8,["is-open"]),U(me,{"is-open":d.value,book:p.value,onClose:N,onUpdated:se},null,8,["is-open","book"]),U(xe,{"is-open":g.value,book:p.value,onClose:r},null,8,["is-open","book"]),U(ye,{"is-open":s.value,book:p.value,onClose:S},null,8,["is-open","book"]),U(ke,{"is-open":u.value,title:"–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è",message:"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∫–Ω–∏–≥—É?","item-name":p.value?.title,warning:"–í—Å–µ —Ñ–∞–π–ª—ã –∫–Ω–∏–≥–∏ –∏ –∏—Å—Ç–æ—Ä–∏—è —á—Ç–µ–Ω–∏—è –±—É–¥—É—Ç –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–µ–Ω—ã.",loading:l.value,onConfirm:de,onCancel:oe},null,8,["is-open","item-name","loading"])])}}});export{Ur as default};
