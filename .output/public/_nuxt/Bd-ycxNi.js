import{_ as q}from"./UFmxYCVi.js";import{_ as N}from"./BMofnORk.js";import{_ as S}from"./CyDLpZDf.js";import{v as z,r as _,f as h,q as E,k as F,w as y,i as r,a as t,x as u,c as m,h as p,d as i,A as c,n as x,t as n,b as v,z as T,o as l}from"./GLV6bXvn.js";import{u as A}from"./DVL-QcDc.js";const P={key:0,class:"mt-1 text-sm text-danger"},$={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},G={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},J={class:"relative"},K={key:0,class:"mt-1 text-xs text-danger"},L={class:"relative"},Q={key:0,class:"mt-1 text-xs text-danger"},R={class:"relative"},W={key:0,class:"mt-1 text-xs text-danger"},X={class:"mt-4 flex items-center justify-between rounded-lg border border-primary/20 bg-primary/5 p-3"},Y={class:"text-lg font-bold text-primary"},Z={key:0,class:"mt-2 text-sm text-danger"},ee={class:"flex justify-end gap-3 border-t border-stroke pt-6 dark:border-strokedark"},te=z({__name:"CreateDisciplineModal",props:{isOpen:{type:Boolean},discipline:{},instructorOptions:{}},emits:["close","save"],setup(b,{emit:V}){const f=b,g=V,s=_({}),o=_({name:"",description:"",theoryHours:0,practiceHours:0,assessmentHours:0,instructorIds:[]}),U=h(()=>f.discipline?"Редактировать дисциплину":"Добавить дисциплину"),H=h(()=>o.value.theoryHours+o.value.practiceHours+o.value.assessmentHours),k=()=>{o.value={name:"",description:"",theoryHours:0,practiceHours:0,assessmentHours:0,instructorIds:[]},s.value={}},C=()=>{f.discipline?o.value={...f.discipline}:k()},O=()=>(s.value={},o.value.name.trim()||(s.value.name="Название обязательно"),o.value.theoryHours<0&&(s.value.theoryHours="Не может быть отрицательным"),o.value.practiceHours<0&&(s.value.practiceHours="Не может быть отрицательным"),o.value.assessmentHours<0&&(s.value.assessmentHours="Не может быть отрицательным"),H.value===0&&(s.value.totalHours="Общее количество часов должно быть больше нуля"),(!o.value.instructorIds||o.value.instructorIds.length===0)&&(s.value.instructors="Необходимо выбрать хотя бы одного инструктора"),Object.keys(s.value).length===0),D=()=>{if(!O()){const d=Object.values(s.value)[0];d&&I(d,"Ошибка валидации");return}g("save",{...o.value}),k()},B=()=>{k(),g("close")},{error:I}=A();return E(()=>f.isOpen,d=>{d&&C()}),(d,e)=>{const M=q,w=N,j=S;return l(),F(j,{"is-open":b.isOpen,title:r(U),size:"lg"},{default:y(()=>[t("form",{onSubmit:T(D,["prevent"]),class:"space-y-6"},[t("div",null,[e[6]||(e[6]=t("label",{class:"mb-2.5 block text-sm font-medium text-black dark:text-white"},[i(" Название дисциплины "),t("span",{class:"text-danger"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r(o).name=a),type:"text",placeholder:"Введите название дисциплины",class:x(["w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",{"border-danger":r(s).name}]),required:""},null,2),[[c,r(o).name]]),r(s).name?(l(),m("p",P,n(r(s).name),1)):p("",!0)]),t("div",null,[e[7]||(e[7]=t("label",{class:"mb-2.5 block text-sm font-medium text-black dark:text-white"}," Описание ",-1)),u(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>r(o).description=a),rows:"3",placeholder:"Введите описание дисциплины",class:"w-full rounded border-[1.5px] border-stroke bg-transparent px-5 py-3 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary"},null,512),[[c,r(o).description]])]),t("div",$,[e[15]||(e[15]=t("h4",{class:"mb-4 text-sm font-semibold text-gray-900 dark:text-white"}," Распределение часов по видам обучения ",-1)),t("div",G,[t("div",null,[e[9]||(e[9]=t("label",{class:"mb-2 block text-sm font-medium text-black dark:text-white"},[i(" Теория "),t("span",{class:"text-danger"},"*")],-1)),t("div",J,[u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r(o).theoryHours=a),type:"number",min:"0",placeholder:"0",class:x(["w-full rounded border-[1.5px] border-stroke bg-white px-4 py-2.5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",{"border-danger":r(s).theoryHours}]),required:""},null,2),[[c,r(o).theoryHours,void 0,{number:!0}]]),e[8]||(e[8]=t("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-gray-500"},"ч",-1))]),r(s).theoryHours?(l(),m("p",K,n(r(s).theoryHours),1)):p("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"mb-2 block text-sm font-medium text-black dark:text-white"},[i(" Практика "),t("span",{class:"text-danger"},"*")],-1)),t("div",L,[u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>r(o).practiceHours=a),type:"number",min:"0",placeholder:"0",class:x(["w-full rounded border-[1.5px] border-stroke bg-white px-4 py-2.5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",{"border-danger":r(s).practiceHours}]),required:""},null,2),[[c,r(o).practiceHours,void 0,{number:!0}]]),e[10]||(e[10]=t("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-gray-500"},"ч",-1))]),r(s).practiceHours?(l(),m("p",Q,n(r(s).practiceHours),1)):p("",!0)]),t("div",null,[e[13]||(e[13]=t("label",{class:"mb-2 block text-sm font-medium text-black dark:text-white"},[i(" Проверка знаний "),t("span",{class:"text-danger"},"*")],-1)),t("div",R,[u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>r(o).assessmentHours=a),type:"number",min:"0",placeholder:"0",class:x(["w-full rounded border-[1.5px] border-stroke bg-white px-4 py-2.5 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",{"border-danger":r(s).assessmentHours}]),required:""},null,2),[[c,r(o).assessmentHours,void 0,{number:!0}]]),e[12]||(e[12]=t("span",{class:"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-gray-500"},"ч",-1))]),r(s).assessmentHours?(l(),m("p",W,n(r(s).assessmentHours),1)):p("",!0)])]),t("div",X,[e[14]||(e[14]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Всего часов:",-1)),t("span",Y,n(r(H))+" ч",1)]),r(s).totalHours?(l(),m("p",Z,n(r(s).totalHours),1)):p("",!0)]),t("div",null,[v(M,{modelValue:r(o).instructorIds,"onUpdate:modelValue":e[5]||(e[5]=a=>r(o).instructorIds=a),options:b.instructorOptions,label:"Инструкторы",placeholder:"Выберите инструкторов...",hint:"Можно выбрать несколько инструкторов"},null,8,["modelValue","options"])]),t("div",ee,[v(w,{type:"button",variant:"outline",onClick:B},{default:y(()=>[...e[16]||(e[16]=[i(" Отмена ",-1)])]),_:1}),v(w,{type:"submit",variant:"primary"},{default:y(()=>[i(n(b.discipline?"Сохранить изменения":"Добавить дисциплину"),1)]),_:1})])],32)]),_:1},8,["is-open","title"])}}}),ie=Object.assign(te,{__name:"ProgramsCreateDisciplineModal"});export{ie as _};
