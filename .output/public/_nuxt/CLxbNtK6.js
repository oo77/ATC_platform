import{_ as ae}from"./BMofnORk.js";import{v as de,r as _,g as Z,c as y,a as e,i as u,x as g,G as D,A as C,t as b,F as q,j as F,n as A,b as m,w as E,d as $,o as n,k as K,B as se,z as ee,h as V,f as te,L as xe,q as ie,l as fe,D as ne,K as ve,M as Q,u as ke,e as he,y as L,E as B,P as W,N as we}from"./GLV6bXvn.js";import{u as O}from"./DVL-QcDc.js";import{u as _e}from"./BqNnZPOd.js";import{_ as $e}from"./CyDLpZDf.js";import{u as ue}from"./DlZaGH1J.js";import{c as M}from"./CVqvr-Q5.js";import{U as Me}from"./8LVoMU2R.js";import{C as Ue}from"./BLDR1O4k.js";import{T as Y,L as oe}from"./D-2Cuf-m.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const Ae=M("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Ce=M("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);const ge=M("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const Se=M("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const je=M("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Te=M("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);const le=M("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);const Ve=M("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const re=M("door-open",[["path",{d:"M11 20H2",key:"nlcfvz"}],["path",{d:"M11 4.562v16.157a1 1 0 0 0 1.242.97L19 20V5.562a2 2 0 0 0-1.515-1.94l-4-1A2 2 0 0 0 11 4.561z",key:"au4z13"}],["path",{d:"M11 4H8a2 2 0 0 0-2 2v14",key:"74r1mk"}],["path",{d:"M14 12h.01",key:"1jfl7z"}],["path",{d:"M22 20h-3",key:"vhrsz"}]]);const ze=M("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);const Be=M("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const Ee=M("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const R=M("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const De=M("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);const ye=M("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Pe=M("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const pe=M("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const Ie=M("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Ne=M("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ke={class:"space-y-6"},Le={key:0,class:"flex items-center justify-center py-12"},qe={key:1,class:"space-y-6"},Fe={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Oe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},He={class:"flex items-center justify-between rounded-lg border border-gray-200 bg-white p-3 dark:border-gray-600 dark:bg-gray-900"},Ge={class:"relative inline-flex cursor-pointer items-center"},Re={class:"flex items-center justify-between rounded-lg border border-gray-200 bg-white p-3 dark:border-gray-600 dark:bg-gray-900"},Ze={class:"relative inline-flex cursor-pointer items-center"},Xe={class:"rounded-lg border border-gray-200 bg-white p-3 dark:border-gray-600 dark:bg-gray-900"},Je={class:"rounded-lg border border-gray-200 bg-white p-3 dark:border-gray-600 dark:bg-gray-900"},Qe={class:"rounded-lg border border-gray-200 bg-white p-3 dark:border-gray-600 dark:bg-gray-900"},We={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Ye={class:"flex items-center justify-between mb-4"},et={class:"text-sm text-gray-500 dark:text-gray-400"},tt={class:"overflow-x-auto"},rt={class:"w-full text-sm"},at={class:"px-3 py-2"},st={class:"inline-flex items-center justify-center w-6 h-6 bg-primary/10 text-primary rounded font-medium text-xs"},ot={class:"px-3 py-2"},lt=["onUpdate:modelValue"],dt={class:"px-3 py-2"},it=["onUpdate:modelValue"],nt={class:"px-3 py-2 text-center"},ut={class:"relative inline-flex cursor-pointer items-center"},gt=["onUpdate:modelValue"],yt={class:"flex justify-end gap-3 pt-4"},pt={key:0,class:"flex items-center gap-2"},ct={key:1},mt=de({__name:"ScheduleSettings",setup(N){const v=O(),{periods:w,settings:U,loading:T,loadSettings:s,updatePeriods:c,updateSettings:p,resetCache:f}=_e(),l=_(!1),j=_([]),t=_({snap_to_periods:!0,show_period_numbers:!0,period_duration_minutes:"40",academic_hour_minutes:"40",short_break_minutes:"10"});Z(async()=>{await s(),k()});const k=()=>{j.value=w.value.map(S=>({periodNumber:S.periodNumber,startTime:S.startTime,endTime:S.endTime,isAfterBreak:S.isAfterBreak})),t.value={snap_to_periods:U.value.snap_to_periods==="true",show_period_numbers:U.value.show_period_numbers==="true",period_duration_minutes:U.value.period_duration_minutes||"40",academic_hour_minutes:U.value.academic_hour_minutes||"40",short_break_minutes:U.value.short_break_minutes||"10"}},z=async()=>{l.value=!0;try{const S=await c(j.value),r=[{key:"snap_to_periods",value:t.value.snap_to_periods?"true":"false"},{key:"show_period_numbers",value:t.value.show_period_numbers?"true":"false"},{key:"period_duration_minutes",value:t.value.period_duration_minutes},{key:"academic_hour_minutes",value:t.value.academic_hour_minutes},{key:"short_break_minutes",value:t.value.short_break_minutes}],i=await p(r);if(S&&i)v.show({type:"success",title:"Сохранено",message:"Настройки расписания успешно сохранены"});else throw new Error("Не все настройки удалось сохранить")}catch(S){console.error("Ошибка сохранения:",S),v.show({type:"error",title:"Ошибка",message:S.message||"Не удалось сохранить настройки"})}finally{l.value=!1}},I=()=>{f(),k(),v.show({type:"info",title:"Сброшено",message:"Настройки сброшены к значениям по умолчанию. Не забудьте сохранить."})};return(S,r)=>{const i=ae;return n(),y("div",Ke,[e("div",null,[r[20]||(r[20]=e("h3",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"}," Настройки расписания ",-1)),r[21]||(r[21]=e("p",{class:"mb-6 text-sm text-gray-600 dark:text-gray-400"}," Настройте академические часы и перерывы для учебного расписания ",-1)),u(T)?(n(),y("div",Le,[...r[5]||(r[5]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-solid border-primary border-r-transparent"}),e("span",{class:"text-gray-600 dark:text-gray-400"},"Загрузка настроек...")],-1)])])):(n(),y("div",qe,[e("div",Fe,[r[15]||(r[15]=e("h4",{class:"mb-4 font-medium text-gray-900 dark:text-white"}," Общие настройки ",-1)),e("div",Oe,[e("div",He,[r[7]||(r[7]=e("div",null,[e("h5",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Привязка к парам "),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Привязывать события к академическим часам ")],-1)),e("label",Ge,[g(e("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=x=>u(t).snap_to_periods=x),class:"peer sr-only"},null,512),[[D,u(t).snap_to_periods]]),r[6]||(r[6]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-2 peer-focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-700"},null,-1))])]),e("div",Re,[r[9]||(r[9]=e("div",null,[e("h5",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Показывать номера пар "),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Отображать номера пар в календаре ")],-1)),e("label",Ze,[g(e("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=x=>u(t).show_period_numbers=x),class:"peer sr-only"},null,512),[[D,u(t).show_period_numbers]]),r[8]||(r[8]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-2 peer-focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-700"},null,-1))])]),e("div",Xe,[r[10]||(r[10]=e("label",{class:"block text-sm font-medium text-gray-900 dark:text-white mb-2"}," Длительность ак. часа (мин) ",-1)),g(e("input",{type:"number","onUpdate:modelValue":r[2]||(r[2]=x=>u(t).period_duration_minutes=x),min:"30",max:"60",class:"w-full rounded-lg border border-gray-300 bg-transparent px-3 py-2 text-sm outline-none focus:border-primary dark:border-gray-600 dark:bg-gray-800"},null,512),[[C,u(t).period_duration_minutes]]),r[11]||(r[11]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Для отображения в расписании ",-1))]),e("div",Je,[r[12]||(r[12]=e("label",{class:"block text-sm font-medium text-gray-900 dark:text-white mb-2"}," Академический час для расчета (мин) ",-1)),g(e("input",{type:"number","onUpdate:modelValue":r[3]||(r[3]=x=>u(t).academic_hour_minutes=x),min:"30",max:"60",class:"w-full rounded-lg border border-gray-300 bg-transparent px-3 py-2 text-sm outline-none focus:border-primary dark:border-gray-600 dark:bg-gray-800"},null,512),[[C,u(t).academic_hour_minutes]]),r[13]||(r[13]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Для расчета учебных часов ",-1))]),e("div",Qe,[r[14]||(r[14]=e("label",{class:"block text-sm font-medium text-gray-900 dark:text-white mb-2"}," Перерыв между парами (мин) ",-1)),g(e("input",{type:"number","onUpdate:modelValue":r[4]||(r[4]=x=>u(t).short_break_minutes=x),min:"5",max:"30",class:"w-full rounded-lg border border-gray-300 bg-transparent px-3 py-2 text-sm outline-none focus:border-primary dark:border-gray-600 dark:bg-gray-800"},null,512),[[C,u(t).short_break_minutes]])])])]),e("div",We,[e("div",Ye,[r[16]||(r[16]=e("h4",{class:"font-medium text-gray-900 dark:text-white"}," Академические пары ",-1)),e("span",et,b(u(j).length)+" пар ",1)]),e("div",tt,[e("table",rt,[r[18]||(r[18]=e("thead",null,[e("tr",{class:"border-b border-gray-200 dark:border-gray-600"},[e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400"}," № "),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400"}," Начало "),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400"}," Окончание "),e("th",{class:"px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400"}," После перерыва ")])],-1)),e("tbody",null,[(n(!0),y(q,null,F(u(j),x=>(n(),y("tr",{key:x.periodNumber,class:A(["border-b border-gray-100 dark:border-gray-700",{"bg-yellow-50 dark:bg-yellow-900/20":x.isAfterBreak}])},[e("td",at,[e("span",st,b(x.periodNumber),1)]),e("td",ot,[g(e("input",{type:"time","onUpdate:modelValue":P=>x.startTime=P,class:"rounded border border-gray-300 bg-white px-2 py-1 text-sm outline-none focus:border-primary dark:border-gray-600 dark:bg-gray-800"},null,8,lt),[[C,x.startTime]])]),e("td",dt,[g(e("input",{type:"time","onUpdate:modelValue":P=>x.endTime=P,class:"rounded border border-gray-300 bg-white px-2 py-1 text-sm outline-none focus:border-primary dark:border-gray-600 dark:bg-gray-800"},null,8,it),[[C,x.endTime]])]),e("td",nt,[e("label",ut,[g(e("input",{type:"checkbox","onUpdate:modelValue":P=>x.isAfterBreak=P,class:"peer sr-only"},null,8,gt),[[D,x.isAfterBreak]]),r[17]||(r[17]=e("div",{class:"peer h-5 w-9 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-4 after:w-4 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-warning peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-2 peer-focus:ring-warning/20 dark:border-gray-600 dark:bg-gray-700"},null,-1))])])],2))),128))])])]),r[19]||(r[19]=e("div",{class:"mt-4 flex items-start gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},[e("svg",{class:"w-5 h-5 text-blue-500 mt-0.5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("p",{class:"text-sm text-blue-700 dark:text-blue-300"},' Отметьте "После перерыва" для пар, которые начинаются после большого перерыва (обеда). Это добавит визуальное разделение в календаре. ')],-1))])]))]),e("div",yt,[m(i,{variant:"outline",size:"md",onClick:I,disabled:u(l)},{default:E(()=>[...r[22]||(r[22]=[$(" Сбросить ",-1)])]),_:1},8,["disabled"]),m(i,{variant:"primary",size:"md",onClick:z,disabled:u(l)},{default:E(()=>[u(l)?(n(),y("span",pt,[...r[23]||(r[23]=[e("div",{class:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-white border-r-transparent"},null,-1),$(" Сохранение... ",-1)])])):(n(),y("span",ct,"Сохранить изменения"))]),_:1},8,["disabled"])])])}}}),bt=Object.assign(mt,{__name:"SettingsScheduleSettings"}),xt={class:"space-y-6"},ft={class:"mb-4 flex items-center justify-between"},vt={key:0,class:"flex items-center justify-center py-12"},kt={key:1,class:"rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-boxdark"},ht={class:"overflow-x-auto"},wt={class:"w-full"},_t={class:"divide-y divide-gray-200 dark:divide-gray-700"},$t={class:"px-4 py-3"},Mt={class:"flex items-center gap-2"},Ut={class:"font-medium text-gray-900 dark:text-white"},At={class:"px-4 py-3"},Ct={class:"flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400"},St={class:"px-4 py-3"},jt={class:"text-sm text-gray-600 dark:text-gray-400"},Tt={class:"px-4 py-3 text-center"},Vt={class:"px-4 py-3"},zt={class:"flex items-center justify-end gap-2"},Bt=["onClick"],Et=["onClick","title"],Dt=["onClick"],Pt={key:2,class:"rounded-lg border border-gray-200 bg-gray-50 p-12 text-center dark:border-gray-700 dark:bg-gray-800/50"},It={key:0,class:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-800/50"},Nt={class:"relative inline-flex cursor-pointer items-center"},Kt={class:"flex justify-end gap-3 pt-4"},Lt={__name:"SettingsClassroomSettings",setup(N){const v=O(),{authFetch:w}=ue(),U=_(!1),T=_(!1),s=_([]),c=_(!1),p=_(null),f=_({name:"",capacity:0,description:"",isActive:!0}),l=async()=>{U.value=!0;try{const r=await w("/api/classrooms?activeOnly=false");r.success&&(s.value=r.classrooms)}catch(r){console.error("Error loading classrooms:",r),v.show({type:"error",title:"Ошибка",message:"Не удалось загрузить список аудиторий"})}finally{U.value=!1}},j=()=>{p.value=null,f.value={name:"",capacity:0,description:"",isActive:!0},c.value=!0},t=r=>{p.value=r,f.value={name:r.name,capacity:r.capacity||0,description:r.description||"",isActive:r.isActive},c.value=!0},k=()=>{c.value=!1,p.value=null},z=async()=>{T.value=!0;try{p.value?(await w(`/api/classrooms/${p.value.id}`,{method:"PUT",body:f.value})).success&&(v.show({type:"success",title:"Успешно",message:"Аудитория обновлена"}),await l(),k()):(await w("/api/classrooms",{method:"POST",body:f.value})).success&&(v.show({type:"success",title:"Успешно",message:"Аудитория создана"}),await l(),k())}catch(r){console.error("Error saving classroom:",r),v.show({type:"error",title:"Ошибка",message:p.value?"Не удалось обновить аудиторию":"Не удалось создать аудиторию"})}finally{T.value=!1}},I=async r=>{try{(await w(`/api/classrooms/${r.id}`,{method:"PUT",body:{isActive:!r.isActive}})).success&&(v.show({type:"success",title:"Успешно",message:`Аудитория ${r.isActive?"деактивирована":"активирована"}`}),await l())}catch(i){console.error("Error toggling classroom status:",i),v.show({type:"error",title:"Ошибка",message:"Не удалось изменить статус аудитории"})}},S=async r=>{if(confirm(`Вы уверены, что хотите удалить аудиторию "${r.name}"?`))try{(await w(`/api/classrooms/${r.id}`,{method:"DELETE"})).success&&(v.show({type:"success",title:"Успешно",message:"Аудитория удалена"}),await l())}catch(i){console.error("Error deleting classroom:",i),v.show({type:"error",title:"Ошибка",message:"Не удалось удалить аудиторию. Возможно, она используется в расписании."})}};return Z(()=>{l()}),(r,i)=>{const x=ae,P=$e;return n(),y("div",xt,[e("div",null,[e("div",ft,[i[5]||(i[5]=e("div",null,[e("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Управление аудиториями "),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Настройте список доступных аудиторий для проведения занятий ")],-1)),m(x,{variant:"primary",size:"md",onClick:j},{default:E(()=>[m(u(R),{class:"mr-2 h-4 w-4"}),i[4]||(i[4]=$(" Добавить аудиторию ",-1))]),_:1})]),U.value?(n(),y("div",vt,[...i[6]||(i[6]=[e("div",{class:"flex items-center gap-3"},[e("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-solid border-primary border-r-transparent"}),e("span",{class:"text-gray-600 dark:text-gray-400"},"Загрузка аудиторий...")],-1)])])):s.value.length>0?(n(),y("div",kt,[e("div",ht,[e("table",wt,[i[7]||(i[7]=e("thead",{class:"border-b border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Название "),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Вместимость "),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Описание "),e("th",{class:"px-4 py-3 text-center text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Статус "),e("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," Действия ")])],-1)),e("tbody",_t,[(n(!0),y(q,null,F(s.value,h=>(n(),y("tr",{key:h.id,class:"transition-colors hover:bg-gray-50 dark:hover:bg-gray-800/50"},[e("td",$t,[e("div",Mt,[m(u(re),{class:"h-4 w-4 text-gray-400"}),e("span",Ut,b(h.name),1)])]),e("td",At,[e("div",Ct,[m(u(Me),{class:"h-4 w-4"}),e("span",null,b(h.capacity||0)+" мест",1)])]),e("td",St,[e("span",jt,b(h.description||"—"),1)]),e("td",Tt,[e("span",{class:A(["inline-flex rounded-full px-2 py-1 text-xs font-semibold",h.isActive?"bg-success/10 text-success":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"])},b(h.isActive?"Активна":"Неактивна"),3)]),e("td",Vt,[e("div",zt,[e("button",{onClick:G=>t(h),class:"rounded p-1.5 text-gray-600 transition-colors hover:bg-gray-100 hover:text-primary dark:text-gray-400 dark:hover:bg-gray-700",title:"Редактировать"},[m(u(Ee),{class:"h-4 w-4"})],8,Bt),e("button",{onClick:G=>I(h),class:A(["rounded p-1.5 transition-colors",h.isActive?"text-gray-600 hover:bg-gray-100 hover:text-warning dark:text-gray-400 dark:hover:bg-gray-700":"text-gray-600 hover:bg-gray-100 hover:text-success dark:text-gray-400 dark:hover:bg-gray-700"]),title:h.isActive?"Деактивировать":"Активировать"},[(n(),K(se(h.isActive?u(Ae):u(je)),{class:"h-4 w-4"}))],10,Et),e("button",{onClick:G=>S(h),class:"rounded p-1.5 text-gray-600 transition-colors hover:bg-gray-100 hover:text-danger dark:text-gray-400 dark:hover:bg-gray-700",title:"Удалить"},[m(u(pe),{class:"h-4 w-4"})],8,Dt)])])]))),128))])])])])):(n(),y("div",Pt,[m(u(re),{class:"mx-auto h-12 w-12 text-gray-400"}),i[9]||(i[9]=e("h4",{class:"mt-4 text-lg font-medium text-gray-900 dark:text-white"}," Нет аудиторий ",-1)),i[10]||(i[10]=e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," Добавьте первую аудиторию для проведения занятий ",-1)),m(x,{variant:"primary",size:"md",class:"mt-4",onClick:j},{default:E(()=>[m(u(R),{class:"mr-2 h-4 w-4"}),i[8]||(i[8]=$(" Добавить аудиторию ",-1))]),_:1})]))]),m(P,{"is-open":c.value,title:p.value?"Редактирование аудитории":"Новая аудитория",onClose:k},{default:E(()=>[e("form",{onSubmit:ee(z,["prevent"]),class:"space-y-4"},[e("div",null,[i[11]||(i[11]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[$(" Название аудитории "),e("span",{class:"text-danger"},"*")],-1)),g(e("input",{"onUpdate:modelValue":i[0]||(i[0]=h=>f.value.name=h),type:"text",required:"",placeholder:"Например: Аудитория 101",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 outline-none transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,f.value.name]])]),e("div",null,[i[12]||(i[12]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Вместимость (количество мест) ",-1)),g(e("input",{"onUpdate:modelValue":i[1]||(i[1]=h=>f.value.capacity=h),type:"number",min:"0",placeholder:"0",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 outline-none transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,f.value.capacity,void 0,{number:!0}]])]),e("div",null,[i[13]||(i[13]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Описание ",-1)),g(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=h=>f.value.description=h),rows:"3",placeholder:"Дополнительная информация об аудитории",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 outline-none transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,f.value.description]])]),p.value?(n(),y("div",It,[i[15]||(i[15]=e("div",null,[e("h5",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Активная аудитория"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Доступна для использования в расписании")],-1)),e("label",Nt,[g(e("input",{type:"checkbox","onUpdate:modelValue":i[3]||(i[3]=h=>f.value.isActive=h),class:"peer sr-only"},null,512),[[D,f.value.isActive]]),i[14]||(i[14]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-2 peer-focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-700"},null,-1))])])):V("",!0),e("div",Kt,[m(x,{variant:"outline",size:"md",type:"button",onClick:k},{default:E(()=>[...i[16]||(i[16]=[$(" Отмена ",-1)])]),_:1}),m(x,{variant:"primary",size:"md",type:"submit",loading:T.value},{default:E(()=>[$(b(p.value?"Сохранить":"Создать"),1)]),_:1},8,["loading"])])],32)]),_:1},8,["is-open","title"])])}}},qt={class:"space-y-6"},Ft={key:0,class:"flex items-center justify-center p-8"},Ot={key:1,class:"space-y-6"},Ht={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},Gt={class:"rounded-lg border border-gray-200 bg-linear-to-br from-primary/5 to-primary/10 p-4 dark:border-gray-700 dark:from-primary/10 dark:to-primary/20"},Rt={class:"flex items-center gap-3"},Zt={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/20"},Xt={class:"text-xl font-bold text-gray-900 dark:text-white"},Jt={class:"rounded-lg border border-gray-200 bg-linear-to-br from-success/5 to-success/10 p-4 dark:border-gray-700 dark:from-success/10 dark:to-success/20"},Qt={class:"flex items-center gap-3"},Wt={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-success/20"},Yt={class:"text-xl font-bold text-gray-900 dark:text-white"},er={class:"rounded-lg border border-gray-200 bg-linear-to-br from-warning/5 to-warning/10 p-4 dark:border-gray-700 dark:from-warning/10 dark:to-warning/20"},tr={class:"flex items-center gap-3"},rr={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-warning/20"},ar={class:"text-xl font-bold text-gray-900 dark:text-white"},sr={class:"rounded-lg border border-gray-200 bg-linear-to-br from-danger/5 to-danger/10 p-4 dark:border-gray-700 dark:from-danger/10 dark:to-danger/20"},or={class:"flex items-center gap-3"},lr={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-danger/20"},dr={class:"text-xl font-bold text-gray-900 dark:text-white"},ir={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},nr={class:"flex items-center justify-between mb-4"},ur={key:0,class:"overflow-x-auto"},gr={class:"w-full text-sm"},yr={class:"px-3 py-3"},pr={class:"flex items-center gap-2"},cr={class:"font-medium text-gray-900 dark:text-white"},mr={key:0,class:"ml-2 inline-flex items-center rounded-full bg-primary/20 px-2 py-0.5 text-xs font-medium text-primary"},br={class:"text-xs text-gray-500 dark:text-gray-400 capitalize"},xr={class:"px-3 py-3"},fr={class:"rounded bg-gray-100 px-2 py-1 text-xs dark:bg-gray-700"},vr={class:"px-3 py-3"},kr={class:"text-xs"},hr={class:"px-3 py-3 text-center"},wr={class:"text-xs"},_r={class:"font-medium text-gray-900 dark:text-white"},$r={class:"text-gray-500"},Mr={class:"px-3 py-3 text-center"},Ur={key:0,class:"mt-1 text-xs text-danger"},Ar={class:"px-3 py-3 text-center"},Cr={class:"flex items-center justify-center gap-1"},Sr=["onClick","disabled"],jr=["onClick"],Tr=["onClick"],Vr=["onClick"],zr={key:1,class:"flex flex-col items-center justify-center py-12 text-center"},Br={class:"flex h-16 w-16 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-700 mb-4"},Er={key:0,class:"rounded-lg border border-danger/30 bg-danger/5 p-4 dark:border-danger/30"},Dr={class:"flex items-center gap-2 font-medium text-danger mb-3"},Pr={class:"space-y-2"},Ir={class:"flex items-start justify-between"},Nr={class:"font-medium text-gray-900 dark:text-white"},Kr={class:"text-xs text-gray-500 ml-2"},Lr={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},qr={class:"text-xs text-gray-500"},Fr={key:1,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-800/50"},Or={class:"space-y-3"},Hr={class:"flex items-center justify-between mb-1"},Gr={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},Rr={class:"text-xs text-gray-500"},Zr={class:"h-2 w-full rounded-full bg-gray-200 dark:bg-gray-700"},Xr={class:"flex items-center justify-between mb-6"},Jr={class:"text-xl font-semibold text-gray-900 dark:text-white"},Qr={key:0,class:"mb-4 rounded-lg bg-red-50 p-4 text-sm text-red-800 dark:bg-red-900/50 dark:text-red-300 border border-red-200 dark:border-red-800"},Wr={class:"flex items-center gap-2"},Yr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ea=["placeholder","required"],ta={key:0},ra={class:"grid grid-cols-2 gap-4"},aa={class:"grid grid-cols-2 gap-4"},sa={class:"grid grid-cols-2 gap-4"},oa={class:"flex items-center gap-6"},la={class:"relative inline-flex cursor-pointer items-center"},da={class:"relative inline-flex cursor-pointer items-center"},ia={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},na=["disabled"],ua=de({__name:"AISettings",setup(N){const v=_(!0),w=_(!1),U=_(null),T=_([]),s=_(null),c=_(!1),p=_(null),f=_(null),l=_({provider:"openrouter",apiKeyName:"",apiKey:"",baseUrl:"",visionModel:"openai/gpt-4o",textModel:"openai/gpt-3.5-turbo",maxTokens:1500,temperature:.1,dailyBudgetUsd:null,monthlyBudgetUsd:null,isActive:!0,isDefault:!1}),j=te(()=>c.value||!!p.value),t=te(()=>s.value?.usageByModel?.length?Math.max(...s.value.usageByModel.map(d=>d.totalTokens)):1),{show:k}=O(),z=d=>d>=1e6?`${(d/1e6).toFixed(1)}M`:d>=1e3?`${(d/1e3).toFixed(1)}K`:d.toString(),I=d=>new Date(d).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),S=d=>{switch(d){case"openai":return ge;case"openrouter":return Te;case"anthropic":return le;default:return De}},r=d=>{switch(d){case"openai":return"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400";case"openrouter":return"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400";case"anthropic":return"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400";default:return"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}},i=d=>({rate_limit:"Превышен лимит запросов",insufficient_credits:"Недостаточно кредитов",invalid_key:"Неверный API ключ",model_error:"Ошибка модели",network:"Сетевая ошибка",other:"Другая ошибка"})[d]||d,x=async()=>{v.value=!0;try{const[d,a]=await Promise.all([$fetch("/api/admin/ai-settings"),$fetch("/api/admin/ai-settings/stats")]);T.value=d.data||[],s.value=a.data||null}catch(d){console.error("Failed to load AI settings:",d),k({type:"error",message:d.data?.message||"Ошибка загрузки настроек AI"})}finally{v.value=!1}},P=async d=>{U.value=d.id;try{const o=(await $fetch("/api/admin/ai-settings/test",{method:"POST",body:{settingId:d.id}})).data;o.connected?k({type:"success",message:`Подключение успешно! Ответ за ${o.responseTime}мс`}):k({type:"error",message:o.errorMessage||"Ошибка подключения"})}catch(a){k({type:"error",message:a.data?.message||"Ошибка тестирования"})}finally{U.value=null}},h=d=>{p.value=d,f.value=null,l.value={provider:d.provider,apiKeyName:d.apiKeyName||"",apiKey:"",baseUrl:d.baseUrl||"",visionModel:d.visionModel,textModel:d.textModel,maxTokens:d.maxTokens,temperature:d.temperature,dailyBudgetUsd:d.dailyBudgetUsd,monthlyBudgetUsd:d.monthlyBudgetUsd,isActive:d.isActive,isDefault:d.isDefault}},G=async d=>{try{await $fetch(`/api/admin/ai-settings/${d.id}`,{method:"PUT",body:{isDefault:!0}}),k({type:"success",message:"Настройка установлена по умолчанию"}),await x()}catch(a){k({type:"error",message:a.data?.message||"Ошибка обновления"})}},ce=async d=>{if(confirm("Вы уверены, что хотите удалить эту настройку?"))try{await $fetch(`/api/admin/ai-settings/${d.id}`,{method:"DELETE"}),k({type:"success",message:"Настройка удалена"}),await x()}catch(a){k({type:"error",message:a.data?.message||"Ошибка удаления"})}},H=()=>{c.value=!1,p.value=null,f.value=null,me()},me=()=>{l.value={provider:"openrouter",apiKeyName:"",apiKey:"",baseUrl:"",visionModel:"openai/gpt-4o",textModel:"openai/gpt-3.5-turbo",maxTokens:1500,temperature:.1,dailyBudgetUsd:null,monthlyBudgetUsd:null,isActive:!0,isDefault:!1}},be=async()=>{w.value=!0,f.value=null;try{const d={provider:l.value.provider,apiKeyName:l.value.apiKeyName||void 0,baseUrl:l.value.baseUrl||void 0,visionModel:l.value.visionModel,textModel:l.value.textModel,maxTokens:l.value.maxTokens,temperature:l.value.temperature,dailyBudgetUsd:l.value.dailyBudgetUsd||void 0,monthlyBudgetUsd:l.value.monthlyBudgetUsd||void 0,isActive:l.value.isActive,isDefault:l.value.isDefault};if(l.value.apiKey&&(d.apiKey=l.value.apiKey),p.value)await $fetch(`/api/admin/ai-settings/${p.value.id}`,{method:"PUT",body:d}),k({type:"success",message:"Настройки обновлены"});else{if(!l.value.apiKey){f.value="API ключ обязателен для новой настройки",w.value=!1;return}await $fetch("/api/admin/ai-settings",{method:"POST",body:{...d,apiKey:l.value.apiKey}}),k({type:"success",message:"Настройки созданы"})}H(),v.value=!0,await x()}catch(d){console.error("Save settings error:",d),f.value=d.data?.message||d.message||"Ошибка сохранения настроек",k({type:"error",message:f.value||"Ошибка"})}finally{w.value=!1}};Z(()=>{x()}),xe(()=>{document.body.style.overflow="",document.removeEventListener("keydown",X)}),ie(j,d=>{d?(document.body.style.overflow="hidden",document.addEventListener("keydown",X)):(document.body.style.overflow="",document.removeEventListener("keydown",X))});const X=d=>{d.key==="Escape"&&H()};return(d,a)=>(n(),y("div",qt,[e("div",null,[a[30]||(a[30]=e("h3",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"}," Настройки AI ",-1)),a[31]||(a[31]=e("p",{class:"mb-6 text-sm text-gray-600 dark:text-gray-400"}," Управление API ключами, провайдерами и лимитами использования искусственного интеллекта для обработки сертификатов. ",-1)),v.value?(n(),y("div",Ft,[...a[15]||(a[15]=[e("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"},null,-1),e("span",{class:"ml-3 text-gray-600 dark:text-gray-400"},"Загрузка настроек...",-1)])])):(n(),y("div",Ot,[e("div",Ht,[e("div",Gt,[e("div",Rt,[e("div",Zt,[m(u(le),{class:"h-5 w-5 text-primary"})]),e("div",null,[a[16]||(a[16]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Всего токенов ",-1)),e("p",Xt,b(z(s.value?.totalTokensUsed||0)),1)])])]),e("div",Jt,[e("div",Qt,[e("div",Wt,[m(u(Ve),{class:"h-5 w-5 text-success"})]),e("div",null,[a[17]||(a[17]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Общая стоимость ",-1)),e("p",Yt," $"+b((s.value?.totalCostUsd||0).toFixed(4)),1)])])]),e("div",er,[e("div",tr,[e("div",rr,[m(u(Ue),{class:"h-5 w-5 text-warning"})]),e("div",null,[a[18]||(a[18]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Сегодня",-1)),e("p",ar,b(z(s.value?.tokensUsedToday||0)),1)])])]),e("div",sr,[e("div",or,[e("div",lr,[m(u(Y),{class:"h-5 w-5 text-danger"})]),e("div",null,[a[19]||(a[19]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Ошибок (24ч) ",-1)),e("p",dr,b(s.value?.errorCount24h||0),1)])])])]),e("div",ir,[e("div",nr,[a[21]||(a[21]=e("h4",{class:"font-medium text-gray-900 dark:text-white"}," Конфигурации AI провайдеров ",-1)),e("button",{onClick:a[0]||(a[0]=o=>c.value=!0),class:"inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white transition hover:bg-primary/90"},[m(u(R),{class:"h-4 w-4"}),a[20]||(a[20]=$(" Добавить ",-1))])]),T.value.length>0?(n(),y("div",ur,[e("table",gr,[a[24]||(a[24]=e("thead",null,[e("tr",{class:"border-b border-gray-200 dark:border-gray-600"},[e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400"}," Имя / Провайдер "),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400"}," API Ключ "),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400"}," Модели "),e("th",{class:"px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400"}," Токены "),e("th",{class:"px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400"}," Статус "),e("th",{class:"px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400"}," Действия ")])],-1)),e("tbody",null,[(n(!0),y(q,null,F(T.value,o=>(n(),y("tr",{key:o.id,class:A(["border-b border-gray-100 dark:border-gray-700",{"bg-primary/5 dark:bg-primary/10":o.isDefault}])},[e("td",yr,[e("div",pr,[e("div",{class:A(["flex h-8 w-8 items-center justify-center rounded-lg",r(o.provider)])},[(n(),K(se(S(o.provider)),{class:"h-4 w-4"}))],2),e("div",null,[e("p",cr,[$(b(o.apiKeyName||o.provider)+" ",1),o.isDefault?(n(),y("span",mr," По умолчанию ")):V("",!0)]),e("p",br,b(o.provider),1)])])]),e("td",xr,[e("code",fr,b(o.apiKeyMasked),1)]),e("td",vr,[e("div",kr,[e("p",null,[a[22]||(a[22]=e("span",{class:"text-gray-500"},"Vision:",-1)),$(" "+b(o.visionModel),1)]),e("p",null,[a[23]||(a[23]=e("span",{class:"text-gray-500"},"Text:",-1)),$(" "+b(o.textModel),1)])])]),e("td",hr,[e("div",wr,[e("p",_r,b(z(o.totalTokensUsed)),1),e("p",$r," $"+b(o.totalCostUsd.toFixed(4)),1)])]),e("td",Mr,[e("span",{class:A(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium",o.isActive?"bg-success/20 text-success":"bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400"])},b(o.isActive?"Активен":"Отключен"),3),o.lastErrorAt?(n(),y("p",Ur," Последняя ошибка: "+b(I(o.lastErrorAt)),1)):V("",!0)]),e("td",Ar,[e("div",Cr,[e("button",{onClick:J=>P(o),disabled:U.value===o.id,class:"rounded p-1.5 text-primary hover:bg-primary/10 transition",title:"Тестировать подключение"},[U.value===o.id?(n(),K(u(oe),{key:0,class:"h-4 w-4 animate-spin"})):(n(),K(u(Ne),{key:1,class:"h-4 w-4"}))],8,Sr),e("button",{onClick:J=>h(o),class:"rounded p-1.5 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 transition",title:"Редактировать"},[m(u(Be),{class:"h-4 w-4"})],8,jr),o.isDefault?V("",!0):(n(),y("button",{key:0,onClick:J=>G(o),class:"rounded p-1.5 text-warning hover:bg-warning/10 transition",title:"Сделать по умолчанию"},[m(u(Pe),{class:"h-4 w-4"})],8,Tr)),T.value.length>1?(n(),y("button",{key:1,onClick:J=>ce(o),class:"rounded p-1.5 text-danger hover:bg-danger/10 transition",title:"Удалить"},[m(u(pe),{class:"h-4 w-4"})],8,Vr)):V("",!0)])])],2))),128))])])])):(n(),y("div",zr,[e("div",Br,[m(u(ye),{class:"h-8 w-8 text-gray-400"})]),a[26]||(a[26]=e("h4",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," Нет настроек AI ",-1)),a[27]||(a[27]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"}," Добавьте API ключ для начала работы с AI функциями ",-1)),e("button",{onClick:a[1]||(a[1]=o=>c.value=!0),class:"inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white transition hover:bg-primary/90"},[m(u(R),{class:"h-4 w-4"}),a[25]||(a[25]=$(" Добавить настройку ",-1))])]))]),s.value?.recentErrors&&s.value.recentErrors.length>0?(n(),y("div",Er,[e("h4",Dr,[m(u(Y),{class:"h-5 w-5"}),a[28]||(a[28]=$(" Недавние ошибки API ",-1))]),e("div",Pr,[(n(!0),y(q,null,F(s.value.recentErrors.slice(0,5),o=>(n(),y("div",{key:o.id,class:"rounded-lg bg-white p-3 dark:bg-gray-800 border border-danger/20"},[e("div",Ir,[e("div",null,[e("p",Nr,[$(b(i(o.errorType))+" ",1),e("span",Kr,b(o.errorCode),1)]),e("p",Lr,b(o.errorMessage),1)]),e("span",qr,b(I(o.createdAt)),1)])]))),128))])])):V("",!0),s.value?.usageByModel&&s.value.usageByModel.length>0?(n(),y("div",Fr,[a[29]||(a[29]=e("h4",{class:"font-medium text-gray-900 dark:text-white mb-4"}," Использование по моделям (30 дней) ",-1)),e("div",Or,[(n(!0),y(q,null,F(s.value.usageByModel,o=>(n(),y("div",{key:o.model,class:"relative"},[e("div",Hr,[e("span",Gr,b(o.model),1),e("span",Rr,b(z(o.totalTokens))+" токенов · $"+b(o.totalCost.toFixed(4)),1)]),e("div",Zr,[e("div",{class:"h-2 rounded-full bg-primary transition-all",style:fe({width:`${o.totalTokens/t.value*100}%`})},null,4)])]))),128))])])):V("",!0)]))]),(n(),K(ve,{to:"body"},[j.value?(n(),y("div",{key:0,onClick:H,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4"},[e("div",{onClick:a[14]||(a[14]=ee(()=>{},["stop"])),class:"w-full max-w-lg rounded-xl bg-white p-6 shadow-2xl dark:bg-boxdark mx-auto max-h-[90vh] overflow-y-auto"},[e("div",Xr,[e("h3",Jr,b(p.value?"Редактировать настройку AI":"Добавить настройку AI"),1),e("button",{onClick:H,class:"rounded-lg p-2 hover:bg-gray-100 dark:hover:bg-gray-700"},[m(u(Ie),{class:"h-5 w-5"})])]),f.value?(n(),y("div",Qr,[e("div",Wr,[m(u(Y),{class:"h-4 w-4 shrink-0"}),e("span",null,b(f.value),1)])])):V("",!0),e("form",{onSubmit:ee(be,["prevent"]),class:"space-y-4"},[e("div",null,[a[33]||(a[33]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Провайдер * ",-1)),g(e("select",{"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.provider=o),required:"",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},[...a[32]||(a[32]=[e("option",{value:"openrouter"},"OpenRouter",-1),e("option",{value:"openai"},"OpenAI",-1),e("option",{value:"anthropic"},"Anthropic",-1),e("option",{value:"custom"},"Custom",-1)])],512),[[ne,l.value.provider]])]),e("div",null,[a[34]||(a[34]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Название (опционально) ",-1)),g(e("input",{"onUpdate:modelValue":a[3]||(a[3]=o=>l.value.apiKeyName=o),type:"text",placeholder:"Например: Production Key",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,l.value.apiKeyName]])]),e("div",null,[e("label",Yr," API Ключ "+b(p.value?"(оставьте пустым, чтобы не менять)":"*"),1),g(e("input",{"onUpdate:modelValue":a[4]||(a[4]=o=>l.value.apiKey=o),type:"text",placeholder:p.value?"(Ключ сохранен)":"sk-...",required:!p.value,class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,8,ea),[[C,l.value.apiKey]])]),l.value.provider==="custom"?(n(),y("div",ta,[a[35]||(a[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Base URL * ",-1)),g(e("input",{"onUpdate:modelValue":a[5]||(a[5]=o=>l.value.baseUrl=o),type:"url",placeholder:"https://api.example.com/v1",required:"",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,l.value.baseUrl]])])):V("",!0),e("div",ra,[e("div",null,[a[36]||(a[36]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Vision Model ",-1)),g(e("input",{"onUpdate:modelValue":a[6]||(a[6]=o=>l.value.visionModel=o),type:"text",placeholder:"openai/gpt-4o",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,l.value.visionModel]])]),e("div",null,[a[37]||(a[37]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Text Model ",-1)),g(e("input",{"onUpdate:modelValue":a[7]||(a[7]=o=>l.value.textModel=o),type:"text",placeholder:"openai/gpt-3.5-turbo",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,l.value.textModel]])])]),e("div",aa,[e("div",null,[a[38]||(a[38]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Max Tokens ",-1)),g(e("input",{"onUpdate:modelValue":a[8]||(a[8]=o=>l.value.maxTokens=o),type:"number",min:"100",max:"16000",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,l.value.maxTokens,void 0,{number:!0}]])]),e("div",null,[a[39]||(a[39]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Temperature ",-1)),g(e("input",{"onUpdate:modelValue":a[9]||(a[9]=o=>l.value.temperature=o),type:"number",min:"0",max:"2",step:"0.1",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,l.value.temperature,void 0,{number:!0}]])])]),e("div",sa,[e("div",null,[a[40]||(a[40]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Дневной лимит ($) ",-1)),g(e("input",{"onUpdate:modelValue":a[10]||(a[10]=o=>l.value.dailyBudgetUsd=o),type:"number",min:"0",step:"0.01",placeholder:"Без лимита",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,l.value.dailyBudgetUsd,void 0,{number:!0}]])]),e("div",null,[a[41]||(a[41]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Месячный лимит ($) ",-1)),g(e("input",{"onUpdate:modelValue":a[11]||(a[11]=o=>l.value.monthlyBudgetUsd=o),type:"number",min:"0",step:"0.01",placeholder:"Без лимита",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[C,l.value.monthlyBudgetUsd,void 0,{number:!0}]])])]),e("div",oa,[e("label",la,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[12]||(a[12]=o=>l.value.isActive=o),class:"peer sr-only"},null,512),[[D,l.value.isActive]]),a[42]||(a[42]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-2 peer-focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-700"},null,-1)),a[43]||(a[43]=e("span",{class:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300"},"Активен",-1))]),e("label",da,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[13]||(a[13]=o=>l.value.isDefault=o),class:"peer sr-only"},null,512),[[D,l.value.isDefault]]),a[44]||(a[44]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-warning peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-2 peer-focus:ring-warning/20 dark:border-gray-600 dark:bg-gray-700"},null,-1)),a[45]||(a[45]=e("span",{class:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300"},"По умолчанию",-1))])]),e("div",ia,[e("button",{type:"button",onClick:H,class:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700"}," Отмена "),e("button",{type:"submit",disabled:w.value,class:"inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white transition hover:bg-primary/90 disabled:opacity-50"},[w.value?(n(),K(u(oe),{key:0,class:"h-4 w-4 animate-spin"})):V("",!0),$(" "+b(p.value?"Сохранить":"Создать"),1)],8,na)])],32)])])):V("",!0)]))]))}}),ga=Object.assign(ua,{__name:"SettingsAISettings"}),ya=()=>{const N=Q("user-settings",()=>null),v=Q("user-settings-loading",()=>!1),{authFetch:w}=ue(),U=async()=>{v.value=!0;try{const c=await w("/api/profile/settings");c&&(N.value=c,s(c))}catch(c){console.error("Failed to fetch settings:",c),O().error("Не удалось загрузить настройки")}finally{v.value=!1}},T=async c=>{v.value=!0;try{const p=await w("/api/profile/settings",{method:"PUT",body:c});p&&(N.value=p,s(p),O().success("Настройки сохранены"))}catch(p){console.error("Failed to update settings:",p),O().error("Ошибка при сохранении настроек")}finally{v.value=!1}},s=c=>{const p=Q("dark-mode");if(c.theme==="auto"){const l=window.matchMedia("(prefers-color-scheme: dark)").matches;p.value=l}else p.value=c.theme==="dark";p.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",p.value?"dark":"light"),c.compact_mode?document.documentElement.classList.add("compact-mode"):document.documentElement.classList.remove("compact-mode"),document.documentElement.setAttribute("data-font-size",c.font_size);const f=c.sidebar_color||"default";document.documentElement.setAttribute("data-sidebar-color",f)};return{settings:N,loading:v,fetchSettings:U,updateSettings:T}},pa={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},ca={key:0,class:"flex justify-center p-8"},ma={key:1,class:"flex flex-col gap-6"},ba={class:"rounded-lg bg-gray-50 p-1 dark:bg-gray-800"},xa={class:"flex gap-1","aria-label":"Tabs"},fa=["onClick"],va={class:"flex items-center justify-center gap-2"},ka={class:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white shadow-md dark:bg-boxdark"},ha={class:"p-6"},wa={class:"space-y-6"},_a={class:"space-y-4"},$a={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},Ma={class:"flex justify-end gap-3 pt-4"},Ua={class:"p-6"},Aa={class:"space-y-6"},Ca={class:"space-y-4"},Sa={class:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},ja={class:"relative inline-flex cursor-pointer items-center"},Ta={class:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},Va={class:"relative inline-flex cursor-pointer items-center"},za={class:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},Ba={class:"relative inline-flex cursor-pointer items-center"},Ea={class:"flex justify-end gap-3 pt-4"},Da={class:"p-6"},Pa={class:"space-y-6"},Ia={class:"space-y-4"},Na={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},Ka={class:"grid grid-cols-3 gap-3"},La={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},qa={class:"flex gap-3"},Fa={class:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},Oa={class:"relative inline-flex cursor-pointer items-center"},Ha={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},Ga={class:"flex gap-3"},Ra={class:"flex justify-end gap-3 pt-4"},Za={class:"p-6"},Xa={class:"p-6"},Ja={class:"p-6"},ns={__name:"settings",setup(N){ke({title:"Настройки | TailAdmin - Nuxt Tailwind CSS Dashboard"});const{settings:v,loading:w,fetchSettings:U,updateSettings:T}=ya(),s=_({theme:"light",language:"ru",notifications_email:!0,notifications_push:!0,notifications_sms:!1,compact_mode:!1,font_size:"medium",sidebar_color:"default"}),c=_("general"),{user:p}=he(),f=te(()=>[{id:"general",label:"Общие",icon:ye},{id:"schedule",label:"Расписание",icon:Se,permission:W.SETTINGS_MANAGE},{id:"classrooms",label:"Аудитории",icon:re,permission:W.SETTINGS_MANAGE},{id:"notifications",label:"Уведомления",icon:Ce},{id:"appearance",label:"Внешний вид",icon:ze},{id:"ai",label:"AI Настройки",icon:ge,permission:W.SETTINGS_MANAGE}].filter(t=>t.permission?p.value&&we(p.value.role,t.permission):!0));Z(async()=>{await U()}),ie(v,j=>{j&&(s.value={...j})},{immediate:!0});const l=async()=>{await T(s.value)};return(j,t)=>{const k=ae,z=bt,I=Lt,S=ga;return n(),y("div",pa,[t[49]||(t[49]=e("div",{class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},[e("h2",{class:"text-title-md2 font-bold text-black dark:text-white"}," Настройки ")],-1)),u(w)&&!s.value?(n(),y("div",ca,[...t[15]||(t[15]=[e("div",{class:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"},null,-1)])])):(n(),y("div",ma,[e("div",ba,[e("nav",xa,[(n(!0),y(q,null,F(u(f),r=>(n(),y("button",{key:r.id,onClick:i=>c.value=r.id,class:A(["flex-1 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200",c.value===r.id?"bg-primary text-white shadow-sm":"text-gray-600 hover:bg-white hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"])},[e("span",va,[(n(),K(se(r.icon),{class:"h-5 w-5"})),$(" "+b(r.label),1)])],10,fa))),128))])]),e("div",ka,[g(e("div",ha,[e("div",wa,[e("div",null,[t[19]||(t[19]=e("h3",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"}," Общие настройки ",-1)),e("div",_a,[e("div",$a,[t[17]||(t[17]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Язык интерфейса ",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.value.language=r),class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},[...t[16]||(t[16]=[e("option",{value:"ru"},"Русский",-1),e("option",{value:"en"},"English",-1),e("option",{value:"uz"},"O'zbek",-1)])],512),[[ne,s.value.language]])]),t[18]||(t[18]=e("div",{class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50 opacity-50 cursor-not-allowed"},[e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Часовой пояс (недоступно) "),e("select",{disabled:"",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all dark:border-gray-600 dark:bg-gray-900 dark:text-white"},[e("option",{value:"Asia/Tashkent"},"Asia/Tashkent (UTC+5)")])],-1))])]),e("div",Ma,[m(k,{variant:"primary",size:"md",loading:u(w),onClick:l},{default:E(()=>[...t[20]||(t[20]=[$(" Сохранить изменения ",-1)])]),_:1},8,["loading"])])])],512),[[L,c.value==="general"]]),g(e("div",Ua,[e("div",Aa,[e("div",null,[t[27]||(t[27]=e("h3",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"}," Настройки уведомлений ",-1)),e("div",Ca,[e("div",Sa,[t[22]||(t[22]=e("div",null,[e("h4",{class:"font-medium text-gray-900 dark:text-white"}," Email уведомления "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Получать уведомления на email ")],-1)),e("label",ja,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=r=>s.value.notifications_email=r),class:"peer sr-only"},null,512),[[D,s.value.notifications_email]]),t[21]||(t[21]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-2 peer-focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-700"},null,-1))])]),e("div",Ta,[t[24]||(t[24]=e("div",null,[e("h4",{class:"font-medium text-gray-900 dark:text-white"}," Push уведомления "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Получать push-уведомления в браузере ")],-1)),e("label",Va,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=r=>s.value.notifications_push=r),class:"peer sr-only"},null,512),[[D,s.value.notifications_push]]),t[23]||(t[23]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-2 peer-focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-700"},null,-1))])]),e("div",za,[t[26]||(t[26]=e("div",null,[e("h4",{class:"font-medium text-gray-900 dark:text-white"}," SMS уведомления "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Получать SMS на мобильный телефон ")],-1)),e("label",Ba,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=r=>s.value.notifications_sms=r),class:"peer sr-only"},null,512),[[D,s.value.notifications_sms]]),t[25]||(t[25]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-2 peer-focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-700"},null,-1))])])])]),e("div",Ea,[m(k,{variant:"primary",size:"md",loading:u(w),onClick:l},{default:E(()=>[...t[28]||(t[28]=[$(" Сохранить изменения ",-1)])]),_:1},8,["loading"])])])],512),[[L,c.value==="notifications"]]),g(e("div",Da,[e("div",Pa,[e("div",null,[t[47]||(t[47]=e("h3",{class:"mb-4 text-xl font-semibold text-gray-900 dark:text-white"}," Настройки внешнего вида ",-1)),e("div",Ia,[e("div",Na,[t[35]||(t[35]=e("label",{class:"mb-3 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Тема оформления ",-1)),e("div",Ka,[e("label",{class:A(["flex cursor-pointer flex-col items-center gap-2 rounded-lg border-2 bg-white p-4 transition-all hover:border-primary focus-within:border-primary dark:bg-gray-900",s.value.theme==="light"?"border-primary ring-2 ring-primary/20":"border-gray-300 dark:border-gray-600"])},[g(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=r=>s.value.theme=r),value:"light",class:"peer sr-only"},null,512),[[B,s.value.theme]]),t[29]||(t[29]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-white shadow-md ring-1 ring-gray-200"},[e("svg",{class:"h-6 w-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),t[30]||(t[30]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Светлая",-1))],2),e("label",{class:A(["flex cursor-pointer flex-col items-center gap-2 rounded-lg border-2 bg-white p-4 transition-all hover:border-primary focus-within:border-primary dark:bg-gray-900",s.value.theme==="dark"?"border-primary ring-2 ring-primary/20":"border-gray-300 dark:border-gray-600"])},[g(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=r=>s.value.theme=r),value:"dark",class:"peer sr-only"},null,512),[[B,s.value.theme]]),t[31]||(t[31]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-gray-900 shadow-md ring-1 ring-gray-600"},[e("svg",{class:"h-6 w-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})])],-1)),t[32]||(t[32]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Темная",-1))],2),e("label",{class:A(["flex cursor-pointer flex-col items-center gap-2 rounded-lg border-2 bg-white p-4 transition-all hover:border-primary focus-within:border-primary dark:bg-gray-900",s.value.theme==="auto"?"border-primary ring-2 ring-primary/20":"border-gray-300 dark:border-gray-600"])},[g(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=r=>s.value.theme=r),value:"auto",class:"peer sr-only"},null,512),[[B,s.value.theme]]),t[33]||(t[33]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-linear-to-br from-white to-gray-900 shadow-md ring-1 ring-gray-400"},[e("svg",{class:"h-6 w-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})])],-1)),t[34]||(t[34]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Авто",-1))],2)])]),e("div",La,[t[39]||(t[39]=e("label",{class:"mb-3 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Размер шрифта ",-1)),e("div",qa,[e("label",{class:A(["flex flex-1 cursor-pointer items-center justify-center rounded-lg border-2 bg-white px-4 py-3 transition-all hover:border-primary focus-within:border-primary dark:bg-gray-900",s.value.font_size==="small"?"border-primary ring-2 ring-primary/20":"border-gray-300 dark:border-gray-600"])},[g(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=r=>s.value.font_size=r),value:"small",class:"peer sr-only"},null,512),[[B,s.value.font_size]]),t[36]||(t[36]=e("span",{class:"text-xs font-medium text-gray-700 dark:text-gray-300"},"Маленький",-1))],2),e("label",{class:A(["flex flex-1 cursor-pointer items-center justify-center rounded-lg border-2 bg-white px-4 py-3 transition-all hover:border-primary focus-within:border-primary dark:bg-gray-900",s.value.font_size==="medium"?"border-primary ring-2 ring-primary/20":"border-gray-300 dark:border-gray-600"])},[g(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=r=>s.value.font_size=r),value:"medium",class:"peer sr-only"},null,512),[[B,s.value.font_size]]),t[37]||(t[37]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Средний",-1))],2),e("label",{class:A(["flex flex-1 cursor-pointer items-center justify-center rounded-lg border-2 bg-white px-4 py-3 transition-all hover:border-primary focus-within:border-primary dark:bg-gray-900",s.value.font_size==="large"?"border-primary ring-2 ring-primary/20":"border-gray-300 dark:border-gray-600"])},[g(e("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=r=>s.value.font_size=r),value:"large",class:"peer sr-only"},null,512),[[B,s.value.font_size]]),t[38]||(t[38]=e("span",{class:"text-base font-medium text-gray-700 dark:text-gray-300"},"Большой",-1))],2)])]),e("div",Fa,[t[41]||(t[41]=e("div",null,[e("h4",{class:"font-medium text-gray-900 dark:text-white"}," Компактный режим "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Уменьшить отступы и размеры элементов ")],-1)),e("label",Oa,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=r=>s.value.compact_mode=r),class:"peer sr-only"},null,512),[[D,s.value.compact_mode]]),t[40]||(t[40]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:ring-2 peer-focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-700"},null,-1))])]),e("div",Ha,[t[46]||(t[46]=e("label",{class:"mb-3 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Цвет боковой панели ",-1)),e("div",Ga,[e("label",{class:A(["flex h-12 w-12 cursor-pointer items-center justify-center rounded-lg border-2 bg-white transition-all hover:border-primary focus-within:border-primary",s.value.sidebar_color==="default"?"border-primary ring-2 ring-primary/20":"border-gray-300"])},[g(e("input",{type:"radio","onUpdate:modelValue":t[11]||(t[11]=r=>s.value.sidebar_color=r),value:"default",class:"peer sr-only"},null,512),[[B,s.value.sidebar_color]]),t[42]||(t[42]=e("div",{class:"h-8 w-8 rounded-md bg-gray-900 ring-2 ring-gray-300 peer-checked:ring-primary"},null,-1))],2),e("label",{class:A(["flex h-12 w-12 cursor-pointer items-center justify-center rounded-lg border-2 bg-white transition-all hover:border-primary focus-within:border-primary",s.value.sidebar_color==="primary"?"border-primary ring-2 ring-primary/20":"border-gray-300"])},[g(e("input",{type:"radio","onUpdate:modelValue":t[12]||(t[12]=r=>s.value.sidebar_color=r),value:"primary",class:"peer sr-only"},null,512),[[B,s.value.sidebar_color]]),t[43]||(t[43]=e("div",{class:"h-8 w-8 rounded-md bg-primary ring-2 ring-gray-300 peer-checked:ring-primary"},null,-1))],2),e("label",{class:A(["flex h-12 w-12 cursor-pointer items-center justify-center rounded-lg border-2 bg-white transition-all hover:border-primary focus-within:border-primary",s.value.sidebar_color==="success"?"border-primary ring-2 ring-primary/20":"border-gray-300"])},[g(e("input",{type:"radio","onUpdate:modelValue":t[13]||(t[13]=r=>s.value.sidebar_color=r),value:"success",class:"peer sr-only"},null,512),[[B,s.value.sidebar_color]]),t[44]||(t[44]=e("div",{class:"h-8 w-8 rounded-md bg-success ring-2 ring-gray-300 peer-checked:ring-primary"},null,-1))],2),e("label",{class:A(["flex h-12 w-12 cursor-pointer items-center justify-center rounded-lg border-2 bg-white transition-all hover:border-primary focus-within:border-primary",s.value.sidebar_color==="purple"?"border-primary ring-2 ring-primary/20":"border-gray-300"])},[g(e("input",{type:"radio","onUpdate:modelValue":t[14]||(t[14]=r=>s.value.sidebar_color=r),value:"purple",class:"peer sr-only"},null,512),[[B,s.value.sidebar_color]]),t[45]||(t[45]=e("div",{class:"h-8 w-8 rounded-md bg-purple-600 ring-2 ring-gray-300 peer-checked:ring-primary"},null,-1))],2)])])])]),e("div",Ra,[m(k,{variant:"primary",size:"md",loading:u(w),onClick:l},{default:E(()=>[...t[48]||(t[48]=[$(" Применить изменения ",-1)])]),_:1},8,["loading"])])])],512),[[L,c.value==="appearance"]]),g(e("div",Za,[m(z)],512),[[L,c.value==="schedule"]]),g(e("div",Xa,[m(I)],512),[[L,c.value==="classrooms"]]),g(e("div",Ja,[m(S)],512),[[L,c.value==="ai"]])])]))])}}};export{ns as default};
