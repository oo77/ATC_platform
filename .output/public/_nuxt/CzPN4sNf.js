import{_ as C}from"./BMofnORk.js";import{u as M,r as m,C as S,g as T,c as d,a as r,m as f,z as U,x as i,d as p,D as q,n as y,E as k,A as h,b as B,w as L,F as D,j as F,o as l,t as n}from"./GLV6bXvn.js";import{u as N}from"./DlZaGH1J.js";import{u as g}from"./DVL-QcDc.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const A={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},E={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},H={class:"lg:col-span-2 space-y-6"},P={class:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white shadow-md dark:bg-boxdark"},R={class:"p-6"},O={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},G={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},I={class:"flex gap-3"},J={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},K={class:"rounded-lg border border-gray-200 bg-gray-50 p-4 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"},Q={class:"flex justify-end gap-3 pt-2"},W={class:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white shadow-md dark:bg-boxdark"},X={class:"p-6"},Y={key:0,class:"flex justify-center p-4"},Z={key:1,class:"text-center text-gray-500 py-4"},$={key:2,class:"space-y-4"},rr={class:"flex justify-between items-start"},er={class:"font-bold text-gray-900 dark:text-white"},tr={class:"text-sm text-gray-500"},ar={class:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2"},sr={class:"flex gap-2 text-xs mt-2"},or={class:"px-2 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"},dr={class:"px-2 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 capitalize"},br={__name:"support",setup(ir){M({title:"Поддержка | TailAdmin - Nuxt Tailwind CSS Dashboard"});const c=m(!1),b=m(!1),u=m([]),a=S({ticket_type:"",priority:"medium",subject:"",description:""}),{authFetch:v}=N(),x=async()=>{b.value=!0;try{const s=await v("/api/support/tickets");s&&(u.value=s)}catch(s){console.error("Failed to fetch tickets:",s)}finally{b.value=!1}},w=async()=>{if(!a.ticket_type){g().error("Выберите тип обращения");return}if(!a.subject||a.subject.length<3){g().error("Тема должна содержать минимум 3 символа");return}if(!a.description||a.description.length<10){g().error("Описание должно содержать минимум 10 символов");return}c.value=!0;try{await v("/api/support/tickets",{method:"POST",body:a}),g().success("Обращение успешно отправлено"),a.ticket_type="",a.priority="medium",a.subject="",a.description="",await x()}catch(s){if(console.error("Failed to submit ticket:",s),s.response?._data?.data){const e=s.response._data.data;if(Array.isArray(e)){e.forEach(o=>{let t=o.message;o.code==="too_small"&&(o.path.includes("subject")&&(t="Тема слишком короткая"),o.path.includes("description")&&(t="Описание слишком короткое")),g().error(t)});return}}g().error("Ошибка при отправке обращения")}finally{c.value=!1}},_=s=>new Date(s).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),j=s=>({new:"Новое",in_progress:"В работе",resolved:"Решено",closed:"Закрыто"})[s]||s,V=s=>({technical:"Техническая",question:"Вопрос",feature:"Предложение",bug:"Ошибка",other:"Другое"})[s]||s,z=s=>({low:"Низкий",medium:"Средний",high:"Высокий"})[s]||s;return T(()=>{x()}),(s,e)=>{const o=C;return l(),d("div",A,[e[19]||(e[19]=r("div",{class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},[r("h2",{class:"text-title-md2 font-bold text-black dark:text-white"}," Поддержка ")],-1)),r("div",E,[r("div",H,[r("div",P,[e[15]||(e[15]=r("div",{class:"border-b border-gray-200 dark:border-gray-700 px-6 py-4"},[r("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Обратиться в поддержку "),r("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Опишите вашу проблему, и мы постараемся помочь вам как можно скорее ")],-1)),r("div",R,[r("form",{onSubmit:U(w,["prevent"]),class:"space-y-5"},[r("div",O,[e[7]||(e[7]=r("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[p(" Тип обращения "),r("span",{class:"text-danger"},"*")],-1)),i(r("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.ticket_type=t),required:"",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},[...e[6]||(e[6]=[f('<option value="" disabled>Выберите тип обращения</option><option value="technical">Техническая проблема</option><option value="question">Общий вопрос</option><option value="feature">Предложение по улучшению</option><option value="bug">Сообщить об ошибке</option><option value="other">Другое</option>',6)])],512),[[q,a.ticket_type]])]),r("div",G,[e[11]||(e[11]=r("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Приоритет ",-1)),r("div",I,[r("label",{class:y(["flex flex-1 cursor-pointer items-center justify-center rounded-lg border-2 bg-white px-4 py-2.5 transition-all hover:border-success focus-within:border-success dark:bg-gray-900",a.priority==="low"?"border-success ring-1 ring-success":"border-gray-300 dark:border-gray-600"])},[i(r("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=t=>a.priority=t),value:"low",class:"peer sr-only"},null,512),[[k,a.priority]]),e[8]||(e[8]=r("span",{class:"text-sm font-medium text-gray-700 peer-checked:text-success dark:text-gray-300"},"Низкий",-1))],2),r("label",{class:y(["flex flex-1 cursor-pointer items-center justify-center rounded-lg border-2 bg-white px-4 py-2.5 transition-all hover:border-warning focus-within:border-warning dark:bg-gray-900",a.priority==="medium"?"border-warning ring-1 ring-warning":"border-gray-300 dark:border-gray-600"])},[i(r("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=t=>a.priority=t),value:"medium",class:"peer sr-only"},null,512),[[k,a.priority]]),e[9]||(e[9]=r("span",{class:"text-sm font-medium text-gray-700 peer-checked:text-warning dark:text-gray-300"},"Средний",-1))],2),r("label",{class:y(["flex flex-1 cursor-pointer items-center justify-center rounded-lg border-2 bg-white px-4 py-2.5 transition-all hover:border-danger focus-within:border-danger dark:bg-gray-900",a.priority==="high"?"border-danger ring-1 ring-danger":"border-gray-300 dark:border-gray-600"])},[i(r("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=t=>a.priority=t),value:"high",class:"peer sr-only"},null,512),[[k,a.priority]]),e[10]||(e[10]=r("span",{class:"text-sm font-medium text-gray-700 peer-checked:text-danger dark:text-gray-300"},"Высокий",-1))],2)])]),r("div",J,[e[12]||(e[12]=r("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[p(" Тема обращения "),r("span",{class:"text-danger"},"*")],-1)),i(r("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>a.subject=t),required:"",placeholder:"Кратко опишите проблему",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[h,a.subject]])]),r("div",K,[e[13]||(e[13]=r("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},[p(" Подробное описание "),r("span",{class:"text-danger"},"*")],-1)),i(r("textarea",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.description=t),required:"",rows:"6",placeholder:"Опишите вашу проблему максимально подробно...",class:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-gray-900 transition-all focus:border-primary focus:ring-2 focus:ring-primary/20 dark:border-gray-600 dark:bg-gray-900 dark:text-white"},null,512),[[h,a.description]])]),r("div",Q,[B(o,{variant:"primary",size:"md",type:"submit",loading:c.value},{default:L(()=>[...e[14]||(e[14]=[p(" Отправить обращение ",-1)])]),_:1},8,["loading"])])],32)])]),r("div",W,[r("div",{class:"border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center"},[e[16]||(e[16]=r("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Мои обращения ",-1)),r("button",{onClick:x,class:"text-sm text-primary hover:underline"}," Обновить ")]),r("div",X,[b.value?(l(),d("div",Y,[...e[17]||(e[17]=[r("div",{class:"h-6 w-6 animate-spin rounded-full border-2 border-solid border-primary border-t-transparent"},null,-1)])])):u.value.length===0?(l(),d("div",Z," У вас пока нет обращений ")):(l(),d("div",$,[(l(!0),d(D,null,F(u.value,t=>(l(),d("div",{key:t.id,class:"flex flex-col gap-2 rounded-lg border border-gray-200 p-4 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"},[r("div",rr,[r("div",null,[r("h4",er,n(t.subject),1),r("p",tr,n(_(t.created_at)),1)]),r("span",{class:y([{"bg-blue-100 text-blue-800":t.status==="new","bg-yellow-100 text-yellow-800":t.status==="in_progress","bg-green-100 text-green-800":t.status==="resolved","bg-gray-100 text-gray-800":t.status==="closed"},"px-2.5 py-0.5 rounded-full text-xs font-medium"])},n(j(t.status)),3)]),r("p",ar,n(t.description),1),r("div",sr,[r("span",or,n(V(t.ticket_type)),1),r("span",dr," Приоритет: "+n(z(t.priority)),1)])]))),128))]))])])]),e[18]||(e[18]=f('<div class="space-y-6"><div class="rounded-lg border border-gray-200 dark:border-gray-700 bg-white shadow-md dark:bg-boxdark"><div class="border-b border-gray-200 dark:border-gray-700 px-6 py-4"><h3 class="text-lg font-semibold text-gray-900 dark:text-white"> Контактная информация </h3></div><div class="p-6 space-y-4"><div class="flex items-start gap-3 rounded-lg border border-gray-200 bg-gray-50 p-3 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"><div class="flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10"><svg class="h-5 w-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><div class="flex-1"><p class="text-sm font-medium text-gray-900 dark:text-white">Email</p><a href="mailto:support@atc.uz" class="text-sm text-primary hover:underline"> support@atc.uz </a></div></div><div class="flex items-start gap-3 rounded-lg border border-gray-200 bg-gray-50 p-3 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"><div class="flex h-10 w-10 items-center justify-center rounded-lg bg-success/10"><svg class="h-5 w-5 text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg></div><div class="flex-1"><p class="text-sm font-medium text-gray-900 dark:text-white">Телефон</p><a href="tel:+998901234567" class="text-sm text-success hover:underline"> +998 (90) 123-45-67 </a></div></div><div class="flex items-start gap-3 rounded-lg border border-gray-200 bg-gray-50 p-3 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"><div class="flex h-10 w-10 items-center justify-center rounded-lg bg-warning/10"><svg class="h-5 w-5 text-warning" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="flex-1"><p class="text-sm font-medium text-gray-900 dark:text-white">Время работы</p><p class="text-sm text-gray-600 dark:text-gray-400"> Пн-Пт: 9:00 - 18:00 </p></div></div></div></div><div class="rounded-lg border border-gray-200 dark:border-gray-700 bg-white shadow-md dark:bg-boxdark"><div class="border-b border-gray-200 dark:border-gray-700 px-6 py-4"><h3 class="text-lg font-semibold text-gray-900 dark:text-white"> Часто задаваемые вопросы </h3></div><div class="p-6 space-y-3"><div class="rounded-lg border border-gray-200 bg-gray-50 p-3 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"><h4 class="mb-1 text-sm font-medium text-gray-900 dark:text-white"> Как сбросить пароль? </h4><p class="text-xs text-gray-600 dark:text-gray-400"> Обратитесь к администратору системы. </p></div><div class="rounded-lg border border-gray-200 bg-gray-50 p-3 transition-all hover:border-primary/50 dark:border-gray-700 dark:bg-gray-800/50"><h4 class="mb-1 text-sm font-medium text-gray-900 dark:text-white"> Где мои результаты тестов? </h4><p class="text-xs text-gray-600 dark:text-gray-400"> В разделе &quot;Мои тесты&quot; в личном кабинете. </p></div></div></div></div>',1))])])}}};export{br as default};
