import{v as ge,r as y,f as O,c as u,b as E,a as e,i as s,n as U,t as c,d as w,h as j,w as S,x as X,A as te,H as W,F as Z,j as ee,o as d,q as me,D as Te,k as ce,T as Pe,K as Oe,B as qe,Q as We,g as Ye,m as Ee,al as Je,E as Ge}from"./GLV6bXvn.js";import{_ as xe}from"./BMofnORk.js";import{_ as Xe}from"./BKg9m4wI.js";import{_ as fe}from"./CyDLpZDf.js";import{u as ye}from"./DlZaGH1J.js";import{u as be}from"./DVL-QcDc.js";import{T as Ke,L as Qe}from"./D-2Cuf-m.js";import{L as Ze}from"./BFBOxgT2.js";import{E as et,a as tt}from"./BylynD0E.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";import"./CVqvr-Q5.js";const st={class:"inline-block"},rt={key:0,class:"w-10 h-8 flex items-center justify-center text-gray-300 dark:text-gray-600",title:"–ù–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —ç—Ç–æ–º –∑–∞–Ω—è—Ç–∏–∏"},at={key:1,class:"flex flex-col items-center gap-1"},nt=["disabled","title"],lt=["disabled","title"],ot={key:0,class:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-red-500",title:"–ï—Å—Ç—å –ø–µ—Ä–µ—Å–¥–∞—á–∞"},dt={key:1,class:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-blue-500",title:"–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∏–∑ —Ç–µ—Å—Ç–∞"},it={key:2,class:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-purple-500",title:"–û—Ü–µ–Ω–∫–∞ –±—ã–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∞"},ut=["disabled","title"],ct={class:"space-y-4"},gt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},pt={class:"flex items-center gap-2"},vt=["max"],mt={class:"flex gap-2 mt-3"},xt=["onClick"],ft={class:"flex justify-end gap-3 pt-4"},yt={class:"space-y-4"},bt={class:"flex flex-wrap gap-2 mt-3"},kt=["onClick"],ht={key:0,class:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},wt={class:"flex justify-end gap-3 pt-4"},_t={class:"space-y-4"},Ct={class:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4"},$t={class:"flex items-center justify-between"},Mt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Et={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},Gt={class:"flex justify-end gap-3 pt-4"},Tt=ge({__name:"AttendanceCell",props:{cell:{},column:{},studentId:{},isRetakeTarget:{type:Boolean},replacementGrade:{},readOnly:{type:Boolean}},emits:["update","requireApproval"],setup(p,{emit:l}){const n=p,b=l,{authFetch:C}=ye(),$=be(),_=y(!1),F=y(!1),G=y(!1),v=y(!1),x=y(0),B=y(""),A=y(0),T=y(""),z=y(null),h=O(()=>n.column.scheduleEvent.academicHours),m=O(()=>{const g=h.value,a=[0,g];return g>=2&&(a.push(g/2),a.push(g-.5)),[...new Set(a)].sort((P,se)=>P-se)}),R=O(()=>{if(!n.cell.attendance)return"‚Äî";const g=n.cell.attendance.hoursAttended;return g===0?"0":g===h.value?"‚úì":g.toString()}),K=O(()=>{if(!n.cell.attendance)return"bg-gray-100 dark:bg-gray-700 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600";const g=n.cell.attendance.hoursAttended,a=n.cell.attendance.maxHours,P=g/a*100;return P>=100?"bg-success/20 text-success hover:bg-success/30":P>0?"bg-warning/20 text-warning hover:bg-warning/30":"bg-danger/20 text-danger hover:bg-danger/30"}),D=O(()=>{if(!n.cell.attendance)return"–û—Ç–º–µ—Ç–∏—Ç—å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å";const g=n.cell.attendance;let a=`${g.hoursAttended} –∏–∑ ${g.maxHours} –∞-—á`;return g.notes&&(a+=`
${g.notes}`),a}),ae=O(()=>n.cell.grade?n.cell.grade.grade.toString():"‚Äî"),Y=O(()=>{if(!n.cell.grade)return"bg-gray-100 dark:bg-gray-700 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600";const g=n.cell.grade.grade;return n.cell.grade.isModified?"bg-purple-200 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 hover:bg-purple-300 dark:hover:bg-purple-800/50 ring-1 ring-purple-400":g>=60?"bg-success/20 text-success hover:bg-success/30":g>=40?"bg-warning/20 text-warning hover:bg-warning/30":"bg-danger/20 text-danger hover:bg-danger/30"}),J=O(()=>{if(!n.cell.grade)return"–í—ã—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É";const g=n.cell.grade;let a=`–û—Ü–µ–Ω–∫–∞: ${g.grade}`;return n.isRetakeTarget&&n.replacementGrade!==null&&n.replacementGrade!==void 0&&(a+=`
üîÑ –ü–µ—Ä–µ—Å–¥–∞–Ω–æ. –ù–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞: ${n.replacementGrade}`),g.isFromTest&&!g.isModified&&(a+=`
ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∏–∑ —Ç–µ—Å—Ç–∞`),g.isModified&&g.originalGrade!==null&&g.originalGrade!==void 0&&(a+=`
‚úèÔ∏è –ò–∑–º–µ–Ω–µ–Ω–∞ (–∏–∑ —Ç–µ—Å—Ç–∞: ${g.originalGrade})`),g.notes&&(a+=`
${g.notes}`),a}),Q=()=>{x.value=n.cell.attendance?.hoursAttended??h.value,B.value=n.cell.attendance?.notes??"",_.value=!0},f=()=>{A.value=n.cell.grade?.grade??0,T.value=n.cell.grade?.notes??"",F.value=!0},L=async()=>{if(x.value<0||x.value>h.value){$.error(`–ß–∞—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç 0 –¥–æ ${h.value}`);return}v.value=!0;try{const g=await C("/api/attendance",{method:"POST",body:{studentId:n.studentId,scheduleEventId:n.column.scheduleEvent.id,hoursAttended:x.value,maxHours:h.value,notes:B.value||void 0}});if(g.requiresApproval){_.value=!1,$.warning(g.message||"–°—Ä–æ–∫ –æ—Ç–º–µ—Ç–∫–∏ –∏—Å—Ç—ë–∫. –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"),b("requireApproval",{scheduleEventId:n.column.scheduleEvent.id,message:g.message});return}g.success?($.success("–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞"),_.value=!1,b("update",{studentId:n.studentId,scheduleEventId:n.column.scheduleEvent.id,type:"attendance"})):$.error(g.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}catch(g){if(g?.statusCode===403||g?.status===403){const a=g.data?.message||g.message||"–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω";if(a.includes("–æ–¥–æ–±—Ä–µ–Ω–∏–µ")||a.includes("–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏–µ")){_.value=!1,$.warning(a),b("requireApproval",{scheduleEventId:n.column.scheduleEvent.id,message:a});return}}$.error(g.data?.message||g.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}finally{v.value=!1}},V=async(g=!1)=>{if(A.value<0||A.value>100){$.error("–û—Ü–µ–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0 –¥–æ 100");return}v.value=!0;try{const a=await C("/api/grades",{method:"POST",body:{studentId:n.studentId,scheduleEventId:n.column.scheduleEvent.id,grade:A.value,notes:T.value||void 0,confirmModify:g}});if(a.requireConfirmation){z.value=A.value,F.value=!1,G.value=!0,v.value=!1;return}a.success?($.success("–û—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞"),F.value=!1,G.value=!1,b("update",{studentId:n.studentId,scheduleEventId:n.column.scheduleEvent.id,type:"grade"})):$.error(a.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}catch(a){$.error(a.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}finally{v.value=!1}},I=async()=>{z.value!==null&&(A.value=z.value,await V(!0),z.value=null)},H=()=>{G.value=!1,z.value=null};return(g,a)=>{const P=xe,se=fe;return d(),u("div",st,[p.cell.isHidden?(d(),u("div",rt," ‚Äî ")):p.column.hasGrade?(d(),u("div",at,[e("button",{class:U(["w-10 h-6 rounded text-xs font-medium transition-all",[s(K),{"opacity-70 cursor-not-allowed":p.readOnly}]]),disabled:p.readOnly,onClick:Q,title:p.readOnly?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ (–ê—Ä—Ö–∏–≤ –∏–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤)":s(D)},c(s(R)),11,nt),e("button",{class:U(["w-10 h-6 rounded text-xs font-medium transition-all relative",[s(Y),{"line-through opacity-70":p.isRetakeTarget&&p.replacementGrade!==null,"opacity-70 cursor-not-allowed":p.readOnly}]]),disabled:p.readOnly,onClick:f,title:p.readOnly?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ (–ê—Ä—Ö–∏–≤ –∏–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤)":s(J)},[w(c(s(ae))+" ",1),p.isRetakeTarget&&p.replacementGrade!==null?(d(),u("span",ot)):n.cell.grade?.isFromTest&&!n.cell.grade?.isModified?(d(),u("span",dt)):n.cell.grade?.isModified?(d(),u("span",it)):j("",!0)],10,lt)])):(d(),u("button",{key:2,class:U(["w-10 h-8 rounded text-xs font-medium transition-all",[s(K),{"opacity-70 cursor-not-allowed":p.readOnly}]]),disabled:p.readOnly,onClick:Q,title:p.readOnly?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ (–ê—Ä—Ö–∏–≤ –∏–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤)":s(D)},c(s(R)),11,ut)),E(se,{"is-open":s(_),title:"–û—Ç–º–µ—Ç–∫–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏",onClose:a[3]||(a[3]=i=>_.value=!1)},{default:S(()=>[e("div",ct,[e("div",null,[e("label",gt," –ü–æ—Å–µ—â—ë–Ω–Ω—ã–µ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ —á–∞—Å—ã (–∏–∑ "+c(s(h))+") ",1),e("div",pt,[X(e("input",{"onUpdate:modelValue":a[0]||(a[0]=i=>W(x)?x.value=i:null),type:"number",step:"0.5",min:"0",max:s(h),class:"flex-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-4 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},null,8,vt),[[te,s(x),void 0,{number:!0}]]),a[9]||(a[9]=e("span",{class:"text-gray-500"},"–∞-—á",-1))]),e("div",mt,[(d(!0),u(Z,null,ee(s(m),i=>(d(),u("button",{key:i,class:U(["px-3 py-1.5 rounded-lg border text-sm font-medium transition-colors",s(x)===i?"bg-primary text-white border-primary":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"]),onClick:re=>x.value=i},c(i),11,xt))),128))])]),e("div",null,[a[10]||(a[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) ",-1)),X(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>W(B)?B.value=i:null),type:"text",placeholder:"–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏ —Ç.–¥.",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-4 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},null,512),[[te,s(B)]])]),e("div",ft,[E(P,{variant:"outline",onClick:a[2]||(a[2]=i=>_.value=!1)},{default:S(()=>[...a[11]||(a[11]=[w(" –û—Ç–º–µ–Ω–∞ ",-1)])]),_:1}),E(P,{loading:s(v),onClick:L},{default:S(()=>[...a[12]||(a[12]=[w(" –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["is-open"]),E(se,{"is-open":s(F),title:"–í—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏",onClose:a[8]||(a[8]=i=>F.value=!1)},{default:S(()=>[e("div",yt,[e("div",null,[a[13]||(a[13]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –û—Ü–µ–Ω–∫–∞ (0-100) ",-1)),X(e("input",{"onUpdate:modelValue":a[4]||(a[4]=i=>W(A)?A.value=i:null),type:"number",min:"0",max:"100",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-4 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},null,512),[[te,s(A),void 0,{number:!0}]]),e("div",bt,[(d(),u(Z,null,ee([100,90,80,70,60,50,40],i=>e("button",{key:i,class:U(["px-3 py-1.5 rounded-lg border text-sm font-medium transition-colors",s(A)===i?"bg-primary text-white border-primary":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"]),onClick:re=>A.value=i},c(i),11,kt)),64))])]),e("div",null,[a[14]||(a[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) ",-1)),X(e("input",{"onUpdate:modelValue":a[5]||(a[5]=i=>W(T)?T.value=i:null),type:"text",placeholder:"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –æ—Ü–µ–Ω–∫–µ",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-4 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},null,512),[[te,s(T)]])]),n.cell.grade?.isFromTest&&!n.cell.grade?.isModified?(d(),u("div",ht,[...a[15]||(a[15]=[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-5 h-5 text-blue-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("p",{class:"text-sm text-blue-700 dark:text-blue-300"}," –≠—Ç–∞ –æ—Ü–µ–Ω–∫–∞ –±—ã–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∏—Å—Ö–æ–¥–Ω–∞—è –æ—Ü–µ–Ω–∫–∞. ")],-1)])])):j("",!0),e("div",wt,[E(P,{variant:"outline",onClick:a[6]||(a[6]=i=>F.value=!1)},{default:S(()=>[...a[16]||(a[16]=[w(" –û—Ç–º–µ–Ω–∞ ",-1)])]),_:1}),E(P,{loading:s(v),onClick:a[7]||(a[7]=()=>V())},{default:S(()=>[...a[17]||(a[17]=[w(" –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["is-open"]),E(se,{"is-open":s(G),title:"–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏",onClose:H},{default:S(()=>[e("div",_t,[a[23]||(a[23]=e("div",{class:"p-4 bg-warning/10 rounded-lg border border-warning/30"},[e("div",{class:"flex items-start gap-3"},[e("svg",{class:"w-6 h-6 text-warning shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("div",null,[e("h4",{class:"font-medium text-warning mb-1"},"–í–Ω–∏–º–∞–Ω–∏–µ!"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," –í—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –æ—Ü–µ–Ω–∫—É –∏–∑ —Ç–µ—Å—Ç–∞. ")])])],-1)),e("div",Ct,[e("div",$t,[e("div",null,[a[18]||(a[18]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," –¢–µ–∫—É—â–∞—è –æ—Ü–µ–Ω–∫–∞ (–∏–∑ —Ç–µ—Å—Ç–∞) ",-1)),e("p",Mt,c(n.cell.grade?.grade),1)]),a[20]||(a[20]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})],-1)),e("div",null,[a[19]||(a[19]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," –ù–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ ",-1)),e("p",Et,c(s(z)),1)])])]),a[24]||(a[24]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," –ò—Å—Ö–æ–¥–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏. –ò–∑–º–µ–Ω—ë–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –±—É–¥–µ—Ç –æ—Ç–º–µ—á–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º —Ü–≤–µ—Ç–æ–º. ",-1)),e("div",Gt,[E(P,{variant:"outline",onClick:H},{default:S(()=>[...a[21]||(a[21]=[w(" –û—Ç–º–µ–Ω–∞ ",-1)])]),_:1}),E(P,{variant:"warning",loading:s(v),onClick:I},{default:S(()=>[...a[22]||(a[22]=[w(" –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["is-open"])])}}}),It=Object.assign(Tt,{__name:"AttendanceCell"}),St={class:"inline-block"},Rt=["disabled","title"],Ft={class:"space-y-4"},Bt={key:0,class:"p-3 rounded-lg bg-warning/10 border border-warning/30"},jt={class:"flex items-start gap-2"},At={class:"text-xs text-warning/80 mt-1"},Vt={class:"flex justify-end gap-3 pt-4"},Dt=ge({__name:"FinalGradeCell",props:{finalGrade:{},studentId:{},groupId:{},disciplineId:{},attendancePercent:{},readOnly:{type:Boolean}},emits:["update"],setup(p,{emit:l}){const n=p,b=l,{authFetch:C}=ye(),$=be(),_=y(!1),F=y(!1),G=y(void 0),v=y("in_progress"),x=y(""),B=O(()=>{if(!n.finalGrade)return"‚Äî";const h=n.finalGrade;return h.finalGrade!==void 0?h.finalGrade.toString():{in_progress:"...",passed:"‚úì",failed:"‚úó",not_allowed:"–ù/–î"}[h.status]}),A=O(()=>{if(!n.finalGrade)return"bg-gray-100 dark:bg-gray-700 text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600";const h=n.finalGrade;switch(h.status){case"passed":return"bg-success/20 text-success hover:bg-success/30";case"failed":return"bg-danger/20 text-danger hover:bg-danger/30";case"not_allowed":return"bg-gray-200 dark:bg-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-gray-500";default:return h.finalGrade!==void 0?h.finalGrade>=60?"bg-success/20 text-success hover:bg-success/30":"bg-warning/20 text-warning hover:bg-warning/30":"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 hover:bg-blue-200 dark:hover:bg-blue-900/50"}}),T=O(()=>{if(!n.finalGrade)return"–í—ã—Å—Ç–∞–≤–∏—Ç—å –∏—Ç–æ–≥–æ–≤—É—é –æ—Ü–µ–Ω–∫—É";const h=n.finalGrade;let R=`–°—Ç–∞—Ç—É—Å: ${{in_progress:"–í –ø—Ä–æ—Ü–µ—Å—Å–µ",passed:"–°–¥–∞–Ω–æ",failed:"–ù–µ —Å–¥–∞–Ω–æ",not_allowed:"–ù–µ –¥–æ–ø—É—â–µ–Ω"}[h.status]}`;return h.finalGrade!==void 0&&(R=`–û—Ü–µ–Ω–∫–∞: ${h.finalGrade}
${R}`),h.notes&&(R+=`
${h.notes}`),R});me(_,h=>{h&&(G.value=n.finalGrade?.finalGrade,v.value=n.finalGrade?.status||"in_progress",x.value=n.finalGrade?.notes||"",n.attendancePercent<75&&!n.finalGrade&&(v.value="not_allowed"))});const z=async()=>{if(G.value!==void 0&&(G.value<0||G.value>100)){$.error("–û—Ü–µ–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0 –¥–æ 100");return}F.value=!0;try{const h=await C("/api/final-grades",{method:"POST",body:{studentId:n.studentId,groupId:n.groupId,disciplineId:n.disciplineId,finalGrade:G.value,status:v.value,notes:x.value||void 0}});h.success?($.success("–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞"),_.value=!1,b("update")):$.error(h.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}catch(h){$.error(h.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}finally{F.value=!1}};return(h,m)=>{const R=xe,K=fe;return d(),u("div",St,[e("button",{class:U(["px-3 py-1 rounded text-sm font-medium transition-all",[s(A),{"opacity-70 cursor-not-allowed":p.readOnly}]]),disabled:p.readOnly,onClick:m[0]||(m[0]=D=>_.value=!0),title:p.readOnly?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ (–ê—Ä—Ö–∏–≤ –∏–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤)":s(T)},c(s(B)),11,Rt),E(K,{"is-open":s(_),title:"–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞",onClose:m[5]||(m[5]=D=>_.value=!1)},{default:S(()=>[e("div",Ft,[p.attendancePercent<75?(d(),u("div",Bt,[e("div",jt,[m[7]||(m[7]=e("svg",{class:"w-5 h-5 text-warning shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("div",null,[m[6]||(m[6]=e("p",{class:"text-sm font-medium text-warning"},"–ù–∏–∑–∫–∞—è –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å",-1)),e("p",At," –ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å "+c(p.attendancePercent.toFixed(1))+"% (–º–∏–Ω–∏–º—É–º 75%) ",1)])])])):j("",!0),e("div",null,[m[8]||(m[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ (0-100) ",-1)),X(e("input",{"onUpdate:modelValue":m[1]||(m[1]=D=>W(G)?G.value=D:null),type:"number",min:"0",max:"100",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-4 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},null,512),[[te,s(G),void 0,{number:!0}]])]),e("div",null,[m[10]||(m[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –°—Ç–∞—Ç—É—Å ",-1)),X(e("select",{"onUpdate:modelValue":m[2]||(m[2]=D=>W(v)?v.value=D:null),class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-4 py-2.5 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},[...m[9]||(m[9]=[e("option",{value:"in_progress"},"–í –ø—Ä–æ—Ü–µ—Å—Å–µ",-1),e("option",{value:"passed"},"–°–¥–∞–Ω–æ",-1),e("option",{value:"failed"},"–ù–µ —Å–¥–∞–Ω–æ",-1),e("option",{value:"not_allowed"},"–ù–µ –¥–æ–ø—É—â–µ–Ω",-1)])],512),[[Te,s(v)]])]),e("div",null,[m[11]||(m[11]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) ",-1)),X(e("textarea",{"onUpdate:modelValue":m[3]||(m[3]=D=>W(x)?x.value=D:null),rows:"2",placeholder:"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-4 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50 resize-none"},null,512),[[te,s(x)]])]),e("div",Vt,[E(R,{variant:"outline",onClick:m[4]||(m[4]=D=>_.value=!1)},{default:S(()=>[...m[12]||(m[12]=[w(" –û—Ç–º–µ–Ω–∞ ",-1)])]),_:1}),E(R,{loading:s(F),onClick:z},{default:S(()=>[...m[13]||(m[13]=[w(" –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["is-open"])])}}}),zt=Object.assign(Dt,{__name:"AttendanceFinalGradeCell"}),Ut={key:0,class:"fixed inset-0 z-999 flex items-center justify-center p-4"},Lt={class:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full p-6 animate-[fadeIn_0.2s_ease-out]"},Ht={class:"flex items-start gap-4 mb-4"},Nt={class:"text-lg font-semibold text-gray-900 dark:text-white"},Pt={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},Ot={class:"text-sm"},qt={class:"text-sm mt-1"},Wt={class:"text-sm mt-1"},Yt={class:"mb-4"},Jt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Xt={key:0,class:"text-red-500"},Kt=["placeholder"],Qt={key:0,class:"text-xs text-red-500 mt-1"},Zt={class:"flex gap-3 justify-end"},es=["disabled"],ts={key:0,class:"flex items-center gap-2"},ss={key:1},rs=ge({__name:"LateMarkingModal",props:{modelValue:{type:Boolean},eventTitle:{},eventDate:{},deadline:{},status:{}},emits:["update:modelValue","confirm","request-approval","cancel"],setup(p,{emit:l}){const n=p,b=l,C=y(""),$=y(!1);function _(A){return A?new Date(A).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"‚Äî"}function F(){if(n.status==="late")b("confirm",C.value);else{if(!C.value.trim()||C.value.trim().length<10)return;b("request-approval",C.value)}G()}function G(){b("update:modelValue",!1),b("cancel"),C.value=""}const v=O(()=>n.status==="late"),x=O(()=>n.status==="requires_approval"),B=O(()=>v.value?!0:C.value.trim().length>=10);return(A,T)=>(d(),ce(Oe,{to:"body"},[E(Pe,{"enter-active-class":"transition-opacity duration-200","leave-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:S(()=>[p.modelValue?(d(),u("div",Ut,[e("div",{class:"absolute inset-0 bg-black/50",onClick:G}),e("div",Lt,[e("div",Ht,[e("div",{class:U([s(v)?"bg-yellow-100 dark:bg-yellow-900/30":"bg-red-100 dark:bg-red-900/30","shrink-0 w-12 h-12 rounded-full flex items-center justify-center"])},[(d(),ce(qe(s(v)?s(Ke):s(Ze)),{class:U([s(v)?"text-yellow-600":"text-red-600","w-6 h-6"])},null,8,["class"]))],2),e("div",null,[e("h3",Nt,c(s(v)?"‚ö†Ô∏è –°—Ä–æ–∫ –æ—Ç–º–µ—Ç–∫–∏ –∏—Å—Ç—ë–∫":"üîí –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏–µ"),1),e("p",Pt,c(s(v)?'–û—Ç–º–µ—Ç–∫–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å –ø–æ–º–µ—Ç–∫–æ–π "–û–ø–æ–∑–¥–∞–Ω–∏–µ"':"–î–ª—è –æ—Ç–º–µ—Ç–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"),1)])]),e("div",{class:U([s(v)?"bg-yellow-50 dark:bg-yellow-900/20":"bg-red-50 dark:bg-red-900/20","rounded-lg p-4 mb-4"])},[e("p",Ot,[T[1]||(T[1]=e("strong",null,"–ó–∞–Ω—è—Ç–∏–µ:",-1)),w(" "+c(p.eventTitle),1)]),e("p",qt,[T[2]||(T[2]=e("strong",null,"–î–∞—Ç–∞:",-1)),w(" "+c(_(p.eventDate)),1)]),e("p",Wt,[T[3]||(T[3]=e("strong",null,"–î–µ–¥–ª–∞–π–Ω –±—ã–ª:",-1)),w(" "+c(_(p.deadline)),1)])],2),e("div",Yt,[e("label",Jt,[w(c(s(x)?"–ü—Ä–∏—á–∏–Ω–∞ –æ–ø–æ–∑–¥–∞–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)":"–ü—Ä–∏—á–∏–Ω–∞ –æ–ø–æ–∑–¥–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)")+" ",1),s(x)?(d(),u("span",Xt,"*")):j("",!0)]),X(e("textarea",{"onUpdate:modelValue":T[0]||(T[0]=z=>W(C)?C.value=z:null),rows:"3",placeholder:s(x)?"–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ–ø–æ–∑–¥–∞–Ω–∏—è —Å –æ—Ç–º–µ—Ç–∫–æ–π (–º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤)...":"–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ...",class:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent placeholder-gray-400 dark:placeholder-gray-500"},null,8,Kt),[[te,s(C)]]),s(x)&&s(C).length>0&&s(C).length<10?(d(),u("p",Qt," –ú–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤ (—Å–µ–π—á–∞—Å: "+c(s(C).length)+") ",1)):j("",!0)]),e("div",Zt,[e("button",{onClick:G,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors"}," –û—Ç–º–µ–Ω–∞ "),e("button",{onClick:F,disabled:!s(B)||s($),class:U([s(v)?"bg-yellow-600 hover:bg-yellow-700 disabled:bg-yellow-400":"bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400","px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors disabled:cursor-not-allowed"])},[s($)?(d(),u("span",ts,[E(s(Qe),{class:"w-4 h-4 animate-spin"}),T[4]||(T[4]=w(" –û—Ç–ø—Ä–∞–≤–∫–∞... ",-1))])):(d(),u("span",ss,c(s(v)?"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—Ç–º–µ—Ç–∫—É":"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å"),1))],10,es)])])])):j("",!0)]),_:1})]))}}),as=Object.assign(rs,{__name:"AttendanceLateMarkingModal"}),ns={theory:"—Ç",practice:"–ø—Ä",assessment:"–ø–∑",other:"–¥—Ä"};async function ue(p){const n=await(await fetch(p)).arrayBuffer();let b="";const C=new Uint8Array(n),$=C.byteLength;for(let _=0;_<$;_++){const F=C[_];b+=String.fromCharCode(F??0)}return window.btoa(b)}function ve(p){if(!p)return"";const l=new Date(p),n=String(l.getDate()).padStart(2,"0"),b=String(l.getMonth()+1).padStart(2,"0"),C=l.getFullYear();return`${n}.${b}.${C}`}function ls(p){const l=new Date(p),n=String(l.getDate()).padStart(2,"0"),b=String(l.getMonth()+1).padStart(2,"0");return`${n}.${b}`}async function os(p){const l=new et({orientation:"landscape",unit:"mm",format:"a4"});try{const f=await ue("https://raw.githubusercontent.com/JulietaUla/Montserrat/master/fonts/ttf/Montserrat-Regular.ttf"),L=await ue("https://raw.githubusercontent.com/JulietaUla/Montserrat/master/fonts/ttf/Montserrat-Bold.ttf"),V=await ue("https://raw.githubusercontent.com/JulietaUla/Montserrat/master/fonts/ttf/Montserrat-Italic.ttf");l.addFileToVFS("Montserrat-Regular.ttf",f),l.addFont("Montserrat-Regular.ttf","Montserrat","normal"),l.addFileToVFS("Montserrat-Bold.ttf",L),l.addFont("Montserrat-Bold.ttf","Montserrat","bold"),l.addFileToVFS("Montserrat-Italic.ttf",V),l.addFont("Montserrat-Italic.ttf","Montserrat","italic"),l.setFont("Montserrat","normal")}catch(f){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —à—Ä–∏—Ñ—Ç–∞:",f)}let n=null;try{n=await ue("/logo.png")}catch(f){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ—Ç–∏–ø–∞:",f)}const b=l.internal.pageSize.getWidth(),C=15,$=[0,0,0];let _=C;if(n)try{const f=l.getImageProperties(n),L=50,V=f.height*L/f.width;l.addImage(n,"PNG",C,_,L,V)}catch(f){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ –ª–æ–≥–æ—Ç–∏–ø–∞:",f),l.addImage(n,"PNG",C,_,50,30)}l.setFontSize(14),l.setFont("Montserrat","bold"),l.setTextColor(...$),l.text("–ó–ê–ß–ï–¢–ù–ê–Ø –í–ï–î–û–ú–û–°–¢–¨",b/2,_+15,{align:"center"}),_+=35,l.setFontSize(9),l.setTextColor(...$);const F=C,G=b/2,v=40,x=90;let B=_;if(p.courseName){l.setFont("Montserrat","bold"),l.text("–£—á–µ–±–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞:",F,B),l.setFont("Montserrat","normal");const f=l.splitTextToSize(p.courseName,x);l.text(f,F+v,B),B+=Math.max(f.length*4,5)}l.setFont("Montserrat","bold"),l.text("–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞:",F,B),l.setFont("Montserrat","normal");const A=l.splitTextToSize(p.disciplineName,x);l.text(A,F+v,B),B+=Math.max(A.length*4,5),l.setFont("Montserrat","bold"),l.text("–ì—Ä—É–ø–ø–∞:",F,B),l.setFont("Montserrat","normal");const T=l.splitTextToSize(p.groupCode,x);l.text(T,F+v,B),B+=5;let z=_;l.setFont("Montserrat","bold"),l.text("–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:",G,z),l.setFont("Montserrat","normal");const h=l.splitTextToSize(p.instructorName||"–ù–µ —É–∫–∞–∑–∞–Ω",x);l.text(h,G+v,z),z+=Math.max(h.length*4,5),p.startDate&&p.endDate&&(l.setFont("Montserrat","bold"),l.text("–ü–µ—Ä–∏–æ–¥:",G,z),l.setFont("Montserrat","normal"),l.text(`${ve(p.startDate)} ‚Äî ${ve(p.endDate)}`,G+v,z),z+=5),_=Math.max(B,z)+5;const m=[{content:"‚Ññ"},{content:"–§–ò–û —Å–ª—É—à–∞—Ç–µ–ª—è"}];p.columns.forEach(f=>{const L=ls(f.scheduleEvent.date),V=f.scheduleEvent.isRetake?"–ø–µ—Ä":ns[f.scheduleEvent.eventType]||"";m.push({content:`${L} ${V}`})}),m.push({content:`–ü–æ—Å–µ—â.
%`}),m.push({content:`–°—Ä.
–±–∞–ª–ª`}),m.push({content:"–ò—Ç–æ–≥",styles:{fontStyle:"bold"}});const R=[];p.rows.forEach((f,L)=>{const V=[L+1,f.student.fullName];f.cells.forEach(H=>{if(H.isHidden)V.push("-");else{let g="";H.attendance&&(g=`${H.attendance.hoursAttended}`),H.grade&&(g&&(g+="/"),g+=`${H.grade.grade}`),V.push(g||"")}}),V.push(f.attendancePercent.toFixed(0)),V.push(f.averageGrade?f.averageGrade.toFixed(1):"-");const I=f.finalGrade?.finalGrade?f.finalGrade.finalGrade.toString():"-";V.push(I),R.push(V)}),tt(l,{head:[m],body:R,startY:_,theme:"grid",styles:{font:"Montserrat",fontSize:8,cellPadding:1,lineColor:[0,0,0],textColor:[0,0,0],lineWidth:.1,halign:"center",valign:"middle"},headStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontStyle:"bold",lineWidth:.1,lineColor:[0,0,0],valign:"middle",minCellHeight:10},columnStyles:{0:{cellWidth:10},1:{cellWidth:50,halign:"left",overflow:"linebreak"}},didDrawCell:f=>{}});let D=l.lastAutoTable.finalY+5;l.setFontSize(7),l.setFont("Montserrat","normal"),l.text("* –û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è: —Ç - —Ç–µ–æ—Ä–∏—è, –ø—Ä - –ø—Ä–∞–∫—Ç–∏–∫–∞, –ø–∑ - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞–Ω–∏–π, –ø–µ—Ä - –ø–µ—Ä–µ—Å–¥–∞—á–∞. –í —è—á–µ–π–∫–∞—Ö: –ß–∞—Å—ã / –û—Ü–µ–Ω–∫–∞.",C,D),D+=15,l.setDrawColor(0,0,0),l.setLineWidth(.2),l.line(C,D,C+60,D),l.setFontSize(9),l.setFont("Montserrat","normal"),l.text(`–ò–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: ${p.instructorName||""}`,C,D+5);const J=ve(new Date().toISOString());l.text(`–î–∞—Ç–∞: ${J}`,b-C,D+5,{align:"right"});const Q=`Vedomost_${p.groupCode}.pdf`;l.save(Q)}const ds={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},is={key:0,class:"flex items-center justify-center min-h-[400px]"},us={key:1,class:"flex items-center justify-center min-h-[400px]"},cs={class:"text-center"},gs={class:"mt-2 text-gray-500 dark:text-gray-400"},ps={class:"mb-6"},vs={class:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-4"},ms={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},xs={class:"flex items-center gap-4"},fs={class:"text-2xl font-bold text-black dark:text-white"},ys={class:"text-gray-500 dark:text-gray-400"},bs={key:0},ks={class:"flex items-center gap-3"},hs={class:"hidden lg:flex items-center gap-4 bg-gray-100 dark:bg-gray-800 rounded-lg px-4 py-2"},ws={class:"text-center"},_s={class:"text-lg font-bold text-gray-900 dark:text-white"},Cs={class:"text-center"},$s={class:"text-lg font-bold text-gray-900 dark:text-white"},Ms={class:"text-center"},Es={key:0,class:"relative inline-block"},Gs=["disabled"],Ts={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Is={key:1,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},Ss={class:"hidden sm:inline"},Rs={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-boxdark rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50"},Fs={key:0,class:"rounded-xl bg-white dark:bg-boxdark shadow-md p-12 text-center"},Bs={key:1,class:"rounded-xl bg-white dark:bg-boxdark shadow-md p-4 mb-4"},js={class:"flex flex-wrap items-center gap-4"},As=["value"],Vs={key:0,class:"flex items-center gap-2"},Ds={key:0,class:"text-gray-400"},zs={key:1,class:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"},Us={key:2,class:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"},Ls={key:3,class:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"},Hs={key:4,class:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},Ns={class:"flex gap-2"},Ps={key:0,class:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800"},Os={key:1,class:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800"},qs={key:2,class:"rounded-xl bg-white dark:bg-boxdark shadow-md overflow-hidden"},Ws={class:"overflow-x-auto"},Ys={class:"w-full min-w-max"},Js={class:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},Xs={class:"flex flex-col items-center gap-1"},Ks={class:"flex items-center gap-1"},Qs={key:0,class:"inline-flex items-center justify-center w-4 h-4 text-[8px] font-bold bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded",title:"–†–µ–∂–∏–º –ø–µ—Ä–µ—Å–¥–∞—á–∏"},Zs={class:"text-xs"},er={class:"text-[10px] text-gray-400"},tr={class:"divide-y divide-gray-200 dark:divide-gray-700"},sr={class:"sticky left-0 z-10 bg-white dark:bg-boxdark px-4 py-3"},rr={class:"flex items-center gap-3"},ar={class:"shrink-0 flex h-8 w-8 items-center justify-center rounded-full bg-success/10 text-success text-sm font-semibold"},nr=["title"],lr={class:"px-4 py-3 text-center bg-gray-50 dark:bg-gray-800/30"},or={class:"px-4 py-3 text-center bg-gray-50 dark:bg-gray-800/30"},dr={key:0,class:"text-sm font-medium text-gray-900 dark:text-white"},ir={key:1,class:"text-gray-400"},ur={class:"px-4 py-3 text-center bg-gray-50 dark:bg-gray-800/30"},cr={class:"space-y-4"},gr={key:0},pr={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},vr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},mr={class:"flex items-center gap-2"},xr=["max"],fr={class:"flex gap-2 mt-3"},yr={class:"pt-4 border-t border-gray-200 dark:border-gray-700 mt-4"},br={class:"text-sm text-gray-500 dark:text-gray-400"},kr={key:0,class:"text-purple-600 dark:text-purple-400 font-medium"},hr={key:0,class:"mt-3"},wr={class:"max-h-32 overflow-y-auto bg-purple-50 dark:bg-purple-900/20 rounded-lg p-2 border border-purple-200 dark:border-purple-800"},_r={class:"space-y-1"},Cr={class:"flex justify-end gap-3 pt-4"},$r={class:"space-y-4"},Mr={key:0},Er={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},Gr={class:"flex flex-wrap gap-2 mt-3"},Tr=["onClick"],Ir={class:"pt-4 border-t border-gray-200 dark:border-gray-700 mt-4"},Sr={class:"text-sm text-gray-500 dark:text-gray-400"},Rr={key:0,class:"text-purple-600 dark:text-purple-400 font-medium"},Fr={key:0,class:"mt-3"},Br={class:"max-h-32 overflow-y-auto bg-purple-50 dark:bg-purple-900/20 rounded-lg p-2 border border-purple-200 dark:border-purple-800"},jr={class:"space-y-1"},Ar={class:"flex justify-end gap-3 pt-4"},Vr={class:"space-y-4"},Dr={class:"text-sm text-gray-600 dark:text-gray-400"},zr={class:"font-medium text-gray-900 dark:text-white"},Ur={class:"space-y-3"},Lr={class:"space-y-2"},Hr={key:0,class:"space-y-2"},Nr={class:"flex flex-wrap gap-2"},Pr=["onClick"],Or={class:"space-y-2"},qr={class:"flex items-center gap-3"},Wr={class:"text-sm text-gray-500 dark:text-gray-400"},Yr={class:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4"},Jr={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},Xr={class:"max-h-48 overflow-y-auto bg-gray-50 dark:bg-gray-800 rounded-lg p-3"},Kr={class:"space-y-2"},Qr={class:"text-gray-900 dark:text-white"},Zr={class:"flex items-center gap-2"},ea={class:"flex justify-end gap-3 pt-4"},pa=ge({__name:"[slug]",setup(p){const l=We(),{authFetch:n}=ye(),b=be(),C=O(()=>l.params.slug),$=O(()=>C.value?.split("_")[0]||""),_=O(()=>C.value?.split("_")[1]||""),F=y(!0),G=y(null),v=y([]),x=y([]),B=y(null),A=y(""),T=y(""),z=y(""),h=y(""),m=y(!1),R=y(""),K=y(!1),D=y(!1),ae=y(!1),Y=y(!1),J=y(0),Q=y(0),f=y("average"),L=y(100),V=y(60),I=y(null),H=y(!1),g=y(""),a=y(!1),P=y(!1),se=y(!1),i=O(()=>v.value.find(o=>o.scheduleEvent.id===R.value)),re=async()=>{if(F.value=!0,G.value=null,!$.value||!_.value){G.value="–ù–µ–≤–µ—Ä–Ω—ã–π URL –∂—É—Ä–Ω–∞–ª–∞",F.value=!1;return}try{const o=await n(`/api/attendance/journal?groupId=${$.value}&disciplineId=${_.value}`);o.success?(v.value=o.columns,x.value=o.rows,B.value=o.summary):G.value=o.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∂—É—Ä–Ω–∞–ª–∞"}catch(o){console.error("Error loading journal:",o),G.value=o.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∂—É—Ä–Ω–∞–ª–∞"}finally{F.value=!1}},ke=async()=>{if(!(!$.value||!_.value))try{const o=await n(`/api/groups/${$.value}`);o.success&&o.group&&(A.value=o.group.code,m.value=!!o.group.isArchived,o.group.course?.name&&(z.value=o.group.course.name));const t=await n(`/api/groups/${$.value}/disciplines`);if(t.success&&t.disciplines){const k=t.disciplines.find(M=>M.id===_.value);if(k){if(T.value=k.name,k.instructors&&k.instructors.length>0){const M=[...k.instructors].sort((r,q)=>(q.isPrimary?1:0)-(r.isPrimary?1:0)),N=M.slice(0,2).map(r=>r.fullName);M.length>2?h.value=`${N.join(", ")} –∏ –µ—â—ë ${M.length-2}`:h.value=N.join(", ")}}else T.value="–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞"}}catch(o){console.error("Error loading meta:",o),T.value="–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞"}},oe=o=>new Date(o).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"}),de=(o,t)=>{const k=new Date(o),M=new Date(t),N=k.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),r=M.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"});return`${N}-${r}`},Ie=o=>{const t=o.split(" "),k=t[0]??"",M=t[1]??"";return k.length>0&&M.length>0?(k.charAt(0)+M.charAt(0)).toUpperCase():o.substring(0,2).toUpperCase()},he=o=>o>=75?"text-success bg-success/10":o>=50?"text-warning bg-warning/10":"text-danger bg-danger/10",we=(o,t)=>{const k=v.value.filter(q=>q.scheduleEvent.originalEventId===t);if(k.length===0)return{isRetakeTarget:!1,replacementGrade:null};const M=x.value.find(q=>q.student.id===o);if(!M)return{isRetakeTarget:!1,replacementGrade:null};let N=null,r=null;return k.forEach(q=>{const ne=v.value.findIndex(Ne=>Ne.scheduleEvent.id===q.scheduleEvent.id);if(ne===-1)return;const ie=M.cells[ne];ie&&ie.grade&&!ie.isHidden&&(!r||q.scheduleEvent.date>=r)&&(N=ie.grade.grade,r=q.scheduleEvent.date)}),N!==null?{isRetakeTarget:!0,replacementGrade:N}:{isRetakeTarget:!0,replacementGrade:null}},Se=async o=>{await re()},Re=o=>{R.value=o.scheduleEventId,I.value&&(I.value.status="requires_approval",I.value.requiresApproval=!0),H.value=!0},Fe=async()=>{await re()},Be=()=>{se.value=!se.value},_e=async(o="pdf")=>{if(!P.value){se.value=!1;try{P.value=!0;const t=v.value.map(r=>r.scheduleEvent.date).sort(),k=t[0],M=t[t.length-1],N={groupCode:A.value,disciplineName:T.value,courseName:z.value,instructorName:h.value,columns:v.value,rows:x.value,startDate:k,endDate:M};if(o==="pdf")await os(N);else{const{generateGroupReportDocx:r}=await Je(async()=>{const{generateGroupReportDocx:q}=await import("./D0i-plLZ.js");return{generateGroupReportDocx:q}},[],import.meta.url);await r(N)}try{await n("/api/reports/log-download",{method:"POST",body:{reportType:"group_report",format:o,groupCode:A.value,groupId:$.value,disciplineName:T.value}})}catch(r){console.error("Failed to log download:",r)}b.success(`–í–µ–¥–æ–º–æ—Å—Ç—å —É—Å–ø–µ—à–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞ (${o.toUpperCase()})`)}catch(t){console.error("Error generating report:",t),b.error(t.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–µ–¥–æ–º–æ—Å—Ç–∏")}finally{P.value=!1}}},je=()=>{i.value&&(J.value=i.value.scheduleEvent.academicHours,K.value=!0)},Ae=()=>{i.value&&(Q.value=100,D.value=!0)},Ce=async()=>{if(!R.value){I.value=null;return}a.value=!0;try{const o=await n(`/api/attendance/marking/check/${R.value}`);o.success&&(I.value=o.access)}catch(o){console.error("Error checking access:",o),I.value={allowed:!0,status:"allowed",deadline:"",lateDeadline:""}}finally{a.value=!1}};me(R,()=>{Ce()});const Ve=async o=>{g.value=o,H.value=!1,await pe(o)},De=async o=>{try{const t=await n("/api/attendance/marking/requests",{method:"POST",body:{scheduleEventId:R.value,reason:o}});t.success&&(b.success(t.message),H.value=!1)}catch(t){b.error(t.data?.message||"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞")}},pe=async o=>{if(!i.value||Y.value)return;const t=i.value.scheduleEvent.academicHours;if(J.value<0||J.value>t){b.error(`–ß–∞—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç 0 –¥–æ ${t}`);return}Y.value=!0;try{const M=(i.value.scheduleEvent.isRetake&&i.value.scheduleEvent.allowedStudentIds?x.value.filter(r=>i.value.scheduleEvent.allowedStudentIds.includes(r.student.id)):x.value).map(r=>({studentId:r.student.id,hoursAttended:J.value})),N=await n("/api/attendance",{method:"POST",body:{bulk:!0,scheduleEventId:R.value,maxHours:t,attendances:M,lateReason:o}});N.success?(b.success(`–û—Ç–º–µ—á–µ–Ω–æ ${N.count||M.length} –∑–∞–ø–∏—Å–µ–π`),K.value=!1,await re(),await Ce()):b.error(N.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}catch(k){if(k?.statusCode===403||k?.status===403){const M=k.data?.message||k.message||"–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω";if(M.includes("–æ–¥–æ–±—Ä–µ–Ω–∏–µ")||M.includes("–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏–µ")){b.warning(M),K.value=!1,H.value=!0,I.value&&(I.value.status="requires_approval",I.value.requiresApproval=!0);return}b.error(M)}else b.error(k.data?.message||k.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}finally{Y.value=!1}},ze=async()=>{if(I.value){if(I.value.bypassApprovalRequired){await pe();return}if(I.value.status==="late"){K.value=!1,H.value=!0;return}if(I.value.status==="requires_approval"){K.value=!1,H.value=!0;return}}await pe()},Ue=async()=>{if(!(!i.value||Y.value)){if(Q.value<0||Q.value>100){b.error("–û—Ü–µ–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0 –¥–æ 100");return}Y.value=!0;try{const t=(i.value.scheduleEvent.isRetake&&i.value.scheduleEvent.allowedStudentIds?x.value.filter(M=>i.value.scheduleEvent.allowedStudentIds.includes(M.student.id)):x.value).map(M=>({studentId:M.student.id,grade:Q.value})),k=await n("/api/grades",{method:"POST",body:{bulk:!0,scheduleEventId:R.value,grades:t}});k.success?(b.success(`–í—ã—Å—Ç–∞–≤–ª–µ–Ω–æ ${k.count||t.length} –æ—Ü–µ–Ω–æ–∫`),D.value=!1,await re()):b.error(k.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}catch(o){b.error(o.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}finally{Y.value=!1}}},$e=()=>i.value?i.value.scheduleEvent.isRetake&&i.value.scheduleEvent.allowedStudentIds?x.value.filter(o=>i.value.scheduleEvent.allowedStudentIds.includes(o.student.id)).length:x.value.length:0,Me=()=>i.value?i.value.scheduleEvent.isRetake&&i.value.scheduleEvent.allowedStudentIds?x.value.filter(o=>i.value.scheduleEvent.allowedStudentIds.includes(o.student.id)).map(o=>o.student):x.value.map(o=>o.student):[],Le=()=>{f.value="average",L.value=100,V.value=60,ae.value=!0},le=o=>f.value==="custom"?L.value:o.averageGrade||0,He=async()=>{if(!Y.value){if(f.value==="custom"&&(L.value<0||L.value>100)){b.error("–û—Ü–µ–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 0 –¥–æ 100");return}Y.value=!0;try{const o=x.value.map(k=>({studentId:k.student.id,finalGrade:le(k)})),t=await n("/api/final-grades/bulk",{method:"POST",body:{groupId:$.value,disciplineId:_.value,grades:o,mode:f.value,passThreshold:V.value}});t.success?(b.success(t.message||"–ò—Ç–æ–≥–æ–≤—ã–µ –æ—Ü–µ–Ω–∫–∏ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω—ã"),ae.value=!1,await re()):b.error(t.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}catch(o){b.error(o.message||"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è")}finally{Y.value=!1}}};return Ye(async()=>{await Promise.all([re(),ke()])}),me(C,async()=>{await Promise.all([re(),ke()])}),(o,t)=>{const k=xe,M=Xe,N=fe;return d(),u("div",ds,[s(F)?(d(),u("div",is,[...t[19]||(t[19]=[e("div",{class:"text-center"},[e("div",{class:"inline-block h-10 w-10 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"}),e("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"–ó–∞–≥—Ä—É–∑–∫–∞ –∂—É—Ä–Ω–∞–ª–∞...")],-1)])])):s(G)?(d(),u("div",us,[e("div",cs,[t[21]||(t[21]=e("svg",{class:"mx-auto h-16 w-16 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[22]||(t[22]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900 dark:text-white"}," –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ ",-1)),e("p",gs,c(s(G)),1),E(k,{class:"mt-6",onClick:re},{default:S(()=>[...t[20]||(t[20]=[w(" –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞ ",-1)])]),_:1})])])):(d(),u(Z,{key:2},[e("div",ps,[e("div",vs,[E(M,{to:"/groups",class:"hover:text-primary transition-colors"},{default:S(()=>[...t[23]||(t[23]=[w("–£—á–µ–±–Ω—ã–µ –≥—Ä—É–ø–ø—ã",-1)])]),_:1}),t[24]||(t[24]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),E(M,{to:`/groups/${s($)}`,class:"hover:text-primary transition-colors"},{default:S(()=>[w(c(s(A)),1)]),_:1},8,["to"]),t[25]||(t[25]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),t[26]||(t[26]=e("span",{class:"text-gray-900 dark:text-white"},"–ñ—É—Ä–Ω–∞–ª",-1))]),e("div",ms,[e("div",xs,[t[28]||(t[28]=e("div",{class:"flex h-14 w-14 items-center justify-center rounded-full bg-info/10 text-info"},[e("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})])],-1)),e("div",null,[e("h1",fs,c(s(T)||"–ñ—É—Ä–Ω–∞–ª"),1),e("p",ys,[s(h)?(d(),u("span",bs,c(s(h))+" ‚Ä¢ ",1)):j("",!0),t[27]||(t[27]=w(" –ñ—É—Ä–Ω–∞–ª –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –∏ –æ—Ü–µ–Ω–æ–∫ ",-1))])])]),e("div",ks,[e("div",hs,[e("div",ws,[t[29]||(t[29]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," –°—Ç—É–¥–µ–Ω—Ç–æ–≤ ",-1)),e("p",_s,c(s(B)?.totalStudents||0),1)]),t[32]||(t[32]=e("div",{class:"w-px h-8 bg-gray-300 dark:bg-gray-600"},null,-1)),e("div",Cs,[t[30]||(t[30]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"–ó–∞–Ω—è—Ç–∏–π",-1)),e("p",$s,c(s(B)?.totalEvents||0),1)]),t[33]||(t[33]=e("div",{class:"w-px h-8 bg-gray-300 dark:bg-gray-600"},null,-1)),e("div",Ms,[t[31]||(t[31]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," –°—Ä. –ø–æ—Å–µ—â. ",-1)),e("p",{class:U(["text-lg font-bold",he(s(B)?.averageAttendance||0)])},c((s(B)?.averageAttendance||0).toFixed(1))+"% ",3)])]),s(v).length>0?(d(),u("div",Es,[e("button",{onClick:Be,disabled:s(P),class:"flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"–°–∫–∞—á–∞—Ç—å –≤–µ–¥–æ–º–æ—Å—Ç—å"},[s(P)?(d(),u("svg",Is,[...t[35]||(t[35]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(d(),u("svg",Ts,[...t[34]||(t[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])),e("span",Ss,c(s(P)?"–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...":"–í–µ–¥–æ–º–æ—Å—Ç—å"),1),t[36]||(t[36]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],8,Gs),s(se)?(d(),u("div",Rs,[e("button",{onClick:t[0]||(t[0]=r=>_e("pdf")),class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-2 rounded-t-lg text-gray-900 dark:text-white"},[...t[37]||(t[37]=[e("svg",{class:"w-4 h-4 text-danger",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("span",null,"–°–∫–∞—á–∞—Ç—å PDF",-1)])]),e("button",{onClick:t[1]||(t[1]=r=>_e("docx")),class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-2 rounded-b-lg text-gray-900 dark:text-white"},[...t[38]||(t[38]=[e("svg",{class:"w-4 h-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("span",null,"–°–∫–∞—á–∞—Ç—å Word",-1)])])])):j("",!0)])):j("",!0)])])]),s(v).length===0?(d(),u("div",Fs,[t[40]||(t[40]=e("svg",{class:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t[41]||(t[41]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900 dark:text-white"}," –ó–∞–Ω—è—Ç–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã ",-1)),t[42]||(t[42]=e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},[w(" –î–ª—è —ç—Ç–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –µ—â—ë –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–Ω—è—Ç–∏–π."),e("br"),w(" –î–æ–±–∞–≤—å—Ç–µ –∑–∞–Ω—è—Ç–∏—è –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, —á—Ç–æ–±—ã –≤–µ—Å—Ç–∏ –∂—É—Ä–Ω–∞–ª. ")],-1)),E(M,{to:`/schedule?groupId=${s($)}`,class:"inline-block mt-6 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors"},{default:S(()=>[...t[39]||(t[39]=[w(" –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é ",-1)])]),_:1},8,["to"])])):j("",!0),s(v).length>0&&!s(m)?(d(),u("div",Bs,[e("div",js,[t[52]||(t[52]=e("div",{class:"flex-1"},[e("h3",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ "),e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–Ω—è—Ç–∏–µ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –æ—Ç–º–µ—Ç–∫–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –∏–ª–∏ –æ—Ü–µ–Ω–∫–∏ ")],-1)),X(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>W(R)?R.value=r:null),class:"rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-3 py-2 text-sm text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},[t[43]||(t[43]=e("option",{value:""},"‚Äî –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–Ω—è—Ç–∏–µ ‚Äî",-1)),(d(!0),u(Z,null,ee(s(v),r=>(d(),u("option",{key:r.scheduleEvent.id,value:r.scheduleEvent.id},c(oe(r.scheduleEvent.date))+" "+c(de(r.scheduleEvent.startTime,r.scheduleEvent.endTime))+" "+c(r.hasGrade?"(—Å –æ—Ü–µ–Ω–∫–æ–π)":""),9,As))),128))],512),[[Te,s(R)]]),s(R)&&s(I)?(d(),u("div",Vs,[s(a)?(d(),u("span",Ds,[...t[44]||(t[44]=[e("svg",{class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):s(I).status==="allowed"?(d(),u("span",zs,[...t[45]||(t[45]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),w(" –î–æ—Å—Ç—É–ø–Ω–æ ",-1)])])):s(I).status==="late"?(d(),u("span",Us,[...t[46]||(t[46]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),w(" –û–ø–æ–∑–¥–∞–Ω–∏–µ ",-1)])])):s(I).status==="requires_approval"?(d(),u("span",Ls,[...t[47]||(t[47]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),w(" –¢—Ä–µ–±—É–µ—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è ",-1)])])):s(I).status==="denied"?(d(),u("span",Hs,[...t[48]||(t[48]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1),w(" –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ ",-1)])])):j("",!0)])):j("",!0),e("div",Ns,[E(k,{variant:"primary",size:"sm",disabled:!s(R)||s(I)?.status==="denied",onClick:je},{default:S(()=>[...t[49]||(t[49]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),w(" –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ—Ö ",-1)])]),_:1},8,["disabled"]),s(i)?.hasGrade?(d(),ce(k,{key:0,variant:"outline",size:"sm",disabled:!s(R),onClick:Ae},{default:S(()=>[...t[50]||(t[50]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),w(" –û—Ü–µ–Ω–∫–∞ –≤—Å–µ–º ",-1)])]),_:1},8,["disabled"])):j("",!0),E(k,{variant:"secondary",size:"sm",disabled:s(x).length===0,onClick:Le},{default:S(()=>[...t[51]||(t[51]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})],-1),w(" –ò—Ç–æ–≥–æ–≤—ã–µ –æ—Ü–µ–Ω–∫–∏ ",-1)])]),_:1},8,["disabled"])])]),s(I)&&s(I).status==="late"?(d(),u("div",Ps,[...t[53]||(t[53]=[e("div",{class:"flex items-start gap-2"},[e("svg",{class:"w-5 h-5 text-yellow-500 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("p",{class:"text-sm text-yellow-700 dark:text-yellow-300"}," –°—Ä–æ–∫ –æ—Ç–º–µ—Ç–∫–∏ –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–Ω—è—Ç–∏—è –∏—Å—Ç—ë–∫. –û—Ç–º–µ—Ç–∫–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å –ø–æ–º–µ—Ç–∫–æ–π ¬´–û–ø–æ–∑–¥–∞–Ω–∏–µ¬ª. ")],-1)])])):j("",!0),s(I)&&s(I).status==="requires_approval"?(d(),u("div",Os,[...t[54]||(t[54]=[Ee('<div class="flex items-start gap-2"><svg class="w-5 h-5 text-red-500 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg><div><p class="text-sm font-medium text-red-700 dark:text-red-300"> –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ </p><p class="text-xs text-red-600 dark:text-red-400 mt-1"> –°—Ä–æ–∫ –æ—Ç–º–µ—Ç–∫–∏ –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–Ω—è—Ç–∏—è –¥–∞–≤–Ω–æ –∏—Å—Ç—ë–∫. –ù–∞–∂–º–∏—Ç–µ ¬´–û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ—Ö¬ª —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–¥–æ–±—Ä–µ–Ω–∏–µ. </p></div></div>',1)])])):j("",!0)])):j("",!0),s(v).length>0?(d(),u("div",qs,[e("div",Ws,[e("table",Ys,[e("thead",null,[e("tr",Js,[t[55]||(t[55]=e("th",{class:"sticky left-0 z-10 bg-gray-50 dark:bg-gray-800 px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[200px]"}," –°–ª—É—à–∞—Ç–µ–ª—å ",-1)),(d(!0),u(Z,null,ee(s(v),r=>(d(),u("th",{key:r.scheduleEvent.id,class:"px-2 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[80px]"},[e("div",Xs,[e("div",Ks,[e("span",{class:U(["inline-block w-2 h-2 rounded-full",{"bg-purple-500":r.scheduleEvent.isRetake,"bg-blue-500":!r.scheduleEvent.isRetake&&r.scheduleEvent.eventType==="theory","bg-green-500":!r.scheduleEvent.isRetake&&r.scheduleEvent.eventType==="practice","bg-orange-500":!r.scheduleEvent.isRetake&&r.scheduleEvent.eventType==="assessment","bg-gray-500":!r.scheduleEvent.isRetake&&r.scheduleEvent.eventType==="other"}])},null,2),r.scheduleEvent.isRetake?(d(),u("span",Qs," –ü ")):j("",!0)]),e("span",Zs,c(oe(r.scheduleEvent.date)),1),e("span",er,c(de(r.scheduleEvent.startTime,r.scheduleEvent.endTime)),1)])]))),128)),t[56]||(t[56]=e("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[80px] bg-gray-100 dark:bg-gray-700"}," –ü–æ—Å–µ—â. % ",-1)),t[57]||(t[57]=e("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[80px] bg-gray-100 dark:bg-gray-700"}," –°—Ä. –æ—Ü–µ–Ω–∫–∞ ",-1)),t[58]||(t[58]=e("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[100px] bg-gray-100 dark:bg-gray-700"}," –ò—Ç–æ–≥ ",-1))])]),e("tbody",tr,[(d(!0),u(Z,null,ee(s(x),r=>(d(),u("tr",{key:r.student.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors"},[e("td",sr,[e("div",rr,[e("div",ar,c(Ie(r.student.fullName)),1),e("span",{class:"font-medium text-gray-900 dark:text-white text-sm",title:r.student.fullName},c(r.student.fullName),9,nr)])]),(d(!0),u(Z,null,ee(r.cells,(q,ne)=>(d(),u("td",{key:q.scheduleEventId,class:"px-2 py-3 text-center"},[s(v)[ne]?(d(),ce(It,{key:0,cell:q,column:s(v)[ne],"student-id":r.student.id,"is-retake-target":we(r.student.id,s(v)[ne].scheduleEvent.id).isRetakeTarget,"replacement-grade":we(r.student.id,s(v)[ne].scheduleEvent.id).replacementGrade,"read-only":s(m),onUpdate:Se,onRequireApproval:Re},null,8,["cell","column","student-id","is-retake-target","replacement-grade","read-only"])):j("",!0)]))),128)),e("td",lr,[e("span",{class:U(["inline-block px-2 py-1 rounded text-sm font-medium",he(r.attendancePercent)])},c(r.attendancePercent.toFixed(1))+"% ",3)]),e("td",or,[r.averageGrade!==void 0?(d(),u("span",dr,c(r.averageGrade.toFixed(0)),1)):(d(),u("span",ir,"‚Äî"))]),e("td",ur,[E(zt,{"final-grade":r.finalGrade,"student-id":r.student.id,"group-id":s($),"discipline-id":s(_),"attendance-percent":r.attendancePercent,"read-only":s(m),onUpdate:Fe},null,8,["final-grade","student-id","group-id","discipline-id","attendance-percent","read-only"])])]))),128))])])]),t[59]||(t[59]=Ee('<div class="px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400"><span class="font-medium">–¢–∏–ø—ã –∑–∞–Ω—è—Ç–∏–π:</span><span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-blue-500"></span> –¢–µ–æ—Ä–∏—è </span><span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-green-500"></span> –ü—Ä–∞–∫—Ç–∏–∫–∞ (—Å –æ—Ü–µ–Ω–∫–æ–π) </span><span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-orange-500"></span> –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞–Ω–∏–π (—Å –æ—Ü–µ–Ω–∫–æ–π) </span><span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-purple-500"></span> –ü–µ—Ä–µ—Å–¥–∞—á–∞ </span><span class="mx-2 text-gray-300 dark:text-gray-600">|</span><span class="font-medium">–û—Ü–µ–Ω–∫–∏:</span><span class="flex items-center gap-1" title="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∏–∑ —Ç–µ—Å—Ç–∞"><span class="relative w-5 h-5 rounded bg-success/20 flex items-center justify-center text-xs text-success"><span class="absolute -top-0.5 -right-0.5 w-2 h-2 rounded-full bg-blue-500"></span> 85 </span> –ò–∑ —Ç–µ—Å—Ç–∞ </span><span class="flex items-center gap-1" title="–†—É—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –∑–∞ –ø—Ä–∞–∫—Ç–∏–∫—É"><span class="relative w-5 h-5 rounded bg-success/20 flex items-center justify-center text-xs text-success"> 90 </span> –†—É—á–Ω–∞—è </span><span class="flex items-center gap-1" title="–ò–∑–º–µ–Ω—ë–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞"><span class="relative w-5 h-5 rounded bg-purple-200 dark:bg-purple-900/40 flex items-center justify-center text-xs text-purple-700 dark:text-purple-300 ring-1 ring-purple-400"><span class="absolute -top-0.5 -right-0.5 w-2 h-2 rounded-full bg-purple-500"></span> 78 </span> –ò–∑–º–µ–Ω–µ–Ω–∞ </span></div>',1))])):j("",!0)],64)),E(N,{"is-open":s(K),title:"–ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–º–µ—Ç–∫–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏",size:"md",onClose:t[7]||(t[7]=r=>K.value=!1)},{default:S(()=>[e("div",cr,[s(i)?(d(),u("div",gr,[e("p",pr," –ó–∞–Ω—è—Ç–∏–µ: "+c(oe(s(i).scheduleEvent.date))+" "+c(de(s(i).scheduleEvent.startTime,s(i).scheduleEvent.endTime))+" ("+c(s(i).scheduleEvent.academicHours)+" –∞-—á) ",1),e("div",null,[e("label",vr," –ß–∞—Å—ã –ø–æ—Å–µ—â–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö (–∏–∑ "+c(s(i).scheduleEvent.academicHours)+") ",1),e("div",mr,[X(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>W(J)?J.value=r:null),type:"number",step:"0.5",min:"0",max:s(i).scheduleEvent.academicHours,class:"flex-1 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-4 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},null,8,xr),[[te,s(J),void 0,{number:!0}]]),t[60]||(t[60]=e("span",{class:"text-gray-500"},"–∞-—á",-1))]),e("div",fr,[e("button",{class:U(["px-3 py-1.5 rounded-lg border text-sm font-medium transition-colors",s(J)===0?"bg-primary text-white border-primary":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"]),onClick:t[4]||(t[4]=r=>J.value=0)}," –ù–∏–∫—Ç–æ (0) ",2),e("button",{class:U(["px-3 py-1.5 rounded-lg border text-sm font-medium transition-colors",s(J)===s(i).scheduleEvent.academicHours?"bg-primary text-white border-primary":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"]),onClick:t[5]||(t[5]=r=>J.value=s(i).scheduleEvent.academicHours)}," –í—Å–µ ("+c(s(i).scheduleEvent.academicHours)+") ",3)])]),e("div",yr,[e("p",br,[w(" –ë—É–¥–µ—Ç –æ—Ç–º–µ—á–µ–Ω–æ "+c($e())+" —Å–ª—É—à–∞—Ç–µ–ª–µ–π ",1),s(i).scheduleEvent.isRetake?(d(),u("span",kr," (—Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–µ—Ä–µ—Å–¥–∞—á–∏) ")):j("",!0)]),s(i).scheduleEvent.isRetake&&s(i).scheduleEvent.allowedStudentIds?(d(),u("div",hr,[t[62]||(t[62]=e("p",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"}," –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–µ—Ä–µ—Å–¥–∞—á–∏: ",-1)),e("div",wr,[e("div",_r,[(d(!0),u(Z,null,ee(Me(),r=>(d(),u("div",{key:r.id,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-2"},[t[61]||(t[61]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-purple-500"},null,-1)),w(" "+c(r.fullName),1)]))),128))])])])):j("",!0)])])):j("",!0),e("div",Cr,[E(k,{variant:"outline",onClick:t[6]||(t[6]=r=>K.value=!1)},{default:S(()=>[...t[63]||(t[63]=[w(" –û—Ç–º–µ–Ω–∞ ",-1)])]),_:1}),E(k,{loading:s(Y),onClick:ze},{default:S(()=>[...t[64]||(t[64]=[w(" –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ—Ö ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["is-open"]),E(N,{"is-open":s(D),title:"–ú–∞—Å—Å–æ–≤–æ–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫",size:"md",onClose:t[10]||(t[10]=r=>D.value=!1)},{default:S(()=>[e("div",$r,[s(i)?(d(),u("div",Mr,[e("p",Er," –ó–∞–Ω—è—Ç–∏–µ: "+c(oe(s(i).scheduleEvent.date))+" "+c(de(s(i).scheduleEvent.startTime,s(i).scheduleEvent.endTime)),1),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," –û—Ü–µ–Ω–∫–∞ –¥–ª—è –≤—Å–µ—Ö (0-100) ",-1)),X(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>W(Q)?Q.value=r:null),type:"number",min:"0",max:"100",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-4 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},null,512),[[te,s(Q),void 0,{number:!0}]]),e("div",Gr,[(d(),u(Z,null,ee([100,90,80,70,60],r=>e("button",{key:r,class:U(["px-3 py-1.5 rounded-lg border text-sm font-medium transition-colors",s(Q)===r?"bg-primary text-white border-primary":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"]),onClick:q=>Q.value=r},c(r),11,Tr)),64))])]),e("div",Ir,[e("p",Sr,[w(" –ë—É–¥–µ—Ç –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–æ "+c($e())+" –æ—Ü–µ–Ω–æ–∫ ",1),s(i).scheduleEvent.isRetake?(d(),u("span",Rr," (—Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–µ—Ä–µ—Å–¥–∞—á–∏) ")):j("",!0)]),s(i).scheduleEvent.isRetake&&s(i).scheduleEvent.allowedStudentIds?(d(),u("div",Fr,[t[67]||(t[67]=e("p",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-2"}," –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–µ—Ä–µ—Å–¥–∞—á–∏: ",-1)),e("div",Br,[e("div",jr,[(d(!0),u(Z,null,ee(Me(),r=>(d(),u("div",{key:r.id,class:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-2"},[t[66]||(t[66]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-purple-500"},null,-1)),w(" "+c(r.fullName),1)]))),128))])])])):j("",!0)])])):j("",!0),e("div",Ar,[E(k,{variant:"outline",onClick:t[9]||(t[9]=r=>D.value=!1)},{default:S(()=>[...t[68]||(t[68]=[w(" –û—Ç–º–µ–Ω–∞ ",-1)])]),_:1}),E(k,{loading:s(Y),onClick:Ue},{default:S(()=>[...t[69]||(t[69]=[w(" –í—ã—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫–∏ ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["is-open"]),E(N,{"is-open":s(ae),title:"–ú–∞—Å—Å–æ–≤–æ–µ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤—ã—Ö –æ—Ü–µ–Ω–æ–∫",size:"lg",onClose:t[16]||(t[16]=r=>ae.value=!1)},{default:S(()=>[e("div",Vr,[e("p",Dr,[t[70]||(t[70]=w(" –í—ã—Å—Ç–∞–≤–∏—Ç—å –∏—Ç–æ–≥–æ–≤—ã–µ –æ—Ü–µ–Ω–∫–∏ –≤—Å–µ–º —Å–ª—É—à–∞—Ç–µ–ª—è–º –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ ",-1)),e("span",zr,c(s(T)),1)]),e("div",Ur,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," –†–µ–∂–∏–º –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è ",-1)),e("div",Lr,[e("label",{class:U(["flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors",s(f)==="average"?"border-primary bg-primary/5":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"])},[X(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>W(f)?f.value=r:null),type:"radio",value:"average",class:"mt-0.5"},null,512),[[Ge,s(f)]]),t[71]||(t[71]=e("div",null,[e("p",{class:"font-medium text-gray-900 dark:text-white"}," –ü–æ —Å—Ä–µ–¥–Ω–µ–π –æ—Ü–µ–Ω–∫–µ "),e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"}," –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ = —Å—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ –∑–∞ –∑–∞–Ω—è—Ç–∏—è. –°—Ç–∞—Ç—É—Å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. ")],-1))],2),e("label",{class:U(["flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors",s(f)==="custom"?"border-primary bg-primary/5":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"])},[X(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>W(f)?f.value=r:null),type:"radio",value:"custom",class:"mt-0.5"},null,512),[[Ge,s(f)]]),t[72]||(t[72]=e("div",null,[e("p",{class:"font-medium text-gray-900 dark:text-white"}," –ï–¥–∏–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –≤—Å–µ–º "),e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"}," –í—ã—Å—Ç–∞–≤–∏—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –æ—Ü–µ–Ω–∫—É –≤—Å–µ–º —Å–ª—É—à–∞—Ç–µ–ª—è–º. ")],-1))],2)])]),s(f)==="custom"?(d(),u("div",Hr,[t[74]||(t[74]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," –û—Ü–µ–Ω–∫–∞ –¥–ª—è –≤—Å–µ—Ö (0-100) ",-1)),X(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>W(L)?L.value=r:null),type:"number",min:"0",max:"100",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-4 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},null,512),[[te,s(L),void 0,{number:!0}]]),e("div",Nr,[(d(),u(Z,null,ee([100,90,80,70,60],r=>e("button",{key:r,class:U(["px-3 py-1.5 rounded-lg border text-sm font-medium transition-colors",s(L)===r?"bg-primary text-white border-primary":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"]),onClick:q=>L.value=r},c(r),11,Pr)),64))])])):j("",!0),e("div",Or,[t[75]||(t[75]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},' –ü–æ—Ä–æ–≥ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ "–°–¥–∞–Ω–æ" (%) ',-1)),e("div",qr,[X(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>W(V)?V.value=r:null),type:"number",min:"0",max:"100",class:"w-24 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-boxdark px-3 py-2 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary/50"},null,512),[[te,s(V),void 0,{number:!0}]]),e("span",Wr," –û—Ü–µ–Ω–∫–∞ ‚â• "+c(s(V))+' ‚Üí "–°–¥–∞–Ω–æ", –∏–Ω–∞—á–µ ‚Üí "–ù–µ —Å–¥–∞–Ω–æ" ',1)])]),e("div",Yr,[e("h4",Jr," –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä ("+c(s(x).length)+" —Å–ª—É—à–∞—Ç–µ–ª–µ–π) ",1),e("div",Xr,[e("div",Kr,[(d(!0),u(Z,null,ee(s(x),r=>(d(),u("div",{key:r.student.id,class:"flex items-center justify-between text-sm"},[e("span",Qr,c(r.student.fullName),1),e("div",Zr,[e("span",{class:U(["px-2 py-0.5 rounded text-xs font-medium",le(r)>=s(V)?"bg-success/10 text-success":"bg-danger/10 text-danger"])},c(le(r)),3),e("span",{class:U(["text-xs",le(r)>=s(V)?"text-success":"text-danger"])},c(le(r)>=s(V)?"–°–¥–∞–Ω–æ":"–ù–µ —Å–¥–∞–Ω–æ"),3)])]))),128))])])]),e("div",ea,[E(k,{variant:"outline",onClick:t[15]||(t[15]=r=>ae.value=!1)},{default:S(()=>[...t[76]||(t[76]=[w(" –û—Ç–º–µ–Ω–∞ ",-1)])]),_:1}),E(k,{loading:s(Y),onClick:He},{default:S(()=>[...t[77]||(t[77]=[w(" –í—ã—Å—Ç–∞–≤–∏—Ç—å –∏—Ç–æ–≥–æ–≤—ã–µ –æ—Ü–µ–Ω–∫–∏ ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["is-open"]),E(as,{modelValue:s(H),"onUpdate:modelValue":t[17]||(t[17]=r=>W(H)?H.value=r:null),"event-title":s(i)?.scheduleEvent.title||"","event-date":s(i)?.scheduleEvent.startTime||"",deadline:s(I)?.deadline||"",status:s(I)?.status==="requires_approval"?"requires_approval":"late",onConfirm:Ve,onRequestApproval:De,onCancel:t[18]||(t[18]=r=>H.value=!1)},null,8,["modelValue","event-title","event-date","deadline","status"])])}}});export{pa as default};
