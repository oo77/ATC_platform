import{_ as y}from"./BKg9m4wI.js";import{u as b,r as m,g as v,c as o,a as t,m as k,F as _,j as w,b as u,n as j,t as a,w as x,d as g,l as C,o as l}from"./GLV6bXvn.js";import{u as B}from"./DlZaGH1J.js";import{u as M}from"./DVL-QcDc.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const V={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},z={key:0,class:"flex justify-center py-20"},N={key:1,class:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white px-5 pt-6 pb-2.5 shadow-md dark:bg-boxdark sm:px-7.5 xl:pb-1"},F={key:2,class:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3"},S={class:"absolute top-4 right-4 z-10"},D={class:"p-6 flex-1 flex flex-col"},L={class:"mb-4"},A={class:"text-xl font-bold text-black dark:text-white mb-1 group-hover:text-primary transition-colors"},H={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},T={class:"mb-6 space-y-3"},$={class:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400"},E={class:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400"},R={class:"mt-auto"},U={class:"mb-2 flex items-center justify-between"},q={class:"text-sm font-medium text-primary"},G={class:"relative h-2.5 w-full rounded-full bg-gray-200 dark:bg-gray-700"},I={class:"mt-2 text-xs text-gray-500 text-right"},Y={__name:"index",setup(J){b({title:"Мои курсы | TailAdmin"});const d=m(!0),n=m([]),{authFetch:p}=B(),f=async()=>{d.value=!0;try{const r=await p("/api/students/my-courses");r&&(n.value=r)}catch(r){console.error("Failed to fetch courses:",r),M().error("Не удалось загрузить список курсов")}finally{d.value=!1}},i=r=>r?new Date(r).toLocaleDateString("ru-RU"):"TBA",h=r=>({active:"Активен",completed:"Завершен",dropped:"Отчислен"})[r]||r;return v(()=>{f()}),(r,e)=>{const c=y;return l(),o("div",V,[e[6]||(e[6]=t("div",{class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},[t("h2",{class:"text-title-md2 font-bold text-black dark:text-white"}," Мои курсы ")],-1)),d.value?(l(),o("div",z,[...e[0]||(e[0]=[t("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-solid border-primary border-t-transparent"},null,-1)])])):n.value.length===0?(l(),o("div",N,[...e[1]||(e[1]=[k('<div class="flex flex-col items-center justify-center py-12"><div class="mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800"><svg class="h-8 w-8 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg></div><h3 class="text-xl font-medium text-gray-900 dark:text-white mb-2">Нет активных курсов</h3><p class="text-gray-500 dark:text-gray-400 text-center max-w-md"> Вы пока не записаны ни на один курс. Обратитесь к администратору для зачисления. </p></div>',1)])])):(l(),o("div",F,[(l(!0),o(_,null,w(n.value,s=>(l(),o("div",{key:s.group_id,class:"group relative flex flex-col rounded-lg border border-gray-200 dark:border-gray-700 bg-white shadow-md transition-all hover:shadow-lg dark:bg-boxdark"},[t("div",S,[t("span",{class:j(["rounded-full px-3 py-1 text-xs font-medium",s.status==="active"?"bg-success/10 text-success":s.status==="completed"?"bg-primary/10 text-primary":"bg-danger/10 text-danger"])},a(h(s.status)),3)]),t("div",D,[t("div",L,[t("h3",A,[u(c,{to:`/my-courses/${s.group_id}`},{default:x(()=>[g(a(s.course_name),1)]),_:2},1032,["to"])]),t("p",H," Группа: "+a(s.group_name),1)]),t("div",T,[t("div",$,[e[2]||(e[2]=t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),t("span",null,a(s.teacher_name||"Преподаватель не назначен"),1)]),t("div",E,[e[3]||(e[3]=t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",null,a(i(s.start_date))+" — "+a(i(s.end_date)),1)])]),t("div",R,[t("div",U,[e[4]||(e[4]=t("span",{class:"text-sm font-medium text-black dark:text-white"},"Прогресс",-1)),t("span",q,a(s.progress)+"%",1)]),t("div",G,[t("div",{class:"absolute left-0 h-full rounded-full bg-primary transition-all duration-500",style:C({width:`${s.progress}%`})},null,4)]),t("div",I," Посещено: "+a(s.attended_lessons)+" / "+a(s.total_lessons)+" занятий ",1)])]),u(c,{to:`/my-courses/${s.group_id}`,class:"flex items-center justify-center border-t border-gray-200 dark:border-gray-700 bg-gray-50 p-4 font-medium text-black transition hover:bg-gray-100 hover:text-primary dark:bg-gray-800 dark:text-white dark:hover:bg-gray-700"},{default:x(()=>[...e[5]||(e[5]=[g(" Перейти к обучению ",-1),t("svg",{class:"ml-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"})],-1)])]),_:1},8,["to"])]))),128))]))])}}};export{Y as default};
