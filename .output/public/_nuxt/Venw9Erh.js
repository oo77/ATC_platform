import{v as fe,r as p,f as V,q as Se,c as i,F as Y,b as z,w as C,i as v,a as e,t as a,d as H,h as w,x as tt,A as st,H as ot,j as se,n as te,o as r,k as Q,e as rt,g as nt,m as De,l as at,X as lt,al as it,W as dt}from"./GLV6bXvn.js";import{_ as he}from"./BMofnORk.js";import{_ as ut}from"./BKg9m4wI.js";import{a as ct,_ as pt}from"./BjHlhNFN.js";import{_ as xe}from"./CyDLpZDf.js";import{_ as Te}from"./BNigTcCY.js";import{u as ye}from"./DlZaGH1J.js";import{u as ke}from"./DVL-QcDc.js";import{E as gt,a as vt}from"./BylynD0E.js";import{u as mt}from"./DW2J_Y_n.js";import{u as ft}from"./BqNnZPOd.js";import"./CFbq0LVm.js";import"./CRUGdXr-.js";const ht={class:"space-y-4"},xt={class:"p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},yt={class:"flex items-center gap-3"},kt={class:"font-semibold text-gray-900 dark:text-white"},wt={class:"text-sm text-gray-500 dark:text-gray-400"},bt={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},_t={class:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden"},Mt={class:"p-3 space-y-3"},Ct={class:"flex gap-2"},$t={class:"relative flex-1"},jt=["disabled"],Dt={key:0,class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},St={key:0,class:"text-center py-6"},Tt={key:1,class:"max-h-72 overflow-y-auto space-y-1"},zt=["checked","disabled","onChange"],Rt={class:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10 text-primary text-xs font-semibold"},Bt={class:"min-w-0 flex-1"},Ht={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Ut={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},At={key:0,class:"text-xs text-gray-400"},Ft={key:2,class:"text-center py-6 text-gray-500 dark:text-gray-400"},It={key:3,class:"text-center py-6 text-gray-500 dark:text-gray-400"},Et={class:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden"},Vt={class:"bg-gray-50 dark:bg-gray-800 px-4 py-3 border-b border-gray-200 dark:border-gray-700"},Pt={class:"font-medium text-gray-900 dark:text-white flex items-center gap-2"},Lt={class:"p-3"},Nt={key:0,class:"text-center py-6 text-gray-500 dark:text-gray-400"},Gt={key:1,class:"max-h-72 overflow-y-auto space-y-1"},Ot={class:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-success/10 text-success text-xs font-semibold"},Wt={class:"min-w-0 flex-1"},Jt={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Yt={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},qt={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},Kt=["onClick"],Qt=["onClick"],Xt={class:"space-y-4"},Zt={class:"text-gray-600 dark:text-gray-400"},es={class:"block mt-1 text-gray-900 dark:text-white"},ts={key:0,class:"text-center py-4"},ss={key:1,class:"text-center py-4 text-gray-500"},os={key:2,class:"space-y-2 max-h-60 overflow-y-auto"},rs=["onClick"],ns={class:"font-medium text-gray-900 dark:text-white"},as={class:"text-sm text-gray-500 dark:text-gray-400"},ls={class:"flex justify-end"},is={class:"flex justify-end"},ds=fe({__name:"ManageStudentsModal",props:{isOpen:{type:Boolean},group:{}},emits:["close","updated"],setup(x,{emit:d}){const $=x,b=d,{authFetch:y}=ye(),g=ke(),D=p(""),h=p([]),j=p([]),S=p(!1),T=p(!1),P=p(!1),k=p(null),s=p([]),A=p(!1);let E=null;const L=p(!1),_=p(null),X=p(!1),G=V(()=>$.group?.students||[]),O=V(()=>G.value.map(c=>c.studentId)),M=async()=>{if(!D.value||D.value.length<2){h.value=[];return}S.value=!0;try{const c=await y("/api/students",{method:"GET",params:{search:D.value,limit:30}});c.success&&c.students&&(h.value=c.students)}catch(c){console.error("Error searching students:",c),h.value=[]}finally{S.value=!1}},R=()=>{E&&clearTimeout(E),E=setTimeout(()=>{M()},300)},F=c=>{if(O.value.includes(c.id))return;const n=j.value.indexOf(c.id);n===-1?j.value.push(c.id):j.value.splice(n,1)},q=async()=>{if(!(j.value.length===0||!$.group)){T.value=!0;try{const c=await y(`/api/groups/${$.group.id}/students`,{method:"POST",body:{studentIds:j.value}});if(c.success)g.success(c.message||"Слушатели добавлены"),j.value=[],D.value="",h.value=[],b("updated");else if(c.conflicts&&c.conflicts.length>0){const n=c.conflicts.map(I=>I.studentName).join(", ");g.error(`Конфликт дат: ${n}`)}else g.error(c.message||"Ошибка добавления")}catch{g.error("Ошибка при добавлении слушателей")}finally{T.value=!1}}},de=c=>{_.value=c,L.value=!0},ne=async()=>{_.value&&(X.value=!0,await Z(_.value.studentId),X.value=!1,L.value=!1,_.value=null)},ae=()=>{L.value=!1,_.value=null},Z=async c=>{if($.group)try{const n=await y(`/api/groups/${$.group.id}/students/${c}`,{method:"DELETE"});n.success?(g.success("Слушатель удалён"),b("updated")):g.error(n.message||"Ошибка удаления")}catch{g.error("Ошибка удаления слушателя")}},oe=async c=>{k.value=c,P.value=!0,A.value=!0;try{const n=await y("/api/groups/select",{params:{excludeGroupId:$.group?.id}});n.success&&(s.value=n.groups)}catch(n){console.error("Error loading groups:",n),s.value=[]}finally{A.value=!1}},le=async c=>{if(!(!$.group||!k.value))try{const n=await y(`/api/groups/${$.group.id}/students/transfer`,{method:"POST",body:{studentId:k.value.studentId,toGroupId:c}});n.success?(g.success(n.message||"Слушатель перемещён"),P.value=!1,k.value=null,b("updated")):g.error(n.message||"Ошибка перемещения")}catch{g.error("Ошибка перемещения слушателя")}},re=c=>{if(!c)return"??";const n=c.split(" "),I=n[0]||"",W=n[1]||"";return I.length>0&&W.length>0?(I.charAt(0)+W.charAt(0)).toUpperCase():c.substring(0,2).toUpperCase()};return Se(()=>$.isOpen,c=>{c&&(D.value="",h.value=[],j.value=[])}),(c,n)=>{const I=he,W=xe,J=Te;return r(),i(Y,null,[z(W,{"is-open":x.isOpen,title:"Управление слушателями",size:"xl",onClose:n[4]||(n[4]=m=>c.$emit("close"))},{footer:C(()=>[e("div",is,[z(I,{variant:"outline",onClick:n[3]||(n[3]=m=>c.$emit("close"))},{default:C(()=>[...n[19]||(n[19]=[H(" Закрыть ",-1)])]),_:1})])]),default:C(()=>[e("div",ht,[e("div",xt,[e("div",yt,[n[5]||(n[5]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10"},[e("svg",{class:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",null,[e("h4",kt,a(x.group?.code),1),e("p",wt,a(x.group?.course?.name),1)])])]),e("div",bt,[e("div",_t,[n[11]||(n[11]=e("div",{class:"bg-gray-50 dark:bg-gray-800 px-4 py-3 border-b border-gray-200 dark:border-gray-700"},[e("h5",{class:"font-medium text-gray-900 dark:text-white flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]),H(" База слушателей ")])],-1)),e("div",Mt,[e("div",Ct,[e("div",$t,[tt(e("input",{"onUpdate:modelValue":n[0]||(n[0]=m=>ot(D)?D.value=m:null),type:"text",placeholder:"Поиск по ФИО, ПИНФЛ...",class:"w-full rounded border border-stroke bg-transparent py-2 pl-9 pr-3 text-sm outline-none focus:border-primary dark:border-strokedark dark:bg-meta-4 dark:focus:border-primary",onInput:R},null,544),[[st,v(D)]]),n[6]||(n[6]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),v(j).length>0?(r(),i("button",{key:0,type:"button",onClick:q,disabled:v(T),class:"px-3 py-2 bg-primary text-white text-sm rounded hover:bg-primary/90 transition-colors disabled:opacity-50 flex items-center gap-1"},[v(T)?(r(),i("svg",Dt,[...n[7]||(n[7]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):w("",!0),e("span",null,"Добавить ("+a(v(j).length)+")",1)],8,jt)):w("",!0)]),v(S)?(r(),i("div",St,[...n[8]||(n[8]=[e("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-solid border-primary border-r-transparent"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Поиск...",-1)])])):v(h).length>0?(r(),i("div",Tt,[(r(!0),i(Y,null,se(v(h),m=>(r(),i("label",{key:m.id,class:te(["flex items-center gap-3 p-2 rounded cursor-pointer transition-colors",v(O).includes(m.id)?"bg-gray-100 dark:bg-gray-700 opacity-50 cursor-not-allowed":v(j).includes(m.id)?"bg-primary/10 border border-primary/30":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[e("input",{type:"checkbox",checked:v(j).includes(m.id),disabled:v(O).includes(m.id),onChange:N=>F(m),class:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary disabled:opacity-50"},null,40,zt),e("div",Rt,a(re(m.fullName)),1),e("div",Bt,[e("p",Ht,a(m.fullName),1),e("p",Ut,a(m.pinfl)+" • "+a(m.organization),1)]),v(O).includes(m.id)?(r(),i("span",At,"В группе")):w("",!0)],2))),128))])):v(D)&&!v(S)?(r(),i("div",Ft,[...n[9]||(n[9]=[e("svg",{class:"mx-auto h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",{class:"mt-2 text-sm"},"Слушатели не найдены",-1)])])):(r(),i("div",It,[...n[10]||(n[10]=[e("svg",{class:"mx-auto h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),e("p",{class:"mt-2 text-sm"},"Введите минимум 2 символа для поиска",-1)])]))])]),e("div",Et,[e("div",Vt,[e("h5",Pt,[n[12]||(n[12]=e("svg",{class:"w-4 h-4 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),H(" В группе ("+a(v(G).length)+") ",1)])]),e("div",Lt,[v(G).length===0?(r(),i("div",Nt,[...n[13]||(n[13]=[e("svg",{class:"mx-auto h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("p",{class:"mt-2 text-sm"},"Группа пуста",-1),e("p",{class:"text-xs text-gray-400 mt-1"},"Выберите слушателей слева для добавления",-1)])])):(r(),i("div",Gt,[(r(!0),i(Y,null,se(v(G),m=>(r(),i("div",{key:m.id,class:"flex items-center gap-2 p-2 rounded bg-gray-50 dark:bg-gray-800 group"},[e("div",Ot,a(re(m.student?.fullName)),1),e("div",Wt,[e("p",Jt,a(m.student?.fullName),1),e("p",Yt,a(m.student?.organization),1)]),e("div",qt,[e("button",{type:"button",onClick:N=>oe(m),class:"p-1.5 text-gray-400 hover:text-primary rounded transition-colors",title:"Переместить"},[...n[14]||(n[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],8,Kt),e("button",{type:"button",onClick:N=>de(m),class:"p-1.5 text-gray-400 hover:text-danger rounded transition-colors",title:"Удалить"},[...n[15]||(n[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Qt)])]))),128))]))])])]),z(W,{"is-open":v(P),title:"Переместить слушателя",size:"sm",onClose:n[2]||(n[2]=m=>P.value=!1)},{footer:C(()=>[e("div",ls,[z(I,{variant:"outline",onClick:n[1]||(n[1]=m=>P.value=!1)},{default:C(()=>[...n[18]||(n[18]=[H(" Отмена ",-1)])]),_:1})])]),default:C(()=>[e("div",Xt,[e("p",Zt,[n[16]||(n[16]=H(" Выберите группу для перемещения: ",-1)),e("strong",es,a(v(k)?.student?.fullName),1)]),v(A)?(r(),i("div",ts,[...n[17]||(n[17]=[e("div",{class:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-solid border-primary border-r-transparent"},null,-1)])])):v(s).length===0?(r(),i("div",ss," Нет доступных групп для перемещения ")):(r(),i("div",os,[(r(!0),i(Y,null,se(v(s),m=>(r(),i("button",{key:m.id,type:"button",onClick:N=>le(m.id),class:"w-full p-3 text-left rounded-lg border border-gray-200 dark:border-gray-700 hover:border-primary hover:bg-primary/5 transition-colors"},[e("p",ns,a(m.code),1),e("p",as,a(m.courseName),1)],8,rs))),128))]))])]),_:1},8,["is-open"])])]),_:1},8,["is-open"]),z(J,{"is-open":v(L),title:"Удаление слушателя",message:"Вы уверены, что хотите удалить слушателя из группы?","item-name":v(_)?.student?.fullName,"confirm-text":"Удалить","cancel-text":"Отмена",variant:"danger",loading:v(X),onConfirm:ne,onCancel:ae},null,8,["is-open","item-name","loading"])],64)}}}),us=Object.assign(ds,{__name:"GroupsManageStudentsModal"}),cs={class:"space-y-6"},ps={class:"rounded-lg bg-gray-50 dark:bg-gray-800 p-4"},gs={class:"flex items-center gap-3"},vs={class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-bold"},ms={class:"font-semibold text-gray-900 dark:text-white"},fs={key:0,class:"rounded-lg bg-red-50 dark:bg-red-900/20 p-4"},hs={class:"flex items-start gap-3"},xs={class:"text-sm text-red-800 dark:text-red-200"},ys={class:"flex justify-end gap-3"},ks=fe({__name:"UploadReportModal",props:{isOpen:{type:Boolean},groupId:{},groupCode:{}},emits:["close","uploaded"],setup(x,{emit:d}){const $=x,b=d,{authFetch:y}=ye(),g=ke(),D=p(null),h=p([]),j=p(!1),S=p(""),T=k=>{h.value=k,S.value=""},P=async()=>{if(h.value.length===0){S.value="Выберите хотя бы один файл";return}j.value=!0,S.value="";try{const k=new FormData;for(const A of h.value)k.append("reportFiles",A);const s=await y(`/api/groups/${$.groupId}/reports`,{method:"POST",body:k});s.success?(g.success(s.message||"Документы успешно загружены"),b("uploaded"),b("close"),h.value=[],D.value?.clearFiles()):S.value=s.message||"Ошибка при загрузке документов"}catch(k){console.error("Ошибка загрузки документов:",k),S.value=k.data?.message||"Произошла ошибка при загрузке документов"}finally{j.value=!1}};return Se(()=>$.isOpen,k=>{k||(h.value=[],S.value="",D.value?.clearFiles())}),(k,s)=>{const A=ct,E=he,L=xe;return r(),Q(L,{"is-open":x.isOpen,title:"Загрузить документы",size:"lg",onClose:s[1]||(s[1]=_=>k.$emit("close"))},{footer:C(()=>[e("div",ys,[z(E,{variant:"outline",onClick:s[0]||(s[0]=_=>k.$emit("close")),disabled:j.value},{default:C(()=>[...s[4]||(s[4]=[H(" Отмена ",-1)])]),_:1},8,["disabled"]),z(E,{loading:j.value,disabled:h.value.length===0,onClick:P},{default:C(()=>[H(" Загрузить "+a(h.value.length>0?`(${h.value.length})`:""),1)]),_:1},8,["loading","disabled"])])]),default:C(()=>[e("div",cs,[e("div",ps,[e("div",gs,[e("div",vs,a(x.groupCode.substring(0,2).toUpperCase()),1),e("div",null,[s[2]||(s[2]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Группа",-1)),e("p",ms,a(x.groupCode),1)])])]),z(A,{ref_key:"uploaderRef",ref:D,loading:j.value,onFilesSelected:T},null,8,["loading"]),S.value?(r(),i("div",fs,[e("div",hs,[s[3]||(s[3]=e("svg",{class:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",xs,a(S.value),1)])])):w("",!0)])]),_:1},8,["is-open"])}}}),ws=Object.assign(ks,{__name:"GroupsUploadReportModal"});async function ge(x){const $=await(await fetch(x)).arrayBuffer();let b="";const y=new Uint8Array($),g=y.byteLength;for(let D=0;D<g;D++){const h=y[D];b+=String.fromCharCode(h??0)}return window.btoa(b)}function me(x){if(!x)return"";const d=new Date(x),$=String(d.getDate()).padStart(2,"0"),b=String(d.getMonth()+1).padStart(2,"0"),y=d.getFullYear();return`${$}.${b}.${y}`}async function bs(x){const d=new gt({orientation:"portrait",unit:"mm",format:"a4"});try{const M=await ge("https://raw.githubusercontent.com/JulietaUla/Montserrat/master/fonts/ttf/Montserrat-Regular.ttf"),R=await ge("https://raw.githubusercontent.com/JulietaUla/Montserrat/master/fonts/ttf/Montserrat-Bold.ttf"),F=await ge("https://raw.githubusercontent.com/JulietaUla/Montserrat/master/fonts/ttf/Montserrat-Italic.ttf");d.addFileToVFS("Montserrat-Regular.ttf",M),d.addFont("Montserrat-Regular.ttf","Montserrat","normal"),d.addFileToVFS("Montserrat-Bold.ttf",R),d.addFont("Montserrat-Bold.ttf","Montserrat","bold"),d.addFileToVFS("Montserrat-Italic.ttf",F),d.addFont("Montserrat-Italic.ttf","Montserrat","italic"),d.setFont("Montserrat","normal")}catch(M){console.error("Ошибка загрузки шрифта:",M)}let $=null;try{$=await ge("/logo.png")}catch(M){console.error("Ошибка загрузки логотипа:",M)}const b=d.internal.pageSize.getWidth(),y=d.internal.pageSize.getHeight(),g=15,D=[0,0,0];let h=g;if($)try{const M=d.getImageProperties($),R=50,F=M.height*R/M.width;d.addImage($,"PNG",g,h,R,F)}catch(M){console.error("Ошибка при отрисовке логотипа:",M),d.addImage($,"PNG",g,h,50,30)}d.setFontSize(14),d.setFont("Montserrat","bold"),d.setTextColor(...D),d.text("ЖУРНАЛ ПОСЕЩАЕМОСТИ",b/2,h+15,{align:"center"}),h+=35,d.setFontSize(9),d.setTextColor(...D);const j=40,S=b-g*2-j-5;let T=h;if(x.courseName){d.setFont("Montserrat","bold"),d.text("Учебная программа:",g,T),d.setFont("Montserrat","normal");const M=d.splitTextToSize(x.courseName,S);d.text(M,g+j,T),T+=Math.max(M.length*4,5)}d.setFont("Montserrat","bold"),d.text("Группа:",g,T),d.setFont("Montserrat","normal");const P=d.splitTextToSize(x.groupCode,S);d.text(P,g+j,T),T+=5,x.startDate&&x.endDate&&(d.setFont("Montserrat","bold"),d.text("Период:",g,T),d.setFont("Montserrat","normal"),d.text(`${me(x.startDate)} — ${me(x.endDate)}`,g+j,T),T+=5),h=T+5;const k=x.columnCount||20,s=6,A=[{content:"№"},{content:"ФИО слушателя"}];for(let M=1;M<=k;M++)A.push({content:""});const E=[];x.studentNames.forEach((M,R)=>{const F=[R+1,M];for(let q=0;q<k;q++)F.push("");E.push(F)}),vt(d,{head:[A],body:E,startY:h,theme:"grid",styles:{font:"Montserrat",fontSize:8,cellPadding:1,lineColor:[0,0,0],textColor:[0,0,0],lineWidth:.1,halign:"center",valign:"middle",minCellHeight:8},headStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontStyle:"bold",lineWidth:.1,lineColor:[0,0,0],valign:"middle",minCellHeight:10},columnStyles:{0:{cellWidth:10},1:{cellWidth:50,halign:"left",overflow:"linebreak"},...Object.fromEntries(Array.from({length:k},(M,R)=>[R+2,{cellWidth:s}]))}});let _=d.lastAutoTable.finalY+10;_+30>y-g&&(d.addPage(),_=g),d.setFontSize(9),d.setFont("Montserrat","normal"),d.setDrawColor(0,0,0),d.setLineWidth(.2),d.line(g,_,g+80,_),d.text("Инструктор:",g,_+5),d.text("___________________",g+25,_+5),_+=10,d.line(g,_,g+80,_),d.text("Подпись:",g,_+5);const G=me(new Date().toISOString());d.text(`Дата формирования: ${G}`,b-g,_+5,{align:"right"});const O=`Pustoy_Zhurnal_${x.groupCode}.pdf`;d.save(O)}const _s={class:"mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10"},Ms={key:0,class:"flex items-center justify-center min-h-[400px]"},Cs={key:1,class:"flex items-center justify-center min-h-[400px]"},$s={class:"text-center"},js={class:"mb-6"},Ds={class:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-4"},Ss={class:"text-gray-900 dark:text-white"},Ts={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},zs={class:"flex items-center gap-4"},Rs={class:"flex h-14 w-14 items-center justify-center rounded-full bg-primary/10 text-primary font-bold text-xl"},Bs={class:"flex items-center gap-2"},Hs={class:"text-2xl font-bold text-black dark:text-white"},Us={key:0,class:"px-2 py-1 rounded text-xs font-bold bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-300"},As={class:"text-gray-500 dark:text-gray-400"},Fs={class:"flex items-center gap-3 flex-wrap"},Is={key:0,class:"mb-6 rounded-xl bg-white dark:bg-boxdark shadow-md p-6"},Es={class:"flex items-center justify-between mb-4"},Vs={class:"flex items-center gap-3"},Ps={class:"text-sm text-gray-500 dark:text-gray-400"},Ls={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},Ns={class:"font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2"},Gs={class:"flex flex-wrap items-center gap-2 text-xs"},Os={class:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"},Ws={class:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"},Js={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},Ys={class:"space-y-6"},qs={class:"rounded-xl bg-white dark:bg-boxdark shadow-md p-6"},Ks={class:"grid grid-cols-2 gap-4"},Qs={class:"text-gray-900 dark:text-white font-medium"},Xs={class:"text-gray-900 dark:text-white font-medium"},Zs={class:"text-sm text-gray-500 dark:text-gray-400"},eo={key:0,class:"col-span-2"},to={class:"text-gray-900 dark:text-white"},so={key:0,class:"rounded-xl bg-white dark:bg-boxdark shadow-md p-6"},oo={class:"space-y-3"},ro={class:"text-gray-900 dark:text-white font-medium"},no={class:"flex gap-6"},ao={class:"text-gray-900 dark:text-white font-medium"},lo={class:"text-gray-900 dark:text-white font-medium"},io={class:"rounded-xl bg-white dark:bg-boxdark shadow-md p-6"},uo={class:"flex items-center justify-between mb-4"},co={key:0,class:"text-sm text-gray-500"},po={key:1,class:"text-sm text-gray-500 italic"},go={key:2,class:"space-y-3 max-h-[340px] overflow-y-auto pr-2"},vo={class:"flex items-center gap-3 overflow-hidden"},mo={class:"min-w-0"},fo={class:"truncate text-sm font-medium text-gray-900 dark:text-white"},ho={class:"text-xs text-gray-500"},xo={class:"flex items-center gap-1"},yo=["onClick"],ko=["onClick"],wo=["onClick"],bo={class:"mb-6 rounded-xl bg-white dark:bg-boxdark shadow-md overflow-hidden"},_o={class:"p-6 border-b border-gray-200 dark:border-gray-700"},Mo={class:"flex items-center justify-between"},Co={class:"flex items-center gap-3"},$o={class:"text-sm text-gray-500 dark:text-gray-400"},jo={class:"flex items-center gap-2"},Do={key:1,class:"relative inline-block"},So={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},To={key:1,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},zo={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-boxdark rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50"},Ro={key:0,class:"p-12 text-center text-gray-500 dark:text-gray-400"},Bo={class:"overflow-x-auto"},Ho={class:"w-full"},Uo={class:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},Ao={key:0,class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},Fo={class:"divide-y divide-gray-200 dark:divide-gray-700"},Io={class:"px-6 py-4"},Eo={class:"flex items-center gap-3"},Vo={class:"shrink-0 flex h-10 w-10 items-center justify-center rounded-full bg-success/10 text-success font-semibold"},Po={class:"font-medium text-gray-900 dark:text-white"},Lo={class:"px-6 py-4 text-sm whitespace-nowrap"},No=["title"],Go={class:"px-6 py-4 text-sm whitespace-nowrap"},Oo=["title"],Wo={class:"px-6 py-4 text-center"},Jo={class:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap"},Yo={key:0,class:"px-6 py-4 text-center"},qo={class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row items-center justify-between gap-4"},Ko={class:"flex items-center gap-2 text-sm text-gray-500"},Qo={class:"flex items-center gap-1"},Xo=["disabled"],Zo=["disabled"],er={class:"rounded-xl bg-white dark:bg-boxdark shadow-md overflow-hidden"},tr={class:"flex items-center gap-3 flex-1"},sr={class:"text-left flex-1"},or={class:"flex items-center gap-3 mb-1"},rr={class:"text-sm text-gray-500"},nr={key:0,class:"space-y-2"},ar={class:"flex items-center gap-3"},lr={class:"flex items-center gap-2 text-sm"},ir={class:"font-medium text-gray-900 dark:text-white"},dr={class:"w-full max-w-md bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden"},ur={key:0,class:"border-t border-gray-200 dark:border-gray-700"},cr={key:0,class:"p-6 text-center"},pr={key:1,class:"p-12 text-center text-gray-500 dark:text-gray-400"},gr={key:2,class:"divide-y divide-gray-200 dark:divide-gray-700"},vr={class:"flex items-start justify-between"},mr={class:"flex-1"},fr={class:"flex items-center gap-2 mb-2"},hr={class:"font-medium text-gray-900 dark:text-white text-sm"},xr={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400"},yr={class:"flex items-center gap-1.5"},kr={class:"flex items-center gap-1.5"},wr={key:0,class:"flex items-center gap-1.5"},br={key:1,class:"flex items-center gap-1.5"},_r={key:2,class:"flex items-center gap-1.5"},Mr={class:"px-2 py-0.5 rounded-full bg-primary/10 text-primary font-medium"},Cr={class:"flex items-center justify-between"},$r={class:"text-lg font-semibold text-gray-900 dark:text-white"},jr={key:0,class:"flex items-center justify-center py-12"},Dr={key:1,class:"text-center py-12"},Sr={class:"text-danger"},Tr={key:2,class:"w-full",style:{height:"70vh"}},zr=["src"],Or=fe({__name:"index",setup(x){const d=lt(),$=dt(),{authFetch:b}=ye(),y=ke();rt();const{canEditGroups:g,canManageGroupStudents:D,canIssueCertificates:h,canArchiveGroups:j,isAdmin:S}=mt(),{settings:T,loadSettings:P}=ft(),k=p(!0),s=p(null),A=p(!1),E=p(!1),L=p(!1),_=p(!1),X=p(!1),G=p(!1),O=p(!1),M=p(!1),R=p([]),F=p([]),q=p(!1),de=p(new Map),ne=p([]),ae=p(!1),Z=p(!1),oe=p(!1),le=p(!1),re=p(null),c=p(""),n=p(!1),I=p(""),W=p(!1),J=p(null),m=p(!1),N=p(1),ie=p(10),ze=o=>o?o.split(" ").map(t=>t[0]).slice(0,2).join("").toUpperCase():"??",ue=o=>o?new Date(o).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"",we=o=>new Date(o).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),Re=o=>o<1024?o+" B":o<1024*1024?(o/1024).toFixed(1)+" KB":(o/(1024*1024)).toFixed(1)+" MB",be=o=>{if(o.academicHours)return o.academicHours;const t=parseInt(T.value.academic_hour_minutes||"40",10);if(o.durationMinutes)return Math.ceil(o.durationMinutes/t);if(o.startTime&&o.endTime){const u=new Date(o.startTime),B=(new Date(o.endTime).getTime()-u.getTime())/(1e3*60);return Math.ceil(B/t)}return 0},_e=o=>{const t=de.value.get(o);return!t||t.total===0?0:t.attended/t.total*100},Be=o=>o>=75?"bg-success/10 text-success":o>=50?"bg-warning/10 text-warning":"bg-danger/10 text-danger",He=async()=>{if(!s.value?.id||!s.value?.students?.length)return;const o=s.value.id,t=new Map;for(const u of F.value)try{const f=await b(`/api/attendance/journal?groupId=${o}&disciplineId=${u.id}`);if(f.success&&f.rows)for(const B of f.rows){const U=t.get(B.student.id)||{attended:0,total:0};U.attended+=B.totalHoursAttended||0,U.total+=B.totalMaxHours||0,t.set(B.student.id,U)}}catch(f){console.error("Error loading attendance for discipline:",u.id,f)}de.value=t},Ue=V(()=>{if(!s.value)return"";if(s.value.isArchived)return"bg-gray-100 dark:bg-gray-700 text-gray-500";const o=new Date,t=new Date(s.value.endDate),u=new Date(s.value.startDate);return s.value.isActive?t<o?"bg-warning/10 text-warning":u>o?"bg-info/10 text-info":"bg-success/10 text-success":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}),Ae=V(()=>{if(!s.value)return"";if(s.value.isArchived)return"Архив";const o=new Date,t=new Date(s.value.endDate),u=new Date(s.value.startDate);return s.value.isActive?t<o?"Завершена":u>o?"Ожидает начала":"В процессе":"Неактивна"}),Fe=V(()=>{if(!s.value)return"";const o=new Date,t=new Date(s.value.startDate),u=new Date(s.value.endDate),f=Math.ceil((u.getTime()-t.getTime())/(1e3*60*60*24));return t>o?`Начнётся через ${Math.ceil((t.getTime()-o.getTime())/864e5)} дн.`:u<o?`Завершено (${f} дн.)`:`${Math.ceil((o.getTime()-t.getTime())/(1e3*60*60*24))} из ${f} дн.`}),Ie=V(()=>s.value?.students&&Math.ceil(s.value.students.length/ie.value)||1),Ee=V(()=>{if(!s.value?.students)return[];const o=(N.value-1)*ie.value;return s.value.students.slice(o,o+ie.value)}),Ve=V(()=>{if(!s.value?.students)return"";const o=s.value.students.length,t=(N.value-1)*ie.value+1,u=Math.min(N.value*ie.value,o);return`${t}–${u} из ${o}`}),ce=V(()=>s.value?.course?.totalHours||0),Me=V(()=>{const o=R.value.reduce((t,u)=>{if(u.academicHours)return t+u.academicHours;const f=parseInt(T.value.academic_hour_minutes||"40",10);if(u.durationMinutes)return t+Math.ceil(u.durationMinutes/f);if(u.startTime&&u.endTime){const B=new Date(u.startTime),ee=(new Date(u.endTime).getTime()-B.getTime())/(1e3*60);return t+Math.ceil(ee/f)}return t},0);return console.log("[totalScheduledHours] Всего запланировано часов:",o),o}),K=V(()=>ce.value===0?0:Math.min(Math.round(Me.value/ce.value*100),100)),Pe=V(()=>{const o=K.value;return o>=100?"bg-success":o>=75?"bg-info":o>=50?"bg-warning":"bg-danger"}),Le=async o=>{M.value=!0;try{const t=await b(`/api/schedule?groupId=${o}&limit=100`);t.success&&t.events&&(R.value=t.events)}catch(t){console.error("Error loading schedule:",t)}finally{M.value=!1}},pe=async()=>{k.value=!0;try{const o=d.params.id,t=await b(`/api/groups/${o}`);if(t.success&&t.group){s.value=t.group,ve(o),Le(o);try{const u=await b(`/api/groups/${o}/disciplines`);u.success&&(F.value=u.disciplines||[],He())}catch(u){console.error("Error loading disciplines",u)}}else s.value=null}catch(o){console.error("Error loading group:",o),s.value=null}finally{k.value=!1}},ve=async o=>{ae.value=!0,console.log("[loadReports] Загрузка документов для группы:",o);try{const t=await b(`/api/groups/${o}/reports`);console.log("[loadReports] Ответ от API:",t),t.success?(ne.value=t.files,console.log("[loadReports] Загружено документов:",t.files.length),t.files.length>0&&(console.log("[loadReports] Структура первого файла:",t.files[0]),console.log("[loadReports] UUID первого файла:",t.files[0].uuid))):console.warn("[loadReports] API вернул success: false")}catch(t){console.error("[loadReports] Ошибка загрузки документов:",t)}finally{ae.value=!1}},Ne=()=>{oe.value=!oe.value},Ce=async(o="pdf")=>{if(!(Z.value||!s.value)){oe.value=!1;try{Z.value=!0;const t=s.value.students?.map(f=>f.student?.fullName||"").filter(Boolean)||[];if(t.length===0){y.error("В группе нет студентов");return}const u={groupCode:s.value.code,courseName:s.value.course?.name,startDate:s.value.startDate,endDate:s.value.endDate,studentNames:t,columnCount:20};if(o==="pdf")await bs(u);else{const{generateEmptyJournalDocx:f}=await it(async()=>{const{generateEmptyJournalDocx:B}=await import("./Bldf0XAT.js");return{generateEmptyJournalDocx:B}},[],import.meta.url);await f(u)}try{await b("/api/reports/log-download",{method:"POST",body:{reportType:"empty_journal",format:o,groupCode:s.value.code,groupId:s.value.id}})}catch(f){console.error("Failed to log download:",f)}y.success(`Пустой журнал успешно сформирован (${o.toUpperCase()})`)}catch(t){console.error("Error generating empty journal:",t),y.error(t.message||"Ошибка при формировании пустого журнала")}finally{Z.value=!1}}},Ge=()=>{_.value=!0},Oe=async()=>{if(s.value){O.value=!0;try{const o=!s.value.isArchived;await b(`/api/groups/${s.value.id}/archive`,{method:"PUT",body:{isArchived:o}}),y.success(o?"Группа архивирована":"Группа восстановлена"),_.value=!1,pe()}catch(o){y.error("Ошибка изменения статуса архивации"),console.error(o)}finally{O.value=!1}}},We=async o=>{try{console.log("[downloadReport] Скачивание файла:",o.name),console.log("[downloadReport] URL:",o.url);const t=document.cookie.split("; ").find(ee=>ee.startsWith("auth_token="))?.split("=")[1];if(!t){console.error("[downloadReport] Токен не найден"),y.error("Ошибка авторизации");return}const u=await fetch(o.url,{headers:{Authorization:`Bearer ${t}`}});if(!u.ok)throw console.error("[downloadReport] Ошибка ответа:",u.status,u.statusText),new Error(`HTTP error! status: ${u.status}`);const f=await u.blob();console.log("[downloadReport] Получен blob, размер:",f.size);const B=window.URL.createObjectURL(f),U=document.createElement("a");U.href=B,U.download=o.name,document.body.appendChild(U),U.click(),window.URL.revokeObjectURL(B),document.body.removeChild(U),console.log("[downloadReport] Файл успешно скачан")}catch(t){console.error("[downloadReport] Ошибка скачивания:",t),y.error("Ошибка при скачивании файла")}},Je=async o=>{try{console.log("[previewReport] Открытие просмотра:",o.name),re.value=o,le.value=!0,n.value=!0,I.value="",c.value="";const t=document.cookie.split("; ").find(U=>U.startsWith("auth_token="))?.split("=")[1];if(!t){console.error("[previewReport] Токен не найден"),I.value="Ошибка авторизации",n.value=!1;return}const u=await fetch(o.url,{headers:{Authorization:`Bearer ${t}`}});if(!u.ok)throw console.error("[previewReport] Ошибка ответа:",u.status,u.statusText),new Error(`HTTP error! status: ${u.status}`);const f=await u.blob();console.log("[previewReport] Получен blob, размер:",f.size);const B=window.URL.createObjectURL(f);c.value=B,console.log("[previewReport] Документ готов к просмотру")}catch(t){console.error("[previewReport] Ошибка загрузки:",t),I.value="Ошибка при загрузке документа"}finally{n.value=!1}},$e=()=>{le.value=!1,c.value&&window.URL.revokeObjectURL(c.value),c.value="",re.value=null,I.value=""},Ye=o=>{J.value=o,W.value=!0},qe=async()=>{if(!(!J.value||!s.value)){m.value=!0;try{console.log("[deleteReport] Полный объект документа:",J.value),console.log("[deleteReport] UUID документа:",J.value.uuid),console.log("[deleteReport] ID группы:",s.value.id),console.log("[deleteReport] URL запроса:",`/api/groups/${s.value.id}/reports/${J.value.uuid}`),await b(`/api/groups/${s.value.id}/reports/${J.value.uuid}`,{method:"DELETE"}),y.success("Документ успешно удален"),W.value=!1,J.value=null,ve(s.value.id)}catch(o){console.error("[deleteReport] Ошибка удаления:",o),y.error("Ошибка при удалении документа")}finally{m.value=!1}}},Ke=async()=>{if(s.value){G.value=!0;try{await b(`/api/groups/${s.value.id}`,{method:"DELETE"}),y.success("Группа удалена"),$.push("/groups")}catch{y.error("Ошибка удаления группы")}finally{G.value=!1}}},Qe=o=>{s.value=o,pe()},Xe=()=>{s.value?.id&&ve(s.value.id)};return nt(()=>{P(),pe()}),(o,t)=>{const u=he,f=ut,B=pt,U=us,ee=Te,Ze=ws,et=xe;return r(),i("div",_s,[k.value?(r(),i("div",Ms,[...t[16]||(t[16]=[e("div",{class:"text-center"},[e("div",{class:"inline-block h-10 w-10 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"}),e("p",{class:"mt-4 text-gray-600 dark:text-gray-400"}," Загрузка информации о группе... ")],-1)])])):s.value?(r(),i(Y,{key:2},[e("div",js,[e("div",Ds,[z(f,{to:"/groups",class:"hover:text-primary transition-colors"},{default:C(()=>[...t[21]||(t[21]=[H("Учебные группы",-1)])]),_:1}),t[22]||(t[22]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),e("span",Ss,a(s.value.code),1)]),e("div",Ts,[e("div",zs,[e("div",Rs,a(s.value.code.substring(0,2).toUpperCase()),1),e("div",null,[e("div",Bs,[e("h1",Hs,a(s.value.code),1),s.value.isArchived?(r(),i("span",Us," АРХИВ ")):w("",!0)]),e("p",As,a(s.value.course?.name),1)])]),e("div",Fs,[v(h)&&!s.value.isArchived?(r(),Q(f,{key:0,to:`/groups/${s.value.id}/certificates`},{default:C(()=>[z(u,{variant:"primary"},{default:C(()=>[...t[23]||(t[23]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),H(" Выдача сертификатов ",-1)])]),_:1})]),_:1},8,["to"])):w("",!0),v(g)&&!s.value.isArchived?(r(),Q(u,{key:1,variant:"outline",onClick:t[1]||(t[1]=l=>A.value=!0)},{default:C(()=>[...t[24]||(t[24]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),H(" Редактировать ",-1)])]),_:1})):w("",!0),v(j)?(r(),Q(u,{key:2,variant:"outline",onClick:Ge},{default:C(()=>[t[25]||(t[25]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)),H(" "+a(s.value.isArchived?"Восстановить":"В архив"),1)]),_:1})):w("",!0),v(S)?(r(),Q(u,{key:3,variant:"danger",onClick:t[2]||(t[2]=l=>L.value=!0)},{default:C(()=>[...t[26]||(t[26]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),H(" Удалить ",-1)])]),_:1})):w("",!0)])])]),F.value.length>0?(r(),i("div",Is,[e("div",Es,[e("div",Vs,[t[28]||(t[28]=e("div",{class:"h-10 w-10 rounded-lg bg-info/10 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-info",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})])],-1)),e("div",null,[t[27]||(t[27]=e("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Журналы дисциплин ",-1)),e("p",Ps,a(F.value.length)+" дисциплин в программе ",1)])])]),e("div",Ls,[(r(!0),i(Y,null,se(F.value,l=>(r(),Q(f,{key:l.id,to:`/groups/journal/${s.value?.id}_${l.id}`,class:"group p-4 rounded-xl bg-linear-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-800/50 border border-gray-200 dark:border-gray-700 hover:border-primary dark:hover:border-primary hover:shadow-lg transition-all duration-200"},{default:C(()=>[t[31]||(t[31]=e("div",{class:"flex items-start justify-between mb-3"},[e("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-white transition-colors"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])]),e("svg",{class:"w-5 h-5 text-gray-400 group-hover:text-primary transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1)),e("h4",Ns,a(l.name),1),e("div",Gs,[e("span",Os,[t[29]||(t[29]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-current"},null,-1)),H(" "+a(l.theoryHours)+" т ",1)]),e("span",Ws,[t[30]||(t[30]=e("span",{class:"w-1.5 h-1.5 rounded-full bg-current"},null,-1)),H(" "+a(l.practiceHours)+" п ",1)])])]),_:2},1032,["to"]))),128))])])):w("",!0),e("div",Js,[e("div",Ys,[e("div",qs,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-black dark:text-white mb-4"}," Информация о группе ",-1)),e("div",Ks,[e("div",null,[t[32]||(t[32]=e("label",{class:"text-sm text-gray-500 dark:text-gray-400"},"Код группы",-1)),e("p",Qs,a(s.value.code),1)]),e("div",null,[t[33]||(t[33]=e("label",{class:"text-sm text-gray-500 dark:text-gray-400"},"Статус",-1)),e("p",null,[e("span",{class:te(["inline-flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium",Ue.value])},a(Ae.value),3)])]),e("div",null,[t[34]||(t[34]=e("label",{class:"text-sm text-gray-500 dark:text-gray-400"},"Даты обучения",-1)),e("p",Xs,a(ue(s.value.startDate))+" — "+a(ue(s.value.endDate)),1),e("p",Zs,a(Fe.value),1)]),s.value.description?(r(),i("div",eo,[t[35]||(t[35]=e("label",{class:"text-sm text-gray-500 dark:text-gray-400"},"Описание",-1)),e("p",to,a(s.value.description),1)])):w("",!0)])]),s.value.course?(r(),i("div",so,[t[41]||(t[41]=e("h3",{class:"text-lg font-semibold text-black dark:text-white mb-4"}," Учебная программа ",-1)),e("div",oo,[e("div",null,[t[37]||(t[37]=e("label",{class:"text-sm text-gray-500 dark:text-gray-400"},"Название",-1)),e("p",ro,a(s.value.course.name),1)]),e("div",no,[e("div",null,[t[38]||(t[38]=e("label",{class:"text-sm text-gray-500 dark:text-gray-400"},"Код",-1)),e("p",ao,a(s.value.course.code),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"text-sm text-gray-500 dark:text-gray-400"},"Всего часов",-1)),e("p",lo,a(s.value.course.totalHours)+" а-ч ",1)])]),z(f,{to:`/programs/${s.value.courseId}`,class:"inline-flex items-center gap-1 text-primary hover:underline text-sm"},{default:C(()=>[...t[40]||(t[40]=[H(" Перейти к программе ",-1),e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])]),_:1},8,["to"])])])):w("",!0)]),e("div",io,[e("div",uo,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Документы группы ",-1)),v(g)&&!s.value.isArchived?(r(),Q(u,{key:0,variant:"outline",size:"sm",onClick:t[3]||(t[3]=l=>X.value=!0)},{default:C(()=>[...t[42]||(t[42]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),H(" Загрузить документ ",-1)])]),_:1})):w("",!0)]),ae.value?(r(),i("div",co," Загрузка документов... ")):ne.value.length===0?(r(),i("div",po," Документов не найдено ")):(r(),i("div",go,[(r(!0),i(Y,null,se(ne.value,l=>(r(),i("div",{key:l.id,class:"flex items-center justify-between p-3 rounded border border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},[e("div",vo,[t[44]||(t[44]=e("div",{class:"flex h-8 w-8 shrink-0 items-center justify-center rounded bg-danger/10 text-danger"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",mo,[e("p",fo,a(l.name),1),e("p",ho,a(new Date(l.uploadedAt).toLocaleDateString())+" • "+a(Re(l.size)),1)])]),e("div",xo,[e("button",{onClick:je=>Je(l),class:"text-info hover:text-info-dark p-1.5 rounded-full hover:bg-info/10 transition-colors",title:"Просмотр"},[...t[45]||(t[45]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,yo),e("button",{onClick:je=>We(l),class:"text-primary hover:text-primary-dark p-1.5 rounded-full hover:bg-primary/10 transition-colors",title:"Скачать"},[...t[46]||(t[46]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)])],8,ko),v(g)||v(S)?(r(),i("button",{key:0,onClick:je=>Ye(l),class:"text-danger hover:text-danger-dark p-1.5 rounded-full hover:bg-danger/10 transition-colors",title:"Удалить"},[...t[47]||(t[47]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,wo)):w("",!0)])]))),128))]))])]),e("div",bo,[e("div",_o,[e("div",Mo,[e("div",Co,[t[49]||(t[49]=e("div",{class:"h-10 w-10 rounded-lg bg-success/10 flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",null,[t[48]||(t[48]=e("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Слушатели ",-1)),e("p",$o,a(s.value.students?.length||0)+" человек ",1)])]),e("div",jo,[v(D)&&!s.value.isArchived?(r(),Q(u,{key:0,onClick:t[4]||(t[4]=l=>E.value=!0)},{default:C(()=>[...t[50]||(t[50]=[H(" Управление слушателями ",-1)])]),_:1})):w("",!0),s.value.students&&s.value.students.length>0?(r(),i("div",Do,[z(u,{variant:"outline",onClick:Ne,disabled:Z.value,class:"flex items-center gap-2"},{default:C(()=>[Z.value?(r(),i("svg",To,[...t[52]||(t[52]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(r(),i("svg",So,[...t[51]||(t[51]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])),e("span",null,a(Z.value?"Генерация...":"Пустой журнал"),1),t[53]||(t[53]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),_:1},8,["disabled"]),oe.value?(r(),i("div",zo,[e("button",{onClick:t[5]||(t[5]=l=>Ce("pdf")),class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-2 rounded-t-lg"},[...t[54]||(t[54]=[De('<svg class="w-4 h-4 text-danger" fill="currentColor" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"></path><path d="M14 2v6h6"></path><path d="M10 13h4"></path><path d="M10 17h4"></path><path d="M10 9h1"></path></svg><span>Скачать PDF</span>',2)])]),e("button",{onClick:t[6]||(t[6]=l=>Ce("docx")),class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-2 rounded-b-lg"},[...t[55]||(t[55]=[De('<svg class="w-4 h-4 text-primary" fill="currentColor" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z"></path><path d="M14 2v6h6"></path><path d="M10 12h4"></path><path d="M10 16h4"></path></svg><span>Скачать Word</span>',2)])])])):w("",!0)])):w("",!0)])])]),!s.value.students||s.value.students.length===0?(r(),i("div",Ro,[...t[56]||(t[56]=[e("p",null,"В группе пока нет слушателей",-1)])])):(r(),i(Y,{key:1},[e("div",Bo,[e("table",Ho,[e("thead",null,[e("tr",Uo,[t[57]||(t[57]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Слушатель ",-1)),t[58]||(t[58]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Организация ",-1)),t[59]||(t[59]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Должность ",-1)),t[60]||(t[60]=e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"}," Посещаемость ",-1)),t[61]||(t[61]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"}," Дата зачисления ",-1)),v(g)||v(S)?(r(),i("th",Ao," Действия ")):w("",!0)])]),e("tbody",Fo,[(r(!0),i(Y,null,se(Ee.value,l=>(r(),i("tr",{key:l.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("td",Io,[e("div",Eo,[e("div",Vo,a(ze(l.student?.fullName)),1),e("span",Po,a(l.student?.fullName),1)])]),e("td",Lo,[e("span",{class:"truncate max-w-[200px] inline-block",title:l.student?.organization},a(l.student?.organization||"—"),9,No)]),e("td",Go,[e("span",{class:"truncate max-w-[150px] inline-block",title:l.student?.position},a(l.student?.position||"—"),9,Oo)]),e("td",Wo,[e("span",{class:te(["inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium",Be(_e(l.studentId))])},a(_e(l.studentId).toFixed(0))+"% ",3)]),e("td",Jo,a(ue(l.enrolledAt)),1),v(g)||v(S)?(r(),i("td",Yo,[z(f,{to:`/students/${l.studentId}`,class:"inline-flex items-center justify-center p-2 text-primary hover:bg-primary/10 rounded-lg transition-colors",title:"Просмотр студента"},{default:C(()=>[...t[62]||(t[62]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:1},8,["to"])])):w("",!0)]))),128))])])]),e("div",qo,[e("div",Ko,[e("span",null,a(Ve.value),1)]),e("div",Qo,[e("button",{disabled:N.value===1,onClick:t[7]||(t[7]=l=>N.value--),class:"p-2 border rounded hover:bg-gray-100 disabled:opacity-50"}," Назад ",8,Xo),e("button",{disabled:N.value===Ie.value,onClick:t[8]||(t[8]=l=>N.value++),class:"p-2 border rounded hover:bg-gray-100 disabled:opacity-50"}," Вперед ",8,Zo)])])],64))]),e("div",er,[e("button",{class:"w-full p-6 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",onClick:t[9]||(t[9]=l=>q.value=!q.value)},[e("div",tr,[t[64]||(t[64]=e("div",{class:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",sr,[e("div",or,[t[63]||(t[63]=e("h3",{class:"text-lg font-semibold text-black dark:text-white"}," Расписание занятий ",-1)),e("span",rr,a(R.value.length)+" "+a(R.value.length===1?"занятие":R.value.length<5?"занятия":"занятий"),1)]),ce.value>0?(r(),i("div",nr,[e("div",ar,[e("div",lr,[e("span",ir,a(Me.value)+" / "+a(ce.value)+" а-ч ",1),e("span",{class:te(["px-2 py-0.5 rounded-full text-xs font-medium",{"bg-success/10 text-success":K.value>=100,"bg-info/10 text-info":K.value>=75&&K.value<100,"bg-warning/10 text-warning":K.value>=50&&K.value<75,"bg-danger/10 text-danger":K.value<50}])},a(K.value)+"% ",3)])]),e("div",dr,[e("div",{class:te(["h-full transition-all duration-500 rounded-full",Pe.value]),style:at({width:`${K.value}%`})},null,6)])])):w("",!0)])]),(r(),i("svg",{class:te(["w-5 h-5 text-gray-400 transition-transform duration-200",{"rotate-180":q.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[65]||(t[65]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),q.value?(r(),i("div",ur,[M.value?(r(),i("div",cr,[...t[66]||(t[66]=[e("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"},null,-1),e("p",{class:"mt-2 text-sm text-gray-500"},"Загрузка расписания...",-1)])])):R.value.length===0?(r(),i("div",pr,[...t[67]||(t[67]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",null,"Занятия не запланированы",-1),e("p",{class:"text-sm mt-2"}," Добавьте занятия в расписание через календарь ",-1)])])):(r(),i("div",gr,[(r(!0),i(Y,null,se(R.value,l=>(r(),i("div",{key:l.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("div",vr,[e("div",mr,[e("div",fr,[e("span",{class:te(["inline-block w-2 h-2 rounded-full",{"bg-blue-500":l.eventType==="theory","bg-green-500":l.eventType==="practice","bg-orange-500":l.eventType==="assessment","bg-gray-500":l.eventType==="other"}])},null,2),e("h4",hr,a(l.title),1)]),e("div",xr,[e("div",yr,[t[68]||(t[68]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,a(ue(l.startTime)),1)]),e("div",kr,[t[69]||(t[69]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,a(we(l.startTime))+" - "+a(we(l.endTime)),1)]),l.instructor?(r(),i("div",wr,[t[70]||(t[70]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("span",null,a(l.instructor.fullName||l.instructor.name||"Не указан"),1)])):w("",!0),l.classroom?(r(),i("div",br,[t[71]||(t[71]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),e("span",null,a(l.classroom.name||l.classroom),1)])):w("",!0),be(l)>0?(r(),i("div",_r,[t[72]||(t[72]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Mr,a(be(l))+" а-ч ",1)])):w("",!0)])])])]))),128))]))])):w("",!0)])],64)):(r(),i("div",Cs,[e("div",$s,[t[18]||(t[18]=e("svg",{class:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[19]||(t[19]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900 dark:text-white"}," Группа не найдена ",-1)),t[20]||(t[20]=e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"}," Возможно, группа была удалена или перемещена ",-1)),z(u,{class:"mt-6",onClick:t[0]||(t[0]=l=>o.$router.push("/groups"))},{default:C(()=>[...t[17]||(t[17]=[H(" Вернуться к списку групп ",-1)])]),_:1})])])),z(B,{"is-open":A.value,group:s.value,onClose:t[10]||(t[10]=l=>A.value=!1),onUpdated:Qe},null,8,["is-open","group"]),z(U,{"is-open":E.value,group:s.value,onClose:t[11]||(t[11]=l=>E.value=!1),onUpdated:pe},null,8,["is-open","group"]),z(ee,{"is-open":_.value,title:s.value?.isArchived?"Восстановление группы":"Архивация группы",message:s.value?.isArchived?"Вы уверены, что хотите восстановить эту группу?":"Вы уверены, что хотите архивировать эту группу? Она будет скрыта из списка активных групп.","item-name":s.value?.code,loading:O.value,onConfirm:Oe,onCancel:t[12]||(t[12]=l=>_.value=!1)},null,8,["is-open","title","message","item-name","loading"]),z(ee,{"is-open":L.value,title:"Удаление группы",message:"Вы уверены, что хотите удалить эту группу?","item-name":s.value?.code,warning:"Все слушатели и отчеты будут удалены. Это действие нельзя отменить.",loading:G.value,onConfirm:Ke,onCancel:t[13]||(t[13]=l=>L.value=!1)},null,8,["is-open","item-name","loading"]),s.value?(r(),Q(Ze,{key:3,"is-open":X.value,"group-id":s.value.id,"group-code":s.value.code,onClose:t[14]||(t[14]=l=>X.value=!1),onUploaded:Xe},null,8,["is-open","group-id","group-code"])):w("",!0),z(et,{"is-open":le.value,onClose:$e,size:"xl"},{header:C(()=>[e("div",Cr,[e("h3",$r,a(re.value?.name),1),e("button",{onClick:$e,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...t[73]||(t[73]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),default:C(()=>[n.value?(r(),i("div",jr,[...t[74]||(t[74]=[e("div",{class:"text-center"},[e("div",{class:"inline-block h-12 w-12 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"}),e("p",{class:"mt-4 text-sm text-gray-500"},"Загрузка документа...")],-1)])])):I.value?(r(),i("div",Dr,[t[75]||(t[75]=e("svg",{class:"mx-auto h-12 w-12 text-danger mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Sr,a(I.value),1)])):c.value?(r(),i("div",Tr,[e("iframe",{src:c.value,class:"w-full h-full border-0 rounded",title:"PDF Preview"},null,8,zr)])):w("",!0)]),_:1},8,["is-open"]),z(ee,{"is-open":W.value,title:"Удаление документа",message:"Вы уверены, что хотите удалить этот документ?","item-name":J.value?.name,warning:"Это действие нельзя отменить.",loading:m.value,onConfirm:qe,onCancel:t[15]||(t[15]=l=>W.value=!1)},null,8,["is-open","item-name","loading"])])}}});export{Or as default};
