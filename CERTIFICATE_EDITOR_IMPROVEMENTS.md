# ✅ Чеклист улучшений редактора шаблонов сертификатов

## Выполненные задачи

### ✅ 1. Множественный выбор элементов

- [x] Добавлено состояние `selectedElementIds: Set<string>` в composable
- [x] Реализован выбор с Ctrl/Cmd для добавления/удаления элементов из выбора
- [x] Добавлена рамка выделения (selection box) при зажатии мыши на холсте
- [x] Реализовано групповое перемещение выбранных элементов
- [x] Добавлен визуальный индикатор множественного выбора (номера элементов)
- [x] Обновлена панель свойств для работы с множественным выбором
- [x] Сохранена обратная совместимость через computed свойство `selectedElementId`

**Как использовать:**

- **Одиночный выбор**: клик на элемент
- **Множественный выбор**: Ctrl/Cmd + клик на элементы
- **Выделение рамкой**: зажать мышь на пустом месте холста и выделить область
- **Групповое перемещение**: выбрать несколько элементов и перетащить любой из них

### ✅ 2. Направляющие линии (Smart Guides)

- [x] Вертикальные направляющие при выравнивании с другими элементами
- [x] Горизонтальные направляющие при выравнивании с другими элементами
- [x] Отображение расстояний между элементами
- [x] Отображение размеров элемента при изменении размера
- [x] Привязка (snapping) к направляющим с порогом 8px
- [x] Направляющие относительно границ холста
- [x] Направляющие относительно центров элементов

**Как работает:**

- При перемещении элемента автоматически появляются синие линии при выравнивании
- Элемент "прилипает" к направляющим для точного позиционирования
- Зеленые метки показывают расстояния между элементами
- При изменении размера отображаются текущие ширина и высота

### ✅ 3. Переменная "ФИ" (Фамилия Имя)

- [x] Добавлена переменная `student.firstLastName` в список доступных переменных
- [x] Формат отображения: "IVANOV IVAN" (заглавными буквами)
- [x] Добавлен тип в `VariableSource` union type
- [x] Обновлен список `AVAILABLE_VARIABLES` в composable

**Где найти:**
В панели инструментов → Переменные → "ФИ (IVANOV IVAN)"

## Технические детали реализации

### Изменённые файлы:

1. **`app/composables/useCertificateEditor.ts`**
   - Заменён `selectedElementId` на `selectedElementIds: Set<string>`
   - Добавлены методы: `selectMultipleElements()`, `addToSelection()`, `clearSelection()`
   - Обновлён метод `selectElement()` для поддержки multiSelect параметра
   - Добавлена переменная `student.firstLastName`

2. **`app/types/certificate.ts`**
   - Добавлен тип `student.firstLastName` в `VariableSource`
   - Добавлены типы для организаций на разных языках

3. **`app/components/certificates/editor/EditorCanvas.vue`**
   - Полностью переработана логика выбора и перемещения элементов
   - Добавлена система направляющих линий (guides)
   - Реализована рамка выделения (selection box)
   - Добавлена привязка к направляющим (snapping)
   - Групповое перемещение выбранных элементов
   - Визуальные индикаторы множественного выбора

4. **`app/components/certificates/editor/CertificateEditor.vue`**
   - Обновлены пропсы для EditorCanvas
   - Добавлены обработчики новых событий

## Дополнительные улучшения

- ✅ Сохранена полная обратная совместимость с существующим кодом
- ✅ Все направляющие линии отображаются только во время перемещения/изменения размера
- ✅ Производительность оптимизирована через использование `Set` для выбранных элементов
- ✅ Визуальная обратная связь для всех действий пользователя

## Следующие возможные улучшения (опционально)

- [ ] Групповое изменение размера выбранных элементов
- [ ] Групповое изменение свойств (цвет, шрифт и т.д.)
- [ ] Сохранение групп элементов как компонентов
- [ ] Выравнивание группы элементов относительно друг друга
- [ ] Распределение элементов с равными интервалами
- [ ] Горячие клавиши для быстрого выравнивания (Ctrl+L, Ctrl+R и т.д.)
